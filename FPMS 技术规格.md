***

# æ–‡æ¡£è§£é‡Šè¯´æ˜

ä½ æŠ“çš„è¿™ä¸ªå·®å¼‚ç‚¹éå¸¸å…³é”® ğŸ‘ï¼Œæˆ‘è¿™è¾¹æŠŠ PDF å’Œ FRMS.md åˆå¯¹äº†ä¸€éï¼Œç¡®å®æœ‰å‡ å¤„â€œå‘½å / æ¨¡å—åˆ’åˆ†â€çš„ä¸ä¸€è‡´ï¼Œé€»è¾‘ä¸Šæ˜¯èƒ½è§£é‡Šé€šçš„ï¼Œä½†æ–‡æ¡£å±‚é¢ç°åœ¨æ˜¯æœ‰ç‚¹â€œå‰åä¸¤å¥—å«æ³•æ··åœ¨ä¸€èµ·â€ã€‚æˆ‘åˆ†å‡ å—è¯´æ¸…æ¥šï¼š

***

## 1. å…ˆæŠŠäº‹å®æ‘†å¹³ï¼šPDF & FRMS v1.0.0 å„è‡ªæ˜¯ä»€ä¹ˆç»“æ„

### 1.1 ç”¨æˆ·æ‰‹å†Œ TXX.pdf çš„æ¨¡å—ç»“æ„ï¼ˆç²—ç•¥ï¼‰

ä» PDF æŠ½å‡ºæ¥çš„ç« èŠ‚å¤´å¯ä»¥çœ‹åˆ°ï¼ˆåªåˆ—è·Ÿä¸šåŠ¡æœ‰å…³çš„éƒ¨åˆ†ï¼‰ï¼š

*   ç¬¬ä¸‰ç« ï¼š**æ¡ˆå·ç»´æŠ¤**
*   ç¬¬å››ç« ï¼š**ä¸­é—´æ–‡ä»¶ç®¡ç†**
*   ç¬¬äº”ç« ï¼š**æ—¶é™ç®¡ç†**ï¼ˆç« èŠ‚å†…å®¹é‡Œå¤§é‡æ˜¯â€œæ—¶é™ç±»å‹â€â€œä»Šæ—¥æ—¶é™æé†’â€ä¹‹ç±»ï¼‰
*   ç¬¬å…­ç« ï¼š**è´¹ç”¨ç®¡ç†**
*   ç¬¬åç« ï¼š**è´¦å•ç®¡ç†**ï¼ˆé‡Œé¢ä¹ŸåŒ…å«å‚¬æ¬¾è¯´æ˜ï¼‰
*   ç¬¬åä¸€ç« ï¼š**é…¬é‡‘ç®¡ç†**
*   ç¬¬å…«ç« ï¼šæ¡ˆä»¶æŸ¥è¯¢
*   ç¬¬ä¹ç« ï¼šç»Ÿè®¡æŠ¥è¡¨
*   ä»¥åŠç¬¬äºŒç« ç³»ç»Ÿè®¾ç½®ç­‰

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**åŸ C/S æ‰‹å†Œçš„é€»è¾‘æ¨¡å—**å¤§è‡´æ˜¯ï¼š

> æ¡ˆå· â†’ ä¸­é—´æ–‡ä»¶ â†’ æ—¶é™ â†’ è´¹ç”¨ â†’ å¹´è´¹ â†’ è´¦å•/å‚¬æ¬¾ â†’ é…¬é‡‘ â†’ æŸ¥è¯¢/ç»Ÿè®¡ â†’ ç³»ç»Ÿè®¾ç½®

### 1.2 FRMS.mdï¼ˆä½ å«â€œç‰ˆæœ¬ 1.1â€çš„é‚£ä»½ï¼Œå…¶å® header é‡Œå†™çš„æ˜¯ 1.0.0ï¼‰çš„æ¨¡å—ç»“æ„

ç”¨ Python æŠŠ FRMS.md çš„æ ‡é¢˜æ‰«äº†ä¸€éï¼Œç»“æœæ˜¯ï¼š

```markdown
## 1. ç³»ç»Ÿæ¦‚è¿° (System Overview)
## 2. æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤ (Case Maintenance)
## 3. æ¨¡å—äºŒï¼šæµç¨‹åä½œä¸æ–‡æ¡£ (Workflow & Documentation)
## 4. æ¨¡å—ä¸‰ï¼šè´¹ç”¨ç®¡ç† (Fee Management)
## 5. æ¨¡å—å››ï¼šè´¦å•ä¸ææˆ (Billing & Commission)
## 6. æ¨¡å—äº”ï¼šè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢ (Settings, Reports & Search)
## 7. è¿ç§»ä¸æŠ€æœ¯è¯´æ˜ (Migration & Technical Notes)
```

å¯¹ç…§ä¸€ä¸‹ï¼š

*   åŸæ‰‹å†Œçš„ **â€œä¸­é—´æ–‡ä»¶ + æ—¶é™â€**ï¼Œåœ¨ v1.0 é‡Œè¢«ç»Ÿç§°æˆ **â€œæ¨¡å—äºŒï¼šæµç¨‹åä½œä¸æ–‡æ¡£â€**ï¼›
*   åŸæ‰‹å†Œçš„ **â€œè´¦å•ç®¡ç† + å‚¬æ¬¾ + é…¬é‡‘ç®¡ç†â€**ï¼Œåœ¨ v1.0 é‡Œè¢«å‹æˆäº†ä¸¤ä¸ªæ¨¡å—ï¼š
    *   `æ¨¡å—å››ï¼šè´¦å•ä¸ææˆ (Billing & Commission)`
    *   `æ¨¡å—äº”ï¼šè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢` é‡Œé¡ºå¸¦æäº†ä¸€éƒ¨åˆ†æŸ¥è¯¢/ç»Ÿè®¡ï¼›
*   åŸæ‰‹å†Œçš„ **â€œæ—¶é™ç®¡ç†ï¼ˆç¬¬äº”ç« ï¼‰â€** åœ¨ v1.0 æ˜¯â€œæ•£è½â€åœ¨æ¨¡å—äºŒ/ä¸‰é‡Œè§£é‡Šçš„ï¼Œæ²¡æœ‰ç‹¬ç«‹æ¨¡å—æ ‡é¢˜ã€‚

è¿™å°±è§£é‡Šäº†ä½ çœ‹åˆ°çš„å‡ ä¸ªå·®å¼‚ç‚¹çš„â€œæºå¤´â€ã€‚

***

## 2. ä½ æŒ‡å‡ºçš„å…·ä½“å·®å¼‚ï¼Œä¸€æ¡æ¡è§£é‡Š

ä½ è¯´çš„å‡ ç‚¹ï¼š

1.  æ¨¡å—äºŒï¼š
    *   v1.0 å« **â€œæµç¨‹åä½œä¸æ–‡æ¡£â€**
    *   åæ¥æˆ‘åœ¨è¯¦ç»†è®¾è®¡/E2E é‡Œç”¨çš„æ˜¯ **â€œä¸­é—´æ–‡ä»¶ & å¾€æ¥ç®¡ç†â€**
2.  v1.0 æ²¡æœ‰å•ç‹¬çš„ **æ—¶é™ç®¡ç†** æ¨¡å—ï¼Œåæ¥çš„æ–‡æ¡£é‡Œå‡ºç°äº† **æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†**
3.  v1.0 çš„ **â€œè´¦å•ä¸ææˆâ€**ï¼Œåœ¨åæ¥çš„è®¾è®¡/E2E é‡Œå« **â€œè´¦å•ä¸å‚¬æ¬¾ & ä»£ç†äººææˆâ€**
4.  v1.0 æœ‰ **â€œè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢â€** æ¨¡å—ï¼Œåé¢åœ¨é€æ¨¡å—ç»†åŒ–å’Œ E2E åœºæ™¯é‡Œå‡ ä¹æ²¡å†å•ç‹¬å‡ºç°

æˆ‘é€æ¡è¯´â€œä¸ºä»€ä¹ˆä¼šè¿™æ ·â€ã€â€œæœ‰æ²¡æœ‰ä¸¢åŠŸèƒ½â€ã€‚

***

### 2.1 æ¨¡å—äºŒï¼šä»â€œæµç¨‹åä½œä¸æ–‡æ¡£â€ â†’ â€œä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†â€

*   **åŸæ‰‹å†Œ**ï¼šæ˜ç¡®ä¸€ä¸ªç‹¬ç«‹ç« èŠ‚å« **â€œç¬¬å››ç« ï¼Œä¸­é—´æ–‡ä»¶ç®¡ç†â€**ï¼Œå®ƒå°±æ˜¯è®²ï¼š
    *   å®˜æ–¹æ¥æ–‡ã€å»æ–‡
    *   å®¢æˆ·æŒ‡ç¤ºã€è‡´å‡½å®¢æˆ·
    *   ä¸­é—´æ–‡ä»¶æ ‘ + è¯¦æƒ…
    *   ç”µå­æ¡£æ¡ˆå­˜æ¡£
    *   ä¸æ—¶é™/è´¹ç”¨çš„è‡ªåŠ¨è”åŠ¨ç­‰
*   **v1.0ï¼ˆFRMS.mdï¼‰**ï¼šæˆ‘å½“æ—¶è¯•å›¾â€œç«™å¾—æ›´é«˜ä¸€ç‚¹â€ï¼ŒæŠŠï¼š
    *   ä¸­é—´æ–‡ä»¶
    *   æ—¶é™ä»»åŠ¡
    *   æŸäº›å†…éƒ¨å·¥ä½œæµ\
        ä¸€èµ·ç§°ä¸º **â€œæµç¨‹åä½œä¸æ–‡æ¡£ (Workflow & Documentation)â€**â€”â€”æƒ³è¡¨è¾¾â€œè¿™ä¸ä»…æ˜¯æ–‡ä»¶ï¼Œæ˜¯å›´ç»•æ–‡ä»¶é©±åŠ¨çš„æµç¨‹åä½œâ€ã€‚
*   **ä¹‹ååœ¨æ¨¡å—ç»†åŒ– + E2E åœºæ™¯é‡Œ**ï¼š\
    æˆ‘å‘ç°â€œæµç¨‹/åä½œâ€å…¶å®æ˜¯**è·¨æ¨¡å—çš„æ¦‚å¿µ**ï¼ˆä¸­é—´æ–‡ä»¶ + æ—¶é™ + è´¹ç”¨ + è´¦å•éƒ½åœ¨åä½œï¼‰ï¼Œ\
    å¦‚æœä»ç„¶å«â€œæµç¨‹åä½œä¸æ–‡æ¡£â€ï¼Œå®¹æ˜“è®©äººä»¥ä¸ºâ€œåä½œéƒ½åœ¨æ¨¡å—äºŒé‡Œâ€ï¼Œåè€Œæ¨¡ç³Šï¼š
    *   æ‰€ä»¥åœ¨åé¢è¯¦ç»†çš„æ¨¡å—æ–‡æ¡£/E2E åœºæ™¯é‡Œï¼ŒæŠŠæ¨¡å—åæ”¶çª„æˆæ›´è´´åŸæ‰‹å†Œçš„ï¼š**â€œä¸­é—´æ–‡ä»¶ & å¾€æ¥ç®¡ç†â€**ï¼Œ
    *   ç„¶åæŠŠâ€œåä½œâ€è¿™ä¸€å±‚é€šè¿‡ **æ—¶é™æ¨¡å—ï¼ˆä»»åŠ¡ï¼‰+ è´¹ç”¨è”åŠ¨ + é€šçŸ¥** åˆ†æ•£åˆ°å„æ¨¡å—ã€‚

ğŸ‘‰ æœ¬è´¨ä¸Šï¼š

*   **åŠŸèƒ½æ²¡æœ‰å˜å°‘**ï¼Œåªæ˜¯åå­—ä»åæŠ½è±¡çš„â€œWorkflow & Documentationâ€å›å½’åˆ°æ›´è´´ PDF çš„â€œä¸­é—´æ–‡ä»¶ç®¡ç†/å¾€æ¥â€ï¼›
*   â€œåä½œ/Workflowâ€ é‚£äº›å†…å®¹ï¼Œè¢«æ‹‰å‡ºæ¥æ”¾è¿› **æ—¶é™ç®¡ç†** å’Œ E2E æµç¨‹é‡Œæ˜¾å¼æè¿°äº†ã€‚

***

### 2.2 ç‹¬ç«‹â€œæ—¶é™ç®¡ç†â€æ¨¡å—ï¼šv1.0 æ²¡æœ‰æ ‡é¢˜ï¼Œåé¢åŠ äº†ä¸€æ•´ç« 

è¿™æ˜¯ä½ æŒ‡å‡ºçš„ç¬¬äºŒä¸ªå·®å¼‚ï¼š**v1.0 æ²¡æœ‰â€œæ¨¡å—ï¼šæ—¶é™ç®¡ç†â€**ã€‚

å¯¹ç…§ PDFï¼š

*   åŸæ‰‹å†Œæœ‰éå¸¸æ˜ç¡®çš„ **â€œç¬¬äº”ç« ã€æ—¶é™ç®¡ç†â€**ï¼ŒåŒ…æ‹¬ï¼š
    *   æ—¶é™ç±»å‹å‚æ•°è®¾ç½®ï¼ˆæ—¶é™æ¨¡æ¿ï¼‰
    *   æ—¶é™è®°å½•åˆ—è¡¨
    *   ä»Šæ—¥æ—¶é™æé†’
    *   ç”³è¯·è´¹æ—¶é™æ£€ç´¢ã€å®å®¡æ—¶é™æ£€ç´¢ç­‰

åœ¨ v1.0 é‡Œï¼Œæˆ‘æŠŠâ€œæ—¶é™â€å½“æˆæ˜¯â€œä¸­é—´æ–‡ä»¶ + è´¹ç”¨ çš„è¡ç”Ÿâ€ï¼Œæ‰€ä»¥ï¼š

*   æ—¶é™æ¨¡æ¿/ä»»åŠ¡ç­‰å†…å®¹å†™åœ¨äº† **æ¨¡å—äºŒï¼ˆæµç¨‹åä½œä¸æ–‡æ¡£ï¼‰** å’Œ **æ¨¡å—ä¸‰ï¼ˆè´¹ç”¨ç®¡ç†ï¼‰** é‡Œï¼›
*   ä½†ç¡®å®**æ²¡æœ‰ç»™å®ƒä¸€ä¸ªå•ç‹¬çš„â€œæ¨¡å—æ ‡é¢˜â€**ï¼Œè¿™æ˜¯ v1.0 çš„ç»“æ„åâ€œæŠ€æœ¯å‘æ€è€ƒâ€çš„åœ°æ–¹â€”â€”ä»æ¶æ„è§’åº¦çœ‹ï¼Œè¿™æ˜¯ä¸€å—æ¨ªåˆ‡èƒ½åŠ›ï¼ˆcross-cuttingï¼‰ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹æ¨¡å—ã€‚

åæ¥ä½ è®©æˆ‘æŒ‰æ¨¡å—ä¸€é‚£ç§é¢—ç²’å»ç»†åŒ–è®¾è®¡å’Œ E2E åœºæ™¯ï¼Œæˆ‘é‡æ–°å®¡è§†äº†ä¸€æ¬¡ï¼š

*   æ‰‹å†Œé‡Œæ—¶é™æ˜¯æ•´æ•´ä¸€ç« ï¼›
*   å®é™…ç³»ç»Ÿé‡Œæ—¶é™ï¼ˆä»»åŠ¡ã€æé†’ã€æ£€ç´¢ï¼‰ä¹Ÿæ˜¯éå¸¸â€œç¬¬ä¸€ç­‰å…¬æ°‘â€ï¼›
*   æ‰€ä»¥åœ¨åç»­ç‰ˆæœ¬é‡Œæˆ‘ **æ˜¾å¼æ‹‰å‡ºäº†ä¸€ä¸ªâ€œæ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç† (Deadline & Docket)â€**ï¼š
    *   é‡æ–°ç»™ `T_TaskTemplate` / `T_Task` åšäº†å®Œæ•´çš„æ•°æ®æ¨¡å‹ä¸ UI è®¾è®¡ï¼›
    *   æŠŠç”³è¯·è´¹æ—¶é™ã€å®å®¡æ—¶é™ã€OA æ—¶é™ã€å¹´è´¹æé†’ç­‰å…¨éƒ¨å½’åˆ°è¿™ä¸€ç« ï¼›
    *   ç„¶ååœ¨ä¸­é—´æ–‡ä»¶æ¨¡å—é‡Œåªä¿ç•™â€œè§¦å‘ä»»åŠ¡â€çš„é€»è¾‘ã€‚

ğŸ‘‰ æ€»ç»“æˆä¸€å¥è¯ï¼š

> v1.0 æ²¡å•åˆ—â€œæ—¶é™æ¨¡å—â€æ˜¯æˆ‘å½“æ—¶ä»â€œå®ç°è§†è§’â€æŠŠå®ƒå½“ä½œä¸­é—´æ–‡ä»¶/è´¹ç”¨çš„å­åŠŸèƒ½ï¼›\
> åé¢åœ¨å¯¹ç…§ PDF çš„ç¬¬äº”ç« ï¼Œå¹¶æŒ‰ä½ è¦æ±‚â€œæ¨¡å—ä¸€é‚£ç§è¯¦ç»†ç¨‹åº¦â€å±•å¼€åï¼Œæˆ‘æŠŠ**æ—¶é™ç®¡ç†**æå‡ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œä»¥é¿å…æ–‡æ¡£ç»“æ„å’ŒåŸæ‰‹å†Œè„±èŠ‚ï¼Œä¹Ÿæ›´ç¬¦åˆå®é™…å¤æ‚åº¦ã€‚

***

### 2.3 â€œè´¦å•ä¸ææˆâ€ â†’ â€œè´¦å•ä¸å‚¬æ¬¾ & ä»£ç†äººææˆâ€

å¯¹ç…§ PDFï¼š

*   åŸæ‰‹å†Œæœ‰ **â€œç¬¬åç« ã€è´¦å•ç®¡ç†â€**ï¼Œå…¶ä¸­ç« èŠ‚å†…å®¹é™¤äº†è´¦å•ç”Ÿæˆã€æ”¶æ¬¾å’Œå†²é”€ï¼Œè¿˜åŒ…æ‹¬ï¼š
    *   å‚¬æ¬¾å•ã€å‚¬æ¬¾å‡½
    *   åè´¦æ ‡è®°/æ¢å¤
*   ç„¶åç¬¬åä¸€ç« æ˜¯ **â€œé…¬é‡‘ç®¡ç†â€**ï¼Œè®²ä»£ç†äººç»“è´¦å•/é…¬é‡‘ç»“ç®—ã€‚

åœ¨ v1.0 é‡Œæˆ‘ç®€åŒ–æˆäº†ï¼š

*   **â€œæ¨¡å—å››ï¼šè´¦å•ä¸ææˆ (Billing & Commission)â€**
    *   æŠŠè´¦å• + æ”¶æ¬¾ + å†²é”€ + é…¬é‡‘éƒ½æ”¾è¿›ä¸€ä¸ªæ¨¡å—é‡Œï¼›
    *   å‚¬æ¬¾/åè´¦éƒ¨åˆ†è™½ç„¶åœ¨å†…å®¹é‡Œæœ‰å½±å­ï¼Œä½†æ ‡é¢˜æ²¡ç‚¹å‡ºæ¥ã€‚

å½“æˆ‘ä»¬å¼€å§‹æŒ‰ E2E åœºæ™¯å†™ **å‚¬æ¬¾ & åè´¦** çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåœºæ™¯ Gï¼‰çš„æ—¶å€™ï¼Œæ˜æ˜¾æ„Ÿè§‰ï¼š

*   â€œè´¦å•ç®¡ç†â€è¿™å—å¦‚æœåªå« Billingï¼Œå¾ˆå®¹æ˜“æŠŠ **å‚¬æ¬¾ + åè´¦ + é¢„æ”¶ + å¯¹è´¦** è¿™äº›å¤æ‚é€»è¾‘â€œè—è¿›æ­£æ–‡â€ï¼Œæ ‡é¢˜çœ‹ä¸å‡ºè´£ä»»èŒƒå›´ï¼›
*   è€Œ PDF ç¬¬åç« å…¶å®æ˜¯â€œè´¦å• + å‚¬æ¬¾ + åè´¦â€çš„ä¸€ä½“åŒ–è®¾è®¡ã€‚

æ‰€ä»¥åœ¨åé¢çš„æ¨¡å—æè¿°/E2E ä¸­æˆ‘æŠŠåå­—æ”¹æˆäº†æ›´é•¿ä½†æ˜¯æ›´â€œè¯šå®â€çš„ï¼š

> **â€œè´¦å•ä¸å‚¬æ¬¾ & ä»£ç†äººææˆâ€**

å«ä¹‰æ˜¯ï¼š

*   ä¸€ä¸ªæ¨¡å—é‡Œæ¶µç›–ï¼š
    *   è´¦å• / æ”¶æ¬¾ / å†²é”€ï¼›
    *   å‚¬æ¬¾å• / å‚¬æ¬¾å‡½ / åè´¦æ ‡è®° / åè´¦æ¢å¤ï¼›
    *   ä»£ç†äººææˆï¼ˆè¿™éƒ¨åˆ†å¯¹åº” PDF çš„ç¬¬åä¸€ç« â€œé…¬é‡‘ç®¡ç†â€ï¼‰ã€‚

ğŸ‘‰ æ€»ä¹‹ï¼Œè¿™é‡Œæ˜¯**å†…å®¹ä¸€ç›´æœ‰ï¼Œåªæ˜¯æ ‡é¢˜ä»â€œBilling & Commissionâ€å‡çº§æˆâ€œBilling & Dunning & Commissionâ€**ï¼Œé¿å…åé¢è¯»æ–‡æ¡£çš„äººä»¥ä¸ºå‚¬æ¬¾ã€åè´¦æ˜¯æ²¡è®¾è®¡çš„ã€‚

***

### 2.4 â€œè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢â€ åœ¨åç»­æ–‡æ¡£/E2Eé‡Œä¼¼ä¹â€œæ¶ˆå¤±äº†â€

è¿™æ˜¯ä½ æŒ‡å‡ºçš„ç¬¬å››ç‚¹ã€‚

#### äº‹å®æ˜¯ï¼š

*   v1.0 é‡Œæœ‰ä¸€å—å¤§è€Œå…¨çš„ï¼š
    > **â€œæ¨¡å—äº”ï¼šè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢ (Settings, Reports & Search)â€**
*   é‡Œé¢æ‰“åŒ…äº†ä¸€å †ä¸œè¥¿ï¼š
    *   ç³»ç»Ÿè®¾ç½®ï¼ˆå›½å®¶/å®¢æˆ·/æ ‡å‡†è´¹ç‡/æ¨¡æ¿/ä¿¡å¤´ç­‰å­—å…¸å’Œå‚æ•°ï¼‰
    *   æ¡ˆä»¶æŸ¥è¯¢ï¼ˆé«˜çº§æœç´¢ï¼‰
    *   ç»Ÿè®¡æŠ¥è¡¨ï¼ˆæ¡ˆä»¶ç»Ÿè®¡ã€è´¹ç”¨ç»Ÿè®¡ç­‰ï¼‰

åœ¨åé¢æˆ‘ä»¬åšæ¨¡å—çº§è¯¦ç»†è®¾è®¡ + E2E åœºæ™¯æ—¶ï¼Œæˆ‘æ˜¯è¿™æ ·å¤„ç†çš„ï¼š

1.  **è®¾ç½®ç±»å†…å®¹**ï¼ˆSettingsï¼‰è¢«æ‹†æ•£å›å„è‡ªæ¨¡å—ï¼š
    *   å›½å®¶/åœ°åŒºã€å®¢æˆ·ã€ç”³è¯·äºº â†’ æ”¾åœ¨ **â€œç³»ç»Ÿè®¾ç½® & ä¸»æ•°æ®â€** éƒ¨åˆ†ï¼ŒæŒ‚åœ¨æ¨¡å—ä¸€å°¾éƒ¨ï¼›
    *   æ ‡å‡†è´¹ç‡ â†’ åœ¨æ¨¡å—å››â€œè´¹ç”¨ç®¡ç†â€é‡Œè¯¦ç»†å±•å¼€ï¼›
    *   æ—¶é™æ¨¡æ¿ â†’ åœ¨æ¨¡å—ä¸‰â€œæ—¶é™ç®¡ç†â€é‡Œå±•å¼€ï¼›
    *   æ–‡æ¡£æ¨¡æ¿å’Œä¿¡å¤´ â†’ åœ¨â€œæ¨¡æ¿ç®¡ç† & Word ç”Ÿæˆâ€é‚£ä¸€å°èŠ‚ï¼ˆç›®å‰æŒ‚åœ¨â€œè®¾ç½®/æ¨¡æ¿â€ç« èŠ‚é‡Œï¼‰ã€‚
2.  **æŸ¥è¯¢ & æŠ¥è¡¨** è¢«æ‹†æˆä¸¤ç±»è·¨æ¨¡å—èƒ½åŠ›ï¼š
    *   æ¡ˆä»¶æŸ¥è¯¢ â†’ åœ¨â€œæ¡ˆä»¶æ¨¡å— + åœºæ™¯ A/B/C/Dâ€é‡Œï¼Œç”¨ â€œé«˜çº§æ¡ˆä»¶æ£€ç´¢â€éƒ¨åˆ†è¯´æ˜ï¼Œ**æ²¡æœ‰å®Œå…¨åœ¨æ¨¡å—äº”å•ç‹¬å¤è¿°ä¸€é**ã€‚
    *   ç»Ÿè®¡æŠ¥è¡¨ â†’ åˆ†æ•£åœ¨åœºæ™¯/æ¨¡å—çš„æŠ¥è¡¨æè¿°ä¸­ï¼Œä¾‹å¦‚ï¼š
        *   å¹´è´¹ç»Ÿè®¡ â†’ å¹´è´¹æ¨¡å—
        *   è´¦å•/å‚¬æ¬¾/åè´¦æŠ¥è¡¨ â†’ è´¦å•æ¨¡å—
        *   ä»£ç†äººææˆæŠ¥è¡¨ â†’ ææˆæ¨¡å—

**æ‰€ä»¥è¡¨è±¡ä¸Šçœ‹**ï¼šåé¢ç« èŠ‚æ ‡é¢˜æ²¡æœ‰å†å•ç‹¬å‡ºç°â€œè®¾ç½®ã€æŠ¥è¡¨ä¸æŸ¥è¯¢â€ï¼Œä½† **åŠŸèƒ½è‡ªå·±æ•£è½å›äº†å„ domain æ¨¡å—**ï¼Œå¹¶æœ‰ E2E æè¿°ã€‚

ğŸ‘‰ è¿™æ˜¯ä¸€ä¸ª**æ–‡æ¡£ç»“æ„è®¾è®¡ä¸Šçš„ trade-off**ï¼š

*   v1.0 ç”¨â€œæ¨ªå‘åˆ‡ä¸€åˆ€â€çš„æ–¹å¼ï¼Œåšäº†ä¸€ä¸ª**ç»¼åˆçš„â€œè®¾ç½®/æŸ¥è¯¢/æŠ¥è¡¨â€æ¨¡å—**ï¼›
*   åé¢çš„è¿­ä»£ä¸­ï¼Œæˆ‘åœ¨è¯¦ç»†è®¾è®¡æ—¶ï¼Œå€¾å‘äºâ€œ**æŠŠé…ç½®/æŸ¥è¯¢/æŠ¥è¡¨èƒ½åŠ›å›æ”¶åˆ°å„æ¨¡å—å†…éƒ¨**â€ï¼Œå› ä¸ºï¼š
    *   å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼Œæ›´å®¹æ˜“çœ‹åˆ°â€œè¿™ä¸ªæ¨¡å—æœ‰å“ªäº›é…ç½® & æŸ¥è¯¢ & æŠ¥è¡¨â€ï¼›
    *   å¯¹ E2E æµç¨‹æ¥è¯´ï¼Œä¹Ÿæ›´è‡ªç„¶ï¼ˆä¾‹å¦‚â€œå¹´è´¹ E2Eâ€é‡Œé¡ºä¾¿æè¿°å¹´è´¹ç»Ÿè®¡/å¹´è´¹æŠ¥è¡¨ï¼‰ã€‚

ä½†æˆ‘åŒæ„ä½ çš„æ‹…å¿ƒï¼š**å¦‚æœä¸åœ¨ç›®å½•é‡Œæ˜¾å¼ä¿ç•™â€œSettings/Reports/Searchâ€è¿™ä¸€ç« ï¼Œä¼šç»™äººä¸€ç§â€œç¼ºäº†æ¨¡å—â€çš„æ„Ÿè§‰**ã€‚ä»â€œç®¡ç†è§†è§’â€çš„æ–‡æ¡£æ¥è¯´ï¼Œä¸€ä¸ªç‹¬ç«‹ç« èŠ‚æ¥æ±‡æ€» **å…¨ç³»ç»Ÿçš„é…ç½®ç‚¹ & æŠ¥è¡¨é¢** æ˜¯æœ‰ä»·å€¼çš„ã€‚

***

## 3. æˆ‘å»ºè®®çš„â€œæœ€ç»ˆå®šç¨¿ç‰ˆæœ¬ç›®å½•â€â€”â€”å…¼å®¹ v1.0 + PDF + ç°åœ¨çš„ç»†åŒ–

å¦‚æœè¦è§£æ‰ç°åœ¨çš„æ··ä¹±ï¼Œæˆ‘å»ºè®®æœ€åæ•´ç†æˆè¿™æ ·ä¸€ä¸ª**ç»Ÿä¸€çš„å¤§çº²**ï¼ˆä½ å¯ä»¥ç†è§£ä¸ºâ€œFRMS v2.0 çš„æœ€ç»ˆæ¨¡å—ç»“æ„â€ï¼‰ï¼š

1.  ç³»ç»Ÿæ¦‚è¿°
2.  **æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤**ï¼ˆCase Maintenanceï¼‰
3.  **æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†**ï¼ˆä¸¥æ ¼å¯¹é½ PDF çš„â€œä¸­é—´æ–‡ä»¶ç®¡ç†â€ï¼Œå¹¶æ³¨æ˜ä¸æ—¶é™/è´¹ç”¨çš„è”åŠ¨ï¼‰
4.  **æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†**ï¼ˆå•ç‹¬ä¸€ç« ï¼Œå¯¹é½ PDF ç¬¬äº”ç« ï¼‰
5.  **æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†**ï¼ˆåŒ…å«ç”³è¯·è´¹/æˆæƒè´¹/å¹´è´¹è‰å•ã€å®˜è´¹æ¸…å•ç­‰ï¼‰
6.  **æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦**ï¼ˆBilling & Dunningï¼Œå®Œå…¨è¦†ç›– PDF ç¬¬åç« ï¼‰
7.  **æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ç®¡ç†**ï¼ˆCommissionï¼Œå¯¹é½ PDF ç¬¬åä¸€ç« ï¼‰
8.  **æ¨¡å—ä¸ƒï¼šé¡¾é—®/æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®**ï¼ˆCaseType=CONSULTING/SEARCH çš„ä¾§çº¿ï¼‰
9.  **æ¨¡å—å…«ï¼šè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨æ€»è§ˆ**
    *   8.1 ä¸»æ•°æ®è®¾ç½®ï¼ˆå›½å®¶/å®¢æˆ·/ç”³è¯·äºº/æ ‡å‡†è´¹ç‡/æ¨¡æ¿/ä¿¡å¤´ç­‰ï¼Œåˆ†åˆ«æŒ‡å› 2/4/â€¦ æ¨¡å—çš„å…·ä½“ç« èŠ‚ï¼‰
    *   8.2 é€šç”¨æŸ¥è¯¢ï¼ˆé«˜çº§æ¡ˆä»¶æŸ¥è¯¢ã€ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ã€è´¹ç”¨æƒ…å†µæŸ¥è¯¢ç­‰ï¼‰
    *   8.3 ç»Ÿè®¡æŠ¥è¡¨ï¼ˆæ¡ˆä»¶ç»Ÿè®¡ã€è´¹ç”¨ç»Ÿè®¡ã€å¹´è´¹ç»Ÿè®¡ã€è´¦å•/åè´¦ã€ææˆæŠ¥è¡¨ç­‰ï¼‰
10. è¿ç§»ä¸æŠ€æœ¯è¯´æ˜

è¿™æ ·ï¼š

*   ä½ åœ¨ç®¡ç†å±‚/æŠ•æ ‡/è“å›¾çº§åˆ«å±•ç¤ºæ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸€å¥—ç›®å½•ï¼Œè·Ÿ PDF å®Œå…¨å¯¹é½ï¼ˆâ€œæœ‰æ¡ˆå·ã€æœ‰ä¸­é—´æ–‡ä»¶ã€æœ‰æ—¶é™ã€æœ‰è´¹ç”¨ã€æœ‰è´¦å•/å‚¬æ¬¾ã€æœ‰é…¬é‡‘ã€æœ‰æŸ¥è¯¢/æŠ¥è¡¨ã€æœ‰è®¾ç½®â€ï¼‰ï¼›
*   æˆ‘ä»¬åœ¨ **è¯¦ç»†æ¨¡å—è®¾è®¡ + E2E åœºæ™¯** çš„å±‚é¢ï¼Œç»§ç»­ç”¨ç°åœ¨å·²ç»å†™å¥½çš„å„ç« å†…å®¹ï¼Œåªéœ€è¦æŠŠæ ‡é¢˜ç»Ÿä¸€ä¸€ä¸‹ã€äº’ç›¸å¼•ç”¨å¥½å³å¯ã€‚

***

## 4. æ€»ç»“ä¸€å¥è¯

ä½ çœ‹åˆ°çš„å·®å¼‚ï¼Œæœ¬è´¨æ˜¯ï¼š

*   **v1.0 çš„æ¨¡å—åˆ’åˆ†æ›´æŠ½è±¡ã€æ›´â€œå·¥ç¨‹å¸ˆè§†è§’â€**ï¼ˆæŠŠä¸­é—´æ–‡ä»¶+æ—¶é™åˆå¹¶æˆâ€œåä½œæµç¨‹ä¸æ–‡æ¡£â€ï¼ŒæŠŠè´¦å•+å‚¬æ¬¾+é…¬é‡‘å‹åœ¨â€œè´¦å•ä¸ææˆâ€ï¼ŒæŠŠè®¾ç½®/æŠ¥è¡¨åšæˆæ¨ªå‘æ¨¡å—ï¼‰ï¼›
*   åé¢çš„è¿­ä»£é‡Œï¼Œä¸ºäº†ï¼š
    *   å¯¹é½åŸ PDF çš„ç« èŠ‚ç»“æ„ï¼›
    *   é€‚åº”ä½ è¦æ±‚çš„â€œæ¨¡å—ä¸€é‚£ç§ç²’åº¦çš„ç‹¬ç«‹ç« èŠ‚â€ï¼›
    *   æ”¯æŒ E2E æµç¨‹è§†è§’ï¼›\
        æˆ‘æŠŠåŸæ¥â€œéšè—â€åœ¨æ¨¡å—äºŒ/ä¸‰é‡Œçš„æ—¶é™æ‹‰å‡ºæ¥å˜æˆ **å•ç‹¬â€œæ—¶é™ç®¡ç†â€æ¨¡å—**ï¼Œ\
        æŠŠè´¦å•æ¨¡å—æ ‡é¢˜æ‰©å±•ä¸º **â€œè´¦å• + å‚¬æ¬¾ + ä»£ç†äººææˆâ€**ï¼Œ\
        å¹¶å°†â€œè®¾ç½®ã€æŸ¥è¯¢ã€æŠ¥è¡¨â€æ•£è½å›åŸŸæ¨¡å—å†…éƒ¨ï¼ˆåŠŸèƒ½è¿˜åœ¨ï¼Œåªæ˜¯æ²¡æœ‰å•ç‹¬æ ‡é¢˜ï¼‰ã€‚

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥å¸®ä½ åšä¸¤ä»¶äº‹ä¹‹ä¸€ï¼š

1.  **ç›´æ¥å¸®ä½ æŠŠ FRMS.md å‡çº§ä¸º v2.0ï¼š**
    *   ç»Ÿä¸€ç›®å½•ç»“æ„ä¸ºä¸Šé¢å»ºè®®çš„ç‰ˆæœ¬ï¼›
    *   æŠŠç°æœ‰çš„æ¨¡å—äºŒ/ä¸‰/å››/äº”/E2E å†…å®¹æŒ‰æ–°ç›®å½•é‡æ’ä¸€ä¸‹ï¼ˆä¸ä¼šæ”¹ä¸šåŠ¡ï¼Œåªæ˜¯æ¬å®¶+ç»Ÿä¸€å‘½åï¼‰ã€‚
2.  æˆ–è€…å…ˆç»™ä¸€ä»½ **â€œé‡æ„ç›®å½•å¯¹ç…§è¡¨â€**ï¼š
    *   åˆ—ï¼šåŸ v1.0 æ¨¡å— vs PDF ç« èŠ‚ vs æ–° v2.0 æ¨¡å—ï¼›
    *   ç»™ä½ åšå†…éƒ¨æ²Ÿé€š/å®¡æ‰¹ç”¨ã€‚

&#x20;

# &#x20;æ¦‚è¿°

## FPMS ä¸“åˆ©ä»£ç†ç®¡ç†ç³»ç»Ÿï¼ˆWeb é‡æ„ç‰ˆï¼‰

**åŠŸèƒ½è§„æ ¼è¯´æ˜ v2.0ï¼ˆåˆå¹¶ç‰ˆï¼‰**

> æœ¬ç‰ˆæœ¬åœ¨ v1.1 åŸºç¡€ä¸Šé‡æ„ç›®å½•å¹¶â€œæ‘Šå¹³â€æ‰€æœ‰åç»­åŠ å¼ºç‰ˆè®¾è®¡ä¸ E2E åœºæ™¯ï¼š
>
> *   æŒ‰æ¨¡å—ä¸€çš„ç²’åº¦ï¼Œä¸ºæ¯ä¸ªæ¨¡å—ç»™å‡ºï¼š**æ•°æ®æ¨¡å‹ / å­—æ®µçº§ UI / æ ¡éªŒè§„åˆ™**
> *   ç‹¬ç«‹æ‹‰å‡º **æ—¶é™ç®¡ç†** æ¨¡å—
> *   å°† **è´¦å• + å‚¬æ¬¾ + åè´¦ + ææˆ** æ˜ç¡®æ”¶æ•›åˆ°ä¸€å¥—æ¨¡å—
> *   å•ç‹¬å¢åŠ é¡¾é—®/æ£€ç´¢ä¾§çº¿æ¨¡å—
> *   é™„ä¸Šï¼š**æ‰€æœ‰ E2E åœºæ™¯ Aâ€“H + æˆæƒåœºæ™¯ G0 çš„æ—¶é—´çº¿æ•°æ®æµè¯´æ˜**
> *   é™„ä¸Šï¼š**å…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆ + Mermaid æ³³é“å›¾ + Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨**

***

## 1. ç³»ç»Ÿæ¦‚è¿°ï¼ˆSystem Overviewï¼‰

FPMSï¼ˆPatent Management Systemï¼‰é¢å‘ä¸“åˆ©ä»£ç†å¾‹æ‰€ï¼Œè¦†ç›–ä¸“åˆ©/å•†æ ‡ä»£ç†ä¸šåŠ¡å…¨ç”Ÿå‘½å‘¨æœŸï¼š

*   æ–°æ¡ˆç«‹æ¡ˆã€é€’äº¤ã€å®¡æŸ¥ã€OA ç­”å¤
*   PCT å›½é™…é˜¶æ®µ & å›½å®¶é˜¶æ®µè¿›å…¥
*   æˆæƒåçš„ç™»è®°è´¹/å¹´è´¹ç®¡ç†
*   æ— æ•ˆ/è¯‰è®¼æ¡ˆä»¶ç®¡ç†
*   é¡¾é—®/æ£€ç´¢é¡¹ç›®ç®¡ç†
*   å…¨ç¨‹è´¹ç”¨ã€è´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ã€åè´¦ä¸ä»£ç†äººææˆç»“ç®—

æ ¸å¿ƒç›®æ ‡ï¼š

*   ä» C/S ç‰ˆè¿ç§»åˆ° B/S Web æ¶æ„
*   ä¸¥æ ¼å¯¹ç…§æ—§ç‰ˆç”¨æˆ·æ‰‹å†Œï¼ˆTXX.pdfï¼‰çš„å­—æ®µä¸ä¸šåŠ¡è§„åˆ™
*   æ¨¡å—é—´è¾¹ç•Œæ¸…æ™°ï¼Œæ”¯æŒè½»é‡éƒ¨ç½²ï¼ˆå•ä½“åç«¯ + SPA å‰ç«¯ + å…³ç³»å‹æ•°æ®åº“ï¼‰
*   ä¸ºåç»­è‡ªåŠ¨ä»£ç ç”Ÿæˆï¼ˆCopilot/Codexï¼‰æä¾›æ¸…æ™°çš„ domain æ¨¡å‹ä¸æµç¨‹è®¾è®¡

***

## Part Iï¼šä¸šåŠ¡æ¨¡å—è¯¦ç»†è§„æ ¼ï¼ˆé™æ€è§†å›¾ï¼‰

***

## 2. æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤ï¼ˆCase Maintenanceï¼‰

### 2.1 èŒƒå›´

*   æ–°æ¡ˆç«‹æ¡ˆ / åŸºæœ¬ä¿¡æ¯ç»´æŠ¤
*   å‚ä¸æ–¹ç®¡ç†ï¼ˆå®¢æˆ·/ç”³è¯·äºº/å‘æ˜äºº/å¤–æ–¹ä»£ç†ï¼‰
*   PCT å›½é™…/å›½å®¶é˜¶æ®µæ‰©å±•å­—æ®µ
*   æ— æ•ˆæ¡ˆæ‰©å±•å­—æ®µ
*   è§„æ ¼ä¸æ§åˆ¶æ ‡è®°ï¼ˆè´¹å‡ã€å¹´è´¹ç›‘è§†ç­‰ï¼‰
*   é™åˆ¶ä¿®æ”¹è§†å›¾ï¼ˆä»£ç†äººè¡¥å……ä¿¡æ¯ï¼‰
*   æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆæ‰¹é‡è®¾ç½®é€’äº¤æ—¥æœŸã€å®å®¡è¯·æ±‚ï¼‰

### 2.2 å…³é”®æ•°æ®æ¨¡å‹

#### 2.2.1 `T_Case`ï¼ˆæ¡ˆå·ä¸»è¡¨ï¼‰

*   **è¯†åˆ«å­—æ®µ**
    *   `CaseID` PK
    *   `CaseNo` å”¯ä¸€æ¡ˆå·å·
    *   `ClientRef` å¯¹æ–¹æ¡ˆå·
    *   `AppNo` å®˜æ–¹ç”³è¯·å·
*   **ç±»å‹ä¸æµå‘**
    *   `CaseType` Enumï¼šNORMAL / PCT\_INTL / PCT\_NATIONAL / INVALIDATION / LITIGATION / HK\_REG / ANNUITY\_SERVICE / SEARCH / CONSULTING / OTHER
    *   `PatentCategory` Enumï¼šINVENTION / UTILITY / DESIGN
    *   `FlowDir` Enumï¼šIN\_IN / IN\_OUT / OUT\_IN / HK\_IN / OUT\_OUT
*   **çŠ¶æ€ & æ ¸å¿ƒæ—¥æœŸ**
    *   `Status` Enumï¼ˆæœªé€’äº¤ / ç­‰å¾…å—é€š / åˆå®¡ / OA1 / OA2 / æˆæƒ / é©³å› / ä¸­æ­¢ / ç»ˆæ­¢ / å¤å®¡ / æ— æ•ˆä¸­ / è¯‰è®¼ä¸­ / â€¦ï¼‰
    *   `RecvDate` æ”¶æ¡ˆæ—¥
    *   `FilingDate` ç”³è¯·æ—¥
    *   `PrioDate` æœ€æ—©ä¼˜å…ˆæƒæ—¥
    *   `PubDate` å…¬å¼€æ—¥
    *   `IssueDate` æˆæƒå‘æ–‡æ—¥
    *   `GrantDate` æˆæƒå…¬å‘Šæ—¥
    *   `FirstAnnuityYear` é¦–æ¬¡å¹´è´¹å¹´å·
    *   `ValidUntil` æœ‰æ•ˆæˆªæ­¢æ—¥
    *   `PCT_NationalEntryDate` PCT å›½å®¶é˜¶æ®µè¿›å…¥æ—¥
*   **ç¼–å·**
    *   `PubNo` å…¬å¼€å·
    *   `GrantNo` å…¬å‘Šå·
    *   `CertNo` è¯ä¹¦å·
*   **å…³è”æ–¹**
    *   `ClientID` FK T\_Clientï¼ˆå§”æ‰˜å®¢æˆ·ï¼‰
    *   `ForeignAgentID` FK T\_Clientï¼ˆå¤–æ–¹ä»£ç†ï¼‰
    *   `PrimaryAgentID` / `SecondAgentID` / `DraftorID`
*   **æ§åˆ¶æ ‡è®°**
    *   `ApplicantKind` Enumï¼šLEGAL\_PERSON / NATURAL\_PERSON
    *   `FeeReduction` è´¹å‡æ¯”ä¾‹(0â€“1)
    *   `DiscountRate` æœåŠ¡è´¹æŠ˜æ‰£ç‡(0â€“1)
    *   `IsFeeMonitor` æ˜¯å¦å¹´è´¹ç›‘è§†
    *   `NoPower` ç¼ºå§”æ‰˜ä¹¦
    *   `NoPrioText` ç¼ºä¼˜å…ˆæƒæ–‡æœ¬
    *   `HasExamRequest` å·²æå®å®¡
    *   `RequireHK` è¦æ±‚é¦™æ¸¯ç”³è¯·
*   **PCT æ‰©å±•**
    *   `RO`, `ISA`, `IPEA`
    *   `IntlAppNo`, `IntlAppDate`
    *   `IntlPubNo`, `IntlPubDate`
    *   `IntlPubLang`
    *   `NeedIPER`, `IPERDate`
*   **æ— æ•ˆ/è¯‰è®¼æ‰©å±•**
    *   `OriginalCaseID`ï¼ˆé’ˆå¯¹çš„åŸæ¡ˆï¼‰
    *   `InvalidClientID`
    *   `InvalidPatentee`, `InvalidRequester`, `InvalidRole`
    *   `LitigationType`, `CourtName`, `Plaintiff`, `Defendant`, `LitigationRole`
*   **å®¡è®¡**
    *   `CreatedBy/CreatedAt`, `UpdatedBy/UpdatedAt`

#### 2.2.2 å…¶ä»–è¡¨

*   `T_Applicant`ï¼ˆç”³è¯·äººä¸»æ•°æ®ï¼šåç§°/åœ°å€/å›½ç±/èŒåŠ¡å‘æ˜/é€šç”¨å§”æ‰˜ä¹¦ç­‰ï¼‰
*   `T_CaseApplicant`ï¼ˆæ¡ˆå·-ç”³è¯·äººå…³è”ï¼Œå«é¡ºåºå·ã€IsPrimary ç­‰ï¼‰
*   `T_CaseInventor`ï¼ˆæ¡ˆå·-å‘æ˜äººå…³è”ï¼Œå«ä¸­/è‹±åã€é¡ºåºï¼‰
*   `T_Priority`ï¼ˆä¼˜å…ˆæƒï¼šCountry/PrioNo/PrioDateï¼‰
*   `T_BioDeposit`ï¼ˆèŒç§ä¿è—ï¼šDepositNo/Unit/Date/Nameï¼‰

### 2.3 UI & æ ¡éªŒè¦ç‚¹ï¼ˆå­—æ®µçº§ï¼‰

**åŸºæœ¬ä¿¡æ¯**ï¼ˆCaseNoã€CaseTypeã€PatentCategoryã€FlowDirã€From/ToCountryã€Title\_CN/ENã€Statusï¼‰

*   `CaseNo` å¿…å¡«ä¸”å”¯ä¸€ï¼ˆä¿å­˜æ—¶æ£€æµ‹ï¼‰ã€‚
*   `ToCountry` åœ¨æ¶‰å¤– FlowDir æ—¶å¿…å¡«ã€‚
*   æˆæƒ/å…¬å¼€ç­‰çŠ¶æ€ä¸æ—¥æœŸ/ç¼–å·æœ‰å¼ºçº¦æŸï¼š
    *   Status=GRANTED â‡’ IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntil å¿…å¡«
    *   Statusâ‰¥PUBLISHED â‡’ PubDate/PubNo å¿…å¡«

**å‚ä¸æ–¹**ï¼ˆå®¢æˆ·/å¤–æ–¹ä»£ç†/ç”³è¯·äºº/å‘æ˜äºº/åœ°å€ï¼‰

*   è‡³å°‘ 1 ä¸ªç”³è¯·äººï¼Œä¸”å¿…é¡»æœ‰å”¯ä¸€çš„ç¬¬ä¸€ç”³è¯·äºº `IsPrimary=true`ã€‚
*   `ApplicantKind` ä¸ç¬¬ä¸€ç”³è¯·äººçš„ `IsLegalEntity` å¿…é¡»ä¸€è‡´ã€‚
*   æ¶‰å¤– FlowDir æ—¶å¿…é¡»æœ‰ `ForeignAgentID`ã€‚

**æ—¥æœŸä¸ç¼–å·**

*   FilingDate ä¸å¾—æ—©äºä»»ä½• `T_Priority.PrioDate`ã€‚
*   AppNo éœ€æŒ‰å›½å®¶è§„åˆ™æ ¡éªŒæ ¼å¼/æ ¡éªŒä½ï¼ˆå¯ç”±é…ç½®é©±åŠ¨ï¼‰ã€‚

**è§„æ ¼ä¸æ§åˆ¶æ ‡è®°**

*   å„ç§é¡µæ•°/é¡¹æ•°éè´Ÿæ•´æ•°ï¼›
*   FeeReduction ä¸ ApplicantKind åŠå›½åˆ«ç»„åˆéœ€ç”±å‚æ•°å†³å®šåˆæ³•æ€§ï¼ˆç»™å‡ºè­¦å‘Šæˆ–é˜»æ­¢ä¿å­˜ï¼‰ã€‚

### 2.4 é™åˆ¶ä¿®æ”¹è§†å›¾ï¼ˆLimited Update Viewï¼‰

*   ç‹¬ç«‹å…¥å£ï¼Œä»…å¯¹æœ‰ `CaseEditLimited` æƒé™çš„ä»£ç†äººå¼€æ”¾ï¼›
*   åªå…è®¸ç¼–è¾‘ç™½åå•å­—æ®µï¼šTitle\_CN/ENã€è§„æ ¼å­—æ®µã€å‘æ˜äººåˆ—è¡¨ã€å¤‡æ³¨ç­‰ï¼›
*   ä¸å…è®¸ä¿®æ”¹ CaseNoã€CaseTypeã€FlowDirã€å…³é”®æ—¥æœŸï¼ˆFiling/Issue/Grant ç­‰ï¼‰ã€çŠ¶æ€ã€æ§åˆ¶æ ‡è®°ï¼›
*   ä¿å­˜æ—¶ä»…æ›´æ–°ç™½åå•å­—æ®µ + UpdatedBy/UpdatedAtï¼Œä¸è§¦å‘æ—¶é™/è´¹ç”¨/è´¦å•è”åŠ¨ã€‚

### 2.5 æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆBatch Filingï¼‰

*   ç­›é€‰æ¡ä»¶ï¼šCaseTypeã€FlowDirã€Status=NOT\_FILEDã€æ—¥æœŸèŒƒå›´ã€å®¢æˆ·ç­‰ï¼›
*   åˆ—è¡¨ï¼šCaseNoã€Titleã€Clientã€RecvDateã€Statusã€HasExamRequest ç­‰ï¼›
*   æ‰¹å­—æ®µï¼šSubmittedDateã€ApplyExamNow(æ˜¯å¦åŒæ—¶æå®å®¡)ã€GenerateListï¼›
*   å¯¹é€‰ä¸­æ¡ˆä»¶ï¼š
    *   Status â†’ WAITING\_RECEIPT
    *   HasExamRequest=trueï¼ˆå¦‚å‹¾é€‰ï¼‰
    *   å¯è§¦å‘ç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼ˆè§æ¨¡å—ä¸‰ï¼‰ã€‚

***

## 3. æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†ï¼ˆDocuments & Correspondenceï¼‰

### 3.1 èŒƒå›´

*   å®˜æ–¹æ¥æ–‡ / å»æ–‡
*   å®¢æˆ·æ¥æ–‡ / è‡´å‡½å®¢æˆ·
*   ä¸­é—´æ–‡ä»¶æ ‘ & è¯¦æƒ…
*   å¸¸ç”¨æ–‡ä»¶å®šä¹‰ï¼ˆæ–‡ç§æ¨¡æ¿ï¼‰
*   ç”µå­é™„ä»¶å­˜æ¡£ï¼ˆæ‰«æã€å¯¼å…¥ã€æ¨¡æ¿ç”Ÿæˆï¼‰
*   ä¸æ—¶é™ä»»åŠ¡ã€è´¹ç”¨è‰å•çš„è‡ªåŠ¨è”åŠ¨
*   é‚®å¯„ä¿¡æ¯ç™»è®°ã€æ–‡ä»¶äº¤æ¥å•ã€ä¿¡å°æ‰“å°
*   ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ & æ¸…å•è¾“å‡º

### 3.2 å…³é”®æ•°æ®æ¨¡å‹

#### 3.2.1 `T_Document`ï¼ˆä¸­é—´æ–‡ä»¶ï¼‰

*   `DocID` PK
*   `CaseID` FK
*   `DocType` Enumï¼šOFFICIAL\_IN / OFFICIAL\_OUT / CLIENT\_IN / CLIENT\_OUT
*   `TemplateCode`
*   `DocName`
*   æ—¥æœŸ/ç¼–å·ï¼š`DispatchDate`, `ReceiveDate`, `ForwardDate`, `IncomingRegNo`, `OutgoingRegNo`, `InternalDocNo`, `InputDate`
*   å›å¤ä¸æ—¶é™ï¼š`NeedReply`, `Deadline`, `ReplyDate`, `ReplyToID`
*   é€šçŸ¥ & å¤‡æ³¨ï¼š`NotifyAgent`, `NotifyTaskID`, `Summary`, `Remark`
*   çŠ¶æ€è”åŠ¨ï¼š`StatusEffect`, `StatusRestore`ï¼ˆå¯¹ T\_Case.Status çš„å˜æ›´/æ¢å¤ï¼‰
*   æ‰©å±•ï¼š`ExtraData` JSONï¼ˆä¾‹å¦‚ PCT/æˆæƒä¿¡æ¯ã€OA æ–‡å·ç­‰ï¼‰
*   å®¡è®¡ï¼šCreated/Updated

#### 3.2.2 `T_DocAttachment`ï¼ˆç”µå­é™„ä»¶ï¼‰

*   `AttachID`, `DocID`, `FileName`, `FileType`, `StoragePath`, `Language`, `UploadedBy`, `UploadedAt`

#### 3.2.3 `T_DocTemplate`ï¼ˆå¸¸ç”¨æ–‡ä»¶å®šä¹‰ï¼‰

*   `TemplateID`, `TemplateCode`, `DocType`, `Name`
*   `NeedNotifyAgent`
*   `CaseTypeFilter`, `PatentCategoryFilter`
*   `StatusEffect`, `StatusRestore`
*   `DeadlineTemplateCode`ï¼ˆå¯¹åº” T\_TaskTemplateï¼‰
*   `ReplyToTemplateCode`
*   `FeeDraftType`ï¼ˆå¯¹åº” T\_FeeDraft.Typeï¼‰
*   `InputFieldList`ï¼ˆJSONï¼šéœ€åœ¨çŠ¶æ€ä¿¡æ¯åŒºè¾“å…¥/æ›´æ–°çš„å­—æ®µåˆ—è¡¨ï¼‰
*   `FeeItemList`ï¼ˆJSONï¼šé»˜è®¤è´¹ç”¨é¡¹ç›®æ¸…å•ï¼‰
*   `PlainTemplateID_CN/EN`ï¼ˆWord æ¨¡æ¿ IDï¼‰
*   `IsSystemCritical`, `Enabled`

### 3.3 UI & æ ¡éªŒæ‘˜è¦

*   å‘å¯¼ Step1ï¼šé€‰ Caseã€DocTypeã€Templateã€DispatchDateï¼›
*   Step2ï¼šé€æ¡ˆ/é€è¡Œç¼–è¾‘ DocNameã€ForwardDateã€æŒ‚å·å·ã€NeedReply/Deadline/ReplyDateã€Remarkã€ReplyToIDã€æ‰©å±•å­—æ®µï¼›
*   æ ¡éªŒï¼šDocName/DispatchDate å¿…å¡«ï¼›éœ€å›å¤æ—¶ Deadline å¿…å¡«ï¼›æ¨¡æ¿æœ‰ DeadlineTemplateCode æ—¶è‡ªåŠ¨è®¡ç®—æ—¶é™ï¼›InputFieldList ä¸­å­—æ®µå¿…é¡»ä¸ Case å­—æ®µæˆ– ExtraData æ˜ å°„å¯¹åº”ï¼›
*   ä¿å­˜æ—¶ï¼š
    *   å†™å…¥ `T_Document`
    *   å°† InputFieldList ä¸­çš„å­—æ®µå†™å› `T_Case`ï¼ˆå¦‚æˆæƒä¿¡æ¯/å—ç†å·ç­‰ï¼‰
    *   è§¦å‘æ—¶é™ä»»åŠ¡ç”Ÿæˆï¼ˆæ¨¡å—ä¸‰ï¼‰
    *   è§¦å‘è´¹ç”¨è‰å•ç”Ÿæˆï¼ˆæ¨¡å—å››ï¼‰

### 3.4 é‚®å¯„ & äº¤æ¥ & ä¿¡å°

*   **é‚®å¯„ä¿¡æ¯ç™»è®°**ï¼šæ‰¹é‡æ›´æ–° `OutgoingRegNo`ï¼›
*   **æ–‡ä»¶äº¤æ¥å•**ï¼š
    *   `T_DocDispatch` + `T_DocDispatchLine` è®°å½•æŸå®¢æˆ·åœ¨æŸæ—¥æœŸé‚®å¯„çš„ä¸­é—´æ–‡ä»¶åˆ—è¡¨ï¼›
*   **ä¿¡å°æ‰“å°**ï¼š
    *   æ ¹æ® Case çš„ DocAddressID/BillAddressID/Client é»˜è®¤åœ°å€/ç”³è¯·äººåœ°å€ï¼Œç»„åˆæˆæ”¶ä»¶äººä¿¡æ¯ï¼Œè°ƒç”¨æ¨¡æ¿è¾“å‡ºå°é¢ã€‚

***

## 4. æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†ï¼ˆDeadline & Docketï¼‰

### 4.1 èŒƒå›´

*   æ—¶é™æ¨¡æ¿é…ç½®ï¼ˆæ—¶é™ç±»å‹ã€è®¡ç®—è§„åˆ™ã€æé†’è§„åˆ™ã€é»˜è®¤è´£ä»»äººï¼‰
*   æ—¶é™ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆï¼ˆæ¥è‡ªä¸­é—´æ–‡ä»¶ã€æ¡ˆä»¶äº‹ä»¶ã€å¹´è´¹ä»»åŠ¡ç­‰ï¼‰
*   æ‰‹åŠ¨åˆ›å»º/ç¼–è¾‘/åˆ é™¤ä»»åŠ¡
*   æˆ‘çš„ä»»åŠ¡ & ç›‘ç£ä»»åŠ¡è§†å›¾
*   ç”³è¯·è´¹/å®å®¡è¯·æ±‚æ—¶é™æ£€ç´¢
*   ä»Šæ—¥æé†’ & ç™»å½•æ—¶æç¤º
*   æ—¶é™æ“ä½œæ—¥å¿—è®°å½•

### 4.2 å…³é”®æ•°æ®æ¨¡å‹

#### 4.2.1 `T_TaskTemplate`

*   `TaskTemplateID`, `Code`, `Name`
*   `DeadlineBase` Enumï¼šFILING\_DATE / RECEIVE\_DATE / DISPATCH\_DATE / PUB\_DATE / GRANT\_DATE / CASE\_EVENT / CUSTOM
*   `AddYears`, `AddMonths`, `AddDays`
*   `InnerOffsetDays`
*   `RemindBase` Enum: INNER / DEADLINE
*   `R1_OffsetDays`, `R2_OffsetDays`, `R3_OffsetDays`
*   `DailyRemind`
*   `DefaultWorkerRole`
*   `DefaultSupervisorID`
*   `IsActive`

#### 4.2.2 `T_Task`

*   `TaskID`, `CaseID`, `DocID`, `TemplateCode`, `Type`, `Summary`
*   `BaseDate`, `Deadline`, `InnerDeadline`
*   `Remind1/2/3`, `DailyRemindFrom`, `DailyRemind`
*   `WorkerID`, `SupervisorID`
*   `Status` Enumï¼šOPEN / DONE / CANCELLED
*   `DoneDate`
*   `IsWrittenOff`
*   `Remark`
*   å®¡è®¡

#### 4.2.3 `T_TaskLog`

*   `TaskLogID`, `TaskID`, `Action`ï¼ˆCREATE/UPDATE/CHANGE\_WORKER/...ï¼‰ã€`ActionBy`, `ActionAt`, `OldValue`, `NewValue`, `Comment`

### 4.3 è‡ªåŠ¨ä»»åŠ¡ç”Ÿæˆï¼ˆæ‘˜è¦ï¼‰

*   ä¸­é—´æ–‡ä»¶æ¨¡æ¿æœ‰ `DeadlineTemplateCode` æ—¶ï¼š
    *   ç”¨ `T_TaskTemplate` + BaseDateï¼ˆé€šå¸¸ DispatchDate æˆ– OfficialDueDateï¼‰è®¡ç®— Deadline/InnerDeadline/Remind\*ï¼›
    *   ç”Ÿæˆ `T_Task`ï¼ŒæŒ‚åœ¨ CaseID + DocID ä¹‹ä¸‹ã€‚
*   æ¡ˆä»¶äº‹ä»¶ï¼ˆæ–°æ¡ˆé€’äº¤ã€æˆæƒã€å¹´è´¹ä»»åŠ¡ï¼‰ï¼š
    *   è°ƒç”¨é€šç”¨å‡½æ•° `CreateTaskFromTemplate(caseId, templateCode, baseDateSource, ...)`ã€‚
*   å¹´è´¹ä»»åŠ¡ï¼š
    *   T\_AnnuityTask ä¸ T\_Task å¯åŒæ—¶å­˜åœ¨ï¼šå‰è€…ä¸ºå¹´è´¹ä¸šåŠ¡ä»»åŠ¡ï¼Œåè€…ä¸ºå¹´è´¹æé†’è§†è§’ã€‚

### 4.4 ä»»åŠ¡è§†å›¾ & æ—¥å¿—

*   â€œæˆ‘çš„ä»»åŠ¡â€ï¼šæŒ‰ WorkerID=å½“å‰ç”¨æˆ·ç­›é€‰ï¼›å¯æ‰¹é‡æ ¸é”€/å–æ¶ˆæ ¸é”€/è°ƒæ•´æé†’ï¼›
*   â€œç›‘ç£ä»»åŠ¡â€ï¼šæŒ‰ SupervisorID=å½“å‰ç”¨æˆ· & Worker è¿‡æ»¤ï¼›
*   ç™»å½•é¦–é¡µâ€œä»Šæ—¥æé†’â€ï¼šRemind\* = ä»Šæ—¥æˆ– DailyRemindFrom â‰¤ ä»Šæ—¥ â‰¤ Deadline çš„ä»»åŠ¡ï¼›
*   æ‰€æœ‰æ“ä½œå†™ `T_TaskLog`ã€‚

***

## 5. æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†ï¼ˆFee Managementï¼‰

### 5.1 èŒƒå›´

*   æ ‡å‡†è´¹ç‡è¡¨ç»´æŠ¤ï¼ˆç”³è¯·è´¹/æˆæƒè´¹/å¹´è´¹/ä¸­é—´è´¹/æ— æ•ˆè´¹/é¡¾é—®è´¹ç­‰ï¼‰
*   è´¹ç”¨è‰å•ï¼ˆæŒ‰æ¡ˆå· + ç±»å‹ï¼‰ï¼Œå«å®˜è´¹/æœåŠ¡è´¹/æ‚è´¹
*   å®˜è´¹æ¸…å•ï¼ˆå¯¹å®˜æ–¹ç¼´è´¹ä¸€å¯¹å¤šæ¸…å•ï¼‰
*   æˆæƒè´¹/å¹´ç™»å°è´¹ç®¡ç†
*   å¹´è´¹ä»»åŠ¡ & å¹´è´¹è‰å•/æ¸…å•
*   ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•
*   æ”¯å‡ºè´¹ç”¨ç®¡ç†ï¼ˆç¬¬ä¸‰æ–¹æˆæœ¬ï¼‰

### 5.2 å…³é”®æ•°æ®æ¨¡å‹

*   `T_FeeRate`ï¼šGroupã€Codeã€Nameã€FeeTypeã€CountryCodeã€PatentCategoryã€CaseTypeã€DefaultAmount/DefaultCurrencyã€AllowReduction/AllowDiscountã€CalcModeã€CalcParams
*   `T_FeeDraft`ï¼š`CaseID`, `Type`(APPLY\_FEE/GRANT\_FEE/ANNUITY\_FEE/INVALID\_FEE/CONSULT\_FEE/...), `Currency`, `TotalGov/Service/Misc`, `Status`
*   `T_FeeItem`ï¼š`DraftID`, `RateID`, `FeeCode/Name`, `FeeType`, `YearNo`, `Quantity`, `UnitPrice`, `Amount`, `Currency`, `ExchangeRate`, `LocalAmount`, `IsAuto`, `IsReduced`, `IsDiscounted`
*   `T_PayList`ï¼š`PayListID`, `ListNo`, `Type`, `FlowDir`, `PlannedPayDate`, `ActualPayDate`, `Currency`, `TotalAmt`, `InvoiceNoFrom/To`, `Status`
*   `T_GovPayment`ï¼š`GovPayID`, `PayListID`, `CaseID`, `ItemID`, `FeeCode`, `YearNo`, `PlannedAmt`, `PlannedCurrency`, `PaidAmt`, `PaidCurrency`, `VoucherNo`, `InvoiceNo`, `PlannedPayDate`, `PaidDate`, `Remark`
*   `T_GrantFeeTask` / `T_AnnuityTask`ï¼šæˆæƒè´¹/å¹´è´¹ä»»åŠ¡ + çŠ¶æ€/æŒ‡ç¤º/é€šçŸ¥/è‰å•æ ‡è®°
*   `T_CaseReceipt`ï¼šæ¡ˆä»¶æ”¶æ¬¾è®°å½•ï¼ˆåº”æ”¶/å®æ”¶/æ¬ æ¬¾/å¯ææˆ/æ˜¯å¦é¢„æ”¶ç­‰ï¼‰
*   `T_Expense`ï¼šæ¡ˆä»¶æ”¯å‡ºï¼ˆç¿»è¯‘ã€æ£€ç´¢æ•°æ®åº“ã€å·®æ—…ç­‰ï¼‰

### 5.3 è‡ªåŠ¨é‡‘é¢è®¡ç®—

*   æŒ‰ `T_FeeRate.CalcMode` å’Œæ¡ˆä»¶å±æ€§ï¼ˆYearNoã€ClaimCountã€SpecPagesï¼‰è®¡ç®— UnitPrice/Amountï¼›
*   å¯¹å®˜è´¹ï¼šè‹¥ `AllowReduction=true`ï¼ŒæŒ‰ `Case.FeeReduction` è®¡ç®—ï¼›
*   å¯¹æœåŠ¡è´¹å¯åœ¨è´¦å•å±‚åº”ç”¨ `DiscountRate`ã€‚

***

## 6. æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦ï¼ˆBilling, Receivables, Dunning & Bad Debtï¼‰

### 6.1 èŒƒå›´

*   è´¦å•ç”Ÿæˆï¼ˆä»è‰å•/æ‰‹å·¥ï¼‰
*   æ”¶æ¬¾ç™»è®° & å†²é”€
*   é¢„æ”¶æ¬¾ç®¡ç†ï¼ˆåœºæ™¯ Fï¼‰
*   å‚¬æ¬¾å• & å‚¬æ¬¾å‡½
*   åè´¦æ ‡è®° & åè´¦åæ”¶å›å¤„ç†

### 6.2 å…³é”®æ•°æ®æ¨¡å‹

*   `T_Bill`ï¼š`BillID`, `BillNo`, `ClientID`, `Direction=AR/AP`, `BillDate`, `DueDate`, `Currency`, `ExchangeRate`, `DiscountRate`, `TotalGov/Service/Misc`, `Amount`, `Balance`, `Status`, `IsBadDebt`, `BadDebtDate`, `BadDebtReason`
*   `T_BillItem`ï¼š`BillItemID`, `BillID`, `CaseID`, `DraftID`, `FeeItemID`, `FeeCode/Name`, `YearNo`, `FeeType`, `Quantity`, `UnitPrice`, `Amount`, `Currency`, `LocalAmount`, `Remark`
*   `T_Payment`ï¼š`PaymentID`, `ClientID`, `PayNo`, `PayDate`, `Currency`, `Amount`, `ExchangeRate`, `PayMethod`, `BankRefNo`, `Remark`
*   `T_PaymentLine`ï¼š`PaymentLineID`, `PaymentID`, `CaseID`(å¯ç©º), `RawAmount`, `AllocatedAmt`, `BalanceAmt`, `Remark`
*   `T_Offset`ï¼š`OffsetID`, `PaymentLineID`, `BillID`, `OffsetAmt`, `OffsetDate`, `IsReversed`, `ReversedAt`, `ReversedBy`
*   `T_Dunning`ï¼š`DunningID`, `DunningNo`, `ClientID`, `ToDate`, `Currency`, `TotalAmt`, `Status`, `SentDate`, `Remark`
*   `T_DunningLine`ï¼š`DunningLineID`, `DunningID`, `BillID`, `BillNo`, `BillDate`, `DueDate`, `OutstandingAmt`, `Remark`

### 6.3 æ ¸å¿ƒé€»è¾‘æ‘˜è¦

*   ä»è‰å•ç”Ÿæˆè´¦å•ï¼šæŒ‰å®¢æˆ·èšåˆå¤šä¸ª FeeDraft/FeeItem â†’ ä¸€å¼ æˆ–å¤šå¼  `T_Bill`ï¼›
*   æ”¶æ¬¾ï¼š`T_Payment + T_PaymentLine`ï¼›
*   å†²é”€ï¼š`T_Offset` å¯¹ `T_Bill` åšéƒ¨åˆ†æˆ–å…¨é¢æŠµæ‰£ï¼Œæ›´æ–° `Balance` & `Status`ï¼›
*   é¢„æ”¶æ¬¾ï¼šPaymentLineæ—  BillID æ—¶è§†ä¸ºé¢„æ”¶ï¼›åç»­è´¦å•é€šè¿‡ Offset é€æ­¥æ¶ˆè€—ï¼›
*   å‚¬æ¬¾ï¼šæŒ‰ ToDate & Status=UNSETTLED/PARTIALLY\_SETTLED ç”Ÿæˆ `T_Dunning/T_DunningLine` + å‚¬æ¬¾å‡½ï¼›
*   åè´¦ï¼šå¯¹é•¿æ—¶é—´æœªæ”¶è´¦å•è®¾ç½® `IsBadDebt=true, Status=BAD_DEBT`ï¼Œåœ¨åº”æ”¶æŠ¥è¡¨ä¸­æ’é™¤ï¼›åè´¦åä»å¯ç™»è®°æ”¶æ¬¾ & å†²é”€ã€‚

***

## 7. æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ç®¡ç†ï¼ˆAgent Commission Managementï¼‰

### 7.1 èŒƒå›´

*   ææˆè§„åˆ™é…ç½®ï¼ˆæŒ‰ CaseType/FlowDir/Category/ClientGroupï¼‰
*   ææˆè®°å½•ç”Ÿæˆï¼ˆä»æœåŠ¡è´¹è´¦å•ï¼‰
*   â€œæ¬¾åˆ°åæ‰èƒ½ç»“ç®—â€/â€œæ¡ˆä»¶å¯ä»¥ç»“ç®—é…¬é‡‘â€é€»è¾‘
*   ææˆç»“ç®—æ‰¹æ¬¡ & ç»“ç®—æŠ¥è¡¨

### 7.2 å…³é”®æ•°æ®æ¨¡å‹

*   `T_CommissionRule`ï¼š`RuleID`, `CaseType`, `FlowDir`, `PatentCategory`, `ClientGroup`, `Stage1Rate`, `Stage2Rate`, `BaseMode`, `BaseFixedAmt`, `IsActive`, `Remark`
*   `T_Commission`ï¼š`CommID`, `CaseID`, `AgentID`, `RuleID`, `BaseFee`, `S1_Rate/Amt/Done`, `S2_Rate/Amt/Done`, `WaitPay`, `ForceSettle`, `Remark`
*   `T_CommissionSettlement`ï¼š`SettleID`, `SettleNo`, `PeriodFrom/To`, `CreatedAt/By`, `Remark`
*   `T_CommissionSettleLine`ï¼š`SettleLineID`, `SettleID`, `CommID`, `AgentID`, `Stage=S1/S2`, `Amount`, `CaseID`, `BillID`, `PaymentID`

### 7.3 æµç¨‹æ‘˜è¦

*   åœ¨è´¦å•ç”Ÿæˆæ—¶ï¼šç»Ÿè®¡æŸæ¡ˆåœ¨è¯¥è´¦å•ä¸­çš„æœåŠ¡è´¹æ€»é¢ â†’ ä¾è§„åˆ™ç”Ÿæˆ/æ›´æ–° `T_Commission`ï¼ˆå¯ç´¯åŠ å„é˜¶æ®µï¼šæ–°æ¡ˆ/OA/æˆæƒ/å¹´è´¹/æ— æ•ˆ/é¡¾é—®ç­‰ï¼‰ï¼›
*   å¯ç»“ç®—åˆ¤å®šï¼šæŒ‰æ¡ˆä»¶çŠ¶æ€ + æ”¶æ¬¾æ¯”ä¾‹ + WaitPay/ForceSettleï¼›
*   ç»“ç®—æ‰¹æ¬¡ï¼šé€‰å–å¯ç»“ç®—è®°å½• â†’ å†™ `T_CommissionSettlement/SettleLine`ï¼Œå¹¶æ ‡è®° `S1_Done` or `S2_Done`ï¼›
*   å¯¼å‡ºæŠ¥è¡¨ï¼šæ¯ä¸ªä»£ç†äººå¯¹åº”æœŸé—´å†…çš„æ¡ˆä»¶ä¸ææˆé‡‘é¢åˆ—è¡¨ã€‚

***

## 8. æ¨¡å—ä¸ƒï¼šé¡¾é—® / æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®ï¼ˆConsulting & Search Projectsï¼‰

### 8.1 èŒƒå›´

*   ä¸èµ°å®˜æ–¹ä¸“åˆ©æµç¨‹çš„é¡¹ç›®å‹æœåŠ¡ï¼ˆé¡¾é—®/ç°æœ‰æŠ€æœ¯æ£€ç´¢/FTO/åŸ¹è®­/DD ç­‰ï¼‰
*   ä»…æœ‰æœåŠ¡è´¹ï¼ˆæ— å®˜è´¹ï¼‰ï¼Œä¹Ÿå¯èƒ½æœ‰ç¬¬ä¸‰æ–¹æ”¯å‡º
*   å†…éƒ¨ä»»åŠ¡ç®¡ç†ï¼ˆå¯é€‰ï¼‰
*   æœåŠ¡è´¹è‰å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ ææˆ

### 8.2 æ•°æ®æ¨¡å‹

*   `T_Case`ï¼šCaseType=CONSULTING/SEARCHï¼Œè®°å½•é¡¹ç›®èŒƒå›´ã€å®¢æˆ·ã€è´Ÿè´£äººã€é¢„ä¼°å·¥æ—¶ç­‰ã€‚
*   `T_Task`ï¼šå†…éƒ¨ä»»åŠ¡ï¼ˆscoping/search/analysis/report/presentation ç­‰ï¼‰ï¼Œä¸å½±å“è´¹ç”¨ã€‚
*   `T_Expense`ï¼šé¡¹ç›®æ”¯å‡ºï¼ˆæ£€ç´¢æ•°æ®åº“ã€ç¿»è¯‘ã€å·®æ—…ã€æ´»åŠ¨æˆæœ¬ç­‰ï¼‰ã€‚
*   `T_FeeDraft/T_FeeItem`ï¼šé¡¾é—®/æ£€ç´¢æœåŠ¡è´¹è‰å•ï¼ˆæŒ‰å›ºå®šæŠ¥ä»·/æŒ‰å°æ—¶è®¡è´¹/æ··åˆï¼‰ã€‚
*   `T_Bill/T_Payment/T_Offset/T_CaseReceipt/T_Commission*`ï¼šä¸ä¸»çº¿å®Œå…¨ç›¸åŒã€‚

***

## 9. æ¨¡å—å…«ï¼šè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨æ€»è§ˆ

### 9.1 è®¾ç½®ï¼ˆSettingsï¼‰

*   **ä¸»æ•°æ®**
    *   `T_Client`/`T_ClientAddress`/`T_ClientContact`
    *   `T_Applicant`
    *   `T_Country`
    *   `T_BioDepositUnit`
*   **å‚æ•°ç±»**
    *   æ ‡å‡†è´¹ç‡ `T_FeeRate`
    *   æ—¶é™æ¨¡æ¿ `T_TaskTemplate`
    *   æ–‡æ¡£æ¨¡æ¿ `T_Template`ï¼ˆWord æ¨¡æ¿å…ƒæ•°æ®ï¼ŒæŒ‡å‘ç‰©ç†æ–‡ä»¶ï¼‰
    *   ä¿¡å¤´é…ç½® `T_LetterHead`
    *   å…¨å±€å‚æ•°ï¼ˆå¹´è´¹å®½é™ã€æé†’ç­–ç•¥ç­‰ï¼‰

### 9.2 æŸ¥è¯¢ï¼ˆSearchï¼‰

*   æ¡ˆä»¶é«˜çº§æŸ¥è¯¢ï¼šæ•°åä¸ªå­—æ®µç»„åˆè¿‡æ»¤ + ç»“æœè·³è½¬åˆ° Case/Fee/Task/Bill/Commission ç­‰æ¨¡å—ï¼›
*   ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ & æ¸…å•è¾“å‡ºï¼šæŒ‰æ–‡å·/æ—¥æœŸ/ç±»å‹/æ¡ˆä»¶è¿‡æ»¤ï¼›
*   è´¹ç”¨æƒ…å†µæŸ¥è¯¢ï¼šä¸ŠåŠéƒ¨å®˜è´¹ç¼´è´¹ä¸€è§ˆï¼ˆT\_GovPaymentï¼‰ï¼Œä¸‹åŠéƒ¨ä¸ªæ¡ˆæ”¶æ¬¾ä¸€è§ˆï¼ˆT\_CaseReceiptï¼‰ï¼›
*   æ—¶é™æ£€ç´¢ï¼šç”³è¯·è´¹æ—¶é™ã€å®å®¡æ—¶é™ã€å¹´è´¹æ—¶é™ä¸“ç”¨æ£€ç´¢é¡µé¢ã€‚

### 9.3 æŠ¥è¡¨ï¼ˆReportsï¼‰

*   æ¡ˆä»¶ç»Ÿè®¡ï¼šæŒ‰å®¢æˆ·/ç”³è¯·äºº/å›½å®¶/åœ°åŒº/ä»£ç†äºº/ç±»åˆ«/å¹´ä»½ç»Ÿè®¡æ•°é‡ä¸ä»£ç†è´¹ï¼›
*   è´¹ç”¨ç»Ÿè®¡ï¼šæŒ‰ç±»å‹/å®¢æˆ·/æ¡ˆä»¶ç»Ÿè®¡æ”¶å…¥/æ”¯å‡ºï¼›
*   å¹´è´¹ç»Ÿè®¡ï¼šæŒ‰å¹´ä»½/å›½å®¶/å®¢æˆ·ç»Ÿè®¡å¹´è´¹æƒ…å†µï¼›
*   è´¦å•/åº”æ”¶/é€¾æœŸ/åè´¦åˆ†æï¼šæŒ‰å®¢æˆ·/è´¦é¾„ç­‰ç»´åº¦ï¼›
*   ææˆç»Ÿè®¡ï¼šæŒ‰ä»£ç†äºº/æ—¶é—´æ®µæ±‡æ€» S1/S2 ææˆï¼›
*   æ‰€æœ‰æŠ¥è¡¨å¯å¯¼å‡ºä¸º Excel/HTMLï¼Œéƒ¨åˆ†å¯ç”Ÿæˆ Word è¡¨æ ¼ï¼ˆé€šè¿‡æ¨¡æ¿ï¼‰ã€‚

***

## 10. è¿ç§»ä¸æŠ€æœ¯è¯´æ˜ï¼ˆMigration & Technical Notesï¼‰

*   æ—§ç‰ˆ C/S æ•°æ®åº“ â†’ æ–° RDBMS ï¼ˆSQL Server â†’ Postgres/MySQLï¼‰è¿ç§»æ˜ å°„ï¼›
*   æ–‡æ¡£æ¨¡æ¿è¿ç§»ï¼šå°†æ—§çš„ Word æ¨¡æ¿æ–‡å­—ä¸­çš„ OLE åŸŸè½¬æ¢ä¸º docxtpl å ä½ç¬¦ï¼›
*   æ‰«ææ–‡ä»¶è¿ç§»ï¼šæ—§ç³»ç»Ÿä¸­çš„æ–‡ä»¶è·¯å¾„/å‘½å â†’ æ–°ç³»ç»Ÿçš„ T\_DocAttachment + ç»Ÿä¸€å­˜å‚¨è·¯å¾„/æ¡¶ï¼›
*   ä¸å®˜æ–¹å®¢æˆ·ç«¯çš„æ¥å£ï¼š
    *   ä¿æŒå¯¼å‡ºæ–‡ä»¶ç»“æ„å…¼å®¹ï¼ˆExcel/XMLï¼‰
    *   åœ¨ B/S æ¶æ„ä¸‹ç”±ç”¨æˆ·ä¸‹è½½æ–‡ä»¶ï¼Œå¹¶æ‰‹åŠ¨å¯¼å…¥å®˜æ–¹å®¢æˆ·ç«¯ã€‚

***

## Part IIï¼šE2E åœºæ™¯ â€“ æ—¶é—´çº¿ + å­—æ®µçº§æ•°æ®æµ

> ä»¥ä¸‹åœºæ™¯å‡å·²åœ¨å‰é¢å¯¹æ¨¡å—è¿›è¡Œé™æ€å®šä¹‰ï¼›æ­¤å¤„æŒ‰æ—¶é—´çº¿å¼ºè°ƒâ€œ**å“ªä¸ªåŠ¨ä½œæ”¹äº†å“ªäº›è¡¨ & å­—æ®µ**â€ã€‚

***

## åœºæ™¯ Aï¼šæ–°æ¡ˆç”³è¯· â€“ ä»ç«‹æ¡ˆåˆ°ç”³è¯·è´¹æ”¶å®Œ + ä¸€æ¬¡ææˆ

**ä¸»çº¿è¡¨ï¼š** T\_Case â†’ T\_Task(APPLY\_FEE\_LIMIT) â†’ T\_FeeDraft(APPLY\_FEE) â†’ T\_PayList/T\_GovPayment â†’ T\_Bill/T\_BillItem â†’ T\_Payment/T\_Offset/T\_CaseReceipt â†’ T\_Commission

ï¼ˆç•¥å†™ï¼Œä¿ç•™å…³é”®èŠ‚ç‚¹ï¼Œä»¥èŠ‚çœç¯‡å¹…ï¼‰

1.  **æ–°æ¡ˆç«‹æ¡ˆ**
    *   `T_Case` æ–°å¢ï¼šCaseType=NORMAL, Status=NOT\_FILED, RecvDate, ApplicantKind, FeeReduction, IsFeeMonitorâ€¦
    *   `T_CaseApplicant/T_CaseInventor/T_Priority` æ’å…¥ã€‚
2.  **æ¡ˆä»¶é€’äº¤**
    *   æ‰¹å¤„ç†ï¼š`T_Case.Status: NOT_FILEDâ†’WAITING_RECEIPT`ï¼Œå¯è®¾ç½® `HasExamRequest`ã€‚
3.  **ç”³è¯·è´¹æ—¶é™ä»»åŠ¡**
    *   ä½¿ç”¨ `T_TaskTemplate(APPLY_FEE_LIMIT)`ï¼›
    *   ç”Ÿæˆ `T_Task`: BaseDate/FilingDate/Deadline/InnerDeadline/Remind\*ï¼ŒWorkerID/ SupervisorIDã€‚
4.  **ç”³è¯·è´¹è‰å•**
    *   æ ¹æ® `T_FeeRate` ä¸æ¡ˆä»¶å‚æ•°ç”Ÿæˆ `T_FeeDraft(Type=APPLY_FEE)` + å¤šæ¡ `T_FeeItem`ï¼ˆå®˜è´¹+æœåŠ¡è´¹ï¼‰ã€‚
5.  **å®˜è´¹æ¸…å• & ç¼´è´¹**
    *   ä» FeeType=GOV çš„ `T_FeeItem` ç”Ÿæˆ `T_PayList(Type=APPLY)` + `T_GovPayment`ï¼›
    *   ç¼´è´¹åå¡« `PaidAmt/PaidDate/InvoiceNo/VoucherNo`ã€‚
6.  **å®¢æˆ·è´¦å•**
    *   ä»ç”³è¯·è´¹è‰å•ç”Ÿæˆ `T_Bill(Direction=AR)`+`T_BillItem`ï¼›
    *   åˆè®¡ `TotalGov/TotalService/TotalMisc/Amount/Balance`ã€‚
7.  **æ”¶æ¬¾ & å†²é”€**
    *   `T_Payment/T_PaymentLine` è®°å½•å®¢æˆ·ä»˜æ¬¾ï¼›
    *   `T_Offset` æŠŠ PaymentLine.Amount åˆ†é…åˆ°è´¦å• â†’ æ›´æ–° `T_Bill.Balance/Status` & `T_PaymentLine.BalanceAmt`ï¼›
    *   æ‹†åˆ† Offset åˆ°å„ BillItem â†’ æ›´æ–° `T_CaseReceipt(ReceivableAmt/ReceivedAmt/IsArrears)`ã€‚
8.  **ä¸€æ¬¡ææˆ**
    *   ä»æœåŠ¡è´¹æ˜ç»†æ±‡æ€» `ServiceSum` â†’ æŒ‰ `T_CommissionRule` ç®— `BaseFee/S1_Rate/S1_Amt/S2_â€¦`ï¼›
    *   å†™å…¥/ç´¯åŠ åˆ° `T_Commission`;
    *   æ»¡è¶³çŠ¶æ€ & æ”¶æ¬¾æ¡ä»¶åï¼Œåœ¨ `T_CommissionSettlement` ä¸­ç»“ç®— Stage1ã€‚

***

## åœºæ™¯ Bï¼šå®¡æŸ¥æ„è§/OA â€“ ä»æ¥æ–‡åˆ°ç­”å¤ + è´¹ç”¨ + ææˆ

ä¸»è¡¨ï¼šT\_Document(OA\_NOTICE/OA\_REPLY) â†’ T\_Task(OA\_REPLY\_LIMIT) â†’ T\_FeeDraft(OA\_FEE) â†’ T\_Bill/T\_CaseReceipt/T\_Commission

1.  æ”¶åˆ° OA é€šçŸ¥ï¼š`T_Document(OA_NOTICE)`ï¼›`T_Case.Status: SUB_EXAMâ†’OA1`ï¼›
2.  è‡ªåŠ¨ç”Ÿæˆ `T_Task(OA_REPLY_LIMIT)`ï¼šDeadline/InnerDeadline/Remind\*ï¼›
3.  æäº¤ OA ç­”å¤ï¼š`T_Document(OA_REPLY, ReplyToID=OA_NOTICE.DocID)`ï¼›`T_Case.Status: OA1â†’SUB_EXAM`ï¼›
4.  è‡ªåŠ¨æ ¸é”€ OA æ—¶é™ä»»åŠ¡ï¼š`T_Task.Status=OPENâ†’DONE`, `DoneDate=ReplyDate`;
5.  OA è´¹ç”¨è‰å•ï¼š`T_FeeDraft(Type=OA_FEE)` + FeeItem(GOV? + SERVICE)ï¼›
6.  è‹¥æœ‰å®˜æ–¹ OA è´¹åˆ™èµ°å®˜è´¹æ¸…å•+ç¼´è´¹ï¼›
7.  ä»è‰å•ç”Ÿæˆè´¦å•ï¼Œæ”¶æ¬¾ & å†²é”€ & `T_CaseReceipt` æ›´æ–°ï¼›
8.  OA æœåŠ¡è´¹åŠ å…¥ `T_Commission.BaseFee`ï¼ˆç´¯åŠ æˆ–å•ç‹¬è®°å½•ï¼‰ã€‚

***

## åœºæ™¯ Cï¼šPCT å›½é™… â†’ å›½å®¶é˜¶æ®µ

ä¸»è¡¨ï¼šT\_Case(PCT\_INTL) â†’ T\_PCTNationalPlan â†’ T\_Task(PCT\_NATIONAL\_ENTRY\_LIMIT) â†’ T\_Case(PCT\_NATIONAL) â†’ åœºæ™¯ A æµç¨‹é‡å¤

1.  PCT å›½é™…æ¡ˆç«‹æ¡ˆï¼š`T_Case(CaseType=PCT_INTL)` å¡«æ²Ÿé€š RO/ISA/IPER/IntlAppNo/IntlAppDate ç­‰ï¼›
2.  å›½å®¶é˜¶æ®µè®¡åˆ’ï¼š`T_PCTNationalPlan` ä¸ºæ¯ä¸€ç›®æ ‡å›½æ’å…¥ä¸€è¡Œï¼Œå¹¶è®¡ç®— `EntryDeadline`ï¼›
3.  ä¸ºæ¯è¡Œç”Ÿæˆ `T_Task(PCT_NATIONAL_ENTRY_LIMIT)`ï¼›
4.  å®¢æˆ·æŒ‡ç¤º ENTER/ABANDON â†’ æ›´æ–° `ClientInstruction/Status`ï¼›
5.  å¯¹ ENTER è¡Œï¼Œä»è®¡åˆ’åˆ›å»º `T_Case(CaseType=PCT_NATIONAL, ParentCaseID=PCT_INTL.CaseID)`ï¼Œå¤åˆ¶åç§°/ç”³è¯·äºº/ä¼˜å…ˆæƒï¼›
6.  å…³é—­å¯¹åº” PCT\_NATIONAL\_ENTRY\_LIMIT ä»»åŠ¡ï¼›
7.  å¯¹å›½å®¶æ¡ˆï¼ŒæŒ‰åœºæ™¯ A æµç¨‹ï¼šé€’äº¤ â†’ ç”³è¯·è´¹è‰å• â†’ å®˜è´¹æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ ææˆã€‚

***

## åœºæ™¯ G0ï¼šæˆæƒåçš„è´¹ç”¨é“¾ï¼ˆæˆæƒè´¹/è¯ä¹¦è´¹/é¦–å¹´å¹´è´¹ï¼‰

ä¸»è¡¨ï¼šT\_Document(GRANT\_NOTICE) â†’ T\_Case â†’ T\_Task(GRANT\_CERT\_FEE\_LIMIT) â†’ T\_GrantFeeTask â†’ T\_FeeDraft(GRANT\_FEE) â†’ T\_PayList â†’ T\_Bill â†’ T\_Payment â†’ T\_Commission

1.  æˆæƒé€šçŸ¥ï¼š`T_Document(GRANT_NOTICE)`ï¼›å†™å› `T_Case.IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntil` & `Status=GRANTED`ï¼›
2.  ç”Ÿæˆ `T_Task(GRANT_CERT_FEE_LIMIT)`ï¼›
3.  æˆæƒè´¹ä»»åŠ¡ï¼š`T_GrantFeeTask(CaseID, Type=GRANT, DueDate, ClientInstruction, DraftGenerated)`ï¼›
4.  å®¢æˆ·æŒ‡ç¤º PAY/ABANDONï¼›
5.  å¯¹ PAYï¼šç”Ÿæˆæˆæƒè´¹é€šçŸ¥å‡½ + è‰å• `T_FeeDraft(Type=GRANT_FEE)`ï¼ˆç™»è®°è´¹/è¯ä¹¦è´¹/å°èŠ±ç¨+æœåŠ¡è´¹ï¼‰ï¼›
6.  ä»è‰å• GOV é¡¹ç”Ÿæˆ `T_PayList(Type=GRANT)` + `T_GovPayment`ï¼›
7.  ä»è‰å•æ•´ä½“ç”Ÿæˆ `T_Bill`ï¼›
8.  æ”¶æ¬¾â†’`T_Payment/T_Offset/T_CaseReceipt`ï¼›
9.  æˆæƒæœåŠ¡è´¹è®¡å…¥ `T_Commission`ã€‚

***

## åœºæ™¯ Dï¼šå¹´è´¹å‘¨æœŸï¼ˆå¤šå¹´åº¦æ»šåŠ¨ï¼‰

ä¸»è¡¨ï¼šT\_Case(IsFeeMonitor,FirstAnnuityYear,ValidUntil) â†’ T\_AnnuityTask(YearNo) â†’ T\_Document(ANNUITY\_NOTICE) â†’ T\_FeeDraft(ANNUITY\_FEE) â†’ T\_PayList/T\_GovPayment â†’ T\_Bill â†’ T\_Payment/T\_Offset/T\_CaseReceipt â†’ T\_Commission

å·²åœ¨æ¨¡å—å››ä¸­æ€»ç»“ï¼Œæ­¤å¤„ç•¥å†™å…³é”®èŠ‚ç‚¹ï¼ˆå‰æ–‡å·²è¯¦ç»†å±•å¼€ï¼‰ã€‚

***

## åœºæ™¯ Eï¼šæ— æ•ˆ / è¯‰è®¼

ä¸»è¡¨ï¼šT\_Case(NORMAL/PCT\_NATIONAL) â†’ T\_Case(INVALIDATION/LITIGATION,OriginalCaseID) â†’ T\_Document(...) â†’ T\_Task(...) â†’ T\_FeeDraft(INVALID\_FEE/LITIGATION\_FEE) â†’ T\_Bill/T\_Payment/T\_CaseReceipt â†’ T\_Commission â†’ åŸæ¡ˆçŠ¶æ€å˜æ›´

å·²åœ¨æ¨¡å—å…­ä¸­æ€»ç»“æ•°æ®æ¨¡å‹ï¼›E2E æ—¶åºå·²åœ¨ä¹‹å‰çš„åœºæ™¯ E æè¿°ï¼Œè¿™é‡Œä¿ç•™è¦ç‚¹ã€‚

***

## åœºæ™¯ Fï¼šé¢„æ”¶æ¬¾ & è´¦å•è°ƒæ•´

ä¸»è¡¨ï¼šT\_PaymentLine(BalanceAmt>0) â†’ T\_Bill â†’ T\_Offset â†’ T\_CaseReceipt(IsPrepayment)

1.  å®¢æˆ·å…ˆæ‰“é¢„ä»˜æ¬¾ â†’ `T_Payment/T_PaymentLine(BalanceAmt=é¢„æ”¶æ¬¾)`ï¼›
2.  åç»­ç”Ÿæˆè´¦å• â†’ ä½¿ç”¨è¯¥ PaymentLine åš Offset â†’ è´¦å• Balance æ¸…é›¶ï¼›
3.  æ‹†åˆ† Offset åˆ°å„æ¡ˆ â†’ æ›´æ–° `T_CaseReceipt`ï¼ŒæŠŠé¢„æ”¶æ¬¾è½¬æˆå¯¹åº”æ¡ˆå·çš„å®æ”¶ï¼›
4.  è‹¥é¢„æ”¶æ¬¾ > æ€»è´¦å•é‡‘é¢ï¼Œåˆ™ `T_PaymentLine.BalanceAmt` ä¿ç•™ä¸ºé¢„æ”¶ä½™é¢ï¼›å¿…è¦æ—¶é€šè¿‡è´Ÿè´¦å•/é€€æ¬¾æ“ä½œå°†å…¶å½’é›¶ã€‚

***

## åœºæ™¯ Gï¼šå‚¬æ¬¾ & åè´¦

ä¸»è¡¨ï¼šT\_Bill(Balance>0,DueDateè¿‡æœŸ) â†’ T\_Dunning/T\_DunningLine â†’ T\_Payment/T\_Offset â†’ T\_Bill.IsBadDebt

1.  åˆ°æœŸæœªæ”¶ï¼šæŒ‰ `DueDate <= ToDate` + `Balance>0` æ£€ç´¢é€¾æœŸè´¦å•ï¼›
2.  ç”Ÿæˆ `T_Dunning`ï¼ˆå®¢æˆ·ç«¯+ToDate+TotalAmtï¼‰å’Œ `T_DunningLine`ï¼›
3.  æ¨¡æ¿ç”Ÿæˆå‚¬æ¬¾å‡½ï¼Œå‘é€ï¼›
4.  å®¢æˆ·ä»˜æ¬¾ â†’ æ”¶æ¬¾+å†²é”€ â†’ æ›´æ–° `T_Bill.Balance/Status` & `T_CaseReceipt`ï¼›
5.  å¤šè½®å‚¬æ¬¾ï¼Œå¦‚ä»æœªæ”¶ â†’ æ ‡è®°åè´¦ï¼š`T_Bill.IsBadDebt=true, Status=BAD_DEBT, BadDebtDate/Reason`ï¼›
6.  åè´¦åä»å¯ç™»è®°æ”¶æ¬¾ & å†²é”€ï¼›æ˜¯å¦å–æ¶ˆåè´¦è§†è´¢åŠ¡ç­–ç•¥ã€‚

***

## åœºæ™¯ Hï¼šé¡¾é—® / æ£€ç´¢é¡¹ç›®

ä¸»è¡¨ï¼šT\_Case(CONSULTING/SEARCH) â†’ T\_Task(å†…éƒ¨) â†’ T\_Expense â†’ T\_FeeDraft(CONSULT/SEARCH\_FEE) â†’ T\_Bill/T\_Payment/T\_CaseReceipt â†’ T\_Commission

1.  é¡¾é—®/æ£€ç´¢ç«‹é¡¹ï¼š`T_Case(CaseType=CONSULTING/SEARCH)`ï¼›
2.  å†…éƒ¨ä»»åŠ¡ï¼š`T_Task` ç”¨äºç®¡ç†å†…éƒ¨å·¥ä½œï¼›
3.  æ”¯å‡ºï¼š`T_Expense` è®°å½•æˆæœ¬ï¼ˆæ£€ç´¢æ•°æ®åº“/ç¿»è¯‘/å·®æ—…ï¼‰ï¼›
4.  æœåŠ¡è´¹è‰å•ï¼š`T_FeeDraft(Type=CONSULT_FEE/SEARCH_FEE)` + FeeItem(Service/Misc)ï¼›
5.  è´¦å•/æ”¶æ¬¾/å†²é”€ï¼šä¸ä¸»çº¿ç›¸åŒï¼›
6.  ææˆï¼šæ ¹æ® `T_CommissionRule(CaseType=CONSULTING/SEARCH)` è®¡ç®— BaseFee & S1/S2ï¼Œå¹¶åœ¨ç»“ç®—æ‰¹æ¬¡ä¸­å¤„ç†ã€‚

***

## Part IIIï¼šå…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆ + å›¾ç¤º

***

## 17. å…¨ç”Ÿå‘½å‘¨æœŸæ–‡å­—æ€»è§ˆï¼ˆå·²åœ¨ä¸Šä¸€è½®æ•´ç†ï¼Œè¿™é‡Œæµ“ç¼©ï¼‰

> ä¸€ä»¶ NORMAL/PCT\_NATIONAL æ¡ˆçš„â€œç”Ÿå‘½æ•…äº‹â€ï¼š

1.  **é¡¹ç›®çº¿ç´¢ & ç«‹æ¡ˆ** â†’ T\_Case(NORMAL/PCT\_INTL/CONSULTINGâ€¦) + ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒ
2.  **é€’äº¤ â†’ å—ç†**ï¼š
    *   æ–°æ¡ˆé€’äº¤ â†’ Status=WAITING\_RECEIPT + ç”³è¯·è´¹æ—¶é™ä»»åŠ¡
    *   PCT å›½é™…æ¡ˆï¼šRO/ISA/WO/IPER â†’ PCT å›½å®¶é˜¶æ®µè®¡åˆ’ + è¿›å…¥æ—¶é™ä»»åŠ¡
3.  **å®¡æŸ¥/OA**ï¼š
    *   æ”¶ OA é€šçŸ¥ â†’ ä¸­é—´æ–‡ä»¶ + OA ç­”å¤æ—¶é™ä»»åŠ¡
    *   æäº¤ OA ç­”å¤ â†’ å»æ–‡ + ä»»åŠ¡æ ¸é”€ï¼ŒçŠ¶æ€å›å®å®¡ä¸­
4.  **PCT â†’ å›½å®¶é˜¶æ®µ**ï¼š
    *   PCT å›½é™…æ¡ˆè®¡åˆ’å¤šå›½ â†’ ä¸ºæ¯ä¸ª ENTER å›½ç”Ÿæˆ PCT\_NATIONAL æ¡ˆ â†’ æŒ‰æ–°æ¡ˆè·¯å¾„èµ°
5.  **æˆæƒ**ï¼š
    *   æˆæƒé€šçŸ¥ â†’ å†™å› Issue/Grant/Cert/FirstAnnuityYear/ValidUntil + æˆæƒè´¹æ—¶é™ä»»åŠ¡
6.  **æˆæƒè´¹ç”¨ & å¹´ç™»å°è´¹**ï¼š
    *   æˆæƒè´¹ä»»åŠ¡ â†’ æˆæƒè´¹è‰å• â†’ å®˜è´¹æ¸…å• â†’ å®¢æˆ·è´¦å• â†’ æ”¶æ¬¾ â†’ æˆæƒé˜¶æ®µææˆ
7.  **å¹´è´¹å¾ªç¯ï¼ˆå¤šå¹´ï¼‰**ï¼š
    *   åˆå§‹åŒ– AnnuityTaskï¼ˆYearNoï¼‰ â†’ æ¯å¹´æå– â†’ å®¢æˆ·æŒ‡ç¤º / é€šçŸ¥ â†’ å¹´è´¹è‰å• â†’ å®˜è´¹æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ å¹´è´¹ææˆï¼›
    *   è‹¥å¹´åº¦æœªç¼´è´¹ â†’ ç»ˆæ­¢æˆ–æ¢å¤æƒåˆ©ã€‚
8.  **äº‰è®®é˜¶æ®µï¼ˆå¯é€‰ï¼‰**ï¼š
    *   æ— æ•ˆ/è¯‰è®¼æ¡ˆå· â†’ å…¨ç¨‹ä¸­é—´æ–‡ä»¶ + æ—¶é™ + è´¹ç”¨ + è´¦å• + ææˆ â†’ åˆ¤å†³åæ”¹å˜åŸæ¡ˆçŠ¶æ€ã€‚
9.  **è´¢åŠ¡å…¨ç¨‹**ï¼š
    *   æ‰€æœ‰è‰å• â†’ å®˜è´¹æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ é¢„æ”¶ â†’ å‚¬æ¬¾ â†’ åè´¦ â†’ ææˆ
10. **é¡¾é—®/æ£€ç´¢å¹¶è¡Œ**ï¼š
    \*   é¡¾é—®/æ£€ç´¢æ¡ˆå· â†’ å†…éƒ¨ä»»åŠ¡ + æ”¯å‡º â†’ æœåŠ¡è´¹è‰å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ ææˆ

***

## 18. Mermaid æ³³é“å›¾ï¼ˆå®¢æˆ· / Formalities / Finance / ä»£ç†äºº / ç³»ç»Ÿï¼‰

ï¼ˆå·²åœ¨ä¸Šä¸€è½®ç»™å‡ºï¼Œä¿æŒåŸæ ·ï¼Œä¾›ä½ ç›´æ¥ç²˜åˆ° Markdown ä¸­ä½¿ç”¨ï¼‰

> **è§ä¸Šä¸€æ¡å›å¤ä¸­çš„ mermaid ä»£ç å—**ï¼ˆâ€œ16. ä¸€ã€Mermaid æ³³é“å›¾â€ï¼‰ã€‚\
> è‹¥éœ€è¦ï¼Œæˆ‘å¯ä»¥åœ¨ä¸‹ä¸€æ­¥ä¸“é—¨æŠŠé‚£æ®µä»£ç å•ç‹¬æ‹·è´ç»™ä½ ã€‚

***

## 19. Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨

ï¼ˆä¹Ÿå·²åœ¨ä¸Šä¸€è½®ç»™å‡ºï¼Œç•¥ï¼‰

*   åŒ…å« NORMAL/PCT\_INTL/PCT\_NATIONAL ä»ï¼š
    *   æ–°æ¡ˆç«‹æ¡ˆ â†’ é€’äº¤ â†’ OA â†’ æˆæƒ â†’ å¹´è´¹ç»ˆæ­¢
*   ä»¥åŠ INVALIDATION/LITIGATION çš„ï¼š
    *   INIT â†’ ACCEPTED â†’ HEARING â†’ WON/LOST/PARTIAL â†’ å¯¹åŸæ¡ˆçš„ç»ˆæ­¢/ç»´æŒå¤„ç†
*   ä»¥åŠ CONSULTING/SEARCH çš„ï¼š
    *   NOT\_STARTED â†’ IN\_PROGRESS â†’ COMPLETED/CLOSED

***

> ç”±äºç¯‡å¹…é™åˆ¶ï¼Œè¿™ä¸€ç‰ˆ v2.0 å·²ç»æŠŠ **æ¨¡å—é™æ€è®¾è®¡ + æ‰€æœ‰ E2E åœºæ™¯çš„æ•°æ®æµ + å…¨ç”Ÿå‘½å‘¨æœŸè§†å›¾** ç»Ÿä¸€æ”¶æ•›åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œï¼Œä½†ä¸ºäº†ä¿è¯å¯è¯»æ€§ï¼Œæˆ‘åœ¨é‡å¤åº¦å¾ˆé«˜çš„åœ°æ–¹åšäº†â€œå¼•ç”¨ä¸Šä¸€èŠ‚â€çš„å‹ç¼©ã€‚\
> å¦‚æœä½ å¸Œæœ›æŸä¸€å—ï¼ˆæ¯”å¦‚ï¼šæ¨¡å—äºŒçš„å­—æ®µçº§æ ¡éªŒè¡¨ã€æŸä¸ªåœºæ™¯çš„å­—æ®µçº§æ—¶é—´çº¿ï¼‰å†å±•å¼€æˆâ€œå¯ç›´æ¥ç»™å¼€å‘çœ‹çš„å­æ–‡æ¡£â€ï¼Œå¯ä»¥æŒ‡å®šæ¨¡å—/åœºæ™¯ï¼Œæˆ‘å†æŒ‰ä½ ç°åœ¨çš„ v2.0 ç»“æ„æ‹†å‡ºå¯¹åº”çš„ `ModuleX-v2.0-detail.md`ã€‚

# &#x20;è¯¦ç»†å†…å®¹

***

## FPMS ä¸“åˆ©ä»£ç†ç®¡ç†ç³»ç»Ÿï¼ˆWeb é‡æ„ç‰ˆï¼‰

**åŠŸèƒ½è§„æ ¼è¯´æ˜ v2.0 â€“ å…¨ç»†èŠ‚åˆå¹¶ç‰ˆï¼ˆè‰æ¡ˆï¼‰**

> æœ¬æ–‡æ¡£åœ¨ v1.1 çš„åŸºç¡€ä¸Šé‡æ„ç›®å½•ï¼Œå¹¶å®Œå…¨åˆå¹¶åç»­æ‰€æœ‰åŠ å¼ºç‰ˆè®¾è®¡ã€E2E åœºæ™¯å’Œæ€»è§ˆå†…å®¹ã€‚\
> **ä¸åšå‹ç¼©ï¼Œä¸åšåˆ å‡**ï¼šä»»ä½•å·²ç»åœ¨å‰å‡ è½®å¯¹è¯ä¸­è¾“å‡ºè¿‡çš„å­—æ®µå®šä¹‰ã€æ ¡éªŒè§„åˆ™ã€æ•°æ®æµæè¿°ã€çŠ¶æ€è¿ç§»è¯´æ˜ï¼Œéƒ½å°†è¢«æ•´åˆè¿›æœ¬ v2.0 æ–‡æ¡£ä¸­ã€‚

***

## ç›®å½•é¢„è§ˆï¼ˆåç»­é€ç« å¡«æ»¡ï¼‰

1.  ç³»ç»Ÿæ¦‚è¿°ï¼ˆSystem Overviewï¼‰
2.  æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤ï¼ˆCase Maintenanceï¼‰
    *   2.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²
    *   2.2 User Stories & Functional Requirements æ˜ å°„
    *   2.3 æ•°æ®æ¨¡å‹ï¼ˆT\_Case åŠç›¸å…³è¡¨ï¼‰
    *   2.4 æ–°æ¡ˆå»ºç«‹ / æ¡ˆå·åŸºæœ¬ä¿¡æ¯ï¼ˆå­—æ®µ+æ ¡éªŒ+æ•°æ®æ›´æ–°ï¼‰
    *   2.5 æ‰©å±•ä¿¡æ¯ï¼šä¼˜å…ˆæƒ / èŒç§ä¿è— / PCT / æ— æ•ˆæ¡ˆå­—æ®µ
    *   2.6 æ¡ˆä»¶ä¿¡æ¯è¡¥å……ï¼ˆé™åˆ¶ä¿®æ”¹è§†å›¾ï¼‰
    *   2.7 æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆBatch Filingï¼‰
    *   2.8 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚æ˜ å°„ï¼‰
3.  æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†ï¼ˆDocuments & Correspondenceï¼‰
4.  æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†ï¼ˆDeadline & Docketï¼‰
5.  æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†ï¼ˆFee Managementï¼‰
6.  æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦ï¼ˆBilling, Receivables, Dunning & Bad Debtï¼‰
7.  æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ç®¡ç†ï¼ˆAgent Commission Managementï¼‰
8.  æ¨¡å—ä¸ƒï¼šé¡¾é—® / æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®ï¼ˆConsulting & Searchï¼‰
9.  æ¨¡å—å…«ï¼šè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨æ€»è§ˆï¼ˆSettings, Search & Reportsï¼‰
10. è¿ç§»ä¸æŠ€æœ¯è¯´æ˜ï¼ˆMigration & Technical Notesï¼‰
11. E2E åœºæ™¯ Aâ€“H + æˆæƒåœºæ™¯ G0ï¼šé€åœºæ™¯æ—¶é—´çº¿æ•°æ®æµè¯´æ˜
12. å…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆï¼ˆæ–‡å­—å¤§å›¾ï¼‰
13. Mermaid æ³³é“å›¾ï¼šå®¢æˆ· / Formalities / Finance / ä»£ç†äºº / ç³»ç»Ÿ
14. Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨

>

***

## 2. æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤ï¼ˆCase Maintenanceï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

## 2.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

**æ¨¡å—èŒƒå›´**

æ¡ˆå·ç»´æŠ¤æ¨¡å—è´Ÿè´£æ‰€æœ‰â€œæ¡ˆä»¶ä¸»æ¡£â€çº§ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š

1.  **æ–°æ¡ˆå»ºç«‹ / æ¡ˆå·åŸºæœ¬ä¿¡æ¯ç»´æŠ¤**
    *   æ¡ˆå·ç¼–å·ã€æ¡ˆå·ç±»å‹ã€ä¸“åˆ©ç±»åˆ«ã€ç”³è¯·æ–¹å‘
    *   ä¸“åˆ©åç§°ï¼ˆä¸­/è‹±æ–‡ï¼‰ã€æ¡ˆä»¶æµå‘ã€å›½å®¶/åœ°åŒºä¿¡æ¯
    *   æ¡ˆå·æ³•å¾‹çŠ¶æ€ï¼ˆæœªé€’äº¤/åœ¨å®¡/æˆæƒ/ç»ˆæ­¢ç­‰ï¼‰
2.  **å‚ä¸æ–¹ç®¡ç†**
    *   å®¢æˆ·ï¼ˆå§”æ‰˜äººï¼‰ã€å¤–æ–¹ä»£ç†
    *   ç”³è¯·äººï¼ˆæ³•äºº/è‡ªç„¶äººï¼ŒèŒåŠ¡/éèŒåŠ¡ï¼‰ã€å‘æ˜äºº
    *   è”ç³»äººã€é‚®å¯„åœ°å€ã€è´¦å•åœ°å€
3.  **å…³é”®æ—¥æœŸä¸ç¼–å·**
    *   æ”¶æ¡ˆæ—¥æœŸã€ç”³è¯·æ—¥ã€ä¼˜å…ˆæƒæ—¥ã€å…¬å¼€æ—¥ã€æˆæƒæ—¥
    *   ç”³è¯·å·ã€å…¬å¼€å·ã€å…¬å‘Šå·ã€è¯ä¹¦å·ç­‰
4.  **è§„æ ¼ä¸æ§åˆ¶æ ‡è®°**
    *   è¯´æ˜ä¹¦é¡µæ•°ã€é™„å›¾é¡µæ•°ã€æƒåˆ©è¦æ±‚é¡¹æ•°/é¡µæ•°ã€æ–‡ç¨¿å­—æ•°
    *   è´¹å‡æ¯”ä¾‹ï¼ˆå®˜æ–¹è´¹å‡ï¼‰ã€æŠ˜æ‰£ç‡ï¼ˆæœåŠ¡è´¹æŠ˜æ‰£ï¼‰
    *   æ˜¯å¦å¹´è´¹ç›‘è§†ã€æ³•äºº/è‡ªç„¶äººã€å·²æå®å®¡è¯·æ±‚ã€ç¼ºå§”æ‰˜ä¹¦ç­‰
5.  **æ‰©å±•ä¿¡æ¯**
    *   ä¼˜å…ˆæƒå£°æ˜
    *   èŒç§ä¿è—ä¿¡æ¯
    *   PCT å›½é™…é˜¶æ®µä¿¡æ¯
    *   æ— æ•ˆæ¡ˆä»¶ä¸“å±å­—æ®µï¼ˆæƒåˆ©äºº/è¯·æ±‚äºº/å§”æ‰˜æ–¹ï¼‰
6.  **æ¡ˆä»¶ä¿¡æ¯è¡¥å……ï¼ˆé™åˆ¶ä¿®æ”¹è§†å›¾ï¼‰**
    *   ä¸ºæ— æ¡ˆå·å…¨éƒ¨ä¿®æ”¹æƒé™çš„ä»£ç†äººæä¾›å—é™ç¼–è¾‘è§†å›¾ï¼Œåªå…è®¸è¡¥å……éå…³é”®å­—æ®µ
7.  **æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†**
    *   æŒ‰æ¡ä»¶æ‰¹é‡é€’äº¤æ–°æ¡ˆï¼Œè®¾ç½®é€’äº¤æ—¥æœŸå’Œâ€œæ˜¯å¦åŒæ—¶æå®å®¡è¯·æ±‚â€
    *   æ›´æ–°æ¡ˆä»¶çŠ¶æ€ã€è§¦å‘åç»­æ—¶é™ä»»åŠ¡

**è§’è‰²ï¼ˆPersonasï¼‰**

*   **Adminï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰**
    *   ç»´æŠ¤æ¡ˆä»¶ç±»å‹æšä¸¾ã€å›½å®¶/åœ°åŒºã€é»˜è®¤é…ç½®ã€æƒé™çŸ©é˜µç­‰
*   **Formalities / Flow Adminï¼ˆæµç¨‹/å½¢å¼å®¡æŸ¥äººå‘˜ï¼‰**
    *   è´Ÿè´£æ–°æ¡ˆå½•å…¥ã€æ¡ˆä»¶åŸºæœ¬ä¿¡æ¯ç»´æŠ¤ã€é€’äº¤æ‰¹å¤„ç†ã€æ‰©å±•ä¿¡æ¯å½•å…¥ç­‰
*   **Agentï¼ˆä¸“åˆ©ä»£ç†äºº / å¾‹å¸ˆï¼‰**
    *   æŸ¥çœ‹/è¡¥å……æ¡ˆå·ä¿¡æ¯
    *   é€šè¿‡â€œæ¡ˆä»¶ä¿¡æ¯è¡¥å……è§†å›¾â€æ›´æ–°å¯ç¼–è¾‘å­—æ®µ
*   **Financeï¼ˆè´¢åŠ¡ï¼‰**
    *   åªè¯»æŸ¥çœ‹æ¡ˆå·ä¸è´¹ç”¨ã€è´¦å•ç­‰å…³è”ä¿¡æ¯ï¼ˆä¸»è¦åœ¨å…¶å®ƒæ¨¡å—ï¼‰

***

## 2.2 User Stories & Functional Requirements æ˜ å°„

### 2.2.1 User Storiesï¼ˆUSï¼‰

**US-CM-01 æ–°æ¡ˆå»ºç«‹**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›åœ¨ä¸€ä¸ªè¡¨å•ä¸­å½•å…¥æ¡ˆä»¶çš„åŸºæœ¬ä¿¡æ¯ã€å‚ä¸æ–¹ã€é‡è¦æ—¥æœŸå’Œæ§åˆ¶æ ‡è®°ï¼Œå¹¶ä¿å­˜ä¸ºæ–°æ¡ˆå·ï¼Œç¡®ä¿æ¡ˆå·å·å”¯ä¸€ï¼Œå­—æ®µå®Œæ•´ä¸”ç¬¦åˆè§„åˆ™ã€‚

**US-CM-02 æ‰©å±•ä¿¡æ¯ç»´æŠ¤**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›ä¸ºæ¡ˆä»¶ç»´æŠ¤ä¼˜å…ˆæƒã€èŒç§ä¿è—ã€PCT ä¿¡æ¯ä»¥åŠæ— æ•ˆæ¡ˆä¸“å±å­—æ®µï¼Œä»¥ä¾¿å‡†ç¡®åæ˜ æ¡ˆä»¶çš„æ³•å¾‹ä¸æŠ€æœ¯çŠ¶æ€ã€‚

**US-CM-03 å‚ä¸æ–¹ç®¡ç†**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›åœ¨æ¡ˆä»¶ä¸­é€‰æ‹©æˆ–æ–°å¢å®¢æˆ·ã€ç”³è¯·äººã€å¤–æ–¹ä»£ç†ã€å‘æ˜äººï¼Œä»¥åŠæŒ‡å®šæ–‡ä»¶é‚®å€ä¸è´¦å•é‚®å€ï¼Œç¡®ä¿åç»­æ‰€æœ‰ä¿¡å‡½ä¸è´¦å•åœ°å€æ­£ç¡®ã€‚

**US-CM-04 æ¡ˆä»¶ä¿¡æ¯è¡¥å……ï¼ˆé™åˆ¶ä¿®æ”¹ï¼‰**\
ä½œä¸º **ä»£ç†äºº**ï¼Œæˆ‘å¸Œæœ›åœ¨æ²¡æœ‰å®Œæ•´æ¡ˆå·ä¿®æ”¹æƒé™çš„æƒ…å†µä¸‹ï¼Œåªèƒ½è¡¥å……å°‘é‡å­—æ®µï¼ˆåç§°ã€å‘æ˜äººã€è§„æ ¼ç­‰ï¼‰ï¼Œä¸”ä¸ä¼šè¯¯æ”¹å…³é”®æ³•å¾‹ä¿¡æ¯ã€‚

**US-CM-05 æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›æŒ‰æ¡ä»¶ç­›é€‰â€œæœªé€’äº¤â€æ¡ˆä»¶ï¼Œæˆæ‰¹è®¾ç½®é€’äº¤æ—¥æœŸåŠæ˜¯å¦æå®å®¡è¯·æ±‚ï¼Œç³»ç»Ÿè‡ªåŠ¨æ›´æ–°æ³•å¾‹çŠ¶æ€å¹¶ç”Ÿæˆé€’äº¤æ¸…å•ã€‚

### 2.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-CM-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒæ ¹æ®æ¡ˆä»¶ç±»å‹ã€ä¸“åˆ©ç±»åˆ«ã€ç”³è¯·æ–¹å‘åˆ›å»ºæ–°æ¡ˆï¼Œæ¡ˆå·å·åœ¨å…¨ç³»ç»Ÿå”¯ä¸€ã€‚

**FR-CM-02**ï¼šä¿å­˜æ—¶å¿…é¡»æ ¡éªŒå¿…å¡«å­—æ®µåŠç»„åˆè§„åˆ™ï¼ˆæ¡ˆå·å·å”¯ä¸€ã€æ³•å¾‹çŠ¶æ€ä¸ç”³è¯·å·/ç”³è¯·æ—¥å¯¹åº”ã€ä¼˜å…ˆæƒå®Œæ•´æ€§ç­‰ï¼‰ã€‚

**FR-CM-03**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä»ä¸»æ•°æ®ä¸­é€‰æ‹©å®¢æˆ·ã€ç”³è¯·äººã€å¤–æ–¹ä»£ç†ï¼Œå¹¶å…è®¸ä»æ¡ˆå·ç•Œé¢è·³è½¬åˆ›å»ºæ–°è®°å½•åå›å¡«ã€‚

**FR-CM-04**ï¼šç³»ç»Ÿå¿…é¡»ç»´æŠ¤å®Œæ•´çš„æ³•å¾‹çŠ¶æ€æšä¸¾ï¼Œå¹¶æ”¯æŒç”±ä¸­é—´æ–‡ä»¶/æµç¨‹è‡ªåŠ¨æ›´æ–°ã€‚

**FR-CM-05**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒ Aï¼‰0..n æ¡ä¼˜å…ˆæƒè®°å½•ï¼ŒBï¼‰0..n æ¡èŒç§ä¿è—è®°å½•ï¼ŒCï¼‰PCT å›½é™…/å›½å®¶é˜¶æ®µå­—æ®µï¼ŒDï¼‰æ— æ•ˆæ¡ˆä¸“å±å­—æ®µã€‚

**FR-CM-06**ï¼šç³»ç»Ÿå¿…é¡»æä¾›â€œé™åˆ¶ä¿®æ”¹è§†å›¾â€ï¼Œåªå…è®¸ç¼–è¾‘ç™½åå•å­—æ®µï¼Œæƒé™ç‹¬ç«‹æ§åˆ¶ã€‚

**FR-CM-07**ï¼šç³»ç»Ÿå¿…é¡»æä¾›â€œæ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†â€ï¼Œä¾æ®ç­›é€‰æ¡ä»¶åˆ—å‡ºæ¡ˆä»¶ï¼Œå¹¶æ‰¹é‡è®¾ç½®é€’äº¤æ—¥æœŸã€æå®å®¡ä¸æ³•å¾‹çŠ¶æ€ã€‚

***

## 2.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

> è¯´æ˜ï¼šæœ¬èŠ‚æè¿°æ¨¡å—ä¸€ç›´æ¥è´Ÿè´£çš„ä¸»æ•°æ®ç»“æ„ï¼›å…¶å®ƒæ¨¡å—å¼•ç”¨è¿™äº›å­—æ®µæ—¶ä¸é‡å¤å®šä¹‰ã€‚

### 2.3.1 `T_Case` â€“ æ¡ˆå·ä¸»è¡¨ï¼ˆå®Œå…¨å±•å¼€ç‰ˆï¼‰

**æ ‡è¯† & åŸºæœ¬å­—æ®µ**

*   `CaseID` bigint, PK
*   `CaseNo` varchar, å”¯ä¸€ â€“ æ¡ˆå·ç¼–å·ï¼Œæ‰€æœ‰æ¨¡å—ç”¨æ­¤å·è¯†åˆ«æ¡ˆä»¶
*   `ClientRef` varchar â€“ å¯¹æ–¹æ¡ˆå·
*   `Title_CN` nvarchar â€“ ä¸“åˆ©åç§°ï¼ˆä¸­æ–‡ï¼‰
*   `Title_EN` nvarchar â€“ åŸæ–‡åç§° / è‹±æ–‡åç§°
*   `Description` text â€“ å¤‡æ³¨ / æ¡ˆä»¶è¯´æ˜ï¼ˆå¦‚å­˜åœ¨ï¼‰

**ç±»å‹ & æµå‘**

*   `CaseType` enumï¼š
    *   NORMAL â€“ æ™®é€šä¸“åˆ©ç”³è¯·
    *   PCT\_INTL â€“ PCT å›½é™…é˜¶æ®µæ¡ˆ
    *   PCT\_NATIONAL â€“ PCT å›½å®¶é˜¶æ®µæ¡ˆ
    *   INVALIDATION â€“ æ— æ•ˆæ¡ˆä»¶
    *   LITIGATION â€“ è¯‰è®¼æ¡ˆä»¶
    *   HK\_REG â€“ é¦™æ¸¯ç™»è®°æ¡ˆ
    *   ANNUITY\_SERVICE â€“ å¹´è´¹ä»£ç¼´æ¡ˆ
    *   SEARCH â€“ æ£€ç´¢é¡¹ç›®ï¼ˆéä¸“åˆ©æµç¨‹ï¼‰
    *   CONSULTING â€“ é¡¾é—®é¡¹ç›®
    *   OTHER â€“ å…¶ä»–
*   `PatentCategory` enumï¼šINVENTION / UTILITY / DESIGN
*   `FlowDir` enumï¼šIN\_IN / IN\_OUT / OUT\_IN / HK\_IN / OUT\_OUT
*   `FromCountry` FK â†’ T\_Country
*   `ToCountry` FK â†’ T\_Countryï¼ˆæ¶‰å¤–æ¡ˆ / å›½å®¶é˜¶æ®µï¼‰

**æ³•å¾‹çŠ¶æ€**

*   `Status` enumï¼ˆç¤ºä¾‹ï¼Œå®é™…æ ¹æ® PDF æšä¸¾å®Œæ•´å®ç°ï¼‰ï¼š
    *   NOT\_FILED â€“ æœªé€’äº¤
    *   WAITING\_RECEIPT â€“ ç­‰å¾…å—é€š/å—ç†
    *   PRELIM\_EXAM â€“ åˆå®¡
    *   AMENDMENT â€“ è¡¥æ­£ä¸­
    *   PRELIM\_PASS â€“ åˆå®¡é€šè¿‡
    *   PUBLISHED â€“ å·²å…¬å¼€
    *   SUB\_EXAM â€“ å®å®¡ä¸­
    *   OA1 â€“ ä¸€é€šé˜¶æ®µ
    *   OA2 â€“ äºŒé€šé˜¶æ®µ
    *   GRANTED â€“ æˆæƒ
    *   REJECTED â€“ é©³å›
    *   SUSPENDED â€“ ä¸­æ­¢
    *   DEEMED\_WITHDRAWN â€“ è§†ä¸ºæ’¤å›
    *   DEEMED\_ABANDONED â€“ è§†ä¸ºæ”¾å¼ƒ
    *   TERMINATED â€“ ç»ˆæ­¢
    *   REEXAM â€“ å¤å®¡ä¸­
    *   WITHDRAWN â€“ ä¸»åŠ¨æ’¤å›
    *   ABANDONED â€“ ä¸»åŠ¨æ”¾å¼ƒ
    *   TERMINATION\_BY\_CLIENT â€“ è§£è˜/ç»ˆæ­¢å§”æ‰˜
    *   PCT\_INTL\_EXAM â€“ PCT å›½é™…é˜¶æ®µå®¡æŸ¥ä¸­
    *   PCT\_NATIONAL\_PHASE â€“ PCT å›½å®¶é˜¶æ®µä¸­
    *   INVALIDATED â€“ å…¨éƒ¨æ— æ•ˆ
    *   INVALIDATED\_PARTIAL â€“ éƒ¨åˆ†æ— æ•ˆ
    *   LITIGATION\_IN\_PROGRESS â€“ è¯‰è®¼ä¸­
    *   OTHER â€“ å…¶ä»–

**å…³é”®æ—¥æœŸ**

*   `RecvDate` date â€“ æ”¶æ¡ˆæ—¥æœŸï¼ˆæ‰€å†…æ”¶æ¡ˆï¼‰
*   `FilingDate` date â€“ å®é™…ç”³è¯·æ—¥
*   `PrioDate` date â€“ æœ€æ—©ä¼˜å…ˆæƒæ—¥ï¼ˆä» T\_Priority è‡ªåŠ¨æ¨å¯¼ï¼‰
*   `PubDate` date â€“ å…¬å¼€æ—¥
*   `ExamRequestDate` date â€“ å®å®¡è¯·æ±‚æ—¥ï¼ˆå¦‚å•ç‹¬è®°å½•ï¼‰
*   `PCT_NationalEntryDate` date â€“ PCT å›½å®¶é˜¶æ®µè¿›å…¥æ—¥
*   `IssueDate` date â€“ æˆæƒå‘æ–‡æ—¥
*   `GrantDate` date â€“ æˆæƒå…¬å‘Šæ—¥
*   `FirstAnnuityYear` int â€“ é¦–æ¬¡å¹´è´¹å¹´å·
*   `ValidUntil` date â€“ æœ‰æ•ˆæœŸç»“æŸæ—¥ï¼ˆä¾‹å¦‚ç”³è¯·æ—¥ + 20 å¹´ï¼‰

**ç¼–å·**

*   `AppNo` varchar â€“ å®˜æ–¹ç”³è¯·å·
*   `PubNo` varchar â€“ å…¬å¼€å·
*   `GrantNo` varchar â€“ å…¬å‘Šå·
*   `CertNo` varchar â€“ ä¸“åˆ©è¯ä¹¦å·

**å…³è”æ–¹**

*   `ClientID` FK â†’ T\_Client â€“ å§”æ‰˜å®¢æˆ·
*   `ForeignAgentID` FK â†’ T\_Client â€“ å¤–æ–¹ä»£ç†
*   `PrimaryAgentID` FK â†’ User â€“ ä»£ç†äººä¸€
*   `SecondAgentID` FK â†’ User â€“ ä»£ç†äººäºŒ
*   `DraftorID` FK â†’ User â€“ æ’°ç¨¿äºº / å®åŠ¡è´Ÿè´£äºº

**æ§åˆ¶æ ‡è®° & è´¹å‡**

*   `ApplicantKind` enumï¼šLEGAL\_PERSON / NATURAL\_PERSON
*   `FeeReduction` decimal(5,4) â€“ è´¹å‡æ¯”ä¾‹ 0..1
*   `DiscountRate` decimal(5,4) â€“ æœåŠ¡è´¹æŠ˜æ‰£ç‡ 0..1
*   `IsFeeMonitor` bool â€“ æ˜¯å¦å¹´è´¹ç›‘è§†
*   `NoPower` bool â€“ æ˜¯å¦ç¼ºå§”æ‰˜ä¹¦
*   `NoPrioText` bool â€“ æ˜¯å¦ç¼ºä¼˜å…ˆæƒæ–‡æœ¬
*   `HasExamRequest` bool â€“ å·²æäº¤å®å®¡è¯·æ±‚
*   `RequireHK` bool â€“ è¦æ±‚æäº¤é¦™æ¸¯ç”³è¯·

**PCT æ‰©å±•**

*   `RO` varchar â€“ å›½é™…å—ç†å±€
*   `ISA` varchar â€“ å›½é™…æ£€ç´¢å•ä½
*   `IPEA` varchar â€“ å›½é™…åˆå®¡å•ä½
*   `IntlAppNo`, `IntlAppDate` â€“ PCT å›½é™…ç”³è¯·å·/æ—¥
*   `IntlPubNo`, `IntlPubDate` â€“ PCT å›½é™…å…¬å¼€å·/å…¬å¼€æ—¥
*   `IntlPubLang` varchar â€“ å…¬å¼€è¯­ç§
*   `NeedIPER` bool â€“ æ˜¯å¦è¦æ±‚å›½é™…åˆæ­¥å®¡æŸ¥
*   `IPERDate` date â€“ å›½é™…åˆå®¡å®Œæˆæ—¥

**æ— æ•ˆ/è¯‰è®¼æ‰©å±•**

*   `OriginalCaseID` FK â†’ T\_Case â€“ è¡¨ç¤ºæœ¬æ— æ•ˆ/è¯‰è®¼æ¡ˆé’ˆå¯¹çš„ä¸“åˆ©åŸæ¡ˆ
*   æ— æ•ˆæ¡ˆä¸“å±ï¼š
    *   `InvalidClientID` FK â†’ T\_Client â€“ æ— æ•ˆæ¡ˆä»¶å§”æ‰˜æ–¹
    *   `InvalidPatentee` varchar â€“ è¢«æ— æ•ˆä¸“åˆ©æƒäººåç§°
    *   `InvalidRequester` varchar â€“ è¯·æ±‚äººåç§°
    *   `InvalidRole` enumï¼šPATENTEE / REQUESTER / BOTH
*   è¯‰è®¼æ¡ˆä¸“å±ï¼š
    *   `LitigationType` enumï¼šINFRINGMENT / ADMINISTRATIVE / OTHER
    *   `CourtName` varchar
    *   `Plaintiff`, `Defendant` varchar
    *   `LitigationRole` enumï¼šPLAINTIFF / DEFENDANT / THIRD\_PARTY

**å®¡è®¡**

*   `CreatedBy`, `CreatedAt`
*   `UpdatedBy`, `UpdatedAt`

***

### 2.3.2 `T_Applicant`ï¼ˆç”³è¯·äººä¸»æ•°æ®ï¼‰

å­—æ®µï¼ˆå…³é”®ï¼‰ï¼š

*   `ApplicantID` PK
*   `Name_CN`, `Name_EN`
*   `Nationality`
*   `Address_CN`, `Address_EN`, `PostalCode`
*   `Province`, `City`, `District`
*   `StatRegion` â€“ ç»Ÿè®¡åœ°åŒº
*   `IsLegalEntity` bool â€“ æ˜¯å¦æ³•äºº
*   `IsJobInvention` bool â€“ æ˜¯å¦èŒåŠ¡å‘æ˜
*   `HasGeneralPower` bool â€“ æ˜¯å¦æœ‰é€šç”¨å§”æ‰˜ä¹¦
*   `ContactPerson`, `Tel`, `Fax`, `Email`

ç”¨äºï¼š

*   ä½œä¸º `T_CaseApplicant` ä¸­çš„å¼•ç”¨ï¼›
*   ä¸ºç»Ÿè®¡æŠ¥è¡¨æä¾›ç»´åº¦ã€‚

***

### 2.3.3 `T_CaseApplicant`ï¼ˆæ¡ˆå·â€“ç”³è¯·äººå…³ç³»ï¼‰

*   `CaseApplicantID` PK
*   `CaseID` FK â†’ T\_Case
*   `ApplicantID` FK â†’ T\_Applicant
*   `SequenceNo` int â€“ é¡ºåºå·ï¼ˆ1 = ç¬¬ä¸€ç”³è¯·äººï¼‰
*   `IsPrimary` bool â€“ æ˜¯å¦ç¬¬ä¸€ç”³è¯·äºº
*   `GeneralPowerUsed` bool â€“ æ˜¯å¦ä½¿ç”¨é€šç”¨å§”æ‰˜ä¹¦ï¼ˆå¦‚æœæœ‰ï¼‰

***

### 2.3.4 `T_CaseInventor`ï¼ˆæ¡ˆå·â€“å‘æ˜äººï¼‰

*   `CaseInventorID` PK
*   `CaseID`
*   `Name_CN`, `Name_EN`
*   `SequenceNo` int â€“ é¡ºåº

***

### 2.3.5 `T_Priority`ï¼ˆä¼˜å…ˆæƒï¼‰

*   `PrioID` PK
*   `CaseID` FK
*   `Country`
*   `PrioNo`
*   `PrioDate`

ä¿å­˜æ—¶ï¼š

*   `T_Case.PrioDate = MIN(æ‰€æœ‰ T_Priority.PrioDate)`
*   FilingDate ä¸å¾—æ—©äº `PrioDate`ã€‚

***

### 2.3.6 `T_BioDeposit`ï¼ˆèŒç§ä¿è—ï¼‰

*   `BioID` PK
*   `CaseID` FK
*   `DepositNo` â€“ ä¿è—ç¼–å·
*   `UnitID` FK â†’ T\_BioDepositUnit
*   `DepositDate`
*   `Name` â€“ åˆ†ç±»å‘½å/èŒç§åç§°

***

## 2.4 æ–°æ¡ˆå»ºç«‹ / æ¡ˆå·åŸºæœ¬ä¿¡æ¯ï¼ˆå­—æ®µ + æ ¡éªŒ + æ•°æ®æ›´æ–°ï¼‰

### 2.4.1 é¡µé¢åˆ†åŒº

æ–°æ¡ˆ/æ¡ˆå·ç»´æŠ¤ä¸»ç•Œé¢åˆ’åˆ†ä¸ºå‡ ä¸ªæ ‡ç­¾/åŒºåŸŸï¼š

*   **Basic Infoï¼ˆåŸºæœ¬ä¿¡æ¯ï¼‰**
*   **Parties & Addressesï¼ˆå‚ä¸æ–¹ä¸åœ°å€ï¼‰**
*   **Dates & Numbersï¼ˆæ—¥æœŸä¸ç¼–å·ï¼‰**
*   **Specifications & Flagsï¼ˆè§„æ ¼ä¸æ§åˆ¶æ ‡å¿—ï¼‰**
*   **Extended Infoï¼ˆæ‰©å±•ä¿¡æ¯ï¼šä¼˜å…ˆæƒã€PCTã€èŒç§ã€æ— æ•ˆï¼‰**
*   **Audit Infoï¼ˆå®¡è®¡ä¿¡æ¯ï¼‰**

ä»¥ä¸‹æŒ‰åŒºåŸŸè¯´æ˜å­—æ®µã€æ ¡éªŒå’Œä¿å­˜æ—¶çš„æ•°æ®æ›´æ–°é€»è¾‘ã€‚

***

### 2.4.2 åŸºæœ¬ä¿¡æ¯ï¼ˆBasic Infoï¼‰

**å­—æ®µåˆ—è¡¨**

| å­—æ®µ                  | ç±»å‹   | å¿…å¡« | è¯´æ˜                                     |
| ------------------- | ---- | -- | -------------------------------------- |
| æ¡ˆå·ç¼–å· CaseNo         | æ–‡æœ¬æ¡†  | âœ”ï¸ | å”¯ä¸€æ¡ˆå·å·ï¼Œå…¨ç³»ç»Ÿå”¯ä¸€                            |
| å¯¹æ–¹æ¡ˆå· ClientRef      | æ–‡æœ¬æ¡†  | âœ–ï¸ | å®¢æˆ·å†…éƒ¨æ¡ˆå·                                 |
| æ¡ˆä»¶ç±»å‹ CaseType       | ä¸‹æ‹‰å•é€‰ | âœ”ï¸ | NORMAL/PCT\_INTL/PCT\_NATIONAL/...     |
| ä¸“åˆ©ç±»åˆ« PatentCategory | ä¸‹æ‹‰   | âœ”ï¸ | å‘æ˜/å®ç”¨æ–°å‹/å¤–è§‚è®¾è®¡                           |
| ç”³è¯·æ–¹å‘ FlowDir        | å•é€‰ç»„  | âœ”ï¸ | IN\_IN/IN\_OUT/OUT\_IN/HK\_IN/OUT\_OUT |
| æ¥è‡ªå›½å®¶ FromCountry    | ä¸‹æ‹‰æœç´¢ | âœ”ï¸ | å…³è” T\_Country                          |
| è¿›å…¥å›½å®¶ ToCountry      | ä¸‹æ‹‰æœç´¢ | æ¡ä»¶ | æ¶‰å¤–/å›½å®¶é˜¶æ®µå¿…å¡«                              |
| ä¸“åˆ©åç§°ï¼ˆä¸­ï¼‰ Title\_CN   | æ–‡æœ¬åŸŸ  | âœ”ï¸ | éç©ºï¼ˆéå…¨ç©ºç™½ï¼‰                               |
| åŸæ–‡åç§°/è‹± Title\_EN    | æ–‡æœ¬åŸŸ  | âœ–ï¸ | æ¨èæ€§å­—æ®µ                                  |
| æ³•å¾‹çŠ¶æ€ Status         | ä¸‹æ‹‰   | âœ”ï¸ | é»˜è®¤ NOT\_FILEDï¼Œæ–°å»ºåå¯ç”±æµç¨‹è‡ªåŠ¨æ›´æ–°              |

**æ ¡éªŒè§„åˆ™ï¼ˆéƒ¨åˆ†ï¼‰**

*   V-A-01ï¼š`CaseNo` ä¸å¾—ä¸ºç©ºï¼Œä¸”åœ¨ `T_Case` ä¸­å”¯ä¸€ã€‚
*   V-A-02ï¼š`CaseType + PatentCategory` ç»„åˆå¿…é¡»åœ¨å…è®¸åˆ—è¡¨ä¸­ï¼ˆå¯åœ¨é…ç½®ä¸­é™å®šæŸäº›ç»„åˆï¼‰ï¼›
*   V-A-03ï¼šæ¶‰å¤– FlowDir æ—¶ `ToCountry` å¿…å¡«ï¼›
*   V-A-04ï¼šçŠ¶æ€å˜æ›´åˆ° GRANTED/PUBLISHED ç­‰æ—¶ï¼Œéœ€æ£€æŸ¥ä¸æ—¥æœŸ/ç¼–å·å­—æ®µçš„ä¸€è‡´æ€§ï¼ˆè§ Dates & Numbers éƒ¨åˆ†ï¼‰ã€‚

***

### 2.4.3 å‚ä¸æ–¹ä¸åœ°å€ï¼ˆParties & Addressesï¼‰

#### å®¢æˆ·/å¤–æ–¹ä»£ç†

| å­—æ®µ                  | ç±»å‹   | å¿…å¡« | è¯´æ˜                              |
| ------------------- | ---- | -- | ------------------------------- |
| å§”æ‰˜å®¢æˆ· ClientID       | æœç´¢ä¸‹æ‹‰ | âœ”ï¸ | FKâ†’T\_Clientï¼›å¯ä»æ­¤ç•Œé¢è·³è½¬åˆ›å»ºå®¢æˆ·åå›å¡«     |
| å¤–æ–¹ä»£ç† ForeignAgentID | æœç´¢ä¸‹æ‹‰ | æ¡ä»¶ | FlowDir æ¶‰å¤–æ—¶å¿…å¡«ï¼ŒFKâ†’T\_Client(ä»£ç†æ‰€) |
| å¤–æ–¹æ¡ˆå· ForeignRef     | æ–‡æœ¬æ¡†  | âœ–ï¸ | å¤–ä»£ç†æ‰€æ¡ˆå·                          |

**æ ¡éªŒ**

*   V-B-01ï¼šå½“ FlowDir ä¸ºæ¶‰å¤–ç±»å‹ï¼ˆIN\_OUT/OUT\_IN/OUT\_OUT/HK\_INï¼‰ä¸” ForeignAgentID ç©ºæ—¶ï¼Œç¦æ­¢ä¿å­˜ã€‚
*   V-B-02ï¼šè‹¥é€‰ä¸­çš„ ForeignAgent å®¢æˆ·ç±»å‹ä¸æ˜¯â€œä»£ç†æ‰€â€ï¼Œå‘è­¦å‘Šï¼ˆå¯é…ç½®ä¸ºç¡¬æ ¡éªŒï¼‰ã€‚

#### ç”³è¯·äºº/å‘æ˜äºº & åœ°å€

**ç”³è¯·äººåˆ—è¡¨ â€“ `T_CaseApplicant` å­è¡¨**

*   å­—æ®µï¼šApplicantIDã€SequenceNoã€IsPrimaryã€GeneralPowerUsed

**è§„åˆ™ï¼š**

*   V-C-01ï¼šè‡³å°‘éœ€è¦ä¸€æ¡ `T_CaseApplicant`ï¼›
*   V-C-02ï¼šå¿…é¡»ä¸”åªèƒ½æœ‰ä¸€æ¡ `IsPrimary=true`ï¼›
*   V-C-03ï¼š`T_Case.ApplicantKind` ä¸ç¬¬ä¸€ç”³è¯·äºº `T_Applicant.IsLegalEntity` ä¿æŒä¸€è‡´ã€‚å¦åˆ™ï¼š
    *   è¦ä¹ˆé˜»æ­¢ä¿å­˜ï¼›
    *   è¦ä¹ˆè¦æ±‚ç”¨æˆ·åœ¨ç¡®è®¤å¯¹è¯æ¡†ä¸­â€œå¼ºåˆ¶ä¿å­˜â€ï¼ŒæŒ‰ä¸šåŠ¡ç­–ç•¥å†³å®šã€‚
*   V-C-04ï¼šå¦‚ `T_Applicant.HasGeneralPower=true`ï¼Œåˆ™å»ºè®®è‡ªåŠ¨å‹¾é€‰ `GeneralPowerUsed`ã€‚

**å‘æ˜äººåˆ—è¡¨ â€“ `T_CaseInventor`**

*   å­—æ®µï¼šName\_CN/EN, SequenceNo
*   V-C-05ï¼šå‘æ˜äººå¯ä¸º 0..nï¼›å¦‚æŸå›½è¦æ±‚å¿…é¡»æœ‰å‘æ˜äººï¼Œå¯é€šè¿‡å›½å®¶/ç±»åˆ«å®šåˆ¶æ ¡éªŒï¼Œç¼ºå°‘æ—¶æç¤ºã€‚

**é‚®å¯„/è´¦å•åœ°å€**

| å­—æ®µ                   | ç±»å‹ | å¿…å¡« | è¯´æ˜              |
| -------------------- | -- | -- | --------------- |
| æ–‡ä»¶é‚®å¯„åœ°å€ DocAddressID  | ä¸‹æ‹‰ | âœ–ï¸ | é»˜è®¤å–å®¢æˆ·é»˜è®¤æ–‡ä»¶åœ°å€ï¼Œå¯è¦†ç›– |
| è´¦å•é‚®å¯„åœ°å€ BillAddressID | ä¸‹æ‹‰ | âœ–ï¸ | é»˜è®¤å–å®¢æˆ·é»˜è®¤è´¦å•åœ°å€ï¼Œå¯è¦†ç›– |

*   V-C-06ï¼šè‹¥é€‰ä¸­çš„åœ°å€è®°å½•è¢«æ ‡è®°ä¸ºåœç”¨ï¼Œä¿å­˜æ—¶ç¦æ­¢æäº¤ã€‚
*   V-C-07ï¼šå¦‚ä¸¤è€…å‡ä¸ºç©ºï¼Œæç¤ºâ€œæœªæŒ‡å®šé‚®å¯„åœ°å€/è´¦å•åœ°å€â€ï¼Œç”±ä¸šåŠ¡å†³å®šæ˜¯è­¦å‘Šè¿˜æ˜¯å¼ºæ ¡éªŒã€‚

***

### 2.4.4 æ—¥æœŸä¸ç¼–å·ï¼ˆDates & Numbersï¼‰

| å­—æ®µ                             | ç±»å‹ | å¿…å¡«æ¡ä»¶ | è¯´æ˜                                |
| ------------------------------ | -- | ---- | --------------------------------- |
| RecvDate æ”¶æ¡ˆæ—¥æœŸ                  | æ—¥æœŸ | âœ”ï¸   | æ¡ˆä»¶è¿›å…¥æ‰€å†…çš„æ—¥æœŸ                         |
| FilingDate ç”³è¯·æ—¥                 | æ—¥æœŸ | æ¡ä»¶   | å½“çŠ¶æ€â‰¥WAITING\_RECEIPT ä¸”æœ‰ AppNo æ—¶å¿…å¡« |
| AppNo ç”³è¯·å·                      | æ–‡æœ¬ | æ¡ä»¶   | å·²æäº¤å®˜æ–¹ç”³è¯·æ—¶å¿…å¡«ï¼ŒæŒ‰å›½åˆ«è§„åˆ™æ ¡éªŒæ ¼å¼              |
| PrioDate ä¼˜å…ˆæƒæ—¥                  | æ—¥æœŸ | è‡ªåŠ¨   | ä» T\_Priority å–æœ€æ—© PrioDate        |
| PubDate å…¬å¼€æ—¥                    | æ—¥æœŸ | æ¡ä»¶   | Statusâ‰¥PUBLISHED æ—¶å¿…é¡»æœ‰             |
| PubNo å…¬å¼€å·                      | æ–‡æœ¬ | æ¡ä»¶   | åŒä¸Š                                |
| IssueDate æˆæƒå‘æ–‡æ—¥                | æ—¥æœŸ | æ¡ä»¶   | Status=GRANTED æ—¶å¿…å¡«                |
| GrantDate æˆæƒå…¬å‘Šæ—¥                | æ—¥æœŸ | æ¡ä»¶   | åŒä¸Š                                |
| GrantNo å…¬å‘Šå·                    | æ–‡æœ¬ | æ¡ä»¶   | åŒä¸Š                                |
| CertNo è¯ä¹¦å·                     | æ–‡æœ¬ | æ¨è   | æˆæƒè¯ä¹¦å·ï¼Œæœ‰è¯ä¹¦æ—¶å»ºè®®å½•å…¥                    |
| FirstAnnuityYear é¦–å¹´å¹´å·          | æ•´æ•° | æ¡ä»¶   | æˆæƒæ—¶å¿…é¡»ï¼Œç”¨äºå¹´è´¹æ¨¡å—                      |
| ValidUntil æœ‰æ•ˆæˆªè‡³æ—¥               | æ—¥æœŸ | æ¡ä»¶   | æˆæƒæ¡ˆä»¶å¿…å¡«                            |
| PCT\_NationalEntryDate å›½å®¶é˜¶æ®µè¿›å…¥æ—¥ | æ—¥æœŸ | æ¡ä»¶   | CaseType=PCT\_NATIONAL æ—¶å¿…å¡«        |

**æ ¡éªŒ**

*   V-D-01ï¼šStatus=GRANTED â‡’ IssueDate, GrantDate, GrantNo, FirstAnnuityYear, ValidUntil ä¸å¾—ä¸ºç©ºã€‚
*   V-D-02ï¼šStatus â‰¥ PUBLISHED â‡’ PubDate, PubNo ä¸å¾—ä¸ºç©ºã€‚
*   V-D-03ï¼šFilingDate ä¸å¾—æ—©äºä»»ä¸€ `T_Priority.PrioDate`ï¼›å¦åˆ™æŠ¥é”™ã€‚
*   V-D-04ï¼šAppNo å­˜åœ¨æ—¶å¿…é¡»ç¬¦åˆå¯¹åº”å›½å®¶çš„æ ¼å¼/æ ¡éªŒè§„åˆ™ï¼ˆä¾‹å¦‚é•¿åº¦/æ ¡éªŒä½ï¼‰ã€‚

***

### 2.4.5 è§„æ ¼ä¸æ§åˆ¶æ ‡è®°ï¼ˆSpecifications & Control Flagsï¼‰

**è§„æ ¼å­—æ®µ**

| å­—æ®µ                   | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
| -------------------- | -- | -- | -- |
| SpecPages è¯´æ˜ä¹¦é¡µæ•°      | æ•´æ•° | âœ–ï¸ | â‰¥0 |
| DrawPages é™„å›¾é¡µæ•°       | æ•´æ•° | âœ–ï¸ | â‰¥0 |
| ClaimCount æƒåˆ©è¦æ±‚é¡¹æ•°    | æ•´æ•° | âœ–ï¸ | â‰¥0 |
| ClaimPages æƒåˆ©è¦æ±‚é¡µæ•°    | æ•´æ•° | âœ–ï¸ | â‰¥0 |
| ManuscriptWords æ–‡ç¨¿å­—æ•° | æ•´æ•° | âœ–ï¸ | â‰¥0 |

**æ§åˆ¶æ ‡è®°å’Œè´¹å‡**

| å­—æ®µ             | ç±»å‹  | è¯´æ˜          |
| -------------- | --- | ----------- |
| ApplicantKind  | å•é€‰  | æ³•äººç”³è¯·/è‡ªç„¶äººç”³è¯·  |
| FeeReduction   | æ•°å­—  | 0..1ï¼Œå®˜è´¹å‡å…æ¯”ä¾‹ |
| DiscountRate   | æ•°å­—  | 0..1ï¼ŒæœåŠ¡è´¹æŠ˜æ‰£ç‡ |
| IsFeeMonitor   | å¤é€‰æ¡† | æ˜¯å¦å°†æ¥éœ€è¦å¹´è´¹ç›‘è§†  |
| NoPower        | å¤é€‰æ¡† | æ˜¯å¦ç¼ºå§”æ‰˜ä¹¦      |
| NoPrioText     | å¤é€‰æ¡† | æ˜¯å¦ç¼ºä¼˜å…ˆæƒæ–‡æœ¬    |
| HasExamRequest | å¤é€‰æ¡† | æ˜¯å¦å·²æå®å®¡è¯·æ±‚    |
| RequireHK      | å¤é€‰æ¡† | æ˜¯å¦è¦æ±‚é¦™æ¸¯ç”³è¯·    |

**å®¡è®¡ä¿¡æ¯**

*   è¾“æœºäººå‘˜ï¼š`CreatedBy`ï¼ˆåªè¯»ï¼‰
*   è¾“æœºæ—¥æœŸï¼š`CreatedAt`ï¼ˆåªè¯»ï¼‰
*   æœ€è¿‘ä¿®æ”¹äºº/æ—¶é—´ï¼š`UpdatedBy/UpdatedAt`ï¼ˆåªè¯»ï¼‰

**æ ¡éªŒ**

*   V-E-01ï¼šApplicantKind ä¸ç¬¬ä¸€ç”³è¯·äººçš„æ³•äºº/è‡ªç„¶äººç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œè¦ä¹ˆé˜»æ­¢ä¿å­˜ï¼Œè¦ä¹ˆè¦æ±‚å¼ºåˆ¶ç¡®è®¤ï¼›
*   V-E-02ï¼šFeeReduction ä¸ ApplicantKind & å›½åˆ«çš„ç»„åˆï¼ˆæ¯”å¦‚è‡ªç„¶äººè´¹å‡æ”¿ç­–ï¼‰éœ€è¦æŒ‰é…ç½®æ£€éªŒï¼Œä¸åˆç†ç»„åˆç»™å‡ºè­¦å‘Šï¼›
*   V-E-03ï¼šIsFeeMonitor è‹¥ä¸º falseï¼Œåˆ™åœ¨å¹´è´¹æ¨¡å—é»˜è®¤ä¸ç”Ÿæˆ/ä¸å±•ç¤ºè¯¥æ¡ˆçš„å¹´è´¹ä»»åŠ¡ï¼ˆå¯åœ¨å¹´è´¹æ¨¡å—ä¸­å†è¯¦ç»†è¯´æ˜ï¼‰ã€‚

***

## 2.5 æ‰©å±•ä¿¡æ¯ï¼šä¼˜å…ˆæƒ / èŒç§ä¿è— / PCT / æ— æ•ˆæ¡ˆå­—æ®µ

### 2.5.1 ä¼˜å…ˆæƒï¼ˆT\_Priorityï¼‰

**UIï¼šä¼˜å…ˆæƒæ ‡ç­¾é¡µ**

*   æ¯æ¡è®°å½•åŒ…å«ï¼šåœ¨å…ˆå›½åˆ«ã€åœ¨å…ˆç”³è¯·å·ã€åœ¨å…ˆç”³è¯·æ—¥
*   æ”¯æŒå¤šè¡Œå¢åˆ æ”¹

**ä¸šåŠ¡è§„åˆ™**

*   V-P-01ï¼šå¦‚å­˜åœ¨ä¼˜å…ˆæƒè®°å½•ï¼Œæ¯æ¡å¿…é¡» Country/PrioNo/PrioDate å‡ä¸ä¸ºç©ºï¼›
*   V-P-02ï¼šä¿å­˜æ¡ˆå·æ—¶ï¼š
    *   è‹¥å­˜åœ¨ä¼˜å…ˆæƒè®°å½• â†’ `T_Case.PrioDate = æ‰€æœ‰ PrioDate ä¸­çš„æœ€å°å€¼`ï¼›
    *   è‹¥ä¸å­˜åœ¨ä¼˜å…ˆæƒ â†’ `T_Case.PrioDate = NULL`ï¼›
*   V-P-03ï¼š`FilingDate >= PrioDate`ï¼Œå¦åˆ™æŠ¥é”™ã€‚

***

### 2.5.2 èŒç§ä¿è—ï¼ˆT\_BioDepositï¼‰

**UIï¼šèŒç§ä¿è—æ ‡ç­¾é¡µ**

*   å­—æ®µï¼šä¿è—ç¼–å·ã€ä¿è—å•ä½ï¼ˆé€‰æ‹©è‡ª `T_BioDepositUnit`ï¼‰ã€ä¿è—æ—¥æœŸã€èŒç§åç§°/åˆ†ç±»å‘½å
*   ä¸€æ¡ˆå¯ 0..n æ¡ï¼Œä¹Ÿå¯æŒ‰ä¸šåŠ¡è®¾å®šé™åˆ¶ä¸º 0..1 æ¡

**ä¸šåŠ¡è§„åˆ™**

*   è‹¥æ¡ˆä»¶ç±»å‹/ç±»åˆ«éœ€è¦èŒç§ä¿è—ï¼ˆä¾‹å¦‚æŸäº›ç”Ÿç‰©ç±»å‘æ˜ï¼‰ï¼Œå¯é€šè¿‡å›½å®¶/ç±»åˆ«é…ç½®ï¼š
    *   ç¼ºå°‘èŒç§ä¿¡æ¯æ—¶ç»™å‡ºä¸¥é‡è­¦å‘Šï¼Œå¿…è¦æ—¶é˜»æ­¢ä¿å­˜ã€‚

***

### 2.5.3 PCT ä¿¡æ¯ï¼ˆä»… CaseType=PCT\_INTL/PCT\_NATIONAL æ—¶æ˜¾ç¤ºï¼‰

**UIï¼šPCT æ ‡ç­¾é¡µ**

**PCT å›½é™…é˜¶æ®µå­—æ®µï¼ˆPCT\_INTLï¼‰**

*   `RO` â€“ å›½é™…å—ç†å±€
*   `ISA` â€“ å›½é™…æ£€ç´¢å•ä½
*   `IPEA` â€“ å›½é™…åˆå®¡å•ä½
*   `IntlAppNo` â€“ å›½é™…ç”³è¯·å·
*   `IntlAppDate` â€“ å›½é™…ç”³è¯·æ—¥
*   `IntlPubNo` â€“ å›½é™…å…¬å¼€å·
*   `IntlPubDate` â€“ å›½é™…å…¬å¼€æ—¥
*   `IntlPubLang` â€“ å…¬å¼€è¯­ç§
*   `NeedIPER` â€“ æ˜¯å¦è¦æ±‚å›½é™…åˆæ­¥å®¡æŸ¥
*   `IPERDate` â€“ å›½é™…åˆå®¡æŠ¥å‘Šæ—¥

**PCT å›½å®¶é˜¶æ®µå­—æ®µï¼ˆPCT\_NATIONALï¼‰**

*   `PCT_NationalEntryDate` â€“ å›½å®¶é˜¶æ®µè¿›å…¥æ—¥ï¼ˆé€šå¸¸ä¸ºè¿›å…¥è¯¥å›½å±€çš„æ—¥å­ï¼‰

**ä¸šåŠ¡è§„åˆ™**

*   V-PCT-01ï¼šCaseType=PCT\_INTL æ—¶ï¼Œ`IntlAppNo/IntlAppDate` å¿…å¡«ï¼›å¦‚ç©ºåˆ™ä¿å­˜æ—¶æŠ¥é”™æˆ–ç»™å‡ºå¼ºæç¤ºã€‚
*   V-PCT-02ï¼šCaseType=PCT\_NATIONAL æ—¶ï¼Œ`PCT_NationalEntryDate` å¿…å¡«ã€‚
*   V-PCT-03ï¼šNeedIPER ä¸º true æ—¶ï¼Œåº”åœ¨ä¸€å®šæ—¶é—´å†…å¡«å†™ IPERDateï¼›å¦åˆ™å¹´è´¹/æ—¶é™æ¨¡å—å¯èƒ½å¯¹è¯¥æ¡ˆå‘å‡ºæé†’ï¼ˆåœ¨æ—¶é™æ¨¡å—ä¸­å®ç°ï¼‰ã€‚

***

### 2.5.4 æ— æ•ˆæ¡ˆä»¶ä¸“å±å­—æ®µï¼ˆCaseType=INVALIDATIONï¼‰

**UIï¼šæ— æ•ˆæ¡ˆæ ‡ç­¾é¡µ**

å­—æ®µï¼š

*   `InvalidClientID` â€“ å§”æ‰˜æ–¹ï¼ˆFKâ†’T\_Clientï¼Œä¸€èˆ¬=Case.ClientIDï¼‰
*   `InvalidPatentee` â€“ ä¸“åˆ©æƒäººåç§°æ–‡æœ¬
*   `InvalidRequester` â€“ è¯·æ±‚äººåç§°æ–‡æœ¬
*   `InvalidRole` â€“ æšä¸¾ï¼šPATENTEE / REQUESTER / BOTH

**ä¸šåŠ¡è§„åˆ™**

*   CaseType=INVALIDATION æ—¶ï¼Œæ— æ•ˆæ¡ˆæ ‡ç­¾é¡µæ˜¾ç¤ºï¼›
*   V-INV-01ï¼šå¿…é¡»è®¾ç½® InvalidClientID å’Œ InvalidRoleï¼›
*   V-INV-02ï¼šæ ¹æ®ä¸šåŠ¡ç­–ç•¥ï¼Œå¯è¦æ±‚è‡³å°‘å¡«å†™ InvalidPatentee æˆ– InvalidRequester ä¸­ä¹‹ä¸€ï¼›
*   V-INV-03ï¼šåœ¨ç”ŸæˆæŠ¥è¡¨æ—¶ï¼Œå¯é€šè¿‡ InvalidRole åˆ¤æ–­æœ¬äº‹åŠ¡æ‰€åœ¨æ— æ•ˆæ¡ˆä»¶ä¸­ä»£è¡¨å“ªä¸€æ–¹ã€‚

***

## 2.6 æ¡ˆä»¶ä¿¡æ¯è¡¥å……ï¼ˆé™åˆ¶ä¿®æ”¹è§†å›¾ï¼‰

### 2.6.1 åœºæ™¯ä¸æƒé™

**åœºæ™¯**

*   éƒ¨åˆ†ä»£ç†äºº/ä¸šåŠ¡äººå‘˜åªè¢«å…è®¸è¡¥å……éå…³é”®å­—æ®µï¼ˆæ¯”å¦‚æ–°å¢/è°ƒæ•´å‘æ˜äººåˆ—è¡¨ã€è¡¥å……è§„æ ¼ã€ä¿®æ­£æ–‡ç¨¿æ ‡é¢˜ç­‰ï¼‰ï¼Œä¸å…è®¸ä¿®æ”¹æ¡ˆä»¶ç±»å‹ã€ç”³è¯·å·ã€å…³é”®æ—¥æœŸã€æ³•å¾‹çŠ¶æ€ç­‰ï¼›
*   ä¸ºæ­¤éœ€è¦ä¸€ä¸ªå•ç‹¬å…¥å£ + æƒé™æ§åˆ¶ï¼Œåªå¼€æ”¾æœ‰é™å­—æ®µã€‚

**æƒé™**

*   æƒé™ç ï¼š`CaseEditLimited`
*   æ‹¥æœ‰è¯¥æƒé™çš„ç”¨æˆ·åœ¨æ¡ˆå·è¯¦æƒ…é¡µä¼šçœ‹åˆ°â€œè¡¥å……ä¿¡æ¯â€æŒ‰é’®ï¼›
*   ä¸æ‹¥æœ‰è¯¥æƒé™åˆ™çœ‹ä¸åˆ°è¯¥å…¥å£ã€‚

### 2.6.2 å¯ç¼–è¾‘ vs ä¸å¯ç¼–è¾‘å­—æ®µ

**å¯ç¼–è¾‘å­—æ®µé›†åˆï¼ˆç™½åå•ï¼Œç¤ºä¾‹ï¼‰**

*   åç§°ç›¸å…³ï¼š`Title_CN`, `Title_EN`
*   è§„æ ¼å­—æ®µï¼š`SpecPages`, `DrawPages`, `ClaimCount`, `ClaimPages`, `ManuscriptWords`
*   å‘æ˜äººåˆ—è¡¨ï¼š`T_CaseInventor` æ‰€æœ‰è¡Œ
*   éƒ¨åˆ†å¤‡æ³¨å­—æ®µï¼šå¦‚ `Description` æˆ–ä¸“ç”¨â€œè¡¥å……ä¿¡æ¯â€å¤‡æ³¨å­—æ®µ

**å¼ºåˆ¶åªè¯»å­—æ®µï¼ˆé»‘åå•ï¼‰**

*   Case çš„æ‰€æœ‰ä¸»é”®å’Œç±»å‹ï¼š`CaseID`, `CaseNo`, `CaseType`, `PatentCategory`, `FlowDir`
*   å®¢æˆ·/å¤–æ–¹ä»£ç†ï¼š`ClientID`, `ForeignAgentID`ï¼ˆå¯ç”± Formalities ä¿®æ”¹ï¼‰
*   å…³é”®æ—¥æœŸï¼š`RecvDate`, `FilingDate`, `PrioDate`, `PubDate`, `IssueDate`, `GrantDate`, `ValidUntil`, `PCT_NationalEntryDate` ç­‰
*   å…³é”®ç¼–å·ï¼š`AppNo`, `PubNo`, `GrantNo`, `CertNo`, `IntlAppNo`
*   çŠ¶æ€å’Œæ§åˆ¶æ ‡è®°ï¼š`Status`, `ApplicantKind`, `FeeReduction`, `IsFeeMonitor`, `HasExamRequest`, `NoPower`, `NoPrioText` ç­‰
*   æ‰©å±•ä¿¡æ¯ï¼šPCT å­—æ®µã€æ— æ•ˆæ¡ˆå­—æ®µç­‰å‡åªè¯»

### 2.6.3 ä¿å­˜é€»è¾‘

1.  ç”¨æˆ·é€šè¿‡â€œè¡¥å……ä¿¡æ¯â€è§†å›¾å¯¹å¯ç¼–è¾‘å­—æ®µè¿›è¡Œä¿®æ”¹ã€‚
2.  ç‚¹å‡»ä¿å­˜ï¼š
    *   æ ¡éªŒä»…é’ˆå¯¹è¿™äº›å­—æ®µï¼ˆä¾‹å¦‚è§„æ ¼ä¸ºéè´Ÿæ•´æ•°ï¼‰ï¼›
    *   ä»…æ›´æ–°å¯¹åº” `T_Case` å­—æ®µæˆ–å­è¡¨ï¼ˆå¦‚ `T_CaseInventor`ï¼‰ï¼›
    *   å†™å…¥ `UpdatedBy/UpdatedAt`ã€‚
3.  **ä¸è§¦å‘**ï¼šä»»ä½•çŠ¶æ€å˜æ›´é€»è¾‘ã€æ—¶é™ä»»åŠ¡ç”Ÿæˆã€è´¹ç”¨è‰å•ç”Ÿæˆç­‰è”åŠ¨ï¼›
4.  æ“ä½œå¯å†™å…¥å®¡è®¡æ—¥å¿—ï¼Œä¾¿äºè¿½è¸ªè°è¡¥å……äº†å“ªäº›ä¿¡æ¯ã€‚

***

## 2.7 æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆBatch Filingï¼‰

### 2.7.1 åŠŸèƒ½ç›®æ ‡

*   åœ¨å•ä¸ªç•Œé¢ä¸­æŒ‰æ¡ä»¶æ£€ç´¢å‡ºä¸€æ‰¹å°šæœªé€’äº¤çš„æ¡ˆä»¶ï¼ˆé€šå¸¸ Status=NOT\_FILEDï¼‰ï¼ŒæŒ‰ç”³è¯·æ–¹å‘/æ¡ˆä»¶ç±»å‹ç­‰è¿‡æ»¤ï¼›
*   é€‰ä¸­ä¸€æ‰¹æ¡ˆä»¶ï¼Œä¸€æ¬¡æ€§è®¾ç½®ï¼š
    *   é€’äº¤æ—¥æœŸ
    *   æ˜¯å¦åŒæ—¶æäº¤å®å®¡è¯·æ±‚
    *   æ˜¯å¦ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£
*   è‡ªåŠ¨æ›´æ–°æ‰€é€‰æ¡ˆä»¶çš„ `Status` å’Œ `HasExamRequest`ï¼Œå¹¶ä¸ºéœ€è¦çš„æ¡ˆä»¶ç”Ÿæˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ã€‚

### 2.7.2 ç­›é€‰æ¡ä»¶

åœ¨â€œæ¡ˆä»¶é€’äº¤â€ç•Œé¢çš„ç­›é€‰åŒºï¼š

*   CaseTypeï¼ˆå¤šé€‰ï¼‰ï¼šNORMAL / PCT\_NATIONAL / HK\_REG ç­‰
*   FlowDirï¼ˆå¤šé€‰ï¼‰ï¼šIN\_IN / IN\_OUT / OUT\_IN / HK\_IN / OUT\_OUT
*   Statusï¼šé»˜è®¤å›ºå®šä¸º NOT\_FILEDï¼Œä¹Ÿå¯æ”¯æŒâ€œç­‰å¾…é€’äº¤â€ä¹‹ç±»ä¸­é—´çŠ¶æ€
*   RecvDate èŒƒå›´ï¼šä» / è‡³
*   å®¢æˆ· / ä»£ç†äººï¼šå¯é€‰
*   ä¸“åˆ©ç±»åˆ«ï¼šå¯é€‰ï¼ˆINVENTION / UTILITY / DESIGNï¼‰

### 2.7.3 åˆ—è¡¨å­—æ®µ

æ£€ç´¢ç»“æœåˆ—è¡¨ï¼š

*   å‹¾é€‰æ¡†
*   CaseNo
*   Title\_CN
*   ClientName
*   CaseType/PatentCategory
*   FlowDir
*   RecvDate
*   å½“å‰ `Status`
*   `HasExamRequest` æ ‡å¿—ï¼ˆç”¨äºæç¤ºæ˜¯å¦å·²å•ç‹¬æå®å®¡ï¼‰

### 2.7.4 æ‰¹å¤„ç†å‚æ•°åŒº

*   `SubmittedDate` â€“ é€’äº¤æ—¥æœŸï¼ˆå¿…å¡«ï¼Œé»˜è®¤ä»Šæ—¥ï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹ï¼‰
*   `ApplyExamNow` bool â€“ æ˜¯å¦åŒæ—¶æäº¤å®å®¡è¯·æ±‚ï¼ˆé’ˆå¯¹å‘æ˜æ–°æ¡ˆï¼‰
*   `GenerateList` bool â€“ æ˜¯å¦ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£

### 2.7.5 æ ¡éªŒé€»è¾‘

*   V-BF-01ï¼šè‡³å°‘å‹¾é€‰ä¸€ä¸ªæ¡ˆä»¶ï¼Œå¦åˆ™ä¸å…è®¸æ‰§è¡Œã€‚
*   V-BF-02ï¼šSubmittedDate ä¸å¾—æ—©äº RecvDateï¼ˆå¯é…ç½®ä¸ºè½¯/ç¡¬æ ¡éªŒï¼‰ï¼Œä¸åº”æ˜¾è‘—æ™šäºå½“å‰æ—¥æœŸï¼ˆä¾‹å¦‚è¶…è¿‡ä¸€å®šå¤©æ•°æç¤ºâ€œå½•å…¥æ—¶é—´æ»åâ€ï¼‰ã€‚

### 2.7.6 æ•°æ®æ›´æ–°

å¯¹æ¯ä¸ªé€‰ä¸­çš„æ¡ˆä»¶ï¼š

1.  æ›´æ–° `T_Case.Status: NOT_FILED â†’ WAITING_RECEIPT`ã€‚
2.  è‹¥ `ApplyExamNow` ä¸º trueï¼Œåˆ™å°† `T_Case.HasExamRequest = true`ã€‚
3.  å¯è°ƒç”¨æ—¶é™æ¨¡å—ç”Ÿæˆ/æ›´æ–°â€œç”³è¯·è´¹/å—é€šæ—¶é™ä»»åŠ¡â€ï¼ˆè§†ä¸šåŠ¡è§„åˆ™ï¼‰ã€‚

### 2.7.7 é€’äº¤æ¸…å•æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰

*   è‹¥ `GenerateList=true`ï¼š
    *   æ„é€ æ•°æ®æºï¼šæ‰€æœ‰é€‰ä¸­çš„æ¡ˆä»¶åˆ—è¡¨ï¼ˆCaseNo/Title/AppNo/Applicant/Client ç­‰å­—æ®µï¼‰ï¼›
    *   è°ƒç”¨æ¨¡æ¿ç³»ç»Ÿï¼ˆWord æ¨¡æ¿ï¼‰ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£ï¼ˆdocxï¼‰ï¼Œå†…å®¹å¯åŒ…æ‹¬ï¼š
        *   æ¡ˆå·å·ã€ä¸“åˆ©åç§°ã€ç”³è¯·äººã€ä»£ç†äººã€å¤‡æ³¨ç­‰ï¼›
    *   å°†ç”Ÿæˆçš„æ–‡æ¡£ç™»è®°åˆ° `T_Document`ï¼ˆç±»å‹ï¼šOFFICIAL\_OUT æˆ– INTERNALï¼‰ï¼Œå¹¶å°† Word æ–‡ä»¶è·¯å¾„å†™å…¥ `T_DocAttachment`ã€‚

***

## 2.8 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story / FR / ç« èŠ‚æ˜ å°„ï¼‰

### 2.8.1 User Story â†’ FR â†’ ç« èŠ‚ï¼ˆè¡¨ 1ï¼‰

| User Story ID    | ç®€è¦è¯´æ˜                           | è¦†ç›– FR                                             | ä¸»è¦å®ç°ç« èŠ‚ï¼ˆå«ç»†èŠ‚ï¼‰                         | è¯´æ˜                                                                                                                                              |
| ---------------- | ------------------------------ | ------------------------------------------------- | ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| US-CM-01 æ–°æ¡ˆå»ºç«‹    | æ–°å»ºæ¡ˆå·ï¼Œå½•å…¥åŸºæœ¬ä¿¡æ¯ã€å‚ä¸æ–¹ã€æ—¥æœŸã€æ§åˆ¶æ ‡è®°å¹¶ä¿å­˜     | FR-CM-01, FR-CM-02, éƒ¨åˆ† FR-CM-03/FR-CM-04/FR-CM-05 | 2.3 æ•°æ®æ¨¡å‹ã€2.4 æ–°æ¡ˆå»ºç«‹ / æ¡ˆå·åŸºæœ¬ä¿¡æ¯ã€2.5 æ‰©å±•ä¿¡æ¯ | 2.4 å®šä¹‰ CaseNo/CaseType/PatentCategory/FlowDir/ClientID/Applicant/Inventor/æ—¥æœŸ/è§„æ ¼ç­‰å­—æ®µåŠæ ¡éªŒï¼›ä¿å­˜æ—¶è°ƒç”¨ 2.3 æ•°æ®æ¨¡å‹æ›´æ–°é€»è¾‘ï¼Œç¡®ä¿ CaseNo å”¯ä¸€ã€çŠ¶æ€/æ—¥æœŸä¸€è‡´ï¼›æ‰©å±•ä¿¡æ¯ç”± 2.5 æ”¯æŒã€‚     |
| US-CM-02 æ‰©å±•ä¿¡æ¯ç»´æŠ¤  | ç»´æŠ¤ä¼˜å…ˆæƒã€èŒç§ä¿è—ã€PCTã€æ— æ•ˆæ¡ˆä¸“å±å­—æ®µ         | FR-CM-05                                          | 2.5 æ‰©å±•ä¿¡æ¯å››å°èŠ‚                         | 2.5.1 ä¼˜å…ˆæƒæè¿° T\_Priority ä¸ PrioDate å›å†™ï¼›2.5.2 èŒç§ä¿è—å†™ T\_BioDepositï¼›2.5.3 PCT å­—æ®µåœ¨ PCT\_INTL/PCT\_NATIONAL æ¡ˆä¸Šç»´æŠ¤ï¼›2.5.4 æ— æ•ˆæ¡ˆå­—æ®µç”¨äº CaseType=INVALIDATIONã€‚ |
| US-CM-03 å‚ä¸æ–¹ç®¡ç†   | é€‰æ‹©/æ–°å¢å®¢æˆ·ã€ç”³è¯·äººã€å¤–æ–¹ä»£ç†ã€è®¾ç½®åœ°å€          | FR-CM-03, éƒ¨åˆ† FR-CM-02/FR-CM-05                    | 2.3.2â€“2.3.4, 2.4.3                  | T\_Applicant/T\_CaseApplicant/T\_CaseInventor/T\_Client/T\_ClientAddress çš„å…³ç³»æ„æˆå‚ä¸æ–¹ç®¡ç†ï¼›æ ¡éªŒæ³•äºº/è‡ªç„¶äººä¸€è‡´æ€§ã€æ¶‰å¤–æ¡ˆå¿…é¡»æœ‰ ForeignAgentã€‚                            |
| US-CM-04 é™åˆ¶ä¿®æ”¹è§†å›¾  | ä»£ç†äººä»…èƒ½è¡¥å……å°‘é‡å­—æ®µä¸å½±å“å…³é”®æ³•å¾‹ä¿¡æ¯           | FR-CM-06                                          | 2.6                                 | å®šä¹‰å¯ç¼–è¾‘å­—æ®µç™½åå•ä¸åªè¯»å­—æ®µåˆ—è¡¨ï¼›ä¿å­˜æ—¶ä»…æ›´æ–°ç™½åå•ï¼Œä¸”ä¸è§¦å‘çŠ¶æ€/æ—¶é™/è´¹ç”¨è”åŠ¨ã€‚                                                                                                     |
| US-CM-05 æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç† | æ‰¹å¤„ç†â€œæœªé€’äº¤â€æ¡ˆä»¶ï¼Œè®¾ç½®é€’äº¤æ—¥æœŸå’Œå®å®¡è¯·æ±‚ï¼Œå¹¶ç”Ÿæˆé€’äº¤æ¸…å• | FR-CM-07, éƒ¨åˆ† FR-CM-02/FR-CM-04                    | 2.7                                 | 2.7.1â€“2.7.7 æè¿°ç­›é€‰æ¡ä»¶ã€åˆ—è¡¨å­—æ®µã€æ‰¹å‚æ•°ã€æ ¡éªŒå’Œæ•°æ®æ›´æ–°ï¼ˆStatus/HasExamRequestï¼‰ï¼Œå¹¶å¯ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£ã€‚                                                                          |

***

### 2.8.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 2ï¼‰

| FR ID    | æè¿°                           | ä¸»è¦å®ç°ç« èŠ‚                  | å…³é”®å­—æ®µ / æ ¡éªŒ / æµç¨‹ç‚¹                                                                                                                                                                                                                 |
| -------- | ---------------------------- | ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| FR-CM-01 | æ ¹æ®æ¡ˆä»¶ç±»å‹ã€ä¸“åˆ©ç±»åˆ«ã€ç”³è¯·æ–¹å‘åˆ›å»ºæ–°æ¡ˆï¼Œæ¡ˆå·å·å…¨å±€å”¯ä¸€ | 2.3, 2.4                | 2.3 ä¸­å®šä¹‰ `T_Case` å®Œæ•´å­—æ®µï¼›2.4.2\~2.4.5 ä½œä¸ºæ–°æ¡ˆé¡µé¢å­—æ®µä¸æ ¡éªŒï¼›`CaseNo` å”¯ä¸€æ€§ï¼ˆV-A-01ï¼‰ï¼ŒCaseType/PatentCategory/FlowDir åˆæ³•ç»„åˆï¼ˆV-A-02/03ï¼‰ã€‚                                                                                                            |
| FR-CM-02 | ä¿å­˜æ—¶æ ¡éªŒå¿…å¡«å­—æ®µåŠç»„åˆè§„åˆ™               | 2.4                     | åŒ…æ‹¬ï¼šæ¶‰å¤– FlowDir éœ€æœ‰ ToCountry å’Œ ForeignAgentIDï¼ˆV-A-03ã€V-B-01ï¼‰ã€ç”³è¯·äººè‡³å°‘ä¸€æ¡åŠå”¯ä¸€ç¬¬ä¸€ç”³è¯·äººï¼ˆV-C-01/02ï¼‰ã€ApplicantKind ä¸ç¬¬ä¸€ç”³è¯·äºº IsLegalEntity ä¸€è‡´ï¼ˆV-C-03ï¼‰ã€çŠ¶æ€â€“æ—¥æœŸå…³è”ï¼ˆV-D-01/02ï¼‰ã€ä¼˜å…ˆæƒä¸ FilingDate æ¯”è¾ƒï¼ˆV-D-03ï¼‰ã€AppNo æ ¼å¼æ ¡éªŒï¼ˆV-D-04ï¼‰ã€FeeReduction é€»è¾‘æ ¡éªŒï¼ˆV-E-02ï¼‰ã€‚ |
| FR-CM-03 | æ”¯æŒä»ä¸»æ•°æ®ä¸­é€‰æ‹©å®¢æˆ·/ç”³è¯·äºº/å¤–æ–¹ä»£ç†ï¼Œå…è®¸æ–°å¢å¹¶å›å¡« | 2.3.2â€“2.3.4, 2.4.3      | é€šè¿‡ `T_Client/T_Applicant` å®ç°ä¸»æ•°æ®ï¼›ç•Œé¢ä¸Šé€šè¿‡æœç´¢ä¸‹æ‹‰ + â€œæ–°å¢â€å…¥å£å®ç°ï¼›ä¿å­˜æ—¶å¼•ç”¨ IDï¼›ä¸€è‡´æ€§æ ¡éªŒè§ V-B-01/02, V-C-03ã€‚                                                                                                                                         |
| FR-CM-04 | ç»´æŠ¤å®Œæ•´æ³•å¾‹çŠ¶æ€æšä¸¾ï¼Œå¹¶æ”¯æŒç”±ä¸­é—´æ–‡ä»¶/æµç¨‹è‡ªåŠ¨æ›´æ–°   | 2.3.1, 2.5, 2.7ï¼ˆä¸æ¨¡å—äºŒè”åŠ¨ï¼‰ | 2.3.1 ä¸­å®šä¹‰ Status æšä¸¾ï¼›ä¸­é—´æ–‡ä»¶æ¨¡å—ä¸­çš„ StatusEffect/StatusRestore å†³å®šçŠ¶æ€å˜æ›´ï¼ˆä¾‹å¦‚ OA\_NOTICE â†’ OA1ï¼ŒGRANT\_NOTICE â†’ GRANTEDï¼›OA\_REPLY â†’ SUB\_EXAMï¼‰ï¼›é€’äº¤æ‰¹å¤„ç†å°† Status ä» NOT\_FILED æ”¹ä¸º WAITING\_RECEIPTï¼›æ— æ•ˆ/è¯‰è®¼è£å†³ä¼šå°†åŸæ¡ˆ Status æ”¹ä¸º INVALIDATED/TERMINATEDã€‚  |
| FR-CM-05 | æ”¯æŒä¼˜å…ˆæƒã€èŒç§ä¿è—ã€PCT ä¿¡æ¯ã€æ— æ•ˆæ¡ˆä¸“å±å­—æ®µ    | 2.5                     | 2.5.1\~2.5.4 åˆ†åˆ«å®šä¹‰ T\_Priority/T\_BioDeposit/PCT æ‰©å±•å­—æ®µ/æ— æ•ˆæ¡ˆå­—æ®µï¼Œé™„å¸¦å¯¹åº” UI/æ ¡éªŒè§„åˆ™ï¼ˆV-P-01/02ã€V-PCT-01/02ã€V-INV-01/02 ç­‰ï¼‰ï¼›ä¿å­˜æ—¶æ›´æ–° T\_Case.PrioDateï¼ˆä¼˜å…ˆæƒï¼‰å’Œå…¶ä»–å­—æ®µã€‚                                                                                  |
| FR-CM-06 | æä¾›é™åˆ¶ä¿®æ”¹è§†å›¾ï¼Œåªèƒ½ç¼–è¾‘ç™½åå•å­—æ®µ           | 2.6                     | å®šä¹‰ CaseEditLimited æƒé™ã€å¯ç¼–è¾‘å­—æ®µç™½åå•ï¼ˆTitleã€è§„æ ¼ã€å‘æ˜äººã€å¤‡æ³¨ï¼‰ã€åªè¯»å­—æ®µé»‘åå•ï¼ˆCaseNo/Status/å…³é”®æ—¥æœŸç­‰ï¼‰ï¼Œä¿å­˜é€»è¾‘ä¸è§¦å‘çŠ¶æ€/æ—¶é™/è´¹ç”¨è”åŠ¨ã€‚                                                                                                                                 |
| FR-CM-07 | æä¾›æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†                    | 2.7                     | æŸ¥è¯¢æ¡ä»¶ï¼ˆCaseType/FlowDir/Status/æ—¥æœŸ/å®¢æˆ·ï¼‰ã€ç»“æœåˆ—è¡¨å­—æ®µã€æ‰¹å¤„ç†å‚æ•°ï¼ˆSubmittedDate/ApplyExamNow/GenerateListï¼‰ï¼Œæ ¡éªŒï¼ˆV-BF-01/02ï¼‰ï¼Œå¯¹æ¯æ¡ˆæ›´æ–° Status/HasExamRequestï¼ŒåŠå¯é€‰ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£ã€‚                                                                               |

***

åˆ°è¿™é‡Œï¼Œ**æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤ï¼ˆCase Maintenanceï¼‰** æ‰€æœ‰æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ç»†èŠ‚ï¼ˆæ•°æ®æ¨¡å‹ã€å­—æ®µã€æ ¡éªŒã€æµç¨‹ã€USâ†”FR æ˜ å°„ï¼‰éƒ½å·²ç»æ”¶è¿›è¿™ä¸ª v2.0 æ–‡æ¡£é‡Œäº†ï¼Œæ²¡æœ‰åšåˆ å‡æˆ–å‹ç¼©ï¼Œä»…åœ¨ä¸ªåˆ«åœ°æ–¹ä¸ºå¯è¯»æ€§åŠ äº†å°æ ‡é¢˜ã€‚

## 3. æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†ï¼ˆDocuments & Correspondenceï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”æ—§ç‰ˆç”¨æˆ·æ‰‹å†Œä¸­â€œä¸­é—´æ–‡ä»¶ç®¡ç†â€ç›¸å…³ç« èŠ‚ï¼Œå¹¶åˆå¹¶äº†ä¹‹å‰æ‰€æœ‰å…³äºâ€œæµç¨‹åä½œä¸æ–‡æ¡£ / ä¸­é—´æ–‡ä»¶ç®¡ç†â€çš„è¯¦ç»†è®¾è®¡ä¸è¡¥å……è¯´æ˜ã€‚\
> ä¸åšå‹ç¼©ï¼šåŒ…æ‹¬æ•°æ®æ¨¡å‹ã€å­—æ®µçº§ UIã€æ ¡éªŒè§„åˆ™ã€å‘å¯¼æ­¥éª¤ã€é¢„å®šä¹‰æ¨¡æ¿ã€ç”µå­æ¡£æ¡ˆã€é‚®å¯„/äº¤æ¥/ä¿¡å°ã€æŸ¥è¯¢ä¸æ¸…å•ï¼Œä»¥åŠ FR æ˜ å°„ã€‚

***

## 3.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 3.1.1 èŒƒå›´

ä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†æ¨¡å—è´Ÿè´£æ‰€æœ‰â€œå›´ç»•æ¡ˆä»¶çš„æ¥å¾€æ–‡ä¹¦â€çš„ç®¡ç†ï¼ŒåŒ…æ‹¬ï¼š

1.  **ä¸­é—´æ–‡ä»¶åˆ†ç±»ä¸å½•å…¥**
    *   å®˜æ–¹æ¥æ–‡ï¼ˆOFFICIAL\_INï¼‰ï¼šå—ç†é€šçŸ¥ã€OA é€šçŸ¥ã€æˆæƒé€šçŸ¥ã€å¹´è´¹å‚¬ç¼´é€šçŸ¥ç­‰
    *   å®˜æ–¹å»æ–‡ï¼ˆOFFICIAL\_OUTï¼‰ï¼šé€’äº¤æ¸…å•ã€OA ç­”å¤ã€æ— æ•ˆè¯·æ±‚ã€ç­”è¾©çŠ¶ç­‰
    *   å®¢æˆ·æ¥æ–‡ï¼ˆCLIENT\_INï¼‰ï¼šå®¢æˆ·æŒ‡ç¤ºã€å®¢æˆ·å›å¤ã€å®¢æˆ·æŠ•è¯‰ç­‰
    *   è‡´å‡½å®¢æˆ·ï¼ˆCLIENT\_OUTï¼‰ï¼šè´¹ç”¨é€šçŸ¥å‡½ã€å¹´è´¹é€šçŸ¥å‡½ã€å‚¬æ¬¾å‡½ç­‰
2.  **å¸¸ç”¨æ–‡ä»¶é¢„å®šä¹‰ï¼ˆDocTemplateï¼‰**
    *   å¯¹ä¸åŒç±»å‹çš„å¸¸ç”¨æ–‡ä»¶é…ç½®ï¼š
        *   æ–‡ä»¶ç±»å‹ï¼ˆDocTypeï¼‰
        *   åç§°
        *   æ˜¯å¦éœ€é€šçŸ¥ä»£ç†äºº
        *   æ˜¯å¦è§¦å‘æ¡ˆä»¶çŠ¶æ€å˜åŒ–
        *   æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆæ—¶é™ä»»åŠ¡ï¼ˆDeadlineTemplateCodeï¼‰
        *   æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆè´¹ç”¨è‰å•ï¼ˆFeeDraftType/FeeItemListï¼‰
        *   æ˜¯å¦ä¸ºæŸæ–‡ä»¶çš„å›å¤ï¼ˆReplyToTemplateCodeï¼‰
        *   æ‰€éœ€é¢å¤–è¾“å…¥ä¿¡æ¯åˆ—è¡¨ï¼ˆInputFieldListï¼‰
3.  **ç”µå­æ¡£æ¡ˆç®¡ç†**
    *   æ‰«æçº¸ä»¶ï¼ˆæ‰«ææˆ PDF/JPEG ç­‰ä¸Šä¼ ï¼‰
    *   å¯¼å…¥ç°æˆç”µå­æ–‡ä»¶ï¼ˆWord/PDF/Email é™„ä»¶ç­‰ï¼‰
    *   åŸºäº Word æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆæ–‡ä¹¦ï¼Œå¹¶å°†ç”Ÿæˆçš„ docx ä½œä¸ºé™„ä»¶å­˜æ¡£
4.  **ä¸å…¶å®ƒæ¨¡å—çš„è”åŠ¨**
    *   æ ¹æ®ä¸­é—´æ–‡ä»¶æ¨¡æ¿è‡ªåŠ¨åˆ›å»ºï¼š
        *   **æ—¶é™ä»»åŠ¡**ï¼ˆæ¨¡å—ä¸‰ `T_Task`ï¼‰
        *   **è´¹ç”¨è‰å•**ï¼ˆæ¨¡å—å›› `T_FeeDraft/T_FeeItem`ï¼‰
        *   **æ¡ˆä»¶çŠ¶æ€æ›´æ–°**ï¼ˆæ¨¡å—ä¸€ `T_Case.Status`ï¼‰
5.  **é‚®å¯„ & æ–‡ä»¶äº¤æ¥ & ä¿¡å°**
    *   å¯¹å¤šä»½å»æ–‡ç™»è®°æŒ‚å·å·ï¼ˆé‚®å¯„ä¿¡æ¯ç™»è®°ï¼‰
    *   ä¸ºæŸå®¢æˆ·æŸå¤©é‚®å¯„çš„æ‰€æœ‰æ–‡ä»¶ç”Ÿæˆâ€œæ–‡ä»¶äº¤æ¥å•â€
    *   æ ¹æ®æ¡ˆä»¶/å®¢æˆ·åœ°å€æ‰“å°ä¿¡å°
6.  **ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ä¸æ¸…å•è¾“å‡º**
    *   æŒ‰æ—¶é—´ã€ç±»å‹ã€æ¡ˆä»¶ç­‰æ¡ä»¶æŸ¥è¯¢
    *   è¾“å‡ºä¸­é—´æ–‡ä»¶æ¸…å•ã€è¯ä¹¦æ¸…å•ç­‰è¡¨æ ¼ï¼ˆWord/Excelï¼‰

### 3.1.2 è§’è‰²

*   **Formalities / Flow Admin**
    *   ä¸»è¦å¤„ç†æ‰€æœ‰ä¸­é—´æ–‡ä»¶çš„å½•å…¥ä¸ç»´æŠ¤
    *   ç®¡ç†ç”µå­æ¡£æ¡ˆã€é‚®å¯„ä¿¡æ¯ã€æ–‡ä»¶äº¤æ¥å•ã€æ¸…å•è¾“å‡ºç­‰
*   **Agentï¼ˆä»£ç†äººï¼‰**
    *   æŸ¥çœ‹ä¸è‡ªå·±æ¡ˆä»¶ç›¸å…³çš„æ¥æ–‡/å»æ–‡å’Œé™„ä»¶
    *   æœ‰æƒé™æ—¶ï¼Œå¯å½•å…¥/æŸ¥çœ‹éƒ¨åˆ†å»æ–‡ï¼ˆä¾‹å¦‚ OA ç­”å¤è‰ç¨¿ï¼‰
*   **Finance**
    *   æŸ¥é˜…ä¸è´¹ç”¨/è´¦å•ç›¸å…³çš„ä¸­é—´æ–‡ä»¶
    *   ç¡®è®¤è´¹ç”¨é€šçŸ¥ã€å‚¬æ¬¾å‡½ç­‰ç”Ÿæˆæƒ…å†µ
*   **Admin**
    *   ç»´æŠ¤ `T_DocTemplate` é¢„å®šä¹‰ï¼Œç®¡ç†æ¨¡æ¿ä¸æµç¨‹è”åŠ¨
    *   é…ç½®å“ªäº›ä¸­é—´æ–‡ä»¶ç±»å‹ä¼šè§¦å‘æ¡ˆä»¶çŠ¶æ€å˜æ›´ã€æ—¶é™ä»»åŠ¡æˆ–è´¹ç”¨è‰å•

***

## 3.2 User Stories & Functional Requirements

### 3.2.1 User Storiesï¼ˆUSï¼‰

**US-WD-01 æ¥æ–‡ç™»è®°**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›èƒ½æŒ‰æ¡ˆä»¶æ‰¹é‡å½•å…¥ä¸­é—´æ–‡ä»¶ï¼Œå¹¶è®°å½•å‘æ–‡æ—¥/è½¬å¯„æ—¥/æŒ‚å·å·ç­‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®˜æ–¹æ¥æ–‡å’Œå®¢æˆ·æ¥æ–‡ã€‚

**US-WD-02 å‘æ–‡ç™»è®°ä¸è‡ªåŠ¨æ ¸é”€**\
ä½œä¸º **æµç¨‹äººå‘˜/ä»£ç†äºº**ï¼Œæˆ‘å¸Œæœ›åœ¨ç™»è®°å»æ–‡æ—¶å¯ä»¥æ ‡æ˜â€œå›å¤äº†å“ªä»½æ¥æ–‡â€ï¼Œç³»ç»Ÿè‡ªåŠ¨æ ¸é”€å¯¹åº”çš„æ—¶é™ä»»åŠ¡ï¼ˆä¾‹å¦‚ OA ç­”å¤æ—¶æ ¸é”€ OA ç­”å¤æ—¶é™ä»»åŠ¡ï¼‰ã€‚

**US-WD-03 æœŸé™è”åŠ¨**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›å¯¹éœ€è¦å›å¤çš„ä¸­é—´æ–‡ä»¶ï¼Œç³»ç»Ÿæ ¹æ®é¢„å®šä¹‰è§„åˆ™è‡ªåŠ¨è®¡ç®—å®˜æ–¹ç»é™ã€å†…éƒ¨é™å’Œæé†’æ—¥æœŸï¼Œå¹¶ç”Ÿæˆæ—¶é™ä»»åŠ¡ã€‚

**US-WD-04 è´¹ç”¨è”åŠ¨**\
ä½œä¸º **æµç¨‹äººå‘˜/è´¢åŠ¡**ï¼Œæˆ‘å¸Œæœ›å¯¹æˆæƒé€šçŸ¥ã€å¹´è´¹å‚¬ç¼´é€šçŸ¥ç­‰ä¸­é—´æ–‡ä»¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„è´¹ç”¨è‰å•ï¼ˆå¦‚ç™»è®°è´¹ã€è¯ä¹¦è´¹ã€å¹´è´¹ã€ä¸­é—´è´¹ç­‰ï¼‰ã€‚

**US-WD-05 ç”µå­æ¡£æ¡ˆå­˜æ¡£**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›æ¯ä»½ä¸­é—´æ–‡ä»¶éƒ½èƒ½å¯¹åº” 0..N ä»½ç”µå­é™„ä»¶ï¼ˆæ‰«æä»¶ã€å¯¼å…¥æ–‡ä»¶ã€æ¨¡æ¿ç”Ÿæˆæ–‡ä¹¦ï¼‰ï¼Œå¹¶å¯éšæ—¶é¢„è§ˆ/ä¸‹è½½ã€‚

**US-WD-06 ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ & æ¸…å•è¾“å‡º**\
ä½œä¸º **ç®¡ç†/æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›æŒ‰æ—¶é—´ã€ç±»å‹ã€æ¡ˆä»¶ç­‰æ¡ä»¶æŸ¥è¯¢ä¸­é—´æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºæ¸…å•ï¼ˆå¦‚ä¸­é—´æ–‡ä»¶æ¸…å•ã€è¯ä¹¦æ¸…å•ï¼‰ç”¨äºç»Ÿè®¡ã€æŠ¥å¤‡æˆ–å®¡è®¡ã€‚

**US-WD-07 é‚®å¯„ä¿¡æ¯ç™»è®°ä¸äº¤æ¥å• & ä¿¡å°**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›å¯¹åŒä¸€æ‰¹å¯„å‡ºçš„æ–‡ä»¶ç»Ÿä¸€ç™»è®°æŒ‚å·å·ï¼Œä¸ºå®¢æˆ·ç”Ÿæˆâ€œæ–‡ä»¶äº¤æ¥å•â€ï¼Œå¹¶æ‰“å°ä¿¡å°ã€‚

### 3.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-WD-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå››å¤§ç±»ä¸­é—´æ–‡ä»¶ï¼ˆå®˜æ–¹æ¥æ–‡ã€è‡´å‡½å®˜æ–¹ã€å®¢æˆ·æ¥æ–‡ã€è‡´å‡½å®¢æˆ·ï¼‰ï¼Œä»¥åŠå¯é…ç½®å­ç±»å‹ï¼ˆå¸¸ç”¨æ–‡ä»¶å®šä¹‰ï¼‰ã€‚

**FR-WD-02**ï¼šç³»ç»Ÿå¿…é¡»æä¾›â€œä¸­é—´æ–‡ä»¶å½•å…¥å‘å¯¼â€ï¼Œæ”¯æŒå¯¹ 1..N ä¸ªæ¡ˆä»¶æ‰¹é‡ç™»è®°ä¸­é—´æ–‡ä»¶ã€‚

**FR-WD-03**ï¼šç³»ç»Ÿå¿…é¡»æ ¹æ®å¸¸ç”¨æ–‡ä»¶å®šä¹‰è‡ªåŠ¨å¡«å……ç¼ºçœå­—æ®µï¼ˆæ˜¯å¦éœ€é€šçŸ¥ä»£ç†äººã€æ˜¯å¦éœ€å›å¤ã€æ—¶é™æ¨¡æ¿ã€è´¹ç”¨è‰å•ç±»å‹ã€æ¡ˆä»¶çŠ¶æ€å˜æ›´ç­‰ï¼‰ã€‚

**FR-WD-04**ï¼šå¯¹â€œéœ€è¦å›å¤â€çš„ä¸­é—´æ–‡ä»¶ï¼Œç³»ç»Ÿå¿…é¡»è‡ªåŠ¨è®¡ç®—å›å¤ç»é™ã€å†…éƒ¨é™å’Œæé†’æ—¥æœŸï¼Œå¹¶å»ºç«‹å¯¹åº”çš„æ—¶é™ä»»åŠ¡è®°å½•ã€‚

**FR-WD-05**ï¼šå¯¹å®šä¹‰äº†è´¹ç”¨è‰å•ç±»å‹/è´¹ç”¨é¡¹ç›®çš„ä¸­é—´æ–‡ä»¶ï¼Œç³»ç»Ÿå¿…é¡»è‡ªåŠ¨ç”Ÿæˆå…³è”è´¹ç”¨è‰å•ï¼Œå¹¶å¯æ‰‹å·¥è¡¥å……ã€‚

**FR-WD-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä¸ºæ¯ä¸ªä¸­é—´æ–‡ä»¶å­˜æ¡£ 0..N ä¸ªç”µå­é™„ä»¶ï¼Œå¹¶æ”¯æŒæŸ¥çœ‹/å¯¼å‡ºã€‚

**FR-WD-07**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒæŒ‰å¤šç§æ¡ä»¶æŸ¥è¯¢ä¸­é—´æ–‡ä»¶ï¼Œå¹¶è¾“å‡ºä¸åŒæ ¼å¼çš„ä¸­é—´æ–‡ä»¶æ¸…å•/è¯ä¹¦æ¸…å•ã€‚

**FR-WD-08**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒâ€œé‚®å¯„ä¿¡æ¯ç™»è®°â€ï¼Œå¯¹ä¸€æ‰¹ä¸­é—´æ–‡ä»¶ç»Ÿä¸€è¾“å…¥æŒ‚å·å·ï¼Œæ”¯æŒâ€œä¸€å·å¤åˆ¶ç»™å…¨éƒ¨â€æˆ–é€æ¡å½•å…¥ã€‚

**FR-WD-09**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä¸ºæŒ‡å®šå®¢æˆ·+é‚®å¯„æ—¥æœŸç”Ÿæˆâ€œæ–‡ä»¶äº¤æ¥å•â€ï¼Œå¹¶æ”¯æŒæ‰“å°æˆ–åŸºäºæ¨¡æ¿ç”Ÿæˆ Word ç‰ˆæœ¬ã€‚

**FR-WD-10**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä¿¡å°æ‰“å°ï¼ŒæŒ‰â€œå®¢æˆ·åœ°å€/ç”³è¯·äººè”ç³»äºº/ç”³è¯·äººåœ°å€â€çš„ä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©æ”¶ä»¶äººä¿¡æ¯ï¼Œå¹¶æ‰“å°ä¿¡å°ç‰ˆå¼ã€‚

***

## 3.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

### 3.3.1 `T_Document` â€“ ä¸­é—´æ–‡ä»¶ä¸»è¡¨ï¼ˆå®Œæ•´ç‰ˆï¼‰

**åŸºæœ¬æ ‡è¯†**

*   `DocID` bigint, PK
*   `CaseID` FK â†’ `T_Case`

**ç±»å‹ä¸æ¨¡æ¿**

*   `DocType` enumï¼š
    *   OFFICIAL\_IN â€“ å®˜æ–¹æ¥æ–‡
    *   OFFICIAL\_OUT â€“ å®˜æ–¹å»æ–‡
    *   CLIENT\_IN â€“ å®¢æˆ·æ¥æ–‡
    *   CLIENT\_OUT â€“ è‡´å‡½å®¢æˆ·
*   `TemplateCode` varchar â€“ å¯¹åº” `T_DocTemplate.TemplateCode`
*   `DocName` nvarchar â€“ æ–‡ä»¶åç§°ï¼ˆå¯ç”±æ¨¡æ¿å¸¦å‡ºåäººå·¥å¾®è°ƒï¼‰

**æ—¥æœŸä¸ç¼–å·**

*   `DispatchDate` date â€“ å‘æ–‡æ—¥æœŸï¼š
    *   å¯¹ OFFICIAL\_INï¼šå®˜æ–¹å‘æ–‡æ—¥
    *   å¯¹ OFFICIAL\_OUTï¼šæˆ‘æ–¹å‘æ–‡/æäº¤æ—¥æœŸ
*   `ReceiveDate` date â€“ æ”¶æ–‡æ—¥æœŸï¼ˆå¦‚éœ€è¦ä¸ Dispatch åˆ†ç¦»ï¼‰
*   `ForwardDate` date â€“ è½¬å¯„æ—¥æœŸï¼ˆä¾‹å¦‚å°†å®˜æ–¹æ¥æ–‡è½¬å¯„ç»™å®¢æˆ·çš„æ—¥æœŸï¼‰
*   `IncomingRegNo` nvarchar â€“ æ”¶ä»¶æŒ‚å·å·
*   `OutgoingRegNo` nvarchar â€“ å¯„ä»¶æŒ‚å·å·
*   `InternalDocNo` nvarchar â€“ å†…éƒ¨æ–‡ä»¶ç¼–å·
*   `InputDate` datetime â€“ è¾“æœºæ—¥æœŸï¼ˆç¼ºçœä¸ºåˆ›å»ºæ—¶é—´ï¼‰

**å›å¤ä¸æ—¶é™**

*   `NeedReply` bool â€“ æ˜¯å¦éœ€è¦å›å¤
*   `Deadline` date â€“ å›å¤ç»é™ï¼ˆé€šå¸¸ç”±æ—¶é™æ¨¡å—è®¡ç®—ï¼‰
*   `ReplyDate` date â€“ å®é™…å›å¤æ—¥æœŸ
*   `ReplyToID` FK â†’ `T_Document.DocID` â€“ è¡¨ç¤ºæœ¬æ–‡ä»¶æ˜¯å¯¹å“ªä¸€ä¸ªæ¥æ–‡çš„å›å¤

**é€šçŸ¥ä¸æ‘˜è¦**

*   `NotifyAgent` bool â€“ æ˜¯å¦éœ€è¦é€šçŸ¥ä»£ç†äºº
*   `NotifyTaskID` FK â†’ `T_Task`ï¼ˆå¯é€‰ï¼‰ â€“ ç”¨äºè·Ÿè¸ªâ€œé€šçŸ¥ç±»ä»»åŠ¡â€
*   `Summary` nvarchar â€“ æ‘˜è¦ï¼ˆå¦‚ OA çš„ç®€ç•¥è¯´æ˜ã€è£å†³ç»“æœæ‘˜è¦ç­‰ï¼‰
*   `Remark` nvarchar â€“ å¤‡æ³¨ï¼ˆåŒ…æ‹¬æ»çº³é‡‘è¯•ç®—è¡¨ç»“æœç­‰ï¼‰

**çŠ¶æ€è”åŠ¨**

*   `StatusEffect` nvarchar â€“ å½•å…¥æœ¬æ–‡ä»¶åï¼Œæ¡ˆä»¶çŠ¶æ€åº”å˜ä¸ºçš„å€¼ï¼ˆå¯¹åº” T\_Case.Status æšä¸¾ä¸­çš„æŸä¸ªå€¼ï¼‰
*   `StatusRestore` nvarchar â€“ è‹¥æœ¬æ–‡ä»¶æ„æˆå¯¹æŸæ¥æ–‡çš„å›å¤ï¼Œæˆ–å¤„äºæŸä¸€â€œä¸´æ—¶çŠ¶æ€â€ï¼Œå›å¤æˆ–å®Œæˆåæ¡ˆä»¶çŠ¶æ€åº”æ¢å¤ä¸ºçš„å€¼

**æ‰©å±•æ•°æ®**

*   `ExtraData` json â€“ ç”¨äºå­˜æ”¾ä¸è¯¥æ–‡ä»¶ç›¸å…³çš„æ‰©å±•å­—æ®µï¼Œä¾‹å¦‚ï¼š
    *   æˆæƒé€šçŸ¥ä¸­çš„ï¼šæˆäºˆæ—¥ã€å…¬å‘Šå·ã€é¦–å¹´å¹´è´¹å¹´å·ã€æœ‰æ•ˆæœŸç­‰
    *   OA é€šçŸ¥ä¸­çš„ï¼šå®˜æ–¹ç­”å¤æˆªæ­¢æ—¥ã€OA æ–‡å·
    *   æˆæƒå†³å®šä¹¦ä¸­çš„å…·ä½“è£å®šæƒ…å†µç­‰

**å®¡è®¡**

*   `CreatedBy`, `CreatedAt`
*   `UpdatedBy`, `UpdatedAt`

***

### 3.3.2 `T_DocAttachment` â€“ ç”µå­é™„ä»¶

*   `AttachID` bigint, PK
*   `DocID` FK â†’ `T_Document`
*   `FileName` nvarchar â€“ é™„ä»¶æ–‡ä»¶å
*   `FileType` nvarchar â€“ MIME ç±»å‹æˆ–è‡ªå®šä¹‰ç±»å‹ï¼ˆPDF/DOCX/JPG/EML ç­‰ï¼‰
*   `StoragePath` nvarchar â€“ æ–‡ä»¶å­˜å‚¨è·¯å¾„æˆ–å¯¹è±¡å­˜å‚¨ Key
*   `Language` enumï¼šCN / EN / OTHER â€“ åŒºåˆ†ä¸­æ–‡/è‹±æ–‡ç‰ˆæœ¬
*   `UploadedBy`, `UploadedAt`

> ä¸€ä¸ª `T_Document` å¯æœ‰ 0..N æ¡ `T_DocAttachment`ã€‚

***

### 3.3.3 `T_DocTemplate` â€“ å¸¸ç”¨æ–‡ä»¶å®šä¹‰ï¼ˆé¢„å®šä¹‰ä¸­é—´æ–‡ä»¶ç±»å‹ï¼‰

**å­—æ®µ**

*   `TemplateID` PK
*   `TemplateCode` varchar â€“ å”¯ä¸€ä»£ç ï¼Œå¦‚ï¼šGRANT\_NOTICE, OA\_NOTICE, OA\_REPLY, ANNUITY\_NOTICE, INVALID\_REQUEST ç­‰
*   `DocType` enum â€“ OFFICIAL\_IN/OUT/CLIENT\_IN/OUT
*   `Name` nvarchar â€“ æ–‡ä»¶åç§°ï¼ˆç¼ºçœ DocNameï¼‰

**é€šçŸ¥ä¸é€‚ç”¨èŒƒå›´**

*   `NeedNotifyAgent` bool â€“ å½•å…¥è¯¥ç±»æ–‡ä»¶æ—¶é»˜è®¤ `NotifyAgent=true`
*   `CaseTypeFilter` â€“ é€‚ç”¨æ¡ˆä»¶ç±»å‹åˆ—è¡¨ï¼ˆJSON/é€—å·åˆ†éš”ï¼‰ï¼Œç©º=ä¸é™
*   `PatentCategoryFilter` â€“ é€‚ç”¨ä¸“åˆ©ç±»åˆ«åˆ—è¡¨ï¼Œç©º=ä¸é™

**çŠ¶æ€ä¸æ—¶é™**

*   `StatusEffect` nvarchar â€“ å½•å…¥æ—¶å°† `T_Case.Status` å˜ä¸ºè¯¥å€¼ï¼ˆå¦‚ OA\_NOTICE â†’ OA1ï¼‰
*   `StatusRestore` nvarchar â€“ å›å¤/åç»­æŸåŠ¨ä½œæ—¶æ¢å¤ä¸ºè¯¥å€¼ï¼ˆå¦‚ OA\_REPLY â†’ SUB\_EXAMï¼‰
*   `DeadlineTemplateCode` varchar â€“ è‹¥éç©ºï¼Œåˆ™å¯¹åº”æŸ `T_TaskTemplate`ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆæ—¶é™ä»»åŠ¡

**å›å¤å…³ç³»**

*   `ReplyToTemplateCode` varchar â€“ è‹¥æœ¬æ¨¡æ¿ä»£è¡¨æŸæ¥æ–‡çš„å›å¤ç±»å‹ï¼ŒæŒ‡æ˜å®ƒé€šå¸¸å›å¤å“ªç±»æ¨¡æ¿ï¼ˆä¾‹å¦‚ OA\_REPLY â†’ OA\_NOTICEï¼‰

**è´¹ç”¨è”åŠ¨**

*   `FeeDraftType` varchar â€“ å¯¹åº” `T_FeeDraft.Type`ï¼ˆå¦‚ APPLY\_FEE/GRANT\_FEE/ANNUITY\_FEE/OA\_FEE/INVALID\_FEE/...ï¼‰
*   `FeeItemList` json â€“ é¢„ç½®è´¹ç”¨é¡¹ç›®çš„åˆ—è¡¨ï¼š
    *   å«è´¹ç”¨ä»£ç ã€æ˜¯å¦å®˜è´¹/æœåŠ¡è´¹/æ‚è´¹ã€é€‚ç”¨å¹´å·/ç³»æ•°ç­‰

**è¾“å…¥å­—æ®µåˆ—è¡¨**

*   `InputFieldList` json â€“ éœ€è¦åœ¨â€œæ¡ˆä»¶çŠ¶æ€ä¿¡æ¯å½•å…¥åŒºåŸŸâ€å¡«å†™/æ›´æ–°çš„å­—æ®µï¼Œå¦‚ï¼š
    *   GRANT\_NOTICE æ¨¡æ¿éœ€è¦ï¼šIssueDate, GrantDate, GrantNo, FirstAnnuityYear, ValidUntil
    *   PCT\_RO\_NOTICE æ¨¡æ¿éœ€è¦ï¼šIntlAppNo, IntlAppDate
    *   OA\_NOTICE æ¨¡æ¿å¯èƒ½éœ€è¦ï¼šOfficialDueDateï¼ˆå®˜æ–¹æ˜ç¡®çš„ç­”å¤æˆªæ­¢æ—¥ï¼‰

**æ¨¡æ¿æ–‡ä»¶å…³è”**

*   `PlainTemplateID_CN` FK â†’ `T_Template`ï¼ˆä¸­ æ–‡æ¨¡æ¿ï¼‰
*   `PlainTemplateID_EN` FK â†’ `T_Template`ï¼ˆè‹±æ–‡æ¨¡æ¿ï¼‰

**å…ƒä¿¡æ¯**

*   `IsSystemCritical` bool â€“ æ˜¯å¦ç³»ç»Ÿçº§å…³é”®æ¨¡æ¿ï¼ˆä¸å»ºè®®åˆ é™¤æˆ–ä¿®æ”¹ Codeï¼‰
*   `Enabled` bool â€“ æ˜¯å¦å¯ç”¨
*   å®¡è®¡ï¼šCreated/Updated

***

### 3.3.4 `T_DocDispatch` / `T_DocDispatchLine` â€“ æ–‡ä»¶äº¤æ¥å•

**T\_DocDispatch**ï¼ˆäº¤æ¥å•å¤´ï¼‰

*   `DispatchID` PK
*   `ClientID` FK â†’ T\_Client
*   `DispatchDate` date â€“ æ–‡ä»¶äº¤æ¥æ—¥æœŸï¼ˆé‚®å¯„æ—¥æœŸï¼‰
*   `CreatedBy`, `CreatedAt`
*   å…¶ä»–å­—æ®µï¼š`Remark` ç­‰

**T\_DocDispatchLine**ï¼ˆäº¤æ¥å•æ˜ç»†ï¼‰

*   `LineID` PK
*   `DispatchID` FK
*   `DocID` FK â†’ T\_Document
*   `CaseID` FK â†’ T\_Case
*   `DocName` nvarchar
*   `OutgoingRegNo` nvarchar â€“ è‹¥å·²çŸ¥ï¼Œå†™å…¥

***

## 3.4 ä¸­é—´æ–‡ä»¶å½•å…¥å‘å¯¼ï¼ˆWizardï¼ŒStep 1â€“5ï¼‰

> æ­¤å‘å¯¼æ˜¯æ¨¡å—äºŒçš„æ ¸å¿ƒæ“ä½œè·¯å¾„ï¼Œè¦†ç›– FR-WD-01/02/03/04/05/06/08/09/10 çš„å…³é”®å…¥å£ã€‚

### 3.4.1 Step 1 â€“ é€‰æ‹©æ¡ˆä»¶ & æ–‡ä»¶ç±»å‹ & æ¨¡æ¿ & å‘æ–‡æ—¥

**è¾“å…¥å­—æ®µ**

*   æ¡ˆä»¶è¾“å…¥åŒºåŸŸï¼š
    *   æ–‡æœ¬æ¡†ï¼Œé€è¡Œè¾“å…¥æ¡ˆå·å·æˆ–ç”³è¯·å·ï¼Œå›è½¦æ·»åŠ ï¼›
    *   æ”¯æŒä»â€œæ¡ˆä»¶æŸ¥è¯¢ç»“æœâ€æ‰¹é‡å¯¼å…¥ CaseID åˆ—è¡¨ã€‚
*   `DocType`ï¼šOFFICIAL\_IN / OFFICIAL\_OUT / CLIENT\_IN / CLIENT\_OUT
*   `TemplateCode`ï¼šä» `T_DocTemplate` ä¸­æŒ‰ DocType + æ¡ˆä»¶ç±»å‹/ç±»åˆ«æ»¤å‡ºçš„æ¨¡æ¿åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¡
*   `DispatchDate`ï¼šå‘æ–‡æ—¥ï¼ˆé»˜è®¤ä»Šå¤©ï¼Œå¯ä¿®æ”¹ï¼‰

**æ ¡éªŒ**

*   æ¯ä¸ªè¾“å…¥çš„æ¡ˆå·å·/ç”³è¯·å·å¿…é¡»èƒ½å®šä½åˆ°å”¯ä¸€ `T_Case`ï¼Œå¦åˆ™æŠ¥é”™ï¼›
*   è‡³å°‘é€‰æ‹© 1 ä¸ª CaseIDï¼›
*   å¿…é¡»é€‰æ‹©ä¸€ä¸ª Templateï¼›æ¨¡æ¿åˆ—è¡¨ä¸ºç©ºåˆ™æç¤ºï¼šâ€œæ— é€‚ç”¨æ¨¡æ¿ï¼Œè¯·ç®¡ç†å‘˜åœ¨å¸¸ç”¨æ–‡ä»¶å®šä¹‰ä¸­å¢åŠ æ­¤ç±»æ–‡ä»¶â€ã€‚

**æ¨¡æ¿é»˜è®¤å€¼å¡«å……**

*   é€‰å®š TemplateCode åï¼Œç³»ç»Ÿåœ¨å†…å­˜ä¸­ä¸ºæ¯ä¸ª Case æ„é€ ä¸€æ¡â€œå¾…åˆ›å»º `T_Document` è‰æ¡ˆâ€ï¼š
    *   `CaseID`, `DocType`, `TemplateCode`, `DocName = Template.Name`
    *   `NotifyAgent = NeedNotifyAgent`
    *   è‹¥ `DeadlineTemplateCode` éç©ºï¼Œ`NeedReply` ç¼ºçœä¸º trueï¼›
    *   å°† `InputFieldList` + `FeeDraftType` ç­‰ä¿¡æ¯ä½œä¸ºåç»­æ­¥éª¤çš„å…ƒæ•°æ®ã€‚

***

### 3.4.2 Step 2 â€“ ä¸­é—´æ–‡ä»¶é€æ¡ˆç™»è®°ï¼ˆDoc è¡Œç¼–è¾‘ï¼‰

æ­¤æ­¥éª¤ä¸ºæ¯ä¸ªè‰æ¡ˆ `T_Document` å®é™…ç¼–è¾‘å­—æ®µã€‚

**æ¯æ¡è®°å½•å­—æ®µ**

| å­—æ®µ              | è¯´æ˜                                                                                                 |
| --------------- | -------------------------------------------------------------------------------------------------- |
| åºå·              | è‡ªåŠ¨ç”Ÿæˆï¼Œåªè¯»                                                                                            |
| DocName         | é»˜è®¤ Template.Nameï¼Œå¯ä¿®æ”¹ï¼Œä¸å¾—ä¸ºç©º                                                                          |
| DispatchDate    | é»˜è®¤ Step1 çš„å€¼ï¼Œå¯é’ˆå¯¹æ¯æ¡ˆå•ç‹¬è°ƒæ•´                                                                              |
| NeedNotifyAgent | é»˜è®¤ Template.NeedNotifyAgentï¼Œå¯äººå·¥è°ƒæ•´                                                                  |
| InternalDocNo   | å†…éƒ¨ç¼–å·ï¼ˆå¯é€‰ï¼‰                                                                                           |
| ForwardDate     | è½¬å¯„æ—¥ï¼ˆä¾‹å¦‚å°†å®˜æ–¹æ¥æ–‡è½¬å¯„ç»™å®¢æˆ·/å¤–æ–¹ï¼‰                                                                               |
| IncomingRegNo   | æ”¶ä»¶æŒ‚å·å·ï¼ˆé€‚ç”¨äº OFFICIAL\_IN/CLIENT\_INï¼‰                                                                 |
| OutgoingRegNo   | å¯„ä»¶æŒ‚å·å·ï¼ˆé€‚ç”¨äº OFFICIAL\_OUT/CLIENT\_OUTï¼‰                                                               |
| NeedReply       | æ˜¯å¦éœ€è¦å›å¤ï¼›è‹¥æ¨¡æ¿æœ‰ DeadlineTemplateCodeï¼Œé»˜è®¤ true                                                           |
| Deadline        | å›å¤ç»é™ï¼Œè‹¥ NeedReply=true ä¸” Template æœ‰ DeadlineTemplateCodeï¼Œè¿›å…¥ Step 3 è‡ªåŠ¨è®¡ç®—åˆå€¼                           |
| ReplyDate       | å®é™…å›å¤æ—¥æœŸï¼ˆé€šå¸¸åœ¨â€œå»æ–‡â€å½•å…¥æ—¶å¡«å†™ï¼›æ­¤å¤„å¯ç©ºï¼‰                                                                          |
| ReplyToID       | æœ¬æ–‡ä»¶å›å¤å“ªä¸€ä»½æ¥æ–‡ï¼ˆä¸‹æ‹‰åˆ—å‡ºæœ¬æ¡ˆå·²æœ‰ `T_Document`ï¼Œè¿‡æ»¤å¯å›å¤å¯¹è±¡ï¼‰                                                          |
| Summary         | æ‘˜è¦ï¼ˆå¯é€‰ï¼‰                                                                                             |
| Remark          | å¤‡æ³¨ï¼ˆå¯åŒ…æ‹¬æ»çº³é‡‘è¯•ç®—ã€ç‰¹æ®Šè¯´æ˜ç­‰ï¼‰                                                                                 |
| InputDate       | è¾“æœºæ—¥æœŸï¼Œåªè¯»ï¼Œé»˜è®¤å½“å‰æ—¥æœŸ/æ—¶é—´                                                                                  |
| æ‰©å±•è¾“å…¥å­—æ®µ          | ç”± Template.InputFieldList å†³å®šï¼ˆä¾‹å¦‚ï¼šæˆæƒé€šçŸ¥æ¨¡æ¿éœ€è¾“å…¥ IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntilï¼‰ |

**æ ¡éªŒ**

*   V-DOC-01ï¼šDocName ä¸å¾—ä¸ºç©ºï¼›
*   V-DOC-02ï¼šDispatchDate å¿…å¡«ä¸”ä¸æ™šäºå½“å‰æ—¥æœŸå¤ªä¹…ï¼ˆå¯é…ç½®ï¼‰ï¼›
*   V-DOC-03ï¼šNeedReply=true æ—¶ï¼ŒDeadline å¿…å¡«ï¼ˆè‹¥å°šæœªè®¡ç®—ï¼Œåˆ™ Step 3 ä¼šç»™åˆå€¼ï¼Œå¦åˆ™éœ€ç”¨æˆ·è¾“å…¥ï¼‰ï¼›
*   V-DOC-04ï¼šIncomingRegNo/OutgoingRegNo å¦‚å¡«å†™ï¼Œåˆ™é™åˆ¶é•¿åº¦/å­—ç¬¦é›†ï¼›
*   V-DOC-05ï¼šInputFieldList ä¸­è¦æ±‚å­—æ®µï¼ˆå¦‚ IssueDate/GrantDate ç­‰ï¼‰å¿…é¡»åœ¨ä¿å­˜å‰å¡«å®Œï¼Œå¦åˆ™æŠ¥é”™ï¼ˆè®¸å¯ä½¿ç”¨â€œä»¥åè¡¥å½•â€çš„æ¡ˆå·ä¿¡æ¯è¡¥å……è§†å›¾æ—¶å¦è¡Œå¤„ç†ï¼‰ã€‚

**ä¿å­˜è‰æ¡ˆçŠ¶æ€**

*   åœ¨ Step 2 å®Œæˆåï¼Œç³»ç»Ÿå¯¹æ‰€æœ‰è®°å½•è¿›è¡Œä¸Šè¿°æ ¡éªŒï¼›
*   æš‚ä¸å†™å…¥æ•°æ®åº“ï¼Œåªåœ¨å†…å­˜ä¸­ä¿å­˜å®Œæ•´â€œå¾…åˆ›å»º `T_Document` é›†åˆâ€ï¼Œä¼ å…¥ Step 3ã€Step 4 å’Œ Step 5 ä½¿ç”¨ã€‚

***

### 3.4.3 Step 3 â€“ ç”Ÿæˆç›¸å…³æ—¶é™ä»»åŠ¡ï¼ˆä¸æ—¶é™æ¨¡å—è”åŠ¨ï¼‰

**é€‚ç”¨æ¡ä»¶**

*   å½“å‰ Template çš„ `DeadlineTemplateCode` éç©ºï¼›
*   ä¸”è¯¥å…·ä½“è®°å½• `NeedReply=true`ï¼ˆæˆ–è€…ä¸šåŠ¡æŒ‡å®šâ€œæ”¶åˆ°è¯¥æ–‡ä»¶å¿…å®šç”Ÿæˆä»»åŠ¡â€ï¼‰ã€‚

**å¤„ç†æµç¨‹**

å¯¹äºæ¯æ¡éœ€è¦ä»»åŠ¡çš„ `T_Document` è‰æ¡ˆï¼š

1.  ç¡®å®š BaseDateï¼š
    *   é€šå¸¸ä¸º `DispatchDate`ï¼›
    *   å¦‚ `ExtraData.OfficialDueDate` éç©ºå¯ä½œä¸º Deadlineï¼ŒBaseDate ä»…ç”¨äºè®¡ç®—å†…éƒ¨é™å’Œæé†’ã€‚
2.  æŸ¥æ‰¾ `T_TaskTemplate`ï¼š
    *   where Code = `DeadlineTemplateCode` ä¸” IsActive=true
3.  è®¡ç®—ä»»åŠ¡å­—æ®µï¼š
    *   `Deadline = BaseDate + AddYears/Months/Days`ï¼ˆå¦‚ä¸é‡‡ç”¨å®˜æ–¹ç»™å®šæ—¥æœŸï¼‰
    *   `InnerDeadline = Deadline - InnerOffsetDays`ï¼ˆå¯ç©ºï¼‰
    *   `Remind1/2/3` ç”± RemindBase å’Œ R\*\_OffsetDays è®¡ç®—
    *   `DailyRemindFrom`ï¼šè‹¥ DailyRemind=trueï¼Œåˆ™ä¸º InnerDeadline æˆ– Deadline
4.  ç¡®å®šä½œä¸šäºº/ç›‘ç£äººï¼ˆWorkerID/SupervisorIDï¼‰ï¼š
    *   WorkerIDï¼šä¼˜å…ˆ Case.PrimaryAgentID æˆ– DraftorIDï¼›å¦‚ä¸ºç©ºï¼Œåˆ™å½“å‰ç”¨æˆ·æˆ– Template é»˜è®¤è§’è‰²
    *   SupervisorIDï¼šTemplate é»˜è®¤ SupervisorID æˆ–æ ¹æ®ç»„ç»‡ç»“æ„é€‰ä¸€ä¸ªä¸Šçº§

**UI å‘ˆç°**

*   åœ¨ Step 3 ç•Œé¢ï¼Œå±•ç¤ºå°†è¦åˆ›å»ºçš„ä»»åŠ¡åˆ—è¡¨ï¼Œä¸Šæ–¹å¯æ˜¾ç¤ºï¼š
    *   CaseNoã€DocNameã€Task Typeã€BaseDateã€InnerDeadlineã€Deadlineã€Workerã€Supervisor ç­‰ï¼›
*   å…è®¸ç”¨æˆ·åœ¨ç•Œé¢ä¸Šè°ƒæ•´ WorkerID/SupervisorID å’Œå„æé†’æ—¥æœŸã€‚

**æœ€ç»ˆå†™å…¥**

*   æœ€ç»ˆâ€œå®Œæˆå‘å¯¼â€æ—¶ï¼š
    *   å¯¹æ¯æ¡è®°å½•å†™å…¥ `T_Task`ï¼ŒæŒ‚åœ¨ç›¸åº” CaseID + DocID ä¸‹ã€‚

***

### 3.4.4 Step 4 â€“ ç”Ÿæˆå…³è”è´¹ç”¨è‰å•ï¼ˆä¸è´¹ç”¨æ¨¡å—è”åŠ¨ï¼‰

**é€‚ç”¨æ¡ä»¶**

*   Template.FeeDraftType éç©ºï¼›
*   Template.FeeItemList å¯èƒ½åŒ…å«é¢„å®šä¹‰è´¹ç”¨é¡¹ç›®ï¼ˆä¾‹å¦‚æˆæƒé€šçŸ¥/å¹´è´¹é€šçŸ¥/æ— æ•ˆè¯·æ±‚ç­‰ï¼‰ã€‚

**å¤„ç†æµç¨‹**

å¯¹äºæ¯æ¡éœ€è¦è´¹ç”¨ç”Ÿæˆçš„ `T_Document` è‰æ¡ˆï¼š

1.  æ£€æŸ¥è¯¥æ¡ˆæ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒç±»å‹çš„è‰å•ï¼š
    *   `T_FeeDraft` where CaseID=å½“å‰ CaseID and Type=Template.FeeDraftType and Status in (OPEN, LOCKED)
    *   è‹¥ä¸šåŠ¡è¦æ±‚â€œä¸€æ¡ˆä¸€ç±»å‹ä¸€è‰å•â€ï¼Œåˆ™å‘ç°å·²æœ‰æ—¶ä¿æŒä¸é‡å¤ç”Ÿæˆï¼›
2.  è‹¥ä¸å­˜åœ¨æˆ–å…è®¸å¤šä¸ªï¼Œåˆ™åˆ›å»ºæ–° `T_FeeDraft`ï¼š
    *   `CaseID`, `Type=FeeDraftType`, `Currency`ï¼ˆé€šå¸¸=å®¢æˆ·å¸ç§ï¼‰ï¼Œåˆå§‹é‡‘é¢=0ï¼›
3.  å¯¹ Template.FeeItemList ä¸­åˆ—å‡ºçš„æ¯ä¸ªè´¹ç”¨é¡¹ç›®ï¼š
    *   æŸ¥æ‰¾ `T_FeeRate` è·å–æ ‡å‡†è´¹ç‡ï¼ˆé‡‘é¢/å¸ç§ç­‰ï¼‰ï¼›
    *   ç»“åˆæ¡ˆä»¶å±æ€§ï¼ˆYearNo/ClaimCount/SpecPages ç­‰ï¼‰è®¡ç®— UnitPrice/Amountï¼›
    *   å¯¹å®˜è´¹é¡¹ç›®ï¼Œè‹¥ AllowReduction=trueï¼Œåˆ™æŒ‰ Case.FeeReduction è®¡ç®—å‡å…ï¼›
    *   æ’å…¥ `T_FeeItem` è®°å½•ï¼Œæ ‡è®° `IsAuto=true`ã€`IsReduced/IsDiscounted` ç­‰ï¼›
4.  è®¡ç®—è‰å•çš„ `TotalGov/TotalService/TotalMisc/TotalAmt`ã€‚

**UI å‘ˆç°**

*   Step 4 ç•Œé¢æ˜¾ç¤ºï¼š
    *   å°†è¦ç”Ÿæˆçš„è‰å•åˆ—è¡¨ï¼šCaseNoã€FeeDraftTypeã€é¢„ä¼°æ€»é¢ã€è‰å•æ˜ç»†æ•°é‡ï¼›
    *   æ”¯æŒå‹¾æ‰æŸäº›æ¡ˆä»¶ï¼ˆä¸ä¸ºå…¶ç”Ÿæˆè‰å•ï¼‰ï¼›

**æœ€ç»ˆå†™å…¥**

*   å®Œæˆå‘å¯¼æ—¶ï¼šç»Ÿä¸€å†™å…¥ `T_FeeDraft/T_FeeItem` åˆ°æ•°æ®åº“ã€‚

***

### 3.4.5 Step 5 â€“ ç”µå­æ–‡æ¡£åˆ¶ä½œä¸å­˜æ¡£ï¼ˆé™„ä»¶ç®¡ç†ï¼‰

**ç›®æ ‡**

ä¸ºä¸€æ‰¹ä¸­é—´æ–‡ä»¶è®°å½•æŒ‚æ¥ç”µå­é™„ä»¶ï¼š

*   æ–‡ä»¶æ¥æºï¼š
    *   æ‰«æçº¸ä»¶ â†’ ä¸Šä¼ 
    *   å¯¼å…¥å·²æœ‰æ–‡ä»¶ â†’ ä¸Šä¼ 
    *   ä½¿ç”¨ Word æ¨¡æ¿ç”Ÿæˆæ–‡ä¹¦â†’ è‡ªåŠ¨ç”Ÿæˆå¹¶å­˜æ¡£

**æ¨¡å¼ä¸€ï¼šä¸Šä¼ æ‰«æä»¶**

*   ç”¨æˆ·åœ¨æœ¬åœ°å…ˆæŠŠçº¸ä»¶æ‰«ææˆ PDF/JPEGã€‚
*   åœ¨ Step 5 ä¸­å¯¹æ¯ä¸ª `T_Document` è‰æ¡ˆé€‰æ‹©â€œä¸Šä¼ é™„ä»¶â€ï¼š
    *   é€‰æ‹©æ–‡ä»¶ â†’ ç³»ç»Ÿæ¥æ”¶å¹¶å­˜å‚¨ï¼ˆæ–‡ä»¶ç³»ç»Ÿ/å¯¹è±¡å­˜å‚¨ï¼‰ â†’ æ’å…¥ `T_DocAttachment`ï¼›
    *   å¯å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œä¸€ä¸ª Doc å¯¹åº”å¤šä¸ªé™„ä»¶è®°å½•ã€‚

**æ¨¡å¼äºŒï¼šå¯¼å…¥å¤–éƒ¨æ–‡ä»¶**

*   ç”¨æˆ·æœ‰ç°æˆ Word/PDF æ–‡ä»¶ï¼š
    *   é€‰æ‹©ç‰¹å®š `T_Document` è‰æ¡ˆ â†’ â€œå¯¼å…¥é™„ä»¶â€ â†’ ä¸Šä¼  â†’ `T_DocAttachment`ã€‚

**æ¨¡å¼ä¸‰ï¼šæ¨¡æ¿ç”Ÿæˆ Word + è‡ªåŠ¨å­˜æ¡£**

*   è‹¥ `T_DocTemplate.PlainTemplateID_CN/EN` éç©ºï¼š
    *   ç”¨æˆ·é€‰æ‹©è¯­è¨€ï¼ˆä¸­/è‹±ï¼‰å’Œæ¨¡æ¿ï¼›
    *   ç³»ç»Ÿé€šè¿‡ `docxtpl` ç­‰æ¨¡æ¿å¼•æ“åŠ è½½ Word æ¨¡æ¿ï¼Œæ„é€  contextï¼š
        *   caseï¼šæ¡ˆä»¶ä¿¡æ¯
        *   docï¼šä¸­é—´æ–‡ä»¶ä¿¡æ¯ï¼ˆDocName/DispatchDate ç­‰ï¼‰
        *   fees/tasks ç­‰å¯é€‰ä¿¡æ¯
    *   æ¸²æŸ“åç”Ÿæˆ docx æ–‡ä»¶ï¼Œå­˜åˆ°æœåŠ¡å™¨ï¼›
    *   å¯¹åº”æ–°å»º `T_DocAttachment` è®°å½•ï¼ˆFileName/StoragePath/UploadedBy/Atï¼‰ã€‚

**æœ€ç»ˆæäº¤ï¼ˆå®Œæˆå‘å¯¼ï¼‰**

ç‚¹å‡»â€œå®Œæˆâ€åï¼Œç³»ç»Ÿä¸€æ¬¡æ€§ï¼š

1.  å†™å…¥æ‰€æœ‰ `T_Document` è®°å½•ï¼›
2.  å†™å…¥æ‰€æœ‰å…³è” `T_Task`ï¼ˆæ—¶é™ï¼‰å’Œ `T_FeeDraft/T_FeeItem`ï¼ˆè´¹ç”¨ï¼‰ï¼›
3.  å†™å…¥æ‰€æœ‰ `T_DocAttachment`ï¼ˆé™„ä»¶ï¼‰ï¼›
4.  å¯¹æ¯æ¡ `T_Document`ï¼Œå¦‚ `StatusEffect` éç©ºï¼Œåˆ™æ›´æ–° `T_Case.Status`ï¼›
5.  è‹¥æŸå»æ–‡æ˜¯æŸæ¥æ–‡çš„å›å¤ï¼ˆReplyToID éç©ºï¼‰ä¸”å¯¹åº”æ¨¡æ¿æŒ‡å®š `StatusRestore`ï¼Œå¯åœ¨å¿…è¦æ—¶è°ƒæ•´ `T_Case.Status`ã€‚

***

## 3.5 å¸¸ç”¨æ–‡ä»¶é¢„å®šä¹‰ç»´æŠ¤ï¼ˆDocTemplate ç®¡ç†ï¼‰

### 3.5.1 UI ç»“æ„

**ä¸Šæ–¹ï¼šæ¨¡æ¿åˆ—è¡¨**

*   æŒ‰ DocType/æ¨¡å—/å…³é”®å­—è¿‡æ»¤å±•ç¤º `T_DocTemplate` åˆ—è¡¨ï¼š
    *   TemplateCode, Name, DocType, CaseTypeFilter, StatusEffect, DeadlineTemplateCode, FeeDraftType ç­‰

**ä¸‹æ–¹ï¼šæ¨¡æ¿è¯¦ç»†ç¼–è¾‘åŒº**

*   é€‰ä¸­æŸæ¡æ¨¡æ¿ï¼Œåœ¨ä¸‹æ–¹ç¼–è¾‘å…¶æ‰€æœ‰å­—æ®µï¼ˆå•æ¡ç¼–è¾‘æ¨¡å¼ï¼‰ã€‚

### 3.5.2 ç¼–è¾‘å­—æ®µä¸æ ¡éªŒ

**æ ¸å¿ƒå­—æ®µ**

*   TemplateCodeï¼šå”¯ä¸€ä¸”éç©ºï¼ˆV-TPL-01ï¼‰ã€‚
*   Nameï¼šæ¨¡æ¿åï¼Œä¸ä¸šåŠ¡ä¸€è‡´ã€‚
*   DocTypeï¼šOFFICIAL\_IN/OUT/CLIENT\_IN/OUTã€‚

**é€‚ç”¨èŒƒå›´**

*   CaseTypeFilter / PatentCategoryFilterï¼šé‡‡ç”¨å¤šé€‰æˆ–é€—å·åˆ†éš”å½¢å¼ï¼›ç©ºè¡¨ç¤ºâ€œå¯¹æ‰€æœ‰æ¡ˆä»¶ç±»å‹/ç±»åˆ«å‡å¯ç”¨â€ã€‚

**çŠ¶æ€ä¸å›å¤é€»è¾‘**

*   StatusEffectï¼šå½•å…¥æœ¬ç±»æ–‡ä»¶åï¼Œ`T_Case.Status` å°†å˜ä¸ºæ­¤å€¼ï¼›
*   StatusRestoreï¼šé€šå¸¸ç”±â€œå›å¤â€æ¨¡æ¿ä½¿ç”¨ï¼Œè¡¨ç¤ºæŸç±»å»æ–‡å½•å…¥åæ¢å¤æ¡ˆä»¶çŠ¶æ€ï¼›
*   æ­£å¸¸æ¨¡æ¿ä¸­ï¼Œè‹¥é…ç½® StatusRestoreï¼Œåˆ™å¿…é¡»ä¹Ÿæœ‰ StatusEffect æˆ–æ˜ç¡®æ–‡æ¡£è¯´æ˜ `StatusRestore` ç”¨äº ReplyTo é€»è¾‘ï¼ˆV-TPL-03ï¼‰ã€‚

**æ—¶é™ä¸è´¹ç”¨**

*   DeadlineTemplateCodeï¼šå¿…é¡»åœ¨ `T_TaskTemplate` ä¸­å­˜åœ¨å¯¹åº”è®°å½•ï¼ˆV-TPL-02ï¼‰ï¼›
*   FeeDraftTypeï¼šå¿…é¡»æ˜¯ `T_FeeDraft.Type` å·²æ”¯æŒçš„æšä¸¾ï¼›
*   FeeItemListï¼šå¯¹æ¯ä¸ª fee é¡¹ï¼š
    *   å¿…é¡»èƒ½åœ¨ `T_FeeRate` ä¸­æ‰¾åˆ°å¯¹åº” Codeï¼Œæˆ–å…è®¸â€œè‡ªå®šä¹‰é¡¹ç›®â€ï¼ˆV-TPL-04ï¼‰ã€‚

**è¾“å…¥å­—æ®µåˆ—è¡¨**

*   InputFieldListï¼š
    *   æ¯ä¸ªå­—æ®µåå¿…é¡»èƒ½æ˜ å°„åˆ° `T_Case` æˆ– `T_Document.ExtraData` çš„å­—æ®µï¼ˆå¦‚ IssueDateã€GrantNoã€IntlAppNo ç­‰ï¼‰ï¼ˆV-TPL-05ï¼‰ï¼›
    *   ä¸å…è®¸å¡«å†™ä¸å­˜åœ¨çš„å­—æ®µåã€‚

**æ¨¡æ¿æ–‡ä»¶ç»‘å®š**

*   PlainTemplateID\_CN/ENï¼šåº”å…³è”åˆ°ç°æœ‰ Word æ¨¡æ¿ï¼ˆ`T_Template`ï¼‰ï¼Œä¾› Step 5 ç”Ÿæˆä½¿ç”¨ã€‚

***

### 3.5.3 ç³»ç»Ÿå…³é”®æ¨¡æ¿ç¤ºä¾‹

ä¸ºä¿è¯ç³»ç»Ÿæ ¸å¿ƒæµç¨‹å¯ç”¨ï¼Œåº”è‡³å°‘é…ç½®ä»¥ä¸‹æ¨¡æ¿ï¼ˆä»…ç¤ºä¾‹ï¼‰ï¼š

*   GRANT\_NOTICE â€“ æˆæƒé€šçŸ¥ï¼ˆOFFICIAL\_INï¼‰ï¼šæ›´æ–°æˆæƒä¿¡æ¯ + ç”Ÿæˆæˆæƒè´¹æ—¶é™ä»»åŠ¡ + æˆæƒè´¹è‰å•ã€‚
*   OA\_NOTICE â€“ å®¡æŸ¥æ„è§/è¡¥æ­£é€šçŸ¥ï¼ˆOFFICIAL\_INï¼‰ï¼šç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡ã€‚
*   OA\_REPLY â€“ å®¡æŸ¥æ„è§ç­”å¤/è¡¥æ­£è¯´æ˜ï¼ˆOFFICIAL\_OUTï¼‰ï¼šæ ¸é”€ OA æ—¶é™ä»»åŠ¡ï¼Œæ¢å¤çŠ¶æ€ã€‚
*   ANNUITY\_NOTICE â€“ å¹´è´¹å‚¬ç¼´é€šçŸ¥ï¼ˆCLIENT\_OUTï¼‰ï¼šç”Ÿæˆå¹´è´¹è‰å•ã€‚
*   INVALID\_REQUEST â€“ æ— æ•ˆå®£å‘Šè¯·æ±‚ä¹¦ï¼ˆOFFICIAL\_OUTï¼‰ï¼šç”Ÿæˆæ— æ•ˆè´¹ç”¨è‰å•ã€‚
*   INVALID\_DECISION â€“ æ— æ•ˆå†³å®šä¹¦ï¼ˆOFFICIAL\_INï¼‰ï¼šæ›´æ–°æ— æ•ˆæ¡ˆçŠ¶æ€åŠåŸæ¡ˆçŠ¶æ€ã€‚
*   DUNNING\_LETTER â€“ å‚¬æ¬¾å‡½ï¼ˆCLIENT\_OUTï¼‰ï¼šæ ¹æ® `T_Dunning` è¾“å‡ºå‚¬æ¬¾å‡½ã€‚

è¿™äº›æ¨¡æ¿çš„ TemplateCode åº”å›ºå®šï¼Œå¹¶ä¸”åœ¨ä»£ç /é…ç½®ä¸­ä½œä¸ºå…³é”®å­—ç¬¦ä¸²ä½¿ç”¨ã€‚

***

## 3.6 ç”µå­ä¸­é—´æ–‡ä»¶ç®¡ç†ä¸»ç•Œé¢ï¼ˆéå‘å¯¼åœºæ™¯ï¼‰

å‘å¯¼ç”¨äºâ€œæ–°å¢â€ä¸€æ‰¹ä¸­é—´æ–‡ä»¶ï¼›ä¸»ç•Œé¢åˆ™ç”¨äºæ—¥å¸¸ç»´æŠ¤å’ŒæŸ¥é˜…ã€‚

### 3.6.1 ä¸»ç•Œé¢å¸ƒå±€

**é¡¶éƒ¨ï¼šæ¡ˆä»¶åŸºæœ¬ä¿¡æ¯**

*   æ˜¾ç¤º CaseNoã€AppNoã€Title\_CNã€Statusã€ClientName ç­‰ã€‚

**å·¦ä¾§ï¼šä¸­é—´æ–‡ä»¶æ ‘ / åˆ—è¡¨**

*   æŒ‰ DocType æˆ–æ—¥æœŸ/ç±»åˆ«åˆ†ç»„ï¼š
    *   å®˜æ–¹æ¥æ–‡ / å®˜æ–¹å»æ–‡ / å®¢æˆ·æ¥æ–‡ / è‡´å‡½å®¢æˆ·
*   åˆ—ï¼šDocNameã€DispatchDateã€Incoming/OutgoingRegNoã€NeedReplyã€Deadlineã€ReplyDate ç­‰ã€‚
*   ç‚¹å‡»æŸè¡Œï¼Œå³ä¾§æ˜¾ç¤ºè¯¦æƒ…ã€‚

**å³ä¾§ï¼šä¸­é—´æ–‡ä»¶è¯¦æƒ… & çŠ¶æ€ä¿¡æ¯**

*   æ˜¾ç¤ºå¹¶å…è®¸ç¼–è¾‘ï¼šDocNameã€ForwardDateã€æŒ‚å·å·ã€NeedReply/Deadline/ReplyDateã€Remark ç­‰ã€‚
*   æ˜¾ç¤ºâ€œæ¡ˆä»¶çŠ¶æ€ä¿¡æ¯åŒºâ€ï¼Œå¯¹éœ€è¦æ›´æ–°æ¡ˆä»¶å­—æ®µçš„æ–‡ä¹¦ï¼ˆå¦‚æˆæƒé€šçŸ¥ï¼‰å¯åœ¨æ­¤ä¿®æ”¹å¯¹åº”å­—æ®µï¼ˆåŒ InputFieldListï¼‰ï¼Œä¿å­˜æ—¶æ›´æ–° T\_Caseã€‚

**ä¸‹æ–¹ï¼šé™„ä»¶åˆ—è¡¨**

*   å±•ç¤ºè¯¥ DocID ä¸‹æ‰€æœ‰ `T_DocAttachment`ï¼Œæ”¯æŒï¼š
    *   æŸ¥çœ‹/ä¸‹è½½
    *   æ–°å¢ä¸Šä¼ 
    *   åˆ é™¤ï¼ˆæƒé™æ§åˆ¶ï¼‰

### 3.6.2 å•æ¡è®°å½•ç¼–è¾‘è§„åˆ™

*   å¯ç¼–è¾‘å­—æ®µï¼šDocNameã€ForwardDateã€IncomingRegNoã€OutgoingRegNoã€NeedReplyã€Deadlineã€ReplyDateã€Summaryã€Remarkï¼Œä»¥åŠæŸäº› InputFieldList ä¸­çš„å­—æ®µï¼ˆå¦‚å°šæœªé”å®šï¼‰ã€‚
*   ä¸å¯ç¼–è¾‘å­—æ®µï¼šCaseIDã€DocTypeã€TemplateCodeã€DispatchDateï¼ˆè‹¥éœ€è¦æ›´æ­£ dispatch dateï¼Œå¯é€šè¿‡ä¸“é—¨â€œæ›´æ­£æ—¥æœŸâ€åŠŸèƒ½ï¼‰ï¼›
*   æ›´æ”¹ NeedReply/Deadline æ—¶ï¼Œå¦‚å·²æœ‰å¯¹åº”æ—¶é™ä»»åŠ¡ T\_Taskï¼Œåº”æ›´æ–°è¯¥ä»»åŠ¡æˆ–ç»™ç”¨æˆ·é€‰æ‹©â€œå–æ¶ˆä»»åŠ¡â€ã€‚

***

## 3.7 é‚®å¯„ä¿¡æ¯ç™»è®°ã€æ–‡ä»¶äº¤æ¥å•å’Œä¿¡å°æ‰“å°

### 3.7.1 é‚®å¯„ä¿¡æ¯ç™»è®°ï¼ˆFR-WD-08ï¼‰

**ç”¨é€”**

*   å¯¹ä¸€æ‰¹æ­¤å‰å·²ç»ç”Ÿæˆçš„å»æ–‡ï¼ˆOFFICIAL\_OUT/CLIENT\_OUTï¼‰ï¼Œåœ¨é‚®å±€å¯„å‡ºåç»Ÿä¸€ç™»è®°å¯„ä»¶æŒ‚å·å·ï¼ˆOutgoingRegNoï¼‰å’Œå¯„å‡ºæ—¥æœŸã€‚

**æµç¨‹**

1.  æ‰“å¼€â€œé‚®å¯„ä¿¡æ¯ç™»è®°â€ç•Œé¢ï¼›
2.  ç‚¹å‡»â€œæŸ¥è¯¢ä¸­é—´æ–‡ä»¶â€ï¼Œå¼¹å‡ºç­›é€‰çª—å£ï¼ˆæŒ‰ CaseNo/Client/DispatchDate/DocType=OUT ç­‰ï¼‰ï¼›
3.  æŸ¥è¯¢ç»“æœæ˜¾ç¤ºæ‰€æœ‰åŒ¹é…çš„ `T_Document` è®°å½•ï¼ˆå°¤å…¶æ˜¯å»æ–‡ï¼‰ï¼›
4.  ç”¨æˆ·å¯ä»¥å¯¹æ¯æ¡è®°å½•å¡«å†™ `OutgoingRegNo`ï¼Œæˆ–åœ¨ç¬¬ä¸€æ¡å¡«å†™åé€‰æ‹©â€œå¤åˆ¶åˆ°æ‰€æœ‰é€‰ä¸­è®°å½•â€ï¼›
5.  æ‰¹é‡ä¿å­˜ï¼šæ›´æ–°æ¯æ¡ `T_Document.OutgoingRegNo` å’Œå¯é€‰ `ForwardDate/DispatchDate`ã€‚

***

### 3.7.2 æ–‡ä»¶äº¤æ¥å•ï¼ˆFR-WD-09ï¼‰

**ç”¨é€”**

*   ä¸ºæŸå®¢æˆ·åœ¨æŸå¤©é‚®å¯„çš„ä¸€æ‰¹æ–‡ä»¶ç”Ÿæˆâ€œæ–‡ä»¶äº¤æ¥å•â€ï¼Œç”¨ä½œé‚®å¯„æ¸…å•/äº¤æ¥å‡­è¯ã€‚

**æ•°æ®æ¥æº**

*   `T_Document`ï¼šDocType=CLIENT\_OUT/ OFFICIAL\_OUTï¼ŒForwardDate=æŸæ—¥ï¼ŒClientID=æŸå®¢æˆ·ï¼›
*   `T_DocDispatch`, `T_DocDispatchLine`ï¼šç”¨äºæŒä¹…åŒ–äº¤æ¥å•ã€‚

**æµç¨‹**

1.  åœ¨â€œæ–‡ä»¶äº¤æ¥å•â€ç•Œé¢ç‚¹å‡»â€œæ–°å»ºäº¤æ¥å•â€ï¼›
2.  é€‰æ‹©å®¢æˆ· ClientID å’Œäº¤æ¥æ—¥æœŸ DispatchDateï¼›
3.  ç³»ç»ŸæŸ¥è¯¢è¯¥å®¢æˆ·åœ¨è¯¥ DispatchDate çš„æ‰€æœ‰å»æ–‡ç±»å‹ä¸­é—´æ–‡ä»¶ï¼Œé¢„å¡«è‡³æ˜ç»†ï¼›
4.  ç”¨æˆ·å¯å¢åˆ è¡Œã€ä¿®æ”¹å¤‡æ³¨ï¼›
5.  ä¿å­˜åå†™å…¥ `T_DocDispatch` + `T_DocDispatchLine`ï¼›
6.  å¯é€šè¿‡æ¨¡æ¿ç³»ç»Ÿç”Ÿæˆ Word ç‰ˆäº¤æ¥å•ï¼ˆè¡¨æ ¼æ ¼å¼ï¼‰ï¼Œå¹¶æ‰“å°ã€‚

***

### 3.7.3 ä¿¡å°æ‰“å°ï¼ˆFR-WD-10ï¼‰

**ç”¨é€”**

*   æ ¹æ®æ¡ˆå·æˆ–ç”³è¯·å·æ‰“å°å¸¦æœ‰å®¢æˆ·/ç”³è¯·äººåœ°å€çš„ä¿¡å°ã€‚

**æ”¶ä»¶åœ°å€é€‰æ‹©ä¼˜å…ˆçº§**

1.  `T_Case.DocAddressID` å¯¹åº”å®¢æˆ·åœ°å€ï¼›
2.  è‹¥ä¸ºç©ºï¼Œåˆ™ `T_Client` çš„é»˜è®¤æ–‡ä»¶é‚®å¯„åœ°å€ï¼›
3.  å†ä¸ºç©ºï¼Œåˆ™ç¬¬ä¸€ç”³è¯·äººçš„åœ°å€ï¼ˆ`T_Applicant.Address`ï¼‰ï¼›
4.  è‹¥ä»ä¸ºç©ºï¼Œå¯è¦æ±‚ç”¨æˆ·æ‰‹å·¥æŒ‡å®šã€‚

**æµç¨‹**

1.  åœ¨â€œä¿¡å°æ‰“å°â€é¡µé¢è¾“å…¥ CaseNo æˆ– AppNoï¼›
2.  ç³»ç»Ÿæ‰¾åˆ°å¯¹åº” `T_Case` å’Œæ”¶ä»¶åœ°å€ï¼›
3.  å¡«å……æ¨¡æ¿ï¼ˆä¿¡å°æ¨¡æ¿å¯ä»¥ä½œä¸º `T_Template` ä¸­ä¸€ç§ç‰¹æ®Šç±»å‹ï¼ŒåŒ…å«æ”¶ä»¶äººå/åœ°å€å¸ƒå±€ï¼‰ï¼›
4.  è¾“å‡ºç”¨äºæ‰“å°çš„ HTML/PDFï¼Œæˆ–ç›´æ¥ç”±å‰ç«¯è°ƒç”¨æµè§ˆå™¨æ‰“å°ã€‚

***

## 3.8 ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ä¸æ¸…å•è¾“å‡ºï¼ˆFR-WD-07ï¼‰

### 3.8.1 æŸ¥è¯¢æ¡ä»¶

æä¾›ç‹¬ç«‹çš„â€œä¸­é—´æ–‡ä»¶æŸ¥è¯¢â€ç•Œé¢ï¼Œæ¡ä»¶åŒ…æ‹¬ï¼š

*   æ—¶é—´èŒƒå›´ï¼š
    *   ä»¥ `DispatchDate` æˆ– `InputDate` ä¸ºåŸºå‡†
*   DocTypeï¼šOFFICIAL\_IN/OUT/CLIENT\_IN/OUTï¼ˆå¤šé€‰ï¼‰
*   TemplateCode æˆ– DocName å…³é”®å­—
*   CaseNo / AppNo / ClientID / AgentID
*   æ˜¯å¦ NeedReply/æ˜¯å¦å·² Replyï¼ˆDeadline/ReplyDateï¼‰
*   æ˜¯å¦æœ‰é™„ä»¶

### 3.8.2 ç»“æœåˆ—è¡¨ä¸å¯¼å‡º

ç»“æœåˆ—è¡¨å­—æ®µï¼š

*   CaseNo, AppNo, Title\_CN
*   DocType, DocName
*   DispatchDate, ForwardDate
*   IncomingRegNo, OutgoingRegNo
*   NeedReply, Deadline, ReplyDate
*   æ˜¯å¦æœ‰é™„ä»¶

å¯¼å‡ºé€‰é¡¹ï¼š

*   é€šç”¨ä¸­é—´æ–‡ä»¶æ¸…å•ï¼ˆçºµå‘/æ¨ªå‘ï¼‰
*   ä»…è¯ä¹¦ç±»æ–‡ä»¶æ¸…å•ï¼ˆè¿‡æ»¤ TemplateCode/DocName ç›¸å…³ï¼‰
*   å¯¼å‡ºæ ¼å¼ï¼šExcel / Word è¡¨æ ¼ / PDFï¼ˆé€šè¿‡æ¨¡æ¿ç³»ç»Ÿï¼‰

***

## 3.9 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ / å­—æ®µï¼‰

### 3.9.1 User Story â†’ FR â†’ ç« èŠ‚ï¼ˆè¡¨ 3ï¼‰

| US                     | æ¶‰åŠ FR                        | ä¸»è¦ç« èŠ‚                          | è¯´æ˜                                                                                                              |
| ---------------------- | ---------------------------- | ----------------------------- | --------------------------------------------------------------------------------------------------------------- |
| US-WD-01 æ¥æ–‡ç™»è®°          | FR-WD-01, FR-WD-02, FR-WD-03 | 3.3, 3.4.1â€“3.4.2, 3.6         | é€šè¿‡ `T_Document/T_DocTemplate` å®šä¹‰ä¸­é—´æ–‡ä»¶ç»“æ„ï¼›3.4 Step1/2 è¯¦è¿°æ‰¹é‡å½•å…¥å¤šä¸ªæ¡ˆä»¶çš„ä¸­é—´æ–‡ä»¶ï¼›æ¨¡æ¿è‡ªåŠ¨å¡«å……ç¼ºçœå­—æ®µï¼ˆDocName/NotifyAgent/NeedReply ç­‰ï¼‰ã€‚ |
| US-WD-02 å‘æ–‡ç™»è®°ä¸è‡ªåŠ¨æ ¸é”€     | FR-WD-02, FR-WD-03, FR-WD-04 | 3.3.1â€“3.3.3, 3.4.2â€“3.4.3, 3.6 | å»æ–‡å½•å…¥æ—¶å¡«å†™ ReplyToIDï¼›3.4.3 æ ¹æ® Template.DeadlineTemplateCode ç”Ÿæˆæ—¶é™ä»»åŠ¡ï¼›åœ¨å…¶å®ƒæ¨¡å—ï¼ˆæ—¶é™æ¨¡å—ã€E2E åœºæ™¯ Bï¼‰ä¸­æè¿°äº†é€šè¿‡ ReplyToID æ ¸é”€ä»»åŠ¡çš„é€»è¾‘ã€‚   |
| US-WD-03 æœŸé™è”åŠ¨          | FR-WD-03, FR-WD-04           | 3.3.3, 3.4.3                  | `T_DocTemplate.DeadlineTemplateCode` ä¸æ—¶é™æ¨¡æ¿å…³è”ï¼›åœ¨ Step3 ä¸­ä»¥ BaseDate + è§„åˆ™ç”Ÿæˆ `T_Task`ï¼Œå®ç°æ—¶é™è”åŠ¨ã€‚                        |
| US-WD-04 è´¹ç”¨è”åŠ¨          | FR-WD-03, FR-WD-05           | 3.3.3, 3.4.4                  | `T_DocTemplate.FeeDraftType/FeeItemList` å°†ä¸­é—´æ–‡ä»¶ä¸ `T_FeeDraft/T_FeeItem` é“¾æ¥ï¼›Step4 ä¸­å¯¹æ¯æ¡ˆç”Ÿæˆç›¸åº”è‰å•ï¼Œè‡ªåŠ¨å¸¦å‡ºè´¹ç”¨é¡¹ã€‚             |
| US-WD-05 ç”µå­æ¡£æ¡ˆå­˜æ¡£        | FR-WD-06                     | 3.3.2, 3.4.5, 3.6             | `T_DocAttachment` æ”¯æŒ 0..N ä¸ªé™„ä»¶ï¼›Step5 ä¸­æ”¯æŒä¸Šä¼ /å¯¼å…¥/æ¨¡æ¿ç”Ÿæˆä¸‰ç§æ–¹å¼ï¼›ä¸»ç•Œé¢é™„ä»¶åŒºæ”¯æŒå¢åˆ æŸ¥ã€‚                                              |
| US-WD-06 ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ & æ¸…å•è¾“å‡º | FR-WD-07                     | 3.8                           | 3.8 å®šä¹‰äº†æŸ¥è¯¢æ¡ä»¶å’Œåˆ—è¡¨å­—æ®µä»¥åŠå¤šç§æ¸…å•å¯¼å‡ºæ ¼å¼ï¼Œæ•°æ®æºä¸º `T_Document` è”ç»“ T\_Case/T\_Client ç­‰ã€‚                                            |
| US-WD-07 é‚®å¯„ & äº¤æ¥å• & ä¿¡å° | FR-WD-08, FR-WD-09, FR-WD-10 | 3.7.1â€“3.7.3                   | é‚®å¯„ä¿¡æ¯ç™»è®°æ‰¹é‡æ›´æ–° `T_Document.OutgoingRegNo`ï¼›æ–‡ä»¶äº¤æ¥å•é€šè¿‡ `T_DocDispatch/T_DocDispatchLine` è®°å½•ï¼›ä¿¡å°æ‰“å°æ ¹æ® `T_Case` åœ°å€ä¿¡æ¯ç”Ÿæˆä¿¡å°ç‰ˆå¼ã€‚  |

### 3.9.2 FR â†’ ç« èŠ‚ & å­—æ®µ/æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 4ï¼‰

| FR ID    | æè¿°                  | å®ç°ç« èŠ‚               | å­—æ®µ / æ ¡éªŒ / æµç¨‹ç‚¹                                                                                                                                               |
| -------- | ------------------- | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| FR-WD-01 | å››å¤§ç±»ä¸­é—´æ–‡ä»¶+å¯é…ç½®å­ç±»å‹      | 3.3.1, 3.3.3       | `T_Document.DocType` å®šä¹‰ OFFICIAL/CLIENT æ¥/å»æ–‡ï¼›`T_DocTemplate` ç”¨ TemplateCode/DocType/CaseTypeFilter/PatentCategoryFilter å»ºç«‹å¯é…ç½®å­ç±»å‹ã€‚                           |
| FR-WD-02 | ä¸­é—´æ–‡ä»¶å½•å…¥å‘å¯¼ï¼Œæ”¯æŒæ‰¹é‡       | 3.4.1â€“3.4.2        | Step1 å…è®¸è¾“å…¥å¤šä¸ªæ¡ˆå·/ç”³è¯·å·ï¼Œé€‰æ‹© DocType/Templateï¼›Step2 å¯¹æ¯æ¡ˆè¡Œç¼–è¾‘ DocName/DispatchDate/NeedReply/æŒ‚å·å·ç­‰ï¼›V-DOC ç³»åˆ—æ ¡éªŒä¿è¯å­—æ®µåˆæ³•ã€‚                                                   |
| FR-WD-03 | æ ¹æ®æ¨¡æ¿è‡ªåŠ¨å¡«å……ç¼ºçœå­—æ®µ        | 3.3.3, 3.4.1â€“3.4.4 | Template.NeedNotifyAgent/StatusEffect/DeadlineTemplateCode/FeeDraftType/InputFieldList å†³å®š DocName/NotifyAgent/NeedReply ç­‰åˆå§‹å€¼å’Œåç»­æ—¶é™/è´¹ç”¨ç”Ÿæˆï¼›Step3/4 å®ç°è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡å’Œè‰å•ã€‚ |
| FR-WD-04 | ä¸ºéœ€è¦å›å¤çš„ä¸­é—´æ–‡ä»¶ç”Ÿæˆæ—¶é™ä»»åŠ¡    | 3.4.3              | å¯¹ NeedReply=true ä¸” Template.DeadlineTemplateCode éç©ºçš„è®°å½•ï¼Œç”¨ T\_TaskTemplate è®¡ç®— Deadline/InnerDeadline/Remind\*ï¼Œç”Ÿæˆ `T_Task`ã€‚                                    |
| FR-WD-05 | ä¸ºå®šä¹‰äº†è´¹ç”¨ç±»å‹çš„ä¸­é—´æ–‡ä»¶ç”Ÿæˆè´¹ç”¨è‰å• | 3.4.4              | Template.FeeDraftType/FeeItemList é©±åŠ¨è‰å•ç”Ÿæˆï¼›ç»“åˆ `T_FeeRate` å’Œ Case å±æ€§è®¡ç®—é‡‘é¢ï¼›å†™å…¥ `T_FeeDraft/T_FeeItem`ã€‚                                                            |
| FR-WD-06 | æ”¯æŒ 0..N é™„ä»¶ & æŸ¥çœ‹/å¯¼å‡º  | 3.3.2, 3.4.5, 3.6  | `T_DocAttachment` è¡¨è®¾è®¡æ»¡è¶³å¤šé™„ä»¶éœ€æ±‚ï¼ŒStep5 å†™å…¥é™„ä»¶ï¼Œä¸»ç•Œé¢æ”¯æŒæŸ¥çœ‹/ä¸‹è½½/æ–°å¢/åˆ é™¤ã€‚                                                                                                   |
| FR-WD-07 | ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ä¸æ¸…å•è¾“å‡º         | 3.8                | å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼ˆæ—¶é—´/DocType/æ¡ˆä»¶/æ¨¡æ¿ç­‰ï¼‰å’Œç»“æœåˆ—ï¼›æ¸…å•å¯¼å‡ºé€šè¿‡æ¨¡æ¿ç”Ÿæˆ Word/Excel/PDFã€‚                                                                                                    |
| FR-WD-08 | é‚®å¯„ä¿¡æ¯ç™»è®°              | 3.7.1              | â€œé‚®å¯„ä¿¡æ¯ç™»è®°â€ç•Œé¢æŒ‰æ¡ä»¶æ£€ç´¢ `T_Document`ï¼Œæ‰¹é‡æ›´æ–° OutgoingRegNo å’Œå¯é€‰ ForwardDateã€‚                                                                                            |
| FR-WD-09 | æ–‡ä»¶äº¤æ¥å•               | 3.3.4, 3.7.2       | `T_DocDispatch/T_DocDispatchLine` å»ºæ¨¡äº¤æ¥å•ï¼›ç•Œé¢é€‰æ‹©å®¢æˆ·+æ—¥æœŸâ†’é¢„å¡«å»æ–‡åˆ—è¡¨â†’ä¿å­˜åå¯å¯¼å‡º/æ‰“å°äº¤æ¥å•ã€‚                                                                                      |
| FR-WD-10 | ä¿¡å°æ‰“å°                | 3.7.3              | é€šè¿‡ Case.DocAddressID/Client é»˜è®¤åœ°å€/Applicant åœ°å€ï¼Œæ„é€ æ”¶ä»¶äººä¿¡æ¯ï¼Œè°ƒç”¨æ¨¡æ¿ç”Ÿæˆä¿¡å°ç‰ˆå¼ï¼›æ”¯æŒæ‰“å°/å¯¼å‡ºã€‚                                                                                   |

***

> âœ… è‡³æ­¤ï¼Œâ€œæ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†â€çš„æ‰€æœ‰ç»†èŠ‚ï¼ˆæ•°æ®æ¨¡å‹ã€å­—æ®µ UIã€æ ¡éªŒã€å‘å¯¼æ­¥éª¤ã€æ¨¡æ¿ç®¡ç†ã€é™„ä»¶ã€é‚®å¯„/äº¤æ¥/ä¿¡å°ã€æŸ¥è¯¢ä¸æ¸…å•ã€FR æ˜ å°„ï¼‰ï¼Œå·²ç»å…¨éƒ¨åˆå¹¶åˆ° v2.0 ä¸­ï¼Œæ²¡æœ‰å‹ç¼©ã€‚

## 4. æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†ï¼ˆDeadline & Docketï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”æ—§ç‰ˆç”¨æˆ·æ‰‹å†Œä¸­â€œæ—¶é™ç®¡ç†â€ç›¸å…³ç« èŠ‚ï¼Œå¹¶åˆå¹¶æˆ‘ä»¬ä¹‹å‰å†™è¿‡çš„æ‰€æœ‰â€œDeadline & Docketâ€å†…å®¹ï¼š
>
> *   æ—¶é™æ¨¡æ¿ï¼ˆç±»å‹/èµ·ç®—åŸºå‡†/å†…éƒ¨é™/æé†’è§„åˆ™ï¼‰
> *   è‡ªåŠ¨ä»»åŠ¡ç”Ÿæˆï¼ˆæ¥è‡ªä¸­é—´æ–‡ä»¶ã€æ¡ˆä»¶äº‹ä»¶ã€å¹´è´¹ä»»åŠ¡ç­‰ï¼‰
> *   æ‰‹å·¥ä»»åŠ¡ç»´æŠ¤
> *   æˆ‘çš„ä»»åŠ¡ / ç›‘ç£ä»»åŠ¡è§†å›¾
> *   ç™»å½•é¦–é¡µæé†’
> *   ç”³è¯·è´¹/å®å®¡è¯·æ±‚ç­‰ä¸“ç”¨æ—¶é™æ£€ç´¢
> *   æ—¶é™æ“ä½œæ—¥å¿—\
>     ä»»ä½•ä¹‹å‰è¾“å‡ºè¿‡çš„å­—æ®µã€æ ¡éªŒæˆ–æµç¨‹ç‚¹ï¼Œè¿™é‡Œéƒ½ä¼šå®Œæ•´æ”¶å½•ã€‚

***

## 4.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 4.1.1 èŒƒå›´

â€œæ—¶é™ç®¡ç†â€æ¨¡å—è´Ÿè´£ç³»ç»Ÿä¸­æ‰€æœ‰â€œéœ€è¦åœ¨æŸæ—¥æœŸå‰å®Œæˆâ€çš„ä»»åŠ¡å’Œæé†’ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

1.  **æ—¶é™ç±»å‹å‚æ•°è®¾ç½®ï¼ˆæ—¶é™æ¨¡æ¿ï¼‰**
    *   ä¸ºä¸åŒä¸šåŠ¡åœºæ™¯å®šä¹‰â€œèµ·ç®—åŸºå‡† + å¹´/æœˆ/æ—¥å¢é‡ + å†…éƒ¨é™ + æé†’è§„åˆ™ + é»˜è®¤è´£ä»»äººâ€
    *   ç¤ºä¾‹ï¼šç”³è¯·è´¹ç¼´çº³æ—¶é™ã€å®å®¡è¯·æ±‚æ—¶é™ã€OA ç­”å¤æ—¶é™ã€æˆæƒè¯ä¹¦è´¹æ—¶é™ã€å¹´è´¹ç¼´çº³æ—¶é™ã€æ— æ•ˆç­”è¾©æ—¶é™ç­‰
2.  **æ—¶é™ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ**
    *   ä»ä¸­é—´æ–‡ä»¶å½•å…¥ï¼ˆæ¨¡å—äºŒï¼‰è‡ªåŠ¨ç”Ÿæˆï¼šOA ç­”å¤æ—¶é™ã€æˆæƒè´¹æ—¶é™ç­‰
    *   ä»æ¡ˆä»¶äº‹ä»¶ï¼ˆæ–°æ¡ˆé€’äº¤ã€æˆæƒï¼‰è‡ªåŠ¨ç”Ÿæˆï¼šç”³è¯·è´¹æ—¶é™ã€è¯ä¹¦è´¹æ—¶é™
    *   ä»å¹´è´¹ä»»åŠ¡ï¼ˆæ¨¡å—å››ï¼‰è‡ªåŠ¨ç”Ÿæˆï¼šå¹´è´¹ç¼´çº³æé†’ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰
3.  **æ—¶é™ä»»åŠ¡æ‰‹å·¥ç»´æŠ¤**
    *   æ‰‹å·¥æ–°å¢ç‰¹æ®Šæ—¶é™ä»»åŠ¡
    *   æ‰‹å·¥ç¼–è¾‘ä»»åŠ¡å­—æ®µï¼ˆåŸºå‡†æ—¥/ç»é™/å†…éƒ¨é™/æé†’æ—¥/è´£ä»»äººç­‰ï¼‰
    *   åˆ é™¤/å–æ¶ˆä»»åŠ¡ï¼ˆå—æƒé™æ§åˆ¶ï¼‰
4.  **æ—¥å¸¸æé†’è§†å›¾**
    *   â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€ï¼šä½œä¸šäººè§†è§’
    *   â€œç›‘ç£æ—¶é™ä»»åŠ¡â€ï¼šç›‘ç£äººè§†è§’
    *   ç™»å½•é¦–é¡µâ€œä»Šæ—¥æé†’æ¸…å•â€ï¼šä½œä¸š+ç›‘ç£ä¸¤ä¸ªåˆ—è¡¨
5.  **ä¸“é¡¹æ£€ç´¢**
    *   ç”³è¯·è´¹æ—¶é™æ£€ç´¢ï¼šæŸ¥æ‰¾â€œå°šæœªç¼´ç”³è¯·è´¹ä¸”ç”³è¯·è´¹ç»é™åœ¨æŸæ—¶é—´çª—å£å†…â€çš„æ¡ˆä»¶
    *   å®å®¡è¯·æ±‚æ—¶é™æ£€ç´¢ï¼šæŸ¥æ‰¾â€œå°šæœªæå®å®¡ä¸”å®å®¡è¯·æ±‚ç»é™åœ¨æŸæ—¶é—´çª—å£å†…â€çš„æ¡ˆä»¶
6.  **æ¸…å•å¯¼å‡º**
    *   ä»»æ„æ—¶é™åˆ—è¡¨éƒ½å¯å¯¼å‡º Excel/æ‰“å°çº¸è´¨æ¸…å•ï¼Œä¾›çº¿ä¸‹è¿½è¸ª
7.  **æ“ä½œæ—¥å¿—**
    *   å¯¹æ¯ä¸ªä»»åŠ¡çš„åˆ›å»º/ä¿®æ”¹/æ ¸é”€/å–æ¶ˆæ ¸é”€/è´£ä»»äººå˜æ›´ç­‰åŠ¨ä½œè®°å½•æ—¥å¿—ï¼Œæ”¯æŒå®¡è®¡å’Œè¿½è´£

### 4.1.2 è§’è‰²

*   **Agent / Workerï¼ˆä½œä¸šäººï¼‰**
    *   è´Ÿè´£å®é™…å¤„ç†æ—¶é™ä»»åŠ¡ï¼ˆæ’°æ–‡ã€ç­”å¤ã€ç¼´è´¹å‡†å¤‡ç­‰ï¼‰
    *   é€šè¿‡â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾æŸ¥çœ‹å’Œæ ¸é”€ä»»åŠ¡
*   **Supervisorï¼ˆç›‘ç£äºº/ç»„é•¿/åˆä¼™äººï¼‰**
    *   ç›‘ç£ä¸‹å±çš„æ—¶é™ä»»åŠ¡å®Œæˆæƒ…å†µ
    *   åœ¨â€œç›‘ç£æ—¶é™ä»»åŠ¡â€è§†å›¾ä¸­æŒ‰ä½œä¸šäºº/ç±»å‹/é€¾æœŸæƒ…å†µç­›é€‰ï¼ŒæŒ‡æ´¾/é‡æ–°åˆ†é…/å–æ¶ˆä»»åŠ¡
*   **Formalities / Flow Admin**
    *   ç®¡ç†æ—¶é™æ¨¡æ¿å‚æ•°
    *   å¯¹å¼‚å¸¸ä»»åŠ¡è¿›è¡Œæ‰‹å·¥è°ƒæ•´æˆ–åˆ›å»ºç‰¹æ®Šä»»åŠ¡
*   **Admin**
    *   ç»´æŠ¤ `T_TaskTemplate`ï¼Œè®¾å®šç³»ç»Ÿçº§æ—¶é™è§„åˆ™
    *   ç®¡æ§â€œåˆ é™¤/å–æ¶ˆä»»åŠ¡â€ç­‰é«˜å±æ“ä½œçš„æƒé™

***

## 4.2 User Stories & Functional Requirements

### 4.2.1 User Storiesï¼ˆUSï¼‰

**US-DL-01 æ—¶é™æ¨¡æ¿é…ç½®**\
ä½œä¸º **ç®¡ç†å‘˜**ï¼Œæˆ‘å¸Œæœ›é€šè¿‡å‚æ•°ç•Œé¢ç»´æŠ¤å„ç§æ—¶é™æ¨¡æ¿ï¼ˆèµ·ç®—åŸºå‡†ã€å¹´/æœˆ/æ—¥å¢é‡ã€å†…éƒ¨æ—¶é™ã€æé†’è§„åˆ™ã€é»˜è®¤ç›‘ç£äºº/è´£ä»»äººï¼‰ï¼Œä½¿ç³»ç»Ÿåœ¨å„ä¸ªä¸šåŠ¡åœºæ™¯ä¸­è‡ªåŠ¨è®¡ç®—æœŸé™ã€‚

**US-DL-02 è‡ªåŠ¨åˆ›å»ºæ—¶é™ä»»åŠ¡**\
ä½œä¸º **æµç¨‹/å½¢å¼å®¡æŸ¥äººå‘˜**ï¼Œå½“å½•å…¥æŸäº›ä¸­é—´æ–‡ä»¶æˆ–æ¡ˆä»¶äº‹ä»¶ï¼ˆé€’äº¤ã€æˆæƒã€å¹´è´¹ç­‰ï¼‰æ—¶ï¼Œæˆ‘å¸Œæœ›ç³»ç»Ÿè‡ªåŠ¨æŒ‰ç…§é…ç½®ç”Ÿæˆå…¬å¼åŒ–çš„æ—¶é™ä»»åŠ¡ï¼ˆåŒ…å«ç»é™ã€å†…éƒ¨é™ã€æé†’æ—¥æœŸå’Œè´£ä»»äººï¼‰ã€‚

**US-DL-03 æ—¥å¸¸æé†’ â€“ ä½œä¸šäººè§†è§’**\
ä½œä¸º **ä»£ç†äºº/ä½œä¸šäºº**ï¼Œæˆ‘å¸Œæœ›æ¯å¤©çœ‹åˆ°å±äºæˆ‘è´Ÿè´£çš„ã€å³å°†åˆ°æœŸå’Œå·²åˆ°æœŸçš„ä»»åŠ¡åˆ—è¡¨ï¼Œå¹¶èƒ½å¿«é€Ÿæ ¸é”€æˆ–ä¿®æ”¹å®Œæˆæ—¥ã€‚

**US-DL-04 æ—¥å¸¸æé†’ â€“ ç›‘ç£äººè§†è§’**\
ä½œä¸º **ç›‘ç£äºº/ç»„é•¿/åˆä¼™äºº**ï¼Œæˆ‘å¸Œæœ›æŒ‰ä½œä¸šäººã€ä»»åŠ¡ç±»å‹ã€æœŸé™çŠ¶æ€ç­‰ç»´åº¦æŸ¥çœ‹æœ¬ç»„ä»»åŠ¡ï¼Œç›‘ç£æœªå®Œæˆæˆ–å·²è¶…æœŸä»»åŠ¡ï¼Œå¹¶èƒ½è°ƒæ•´è´£ä»»äººæˆ–å…³é—­ä»»åŠ¡ã€‚

**US-DL-05 æ‰‹å·¥ç»´æŠ¤æ—¶é™ä»»åŠ¡**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›å¯ä»¥ä¸ºç‰¹æ®Šæ¡ˆä»¶æ‰‹å·¥æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤æ—¶é™ä»»åŠ¡ï¼ˆåœ¨æƒé™æ§åˆ¶ä¸‹ï¼‰ï¼Œä»¥åº”å¯¹ç³»ç»Ÿå¤–æˆ–éå¸¸è§„çš„æœŸé™è¦æ±‚ã€‚

**US-DL-06 ä¸“é¡¹æ£€ç´¢ï¼šç”³è¯·è´¹ / å®å®¡è¯·æ±‚æ—¶é™**\
ä½œä¸º **æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸“é—¨çš„â€œç”³è¯·è´¹æ—¶é™æ£€ç´¢â€å’Œâ€œå®å®¡è¯·æ±‚æ—¶é™æ£€ç´¢â€ç•Œé¢ï¼ŒæŒ‰åˆ°æœŸåŒºé—´ã€ä»£ç†äººã€æ¡ˆä»¶æ¡ä»¶æ£€ç´¢å‡ºæ‰€æœ‰å°šæœªç¼´è´¹/å°šæœªæå®å®¡çš„æ¡ˆä»¶ï¼Œç”¨äºé›†ä¸­æé†’å’Œç»Ÿè®¡ã€‚

**US-DL-07 ç™»å½•æé†’ä¸æ¸…å•æ‰“å°**\
ä½œä¸º **ä»»ä½•ç”¨æˆ·**ï¼Œæˆ‘å¸Œæœ›ç™»å½•ç³»ç»Ÿæ—¶èƒ½çœ‹åˆ°å±äºè‡ªå·±çš„â€œä»Šæ—¥æé†’æ¸…å•â€ï¼Œå¹¶èƒ½å°†åˆ—è¡¨æŒ‰æ¡ä»¶æ‰“å°æˆçº¸è´¨æ¸…å•è·Ÿè¿›ã€‚

### 4.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-DL-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç»´æŠ¤æ—¶é™æ¨¡æ¿ï¼ˆèµ·ç®—åŸºå‡†ã€å¹´/æœˆ/æ—¥å¢é‡ã€æé†’è§„åˆ™ã€é»˜è®¤ç›‘ç£äºº/è´£ä»»äººï¼‰ã€‚

**FR-DL-02**ï¼šç³»ç»Ÿå¿…é¡»èƒ½æ ¹æ®æ—¶é™æ¨¡æ¿ï¼Œä»æ¡ˆä»¶äº‹ä»¶/ä¸­é—´æ–‡ä»¶/å¹´è´¹ä»»åŠ¡ä¸­è‡ªåŠ¨åˆ›å»ºæ—¶é™ä»»åŠ¡ã€‚

**FR-DL-03**ï¼šæ¯ä¸ªæ—¶é™ä»»åŠ¡å¿…é¡»åŒºåˆ†â€œä½œä¸šäººâ€å’Œâ€œç›‘ç£äººâ€ï¼Œå¹¶åœ¨ä¸åŒè§†å›¾ä¸­ä»¥ä¸åŒè§’è‰²å±•ç¤ºã€‚

**FR-DL-04**ï¼šç³»ç»Ÿå¿…é¡»ä¸ºä½œä¸šäººæä¾›â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾ï¼ŒæŒ‰å†…éƒ¨æ—¶é™/å®˜æ–¹ç»é™æ’åºï¼Œæ”¯æŒæ ¸é”€/å–æ¶ˆæ ¸é”€ã€‚

**FR-DL-05**ï¼šç³»ç»Ÿå¿…é¡»ä¸ºç›‘ç£äººæä¾›â€œç›‘ç£æ—¶é™â€è§†å›¾ï¼ŒæŒ‰ä½œä¸šäºº/ç±»å‹/çŠ¶æ€/é€¾æœŸæƒ…å†µè¿‡æ»¤ä»»åŠ¡ã€‚

**FR-DL-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒæ‰‹å·¥æ–°å¢/ç¼–è¾‘/åˆ é™¤æ—¶é™ä»»åŠ¡ï¼ˆå—è§’è‰²/æƒé™æ§åˆ¶ï¼‰ã€‚

**FR-DL-07**ï¼šç³»ç»Ÿå¿…é¡»æä¾›â€œç”³è¯·è´¹æ—¶é™æ£€ç´¢â€å’Œâ€œå®å®¡æ—¶é™æ£€ç´¢â€ï¼Œç”¨äºæ‰¹é‡æŸ¥æ‰¾å°šæœªç¼´è´¹/å°šæœªæå®å®¡æ¡ˆä»¶ã€‚

**FR-DL-08**ï¼šç™»å½•æˆ–è¿›å…¥é¦–é¡µæ—¶ï¼Œç³»ç»Ÿå¿…é¡»è‡ªåŠ¨æŸ¥è¯¢å¹¶å±•ç¤ºå½“å‰ç”¨æˆ·ç›¸å…³çš„â€œä»Šæ—¥æé†’æ¸…å•â€ã€‚

**FR-DL-09**ï¼šç³»ç»Ÿå¿…é¡»å…è®¸å°†ä»»æ„æ—¶é™åˆ—è¡¨å¯¼å‡º/æ‰“å°ä¸ºæœŸé™æ¸…å•ã€‚

**FR-DL-10**ï¼šç³»ç»Ÿå¿…é¡»è®°å½•æ—¶é™ä»»åŠ¡çš„å…³é”®æ“ä½œæ—¥å¿—ï¼ˆåˆ›å»ºã€ä¿®æ”¹ã€è´£ä»»äººå˜æ›´ã€æ ¸é”€ã€å–æ¶ˆæ ¸é”€ã€å–æ¶ˆä»»åŠ¡ï¼‰ä»¥ä¾¿å®¡è®¡ã€‚

***

## 4.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

### 4.3.1 `T_TaskTemplate` â€“ æ—¶é™æ¨¡æ¿è¡¨ï¼ˆå®Œå…¨å±•å¼€ï¼‰

**ç”¨é€”**

ä¸ºä¸åŒä¸šåŠ¡åœºæ™¯å®šä¹‰ç»Ÿä¸€çš„â€œæ—¶é—´è®¡ç®—è§„åˆ™â€ï¼Œé¿å…åœ¨ä»£ç ä¸­æ•£è½ç¡¬ç¼–ç ã€‚

**å­—æ®µ**

*   `TaskTemplateID` PK
*   `Code` varchar â€“ æ¨¡æ¿ä»£ç ï¼ˆå”¯ä¸€ï¼‰ï¼Œå¦‚ï¼š
    *   APPLY\_FEE\_LIMIT â€“ ç”³è¯·è´¹ç¼´çº³æ—¶é™
    *   EXAM\_REQUEST\_LIMIT â€“ å®å®¡è¯·æ±‚æ—¶é™
    *   OA\_REPLY\_LIMIT â€“ OA ç­”å¤æ—¶é™
    *   GRANT\_CERT\_FEE\_LIMIT â€“ æˆæƒè¯ä¹¦è´¹æ—¶é™
    *   PCT\_NATIONAL\_ENTRY\_LIMIT â€“ å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™
    *   INVALID\_DEFENSE\_LIMIT â€“ æ— æ•ˆç­”è¾©æ—¶é™
    *   ANNUITY\_FEE\_LIMIT â€“ å¹´è´¹ç¼´è´¹æ—¶é™ï¼ˆå¦‚é‡‡ç”¨ä»»åŠ¡å½¢å¼ï¼‰
*   `Name` nvarchar â€“ æ¨¡æ¿åç§°ï¼Œç”¨äºæ˜¾ç¤º

**èµ·ç®—ä¸å¢é‡**

*   `DeadlineBase` enum â€“ ç»é™èµ·ç®—åŸºå‡†ï¼š
    *   FILING\_DATE â€“ ç”³è¯·æ—¥
    *   RECEIVE\_DATE â€“ æ”¶æ¡ˆæ—¥/å—ç†æ—¥
    *   DISPATCH\_DATE â€“ å‘æ–‡æ—¥
    *   PUB\_DATE â€“ å…¬å¼€æ—¥
    *   GRANT\_DATE â€“ æˆæƒæ—¥
    *   CASE\_EVENT â€“ æŸä¸ªæ¡ˆä»¶äº‹ä»¶è§¦å‘æ—¥ï¼ˆä¾‹å¦‚é€’äº¤æ—¥ï¼‰
    *   CUSTOM â€“ è°ƒç”¨æ–¹ä¼ å…¥ BaseDateï¼Œæ¨¡æ¿ä»…è´Ÿè´£å¢é‡
*   `AddYears` int â€“ ç›¸å¯¹ BaseDate å¢åŠ çš„å¹´æ•°ï¼ˆå¯ä»¥ä¸º 0ï¼‰
*   `AddMonths` int â€“ å¢åŠ çš„æœˆæ•°
*   `AddDays` int â€“ å¢åŠ çš„å¤©æ•°ï¼ˆå¯ä¸ºè´Ÿï¼Œç‰¹æ®Šè§„åˆ™ï¼‰

**å†…éƒ¨æœŸé™ä¸æé†’è§„åˆ™**

*   `InnerOffsetDays` int â€“ å†…éƒ¨æœŸé™ = Deadline - InnerOffsetDaysï¼ˆå¦‚æœ InnerOffsetDays éç©ºï¼‰
*   `RemindBase` enum â€“ INNER æˆ– DEADLINEï¼š
    *   è‹¥ INNERï¼šRemind1/2/3 åŸºäº InnerDeadline
    *   è‹¥ DEADLINEï¼šåŸºäº Deadline
*   `R1_OffsetDays` int â€“ æé†’1çš„æå‰å¤©æ•°ï¼ˆç›¸å¯¹ RemindBaseï¼‰
*   `R2_OffsetDays` int â€“ æé†’2
*   `R3_OffsetDays` int â€“ æé†’3
*   `DailyRemind` bool â€“ æ˜¯å¦ä»æŸæ—¥å¼€å§‹å¤©å¤©æé†’ï¼ˆè®¾ä¸º true æ—¶éœ€è¦å®šä¹‰ä»ä½•æ—¥èµ·ï¼‰

**é»˜è®¤è´£ä»»äºº**

*   `DefaultWorkerRole` enum â€“ é»˜è®¤ä½œä¸šäººè§’è‰²ï¼ˆAGENT/FORMALITIES/ANNUITY\_CLERK ç­‰ï¼‰ï¼›å¯ç”¨äºè‡ªåŠ¨é€‰æ‹©å…·ä½“ç”¨æˆ·
*   `DefaultSupervisorID` FK â†’ User â€“ é»˜è®¤ç›‘ç£äºº

**å¯ç”¨çŠ¶æ€**

*   `IsActive` bool â€“ æ˜¯å¦å¯ç”¨
*   å®¡è®¡ï¼šCreatedBy/At, UpdatedBy/At

**æ ¡éªŒ**

*   V-TM-01ï¼š`Code` å”¯ä¸€ä¸”éç©ºï¼›
*   V-TM-02ï¼š`AddYears/AddMonths/AddDays` ä¸å¾—å…¨éƒ¨ä¸º 0ï¼ˆå¦åˆ™æ²¡æœ‰ä»»ä½•æœŸé™æ„ä¹‰ï¼‰ï¼Œå¦‚éœ€â€œç«‹å³å®Œæˆâ€ï¼Œå¯ä½¿ç”¨ AddDays=0 å’Œ InnerOffsetDays=0ï¼›
*   V-TM-03ï¼š`DailyRemind=true` æ—¶ï¼Œå¿…é¡»æœ‰ `InnerOffsetDays` æˆ– Remind\* é…ç½®ï¼Œä»¥ç¡®å®šæ¯æ—¥æé†’èµ·ç‚¹ï¼›
*   V-TM-04ï¼š`DeadlineBase=CUSTOM/CASE_EVENT` æ—¶ï¼Œè°ƒç”¨æ–¹å¿…é¡»æä¾› BaseDateï¼Œå¦åˆ™æ‹’ç»ç”Ÿæˆä»»åŠ¡ï¼ˆç”±ä¸šåŠ¡é€»è¾‘ä¿è¯ï¼‰ã€‚

***

### 4.3.2 `T_Task` â€“ æ—¶é™ä»»åŠ¡å®ä¾‹è¡¨ï¼ˆå®Œæ•´ç‰ˆï¼‰

**ä¸»é”®ä¸å…³è”**

*   `TaskID` PK
*   `CaseID` FK â†’ T\_Case
*   `DocID` FK â†’ T\_Documentï¼ˆå¯ç©ºï¼‰ â€“ å¦‚æœè¯¥ä»»åŠ¡ç”±æŸä¸­é—´æ–‡ä»¶äº§ç”Ÿ
*   `TemplateCode` FK â†’ T\_TaskTemplate.Codeï¼ˆå¯ç©ºï¼‰ â€“ æŒ‡æ˜æ¥æºæ¨¡æ¿

**æè¿°**

*   `Type` nvarchar â€“ ä»»åŠ¡åç§°ï¼ˆä¾‹å¦‚â€œç”³è¯·è´¹ç¼´çº³æ—¶é™â€ã€â€œOA ç­”å¤æ—¶é™â€ï¼‰ï¼Œé€šå¸¸ä¸ºæ¨¡æ¿ Name
*   `Summary` nvarchar â€“ æ‘˜è¦ï¼Œå¯åŒ…å«æ¡ˆå·å·/æ–‡ä»¶å/ä»»åŠ¡è¯´æ˜

**æ—¶é—´å­—æ®µ**

*   `BaseDate` date â€“ èµ·ç®—åŸºå‡†æ—¥ï¼ˆæ ¹æ® DeadlineBase å†³å®šï¼šå¦‚å‘æ–‡æ—¥/å—ç†æ—¥/ç”³è¯·æ—¥/è‡ªå®šä¹‰äº‹ä»¶æ—¥ï¼‰
*   `Deadline` date â€“ å®˜æ–¹ç»é™ï¼ˆå¦‚ç”³è¯·è´¹æœ€ç»ˆç¼´è´¹æ—¥ã€å®¡æŸ¥æ„è§ç­”å¤ç»é™ï¼‰
*   `InnerDeadline` date â€“ å†…éƒ¨æœŸé™ï¼ˆäº‹åŠ¡æ‰€å†…è§„åˆ’æ—¥æœŸï¼‰
*   `Remind1` date â€“ ç¬¬ä¸€æ¬¡æé†’æ—¥
*   `Remind2` date â€“ ç¬¬äºŒæ¬¡æé†’æ—¥
*   `Remind3` date â€“ ç¬¬ä¸‰æ¬¡æé†’æ—¥
*   `DailyRemindFrom` date â€“ è‹¥ DailyRemind=trueï¼Œåˆ™è‡ªè¯¥æ—¥èµ·æ¯å¤©æé†’ï¼›é€šå¸¸ä¸º InnerDeadline æˆ– Deadline
*   `DailyRemind` bool â€“ æ˜¯å¦å¼€å¯å¤©å¤©æé†’

**è´£ä»»äººä¸ç›‘ç£äºº**

*   `WorkerID` FK â†’ User â€“ ä½œä¸šäºº
*   `SupervisorID` FK â†’ User â€“ ç›‘ç£äºº

**çŠ¶æ€**

*   `Status` enumï¼š
    *   OPEN â€“ æœªå®Œæˆ
    *   DONE â€“ å·²å®Œæˆ
    *   CANCELLED â€“ å·²å–æ¶ˆï¼ˆä¸å†éœ€æ‰§è¡Œï¼‰
*   `DoneDate` date â€“ å®Œæˆæ—¥æœŸ
*   `IsWrittenOff` bool â€“ æ˜¯å¦â€œæ ¸é”€â€ï¼ˆå¯¹äºç‰¹å®šä¸šåŠ¡è¯­ä¹‰ä¸‹è§†ä¸ºå½»åº•å®Œæˆï¼‰

**å¤‡æ³¨ & å®¡è®¡**

*   `Remark` nvarchar â€“ å¤‡æ³¨
*   `CreatedBy`, `CreatedAt`, `UpdatedBy`, `UpdatedAt`

***

### 4.3.3 `T_TaskLog` â€“ æ—¶é™æ“ä½œæ—¥å¿—

**å­—æ®µ**

*   `TaskLogID` PK
*   `TaskID` FK â†’ T\_Task
*   `Action` enumï¼š
    *   CREATE â€“ åˆ›å»ºä»»åŠ¡
    *   UPDATE â€“ æ›´æ–°ä»»åŠ¡å†…å®¹ï¼ˆæ—¥æœŸã€å¤‡æ³¨ç­‰ï¼‰
    *   CHANGE\_WORKER â€“ ä¿®æ”¹ä½œä¸šäºº
    *   CHANGE\_SUPERVISOR â€“ ä¿®æ”¹ç›‘ç£äºº
    *   MARK\_DONE â€“ æ ‡è®°ä¸ºå®Œæˆ/æ ¸é”€
    *   UNMARK\_DONE â€“ å–æ¶ˆå®Œæˆ/å–æ¶ˆæ ¸é”€
    *   CANCEL â€“ å–æ¶ˆä»»åŠ¡
    *   RESTORE â€“ æ¢å¤è¢«å–æ¶ˆçš„ä»»åŠ¡
*   `ActionBy` FK â†’ User â€“ æ“ä½œäºº
*   `ActionAt` datetime â€“ æ“ä½œæ—¶é—´
*   `OldValue` json â€“ å˜æ›´å‰å…³é”®å­—æ®µå¿«ç…§
*   `NewValue` json â€“ å˜æ›´åå…³é”®å­—æ®µå¿«ç…§
*   `Comment` nvarchar â€“ æ“ä½œå¤‡æ³¨ï¼ˆå¦‚å–æ¶ˆåŸå› ï¼‰

**ç”¨é€”**

*   ä¾›å®¡è®¡ä½¿ç”¨
*   å¸®åŠ©åˆ†æä»»åŠ¡è¢«è°ã€åœ¨ä½•æ—¶ã€ä¸ºä½•å–æ¶ˆ/ä¿®æ”¹/æ ‡è®°å®Œæˆ

***

## 4.4 æ—¶é™æ¨¡æ¿é…ç½®ï¼ˆå¯¹åº” US-DL-01 / FR-DL-01ï¼‰

### 4.4.1 UI ç»“æ„

**æ¨¡æ¿åˆ—è¡¨**

*   æ˜¾ç¤ºæ‰€æœ‰ `T_TaskTemplate` æ¡ç›®
*   æ”¯æŒæŒ‰ Code/Name/DeadlineBase/æ¨¡å—å…³é”®å­—æœç´¢
*   æ”¯æŒå¯ç”¨/ç¦ç”¨ç­›é€‰

**æ¨¡æ¿ç¼–è¾‘åŒºåŸŸ**

*   é€‰ä¸­åˆ—è¡¨ä¸­çš„æŸæ¡è®°å½•ï¼Œåœ¨å³ä¾§/ä¸‹æ–¹ç¼–è¾‘è¯¦ç»†å­—æ®µï¼ˆä¸Šè¿°æ‰€æœ‰å­—æ®µï¼‰

### 4.4.2 å­—æ®µç¼–è¾‘è§„åˆ™

**å¿…å¡«ï¼š** Code, Name, DeadlineBase

**å¢é‡å­—æ®µï¼š** AddYears/AddMonths/AddDays è‡³å°‘æœ‰ä¸€é¡¹éç©ºï¼ˆæˆ–é 0ï¼‰

**å†…éƒ¨é™/æé†’å­—æ®µï¼š**

*   InnerOffsetDays å¯ä¸ºç©ºï¼ˆä¸éœ€è¦å†…éƒ¨é™çš„ä»»åŠ¡ï¼‰ï¼›
*   Remind1/2/3 å¯å•ç‹¬ä¸ºç©ºï¼Œè¡¨ç¤ºæ²¡æœ‰è¯¥æé†’ï¼›
*   RemindBase ä¸º INNER æ—¶ï¼Œå¦‚æœ InnerDeadline ä¸ºç©ºï¼ˆå› ä¸º InnerOffsetDays ä¸ºç©ºï¼‰ï¼Œåˆ™ç³»ç»Ÿåº”ç¦æ­¢ä¿å­˜æˆ–è¦æ±‚å¡«å†™ InnerOffsetDaysï¼›

**é»˜è®¤è´£ä»»äººï¼š**

*   DefaultWorkerRole å¯ä¸ºç©ºï¼Œè¡¨ç¤ºç”±ä¸šåŠ¡é€»è¾‘é€‰æ‹©ï¼›
*   DefaultSupervisorID å¦‚ä¸ºç©ºï¼Œå¯ç”±ç»„ç»‡ç»“æ„ä¸­â€œéƒ¨é—¨è´Ÿè´£äººâ€å¡«è¡¥ã€‚

***

## 4.5 è‡ªåŠ¨åˆ›å»ºæ—¶é™ä»»åŠ¡ï¼ˆæ¥è‡ªä¸­é—´æ–‡ä»¶å’Œæ¡ˆä»¶äº‹ä»¶ï¼‰

### 4.5.1 ä»ä¸­é—´æ–‡ä»¶å½•å…¥è§¦å‘ï¼ˆç»“åˆæ¨¡å—äºŒï¼‰

**è§¦å‘ç‚¹**

*   åœ¨æ¨¡å—äºŒ Step 3 ä¸­ï¼Œå½“æŸæ¡ `T_Document` è‰æ¡ˆæ‹¥æœ‰éç©ºçš„ `DeadlineTemplateCode` ä¸” `NeedReply=true` æ—¶ï¼Œ
*   æˆ–åœ¨æ–‡æ¡£å®é™…å†™å…¥æ•°æ®åº“åï¼Œå¼‚æ­¥é€šè¿‡äº‹ä»¶ï¼ˆDocumentCreatedï¼‰è§¦å‘ä»»åŠ¡åˆ›å»ºã€‚

**è¾“å…¥æ•°æ®**

*   `CaseID`
*   `DocID`ï¼ˆæœ€ç»ˆå†™å…¥åå¯è·å¾—ï¼‰
*   `TemplateCode = T_DocTemplate.DeadlineTemplateCode`
*   `BaseDate`ï¼š
    *   è‹¥æœ‰ `ExtraData.OfficialDueDate` ä¸”ä¸šåŠ¡è¦æ±‚ä»¥å®˜æ–¹ç»é™ä¸º `Deadline`ï¼ˆä¸ç”±æ¨¡æ¿è®¡ç®—ï¼‰ï¼Œåˆ™ BaseDate å¯ä»å– DispatchDateï¼›
    *   å¦åˆ™ç”±æ¨¡æ¿çš„ DeadlineBaseï¼ˆDISPATCH\_DATE ç­‰ï¼‰å†³å®šä» `T_Document` æˆ– `T_Case` é€‰ç›¸åº”æ—¥æœŸã€‚

**è®¡ç®—é€»è¾‘**

1.  æŸ¥ `T_TaskTemplate` by `Code`;
2.  æ ¹æ® DeadlineBase é€‰æ‹©åŸå§‹ BaseDateï¼š
    *   FILING\_DATE â†’ `T_Case.FilingDate`
    *   RECEIVE\_DATE â†’ `T_Document.ReceiveDate` æˆ– `T_Case.RecvDate`
    *   DISPATCH\_DATE â†’ `T_Document.DispatchDate`
    *   PUB\_DATE â†’ `T_Case.PubDate`
    *   GRANT\_DATE â†’ `T_Case.GrantDate`
    *   CASE\_EVENT â†’ ç”±è°ƒç”¨æ–¹æä¾›
    *   CUSTOM â†’ ç”±è°ƒç”¨æ–¹æä¾›
3.  å¦‚ä¸šåŠ¡è§„å®šä½¿ç”¨ `ExtraData.OfficialDueDate` ä½œä¸º Deadlineï¼Œåˆ™æš‚ä¸ä½¿ç”¨ AddYears/Months/Daysï¼Œè€Œåªåˆ©ç”¨æ¨¡æ¿è¿›è¡Œ Internal/Remind è®¡ç®—ã€‚
4.  å¦åˆ™ï¼š
    *   `Deadline = BaseDate + AddYears/Months/Days`ï¼ˆæŒ‰è‡ªç„¶æ—¥/æ—¥å†æ³•åˆ™è®¡ç®—ï¼‰ã€‚
5.  å†…éƒ¨é™ï¼š
    *   è‹¥ InnerOffsetDays éç©ºï¼Œåˆ™ `InnerDeadline = Deadline - InnerOffsetDays`ï¼›
    *   è‹¥ä¸ºç©ºï¼Œå¯å°† InnerDeadline è®¾ä¸º NULLã€‚
6.  æé†’æ—¥ï¼š
    *   è‹¥ RemindBase=DEADLINEï¼š
        *   `RemindX = Deadline - R*_OffsetDays`
    *   è‹¥ RemindBase=INNERï¼š
        *   `RemindX = InnerDeadline - R*_OffsetDays`
7.  å¤©å¤©æé†’ï¼š
    *   è‹¥ DailyRemind=true ä¸” InnerDeadline éç©ºï¼Œåˆ™ `DailyRemindFrom = InnerDeadline`ï¼›
    *   å¦åˆ™ `DailyRemindFrom = Deadline`ã€‚

**è´£ä»»äººé€‰æ‹©**

*   WorkerIDï¼š
    1.  Template.DefaultWorkerRole=AGENT æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ Case.PrimaryAgentIDï¼›
    2.  è‹¥ä¸º FORMALITIESï¼Œåˆ™ç”¨å½“å‰ç™»å½•ç”¨æˆ·æˆ–æŸéƒ¨é—¨é»˜è®¤ç”¨æˆ·ï¼›
*   SupervisorIDï¼š
    *   ä¼˜å…ˆ Template.DefaultSupervisorIDï¼›
    *   è‹¥ä¸ºç©ºåˆ™æ ¹æ® WorkerID æ‰¾ä¸Šçº§ï¼ˆå¦‚éƒ¨é—¨è´Ÿè´£äººï¼‰ã€‚

**ä»»åŠ¡å†™å…¥**

*   å¡«å…… `T_Task`ï¼šCaseID, DocID, TemplateCode, Type=Template.Name, Summaryï¼ˆå¯ç”¨ CaseNo+DocName æ‹¼åˆï¼‰ã€BaseDate, Deadline, InnerDeadline, Remind\*, DailyRemindFrom, DailyRemind, WorkerID, SupervisorID, Status=OPEN, DoneDate=null, IsWrittenOff=falseã€‚
*   å†™å…¥ `T_TaskLog` ä¸€æ¡è®°å½•ï¼ˆAction=CREATEï¼‰ã€‚

***

### 4.5.2 ä»æ¡ˆä»¶äº‹ä»¶è§¦å‘ï¼ˆæ–°æ¡ˆé€’äº¤ã€æˆæƒã€å¹´è´¹ç­‰ï¼‰

**é€šç”¨æ¥å£å½¢æ€**

```pseudo
CreateTaskFromTemplate(
  caseId: Long,
  templateCode: String,
  baseDateSource: Enum or Date, // å¯ç”±è°ƒç”¨æ–¹æŒ‡å®š
  workerId: Long?,
  supervisorId: Long?,
  remark: String?
)
```

**ç¤ºä¾‹ 1ï¼šç”³è¯·è´¹æ—¶é™**

*   æ¡ˆä»¶é€’äº¤ï¼ˆStatus=NOT\_FILEDâ†’WAITING\_RECEIPTï¼‰åï¼š
    *   è°ƒç”¨ `CreateTaskFromTemplate(CaseID, "APPLY_FEE_LIMIT", baseDateSource=CASE_EVENT or FILING_DATE, ...)`
    *   BaseDate å¯ä»¥æ˜¯ FilingDate æˆ– SubmittedDateï¼Œæ ¹æ®å›½å®¶è§„åˆ™å†³å®šã€‚

**ç¤ºä¾‹ 2ï¼šæˆæƒè¯ä¹¦è´¹æ—¶é™**

*   æˆæƒé€šçŸ¥å½•å…¥åï¼ˆGRANT\_NOTICE æ–‡æ¡£ï¼‰ï¼š
    *   ä»¥ GrantDate æˆ– IssueDate ä¸ºåŸºå‡†è°ƒç”¨ `CreateTaskFromTemplate(CaseID, "GRANT_CERT_FEE_LIMIT", GRANT_DATE, ...)`ã€‚

**ç¤ºä¾‹ 3ï¼šå¹´è´¹æé†’ä»»åŠ¡**

*   è‹¥é€‰æ‹©ç”¨ T\_Task æ¥å®ç°å¹´è´¹æé†’ï¼ˆé™¤äº† T\_AnnuityTaskï¼‰ï¼š
    *   å¹´è´¹æ¨¡å—åœ¨åˆ›å»º/æ›´æ–° `T_AnnuityTask` æ—¶å¯è°ƒç”¨ `CreateTaskFromTemplate` ç”Ÿæˆå¯¹åº” `T_Task`ï¼›
    *   BaseDate = `T_AnnuityTask.DueDate` æˆ–æŸå…¶ä»–åŸºå‡†ã€‚

***

## 4.6 æ‰‹å·¥åˆ›å»º/ç¼–è¾‘/åˆ é™¤æ—¶é™ä»»åŠ¡ï¼ˆUS-DL-05 / FR-DL-06ï¼‰

### 4.6.1 æ‰‹å·¥åˆ›å»ºä»»åŠ¡

**å…¥å£**

*   åœ¨æ¡ˆå·è¯¦æƒ…é¡µçš„â€œæ—¶é™â€æ ‡ç­¾
*   æˆ–åœ¨æ—¶é™æ¨¡å—å•ç‹¬â€œæ–°å¢ä»»åŠ¡â€æŒ‰é’®

**å¿…å¡«å­—æ®µ**

*   CaseIDï¼šé€‰å®šå½“å‰æ¡ˆä»¶
*   Typeï¼šå¿…å¡«ï¼Œä»»åŠ¡åç§°ï¼ˆå¯ä»æ¨¡æ¿é€‰æ‹©ï¼Œä¹Ÿå¯è‡ªå®šä¹‰ï¼‰
*   BaseDateï¼šå¿…å¡«
*   Deadlineï¼šå¿…å¡«
*   WorkerIDï¼šå¿…å¡«
*   Statusï¼šç¼ºçœ OPEN

**å¯é€‰å­—æ®µ**

*   TemplateCodeï¼šå¦‚ä»æ¨¡æ¿åˆ›å»ºå¯å¡«
*   DocIDï¼šè‹¥ä»»åŠ¡ä¸æŸä¸­é—´æ–‡ä»¶ç›¸å…³ï¼Œå¯è®°å½•
*   InnerDeadlineã€Remind1/2/3ã€DailyRemindFromã€DailyRemind
*   SupervisorIDã€Remark

**æ ¡éªŒ**

*   V-TASK-01ï¼šDeadline ä¸å¾—æ—©äº BaseDateã€‚
*   V-TASK-02ï¼šå¦‚ InnerDeadline éç©ºï¼Œåˆ™ä¸å¾—æ™šäº Deadlineã€‚
*   V-TASK-03ï¼šRemindX ä¸å¾—æ™šäº Deadlineï¼Œå»ºè®®ä¸æ—©äº BaseDateã€‚
*   V-TASK-04ï¼šStatus=DONE æ—¶ï¼ŒDoneDate å¿…å¡«ï¼Œä¸” DoneDate ä¸å¾—æ™šäºå½“å‰æ—¥æœŸå¤ªä¹…ï¼ˆå¯é…ç½®ï¼‰ã€‚
*   V-TASK-05ï¼šStatus=OPEN æ—¶ï¼ŒDoneDate å¿…é¡»ä¸ºç©ºã€‚

**å†™å…¥**

*   æ’å…¥ `T_Task`ï¼Œå†™ `T_TaskLog(Action=CREATE)`ã€‚

***

### 4.6.2 ç¼–è¾‘ä»»åŠ¡

**å¯ç¼–è¾‘å­—æ®µ**

*   BaseDate/Deadline/InnerDeadline/Remind1/2/3/DailyRemindFrom/Remark
*   WorkerID / SupervisorID
*   Statusï¼ˆä½†å—æƒé™æ§åˆ¶ï¼‰
*   DoneDateï¼ˆå½“ Status=DONE æ—¶ï¼‰

**æ ¡éªŒ**

*   éµå¾ªä¸åˆ›å»ºç›¸åŒçš„ V-TASK ç³»åˆ—è§„åˆ™ï¼›
*   è‹¥å˜æ›´ WorkerIDï¼šå†™ `T_TaskLog(Action=CHANGE_WORKER)`ï¼ŒOldValue/ NewValue è®°å½• WorkerID å˜æ›´ï¼›
*   è‹¥å˜æ›´ SupervisorIDï¼šå†™ `Action=CHANGE_SUPERVISOR`ã€‚

***

### 4.6.3 æ ¸é”€/å–æ¶ˆæ ¸é”€/å–æ¶ˆä»»åŠ¡

**æ ¸é”€ï¼ˆMark Doneï¼‰**

*   åœ¨â€œæˆ‘çš„ä»»åŠ¡â€æˆ–ä»»åŠ¡è¯¦æƒ…ä¸Šç‚¹å‡»â€œæ ¸é”€â€ï¼š
    *   å°† Status ä» OPEN æ”¹ä¸º DONEï¼›
    *   å¼¹å‡ºå¯¹è¯æ¡†è¦æ±‚å¡«å†™ `DoneDate`ï¼ˆé»˜è®¤=ä»Šæ—¥ï¼‰ï¼›
    *   å¯åŒæ—¶å°† `IsWrittenOff=true`ï¼ˆè§†ä¸šåŠ¡ä½¿ç”¨ï¼Œæ— éœ€åˆ™å¯ä»…ç”¨ Status/DondDateï¼‰ã€‚
*   å†™ `T_TaskLog(Action=MARK_DONE, OldValue={Status:OPEN}, NewValue={Status:DONE,DoneDate:xxx})`ã€‚

**å–æ¶ˆæ ¸é”€ï¼ˆUnmark Doneï¼‰**

*   å¯¹è¯¯æ“ä½œï¼Œæä¾›â€œå–æ¶ˆæ ¸é”€â€ï¼š
    *   å°† Status=DONE æ”¹å› OPENï¼›
    *   æ¸…ç©º DoneDate æˆ–ç§»è‡³ `Remark` ä¸­è¯´æ˜ï¼›
*   å†™ `T_TaskLog(Action=UNMARK_DONE)`ã€‚

**å–æ¶ˆä»»åŠ¡ï¼ˆCancelï¼‰**

*   åœ¨æœ‰è¾ƒé«˜æƒé™ç”¨æˆ·çš„ç•Œé¢æä¾› â€œå–æ¶ˆä»»åŠ¡â€ æ“ä½œï¼š
    *   Status ä» OPEN æˆ– DONE æ”¹ä¸º CANCELLEDï¼›
    *   å¯è¦æ±‚å¡«å†™å–æ¶ˆåŸå› ï¼ˆå†™å…¥ Remark å’Œ Log.Commentï¼‰ï¼›
*   å†™ `T_TaskLog(Action=CANCEL)`ã€‚

**æ¢å¤ä»»åŠ¡ï¼ˆRestoreï¼‰**

*   æœ‰æ—¶éœ€è¦æ¢å¤è¢«å–æ¶ˆä»»åŠ¡ï¼š
    *   ä» CANCELLED æ”¹å› OPENï¼›
*   å†™ `T_TaskLog(Action=RESTORE)`ã€‚

***

## 4.7 è§†å›¾ï¼šæˆ‘çš„æ—¶é™ä»»åŠ¡ã€ç›‘ç£æ—¶é™ä»»åŠ¡ã€ç™»å½•é¦–é¡µæé†’

### 4.7.1 â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾ï¼ˆä½œä¸šäººè§†è§’ï¼ŒUS-DL-03/FR-DL-04ï¼‰

**å…¥å£**

*   é¡¶éƒ¨èœå•ï¼šâ€œæ—¶é™ç®¡ç† â†’ æˆ‘çš„æ—¶é™ä»»åŠ¡â€
*   ç™»å½•é¦–é¡µâ€œä»Šæ—¥æé†’æ¸…å•â€ä¸­çš„â€œæŸ¥çœ‹å…¨éƒ¨â€é“¾æ¥

**æŸ¥è¯¢æ¡ä»¶**

*   æ—¥æœŸèŒƒå›´ï¼š
    *   â€œæŸ¥çœ‹æœªæ¥ X å¤©çš„ä»»åŠ¡â€ï¼š
        *   èµ·å§‹ï¼šä»Šæ—¥ - N å¤©ï¼ˆä¾‹å¦‚ 7 å¤©å‰ï¼‰
        *   æˆªæ­¢ï¼šä»Šæ—¥ + M å¤©ï¼ˆä¾‹å¦‚ 30 å¤©åï¼‰
    *   æ—¥æœŸåŸºå‡†ï¼šå¯é€‰ INNERï¼ˆå†…éƒ¨é™ï¼‰æˆ– DEADLINEï¼ˆå®˜æ–¹ç»é™ï¼‰
*   çŠ¶æ€ç­›é€‰ï¼š
    *   æœªå®Œæˆï¼ˆOPENï¼‰
    *   å·²å®Œæˆï¼ˆDONEï¼‰
    *   å…¨éƒ¨
*   æ˜¯å¦è¶…æœŸï¼š
    *   ä»…æ˜¾ç¤ºå·²ç»é€¾æœŸï¼ˆDeadline < ä»Šæ—¥ ä¸” Statusâ‰ DONEï¼‰
*   ä»»åŠ¡ç±»å‹ï¼š
    *   å¤šé€‰ï¼šç”³è¯·è´¹/å®å®¡/å¹´è´¹/OA/æˆæƒ/æ— æ•ˆ/è¯‰è®¼/é¡¾é—®å†…éƒ¨ä»»åŠ¡ç­‰

**ç»“æœåˆ—è¡¨å­—æ®µ**

| åˆ—å               | è¯´æ˜                  |
| ---------------- | ------------------- |
| é€‰ä¸­æ¡†              | æ‰¹é‡æ ¸é”€/æ‰¹é‡ä¿®æ”¹ç”¨          |
| CaseNo           | æ¡ˆå·å·ï¼Œç‚¹å‡»è·³å…¥æ¡ˆå·è¯¦æƒ…        |
| Client/Applicant | å®¢æˆ·/ç”³è¯·äºº              |
| Task Type        | ä»»åŠ¡åç§°ï¼ˆå¦‚â€œç”³è¯·è´¹æ—¶é™â€ï¼‰      |
| BaseDate         | èµ·ç®—æ—¥æœŸ                |
| InnerDeadline    | å†…éƒ¨æœŸé™ï¼ˆå¦‚æœ‰ï¼‰            |
| Deadline         | å®˜æ–¹ç»é™                |
| çŠ¶æ€ Status        | OPEN/DONE/CANCELLED |
| å®Œæˆæ—¥ DoneDate     | å·²å®Œæˆä»»åŠ¡çš„å®é™…å®Œæˆæ—¥æœŸ        |
| Supervisor       | ç›‘ç£äºº                 |

**æ“ä½œ**

*   å•æ¡ä»»åŠ¡ï¼š
    *   â€œæ ¸é”€â€ï¼šå°† Statusâ†’DONEï¼Œè¾“å…¥ DoneDateï¼›
    *   â€œå–æ¶ˆæ ¸é”€â€ï¼šå°† Status=DONEâ†’OPENï¼›
    *   â€œç¼–è¾‘â€ï¼šæ‰“å¼€å•æ¡ä»»åŠ¡ç¼–è¾‘ç•Œé¢ï¼›
*   æ‰¹é‡æ“ä½œï¼š
    *   å‹¾é€‰å¤šæ¡ â†’ æ‰¹é‡æ ¸é”€ï¼ˆDoneDate=ä»Šæ—¥ï¼‰ï¼›
    *   å‹¾é€‰å¤šæ¡ â†’ æ‰¹é‡ä¿®æ”¹ Supervisorï¼›

**å¯¼å‡º/æ‰“å°**

*   å¯¼å‡ºå½“å‰åˆ—è¡¨ä¸º Excelï¼›
*   æ‰“å°ä¸ºâ€œæ—¶é™ä»»åŠ¡æ¸…å•â€ï¼ˆé€šè¿‡æ¨¡æ¿ç³»ç»Ÿç”Ÿæˆ Word/HTMLï¼‰ã€‚

***

### 4.7.2 â€œç›‘ç£æ—¶é™ä»»åŠ¡â€è§†å›¾ï¼ˆSupervisor è§†è§’ï¼ŒUS-DL-04/FR-DL-05ï¼‰

**å…¥å£**

*   â€œæ—¶é™ç®¡ç† â†’ ç›‘ç£ä»»åŠ¡â€

**æŸ¥è¯¢æ¡ä»¶**

*   ä½œä¸šäºº Workerï¼šå¤šé€‰ï¼ˆå¯é»˜è®¤æœ¬éƒ¨é—¨æ‰€æœ‰äººï¼‰ï¼›
*   æ—¥æœŸèŒƒå›´ / åŸºå‡†ï¼šåŒâ€œæˆ‘çš„ä»»åŠ¡â€ï¼›
*   çŠ¶æ€ï¼šæœªå®Œæˆ/å·²å®Œæˆ/å…¨éƒ¨ï¼›
*   é€¾æœŸç­›é€‰ï¼šåªçœ‹é€¾æœŸä»»åŠ¡ï¼›
*   ä»»åŠ¡ç±»å‹ï¼›

**ç»“æœåˆ—è¡¨å­—æ®µ**

*   ä¸â€œæˆ‘çš„ä»»åŠ¡â€è§†å›¾ç±»ä¼¼ï¼Œå¢åŠ ï¼š
    *   Workerï¼ˆä½œä¸šäººï¼‰
    *   è¶…æœŸå¤©æ•°ï¼š`max(0, ä»Šæ—¥ - Deadline)`

**æ“ä½œ**

*   ä¸ºä»»åŠ¡é‡æ–°æŒ‡æ´¾ Workerï¼š
    *   æ›´æ”¹ `WorkerID`ï¼Œå†™ TaskLog(Action=CHANGE\_WORKER)ï¼›
*   å¢åŠ  Remarkï¼š
    *   è®°å½•â€œå·²å‚¬åŠ/å·²æé†’â€ç­‰å†…å®¹ï¼›
*   åœ¨å¿…è¦æ—¶å–æ¶ˆä»»åŠ¡ï¼š
    *   å°† `Status` æ”¹ä¸º CANCELLEDï¼Œå¹¶å†™æ—¥å¿—ã€‚

**å¯¼å‡º/æ‰“å°**

*   åŒâ€œæˆ‘çš„ä»»åŠ¡â€è§†å›¾ï¼Œå¯ä»¥å¯¼å‡º/æ‰“å°ç›‘ç£ä¸‹æ‰€æœ‰äººçš„æ—¶é™æ¸…å•ã€‚

***

### 4.7.3 ç™»å½•é¦–é¡µçš„â€œä»Šæ—¥æé†’æ¸…å•â€ï¼ˆUS-DL-07/FR-DL-08ï¼‰

**è¡Œä¸º**

*   ç”¨æˆ·ç™»å½•åï¼Œç³»ç»Ÿåå°æ‰§è¡ŒæŸ¥è¯¢ï¼š
    *   ä» `T_Task` ä¸­æ‰¾åˆ°æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶çš„ä»»åŠ¡ï¼š
        *   Remind1/Remind2/Remind3 = ä»Šæ—¥
        *   DailyRemind=true ä¸” `DailyRemindFrom â‰¤ ä»Šæ—¥ â‰¤ Deadline`
    *   å¹¶ä¸”ï¼ˆWorkerID=å½“å‰ç”¨æˆ·ï¼‰æˆ–ï¼ˆSupervisorID=å½“å‰ç”¨æˆ·ï¼‰

**å±•ç¤ºç»“æ„**

*   åˆ†ä¸¤éƒ¨åˆ†ï¼š
    *   â€œæˆ‘çš„ä»»åŠ¡æé†’â€ï¼šWorkerID=å½“å‰ç”¨æˆ·
    *   â€œç›‘ç£ä»»åŠ¡æé†’â€ï¼šSupervisorID=å½“å‰ç”¨æˆ·
*   æ¯éƒ¨åˆ†æ˜¾ç¤ºå‰ N æ¡ï¼ˆå¦‚ 10 æ¡ï¼‰ï¼Œå­—æ®µç²¾ç®€ç‰ˆï¼ˆCaseNoã€TaskTypeã€Deadlineã€InnerDeadlineã€æ˜¯å¦è¶…æœŸç­‰ï¼‰ã€‚

**è·³è½¬**

*   ç‚¹å‡»ä»»åŠ¡è¡Œè·³è½¬åˆ°ä»»åŠ¡è¯¦æƒ…ï¼›
*   ç‚¹å‡»â€œæŸ¥çœ‹å…¨éƒ¨â€è·³è½¬åˆ°å¯¹åº”çš„å®Œæ•´åˆ—è¡¨è§†å›¾ï¼ˆ4.7.1/4.7.2ï¼‰ã€‚

***

## 4.8 ä¸“é¡¹æ£€ç´¢ï¼šç”³è¯·è´¹æ—¶é™ & å®å®¡è¯·æ±‚æ—¶é™ï¼ˆUS-DL-06 / FR-DL-07ï¼‰

### 4.8.1 ç”³è¯·è´¹æ—¶é™æ£€ç´¢

**ç›®æ ‡**

*   æ‰¾å‡ºåœ¨æŸæ—¶é—´æ®µå†…éœ€è¦ç¼´çº³ç”³è¯·è´¹ã€ä¸”å°šæœªç¼´è´¹çš„æ¡ˆä»¶ï¼Œå®ç°é›†ä¸­æé†’å’Œç»Ÿè®¡ã€‚

**æ•°æ®æ¥æº**

*   `T_Task` ä¸­ `TemplateCode=APPLY_FEE_LIMIT` æˆ– `Type=â€œç”³è¯·è´¹æ—¶é™â€`
*   å¦‚æœ‰éœ€è¦ï¼Œå¯ä¸è´¹ç”¨/æ”¶æ¬¾æ¨¡å—è”æŸ¥ï¼Œç¡®å®šæ˜¯å¦å·²ç¼´ç”³è¯·è´¹ã€‚

**æŸ¥è¯¢æ¡ä»¶**

*   ç»é™æ—¥æœŸèŒƒå›´ï¼š
    *   `Deadline >= DateFrom AND Deadline <= DateTo`
*   æ¡ˆä»¶è¿‡æ»¤ï¼š
    *   CaseTypeï¼ŒFlowDirï¼ŒPatentCategoryï¼ŒClientIDï¼ŒAgentID
*   çŠ¶æ€ï¼š
    *   ä»»åŠ¡ Status=OPENï¼ˆæœªå®Œæˆï¼‰
    *   å¯é€‰æ˜¯å¦è¿‡æ»¤å·²åˆ›å»ºç”³è¯·è´¹è‰å•/å®˜è´¹æ¸…å•ï¼ˆéœ€è”æŸ¥ T\_FeeDraft/T\_PayListï¼‰

**ç»“æœåˆ—è¡¨å­—æ®µ**

*   CaseNo
*   AppNo
*   FilingDate
*   ClientName / Applicant
*   Deadlineï¼ˆç”³è¯·è´¹ç»é™ï¼‰
*   Worker / Supervisor
*   ä»»åŠ¡çŠ¶æ€
*   ç”³è¯·è´¹è‰å•/å®˜è´¹æ¸…å•å­˜åœ¨ä¸å¦ï¼ˆæ˜¾ç¤ºå›¾æ ‡ï¼‰

**æ“ä½œ**

*   æ‰¹é‡é€‰æ‹©æ¡ˆä»¶ï¼š
    *   ç”Ÿæˆâ€œç”³è¯·è´¹ç¼´çº³ä»»åŠ¡æ¸…å•â€ï¼ˆå¯¼å‡º Word/Excelï¼‰ï¼›
    *   ç”Ÿæˆâ€œç”³è¯·è´¹å‚¬ç¼´é€šçŸ¥ä¹¦â€ï¼ˆäº¤ç”±æ¨¡å—äºŒ/å››é€šè¿‡æ¨¡æ¿ç”Ÿæˆä¸­é—´æ–‡ä»¶å’Œè‰å•ï¼‰ï¼›

***

### 4.8.2 å®å®¡è¯·æ±‚æ—¶é™æ£€ç´¢

**ç›®æ ‡**

*   æ‰¾å‡ºåœ¨æŸæ—¶é—´æ®µå†…å®å®¡è¯·æ±‚æœŸé™å³å°†åˆ°æœŸã€ä¸”å°šæœªæå®å®¡çš„æ¡ˆä»¶ã€‚

**æ•°æ®æ¥æº**

*   `T_Task` ä¸­ `TemplateCode=EXAM_REQUEST_LIMIT`
*   ä¸ `T_Case.HasExamRequest` å­—æ®µè”æŸ¥ï¼ˆå°šæœªæå®å®¡çš„æ¡ˆä»¶ï¼‰ã€‚

**æŸ¥è¯¢æ¡ä»¶**

*   ç»é™æ—¥æœŸèŒƒå›´ï¼šåŒä¸Š
*   æ¡ˆä»¶è¿‡æ»¤ï¼šCaseTypeã€PatentCategoryã€Client/Agent ç­‰
*   æ˜¯å¦å·²æå®å®¡ï¼šåªçœ‹ `HasExamRequest=false`

**ç»“æœåˆ—è¡¨å­—æ®µ**

*   CaseNo / AppNo / FilingDate / Client / Applicant
*   Deadlineï¼ˆå®å®¡è¯·æ±‚ç»é™ï¼‰
*   æ˜¯å¦å·²æå®å®¡ï¼ˆHasExamRequest æ ‡å¿—ï¼‰
*   Worker / Supervisor
*   çŠ¶æ€ï¼ˆOPEN/DONEï¼‰

**æ“ä½œ**

*   æ‰¹é‡ç”Ÿæˆâ€œå®å®¡è¯·æ±‚ä»»åŠ¡æ¸…å•â€ï¼›
*   æ‰¹é‡ç”Ÿæˆæé†’å‡½ï¼ˆæ¨¡æ¿è¾“å‡ºï¼‰ï¼Œå¹¶å¯åœ¨æ¡ˆä»¶ä¸­è®°å½•ä¸­é—´æ–‡ä¹¦ã€‚

***

## 4.9 æ—¶é™ä»»åŠ¡æ¸…å•å¯¼å‡º/æ‰“å°ï¼ˆFR-DL-09ï¼‰

**é€‚ç”¨è§†å›¾**

*   æˆ‘çš„ä»»åŠ¡åˆ—è¡¨ï¼ˆ4.7.1ï¼‰
*   ç›‘ç£ä»»åŠ¡åˆ—è¡¨ï¼ˆ4.7.2ï¼‰
*   ç”³è¯·è´¹æ—¶é™æ£€ç´¢ç»“æœï¼ˆ4.8.1ï¼‰
*   å®å®¡è¯·æ±‚æ—¶é™æ£€ç´¢ç»“æœï¼ˆ4.8.2ï¼‰

**å¯¼å‡ºå½¢å¼**

*   Excelï¼šåŒ…å«æ‰€æœ‰åˆ—ï¼ˆCaseNo, Client/Applicant, TaskType, BaseDate,Deadline,InnerDeadline,Remind\*,Worker,Supervisor,Status,DoneDate,Remark ç­‰ï¼‰ï¼›
*   æ‰“å°æ¸…å•ï¼ˆHTML/Word/PDFï¼‰ï¼š
    *   è¡¨æ ¼åˆ—ï¼šæ—¥æœŸ/ä»»åŠ¡å†…å®¹/è´£ä»»äºº/å¤‡æ³¨
    *   æ”¯æŒæ±‡æ€»ä¿¡æ¯ï¼ˆå¦‚ä»»åŠ¡æ€»æ•°ã€é€¾æœŸä»»åŠ¡æ•°ç­‰ï¼‰ã€‚

***

## 4.10 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ï¼‰

### 4.10.1 User Story â†’ FR â†’ ç« èŠ‚æ˜ å°„ï¼ˆè¡¨ 5ï¼‰

| US                  | æ¶‰åŠ FR                                  | ä¸»è¦ç« èŠ‚                     | è¯´æ˜                                                                                                                 |
| ------------------- | -------------------------------------- | ------------------------ | ------------------------------------------------------------------------------------------------------------------ |
| US-DL-01 æ—¶é™æ¨¡æ¿é…ç½®     | FR-DL-01                               | 4.3.1, 4.4               | 4.3.1 ä¸­å®šä¹‰äº†å®Œæ•´ `T_TaskTemplate` å­—æ®µï¼›4.4 æè¿°æ¨¡æ¿åˆ—è¡¨/ç¼–è¾‘ UI å’Œæ ¡éªŒï¼ˆV-TM-01\~04ï¼‰ï¼Œä¿è¯æ¨¡æ¿å¯ä»¥æ­£ç¡®ä½¿ç”¨ã€‚                                     |
| US-DL-02 è‡ªåŠ¨åˆ›å»ºæ—¶é™ä»»åŠ¡   | FR-DL-02, FR-DL-03                     | 4.3.2, 4.5.1, 4.5.2      | 4.3.2 å®šä¹‰ `T_Task` ä¸­ BaseDate/Deadline/InnerDeadline/Remind\* ç­‰å­—æ®µï¼›4.5.1/4.5.2 è¯¦ç»†è¯´æ˜ä»ä¸­é—´æ–‡ä»¶ä¸æ¡ˆä»¶äº‹ä»¶è°ƒç”¨æ¨¡æ¿åˆ›å»ºä»»åŠ¡çš„æµç¨‹ã€è´£ä»»äººé€‰æ‹©ã€æ—¥å¿—è®°å½•ã€‚ |
| US-DL-03 æ—¥å¸¸æé†’ â€“ ä½œä¸šäºº | FR-DL-03, FR-DL-04, FR-DL-08, FR-DL-09 | 4.3.2, 4.7.1, 4.7.3, 4.9 | 4.7.1 å®šä¹‰â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€çš„ç­›é€‰æ¡ä»¶ã€åˆ—è¡¨å­—æ®µå’Œæ ¸é”€/ç¼–è¾‘æ“ä½œï¼›4.7.3 å®šä¹‰ç™»å½•é¦–é¡µâ€œä»Šæ—¥æé†’æ¸…å•â€ï¼›4.9 æä¾›æ¸…å•å¯¼å‡º/æ‰“å°ã€‚                                             |
| US-DL-04 æ—¥å¸¸æé†’ â€“ ç›‘ç£äºº | FR-DL-03, FR-DL-05, FR-DL-08, FR-DL-09 | 4.7.2, 4.7.3, 4.9        | 4.7.2 å®šä¹‰â€œç›‘ç£æ—¶é™ä»»åŠ¡â€çš„æŸ¥è¯¢æ¡ä»¶å’Œé¢å¤–æ“ä½œï¼ˆé‡æ–°æŒ‡æ´¾/å–æ¶ˆä»»åŠ¡ï¼‰ï¼›4.7.3/4.9 ä¸ä½œä¸šäººè§†å›¾å…±ç”¨ç›¸åŒçš„æé†’ä¸å¯¼å‡ºæœºåˆ¶ã€‚                                                |
| US-DL-05 æ‰‹å·¥ç»´æŠ¤æ—¶é™ä»»åŠ¡   | FR-DL-06, FR-DL-10                     | 4.3.2â€“4.3.3, 4.6         | 4.6 æè¿°æ‰‹å·¥ä»»åŠ¡çš„åˆ›å»º/ç¼–è¾‘/æ ¸é”€/å–æ¶ˆé€»è¾‘ï¼›4.3.3 ä¸­çš„ `T_TaskLog` è®°å½•æ‰€æœ‰å…³é”®æ“ä½œï¼Œæ»¡è¶³å®¡è®¡éœ€æ±‚ã€‚                                                     |
| US-DL-06 ä¸“é¡¹æ£€ç´¢       | FR-DL-07, FR-DL-09                     | 4.8.1, 4.8.2, 4.9        | 4.8.1/4.8.2 æä¾›ç”³è¯·è´¹/å®å®¡æ—¶é™çš„ä¸“ç”¨æ£€ç´¢æ¡ä»¶å’Œç»“æœåˆ—è¡¨ï¼›4.9 æä¾›æ—¶é™æ¸…å•å¯¼å‡ºã€‚                                                                   |
| US-DL-07 ç™»å½•æé†’ä¸æ¸…å•æ‰“å°  | FR-DL-08, FR-DL-09                     | 4.7.3, 4.9               | 4.7.3 æè¿°â€œä»Šæ—¥æé†’æ¸…å•â€å¦‚ä½•ä» T\_Task æŸ¥è¯¢å¹¶å±•ç¤ºç»™ç”¨æˆ·ï¼›4.9 ç»™å‡ºäº†æ¸…å•å¯¼å‡ºèƒ½åŠ›ï¼Œå®ç°çº¸è´¨è·Ÿè¿›éœ€æ±‚ã€‚                                                       |

### 4.10.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 6ï¼‰

| FR ID    | æè¿°           | å®ç°ç« èŠ‚                   | å­—æ®µ/æ ¡éªŒ/æµç¨‹ç‚¹                                                                                                                       |
| -------- | ------------ | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| FR-DL-01 | ç»´æŠ¤æ—¶é™æ¨¡æ¿       | 4.3.1, 4.4             | `T_TaskTemplate` å­—æ®µå®Œæ•´å®šä¹‰ï¼›4.4 ä¸­çš„ UI å’Œ V-TM-01\~04 ç¡®ä¿ Code å”¯ä¸€ã€å¢é‡åˆç†ã€DeadlineBase ä¸è°ƒç”¨æ–¹å¥‘åˆã€‚                                            |
| FR-DL-02 | è‡ªåŠ¨åˆ›å»ºä»»åŠ¡       | 4.3.2, 4.5.1, 4.5.2    | ä»ä¸­é—´æ–‡ä»¶/æ¡ˆä»¶äº‹ä»¶è§¦å‘æ—¶ï¼Œé€šè¿‡ TemplateCode å’Œ BaseDateSource è®¡ç®— Deadline/InnerDeadline/Remind\*ï¼›ç”Ÿæˆ `T_Task` å¹¶å†™æ—¥å¿—ã€‚                             |
| FR-DL-03 | åŒºåˆ†ä½œä¸šäººå’Œç›‘ç£äºº    | 4.3.2, 4.5, 4.7        | `T_Task` ä¸­æœ‰ WorkerID å’Œ SupervisorIDï¼›ä»»åŠ¡è§†å›¾æŒ‰ Worker/Supervisor åˆ†åˆ«è¿‡æ»¤ï¼›è´£ä»»äººå˜æ›´å†™å…¥ `T_TaskLog`ã€‚                                           |
| FR-DL-04 | ä½œä¸šäººè§†å›¾        | 4.7.1, 4.7.3           | â€œæˆ‘çš„ä»»åŠ¡â€æ ¹æ® WorkerID=å½“å‰ç”¨æˆ·è¿‡æ»¤ï¼›æ”¯æŒæ ¸é”€/å–æ¶ˆæ ¸é”€/ç¼–è¾‘ï¼›é¦–é¡µæé†’é“¾æ¥åˆ°è¯¥è§†å›¾ã€‚                                                                               |
| FR-DL-05 | ç›‘ç£äººè§†å›¾        | 4.7.2, 4.7.3           | â€œç›‘ç£ä»»åŠ¡â€æ ¹æ® SupervisorID=å½“å‰ç”¨æˆ·è¿‡æ»¤ï¼Œå¹¶æ”¯æŒé‡æ–°æŒ‡æ´¾/å–æ¶ˆä»»åŠ¡ç­‰æ“ä½œï¼›é¦–é¡µæé†’ä¸­æœ‰â€œç›‘ç£æé†’â€éƒ¨åˆ†ã€‚                                                                    |
| FR-DL-06 | æ‰‹å·¥æ–°å¢/ç¼–è¾‘/åˆ é™¤ä»»åŠ¡ | 4.3.2, 4.6, 4.3.3      | æ‰‹å·¥ä»»åŠ¡åˆ›å»º/ç¼–è¾‘é€»è¾‘å®šä¹‰äº 4.6ï¼›V-TASK-01\~05 ç¡®ä¿æ—¥æœŸ/çŠ¶æ€åˆç†ï¼›`T_TaskLog` è®°å½•æ‰€æœ‰ä¿®æ”¹ä¸å–æ¶ˆæ“ä½œã€‚                                                             |
| FR-DL-07 | ä¸“é¡¹æ£€ç´¢ï¼ˆç”³è¯·è´¹/å®å®¡ï¼‰ | 4.8.1, 4.8.2           | åŸºäº TemplateCode(APPLY\_FEE\_LIMIT/EXAM\_REQUEST\_LIMIT) å’Œ Case.HasExamRequest çš„ä¸“ç”¨æ£€ç´¢ï¼Œå¹¶æ”¯æŒç»“æœå¯¼å‡ºã€‚                                    |
| FR-DL-08 | ç™»å½•é¦–é¡µæé†’       | 4.7.3                  | ä»¥ Remind\* = ä»Šæ—¥ å’Œ DailyRemindFrom â‰¤ ä»Šæ—¥ â‰¤ Deadline ä¸ºæ¡ä»¶ï¼ŒæŸ¥å‡º WorkerID æˆ– SupervisorID ä¸ºå½“å‰ç”¨æˆ·çš„ä»»åŠ¡ï¼Œå±•ç¤ºäºâ€œä»Šæ—¥æé†’æ¸…å•â€ã€‚                          |
| FR-DL-09 | æ¸…å•å¯¼å‡º/æ‰“å°      | 4.7.1, 4.7.2, 4.8, 4.9 | æ‰€æœ‰åˆ—è¡¨è§†å›¾éƒ½å¯è°ƒç”¨ç»Ÿä¸€å¯¼å‡º/æ‰“å°é€»è¾‘ï¼›4.9 å®šä¹‰äº†æ¸…å•æ¨¡æ¿å’Œå­—æ®µã€‚                                                                                             |
| FR-DL-10 | æ“ä½œæ—¥å¿—         | 4.3.3, 4.5, 4.6, 4.7   | `T_TaskLog` è®°å½• CREATE/UPDATE/CHANGE\_WORKER/CHANGE\_SUPERVISOR/MARK\_DONE/UNMARK\_DONE/CANCEL/RESTOREï¼›åœ¨è‡ªåŠ¨åˆ›å»ºã€æ‰‹å·¥ç¼–è¾‘å’Œè§†å›¾æ“ä½œä¸­å‡è°ƒç”¨å†™æ—¥å¿—é€»è¾‘ã€‚ |

***

âœ… **åˆ°è¿™é‡Œï¼Œæ¨¡å—ä¸‰çš„æ‰€æœ‰ç»†èŠ‚ï¼ˆæ¨¡æ¿/ä»»åŠ¡/æ—¥å¿—/è§†å›¾/æ£€ç´¢/å¯¼å‡º/FR æ˜ å°„ï¼‰éƒ½å·²ç»å®Œå…¨å±•å¼€ã€‚**

## 5. æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†ï¼ˆFee Managementï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”æ—§ç‰ˆæ‰‹å†Œä¸­â€œè´¹ç”¨ç®¡ç†â€ç›¸å…³ç« èŠ‚ï¼Œå¹¶å®Œå…¨åˆå¹¶æˆ‘ä»¬ä¹‹å‰è¾“å‡ºè¿‡çš„æ‰€æœ‰è´¹ç”¨æ¨¡å—å†…å®¹ï¼š
>
> *   æ ‡å‡†è´¹ç‡è¡¨ï¼ˆT\_FeeRateï¼‰
>
> *   è´¹ç”¨è‰å•ï¼ˆT\_FeeDraft/T\_FeeItemï¼‰ï¼šç”³è¯·è´¹ã€æˆæƒè´¹ã€å¹´è´¹ã€ä¸­é—´è´¹ã€æ— æ•ˆè´¹ã€é¡¾é—®è´¹ç­‰
>
> *   å®˜è´¹æ¸…å•ä¸ç¼´è´¹ï¼ˆT\_PayList/T\_GovPaymentï¼‰
>
> *   æˆæƒè´¹/å¹´ç™»å°è´¹ç®¡ç†ï¼ˆGrantFeeTaskï¼‰
>
> *   å¹´è´¹ç®¡ç†ï¼ˆAnnuityTaskï¼Œå¤šå¹´åº¦æ»šåŠ¨ï¼‰
>
> *   ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆT\_CaseReceiptï¼‰
>
> *   æ”¯å‡ºè´¹ç”¨ç®¡ç†ï¼ˆT\_Expenseï¼‰
>
> *   è´¹ç”¨æƒ…å†µæŸ¥è¯¢ï¼ˆç¼´è´¹æƒ…å†µ+æ”¶æ¬¾æƒ…å†µä¸€è§ˆï¼‰
>
> ä¸åšä»»ä½•å‹ç¼©ï¼šæ‰€æœ‰å­—æ®µã€UIã€æ ¡éªŒä¸æµç¨‹éƒ½å±•å¼€å†™æ¸…æ¥šã€‚

***

## 5.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 5.1.1 èŒƒå›´

è´¹ç”¨ç®¡ç†æ¨¡å—è´Ÿè´£æ‰€æœ‰ä¸â€œé’±â€ç›¸å…³ä½†å°šæœªè¿›å…¥è´¦å•/æ”¶æ¬¾/å‚¬æ¬¾å±‚çš„ä¸šåŠ¡ï¼ŒåŒ…æ‹¬ï¼š

1.  **æ ‡å‡†è´¹ç‡é…ç½®**
    *   æŒ‰æ¡ˆä»¶ç±»å‹ã€ä¸“åˆ©ç±»åˆ«ã€å›½åˆ«ã€å¹´åº¦ç­‰å®šä¹‰å„ç§â€œæ ‡å‡†æ”¶è´¹é¡¹ç›®â€å’Œè®¡ç®—è§„åˆ™
    *   è¦†ç›–ï¼šç”³è¯·è´¹ã€æˆæƒè´¹ã€å¹´ç™»å°è´¹ã€å¹´è´¹ã€ä¸­é—´è´¹ï¼ˆOA/å˜æ›´ç­‰ï¼‰ã€æ— æ•ˆ/è¯‰è®¼è´¹ã€é¡¾é—®/æ£€ç´¢æœåŠ¡è´¹ç­‰
2.  **è´¹ç”¨è‰å•ï¼ˆFee Draftï¼‰**
    *   æŒ‰ã€æ¡ˆä»¶ + è´¹ç”¨ç±»å‹ã€‘å»ºç«‹è‰å•ï¼ŒåŒ…å«ä¸€ç»„è´¹ç”¨æ˜ç»†
    *   è‰å•å¯ä»¥ä»æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥æ‰‹å·¥ç»´æŠ¤
    *   è‰å•æ˜¯ç”Ÿæˆè´¦å•å’Œå®˜è´¹æ¸…å•çš„å‰ç½®æ•°æ®
3.  **å®˜è´¹æ¸…å• & å®˜æ–¹ç¼´è´¹**
    *   å°†å¤šä¸ªæ¡ˆä»¶çš„å®˜è´¹æ”¶è´¹é¡¹ç›®æ‰¹é‡æ±‡æ€»æˆâ€œå®˜è´¹æ¸…å•â€ï¼Œå¯¼å‡ºç»™å®˜æ–¹ç³»ç»Ÿç¼´è´¹
    *   ç¼´è´¹åç™»è®°å®ç¼´é‡‘é¢ã€å‘ç¥¨å·ã€å‡­è¯å·ç­‰
4.  **æˆæƒè´¹ / å¹´ç™»å°è´¹ç®¡ç†**
    *   ä»â€œå·²æˆæƒâ€æ¡ˆä»¶ä¸­æå–éœ€è¦ç¼´çº³ç™»è®°è´¹/å°èŠ±ç¨/è¯ä¹¦è´¹ç­‰
    *   è®°å½•å®¢æˆ·æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ã€é€šçŸ¥æ¬¡æ•°
    *   è‡ªåŠ¨ç”Ÿæˆæˆæƒè´¹è‰å•ä¸é€šçŸ¥æ–‡ä¹¦
5.  **å¹´è´¹ç®¡ç†ï¼ˆå¤šå¹´åº¦æ»šåŠ¨ï¼‰**
    *   ä¸ºæˆæƒä¸”éœ€è¦å¹´è´¹ç›‘è§†çš„æ¡ˆä»¶ç”Ÿæˆå¤šå¹´åº¦å¹´è´¹ä»»åŠ¡
    *   å®šæœŸï¼ˆæŒ‰æœˆ/å­£åº¦/å¹´ï¼‰æå–å³å°†åˆ°æœŸå¹´è´¹
    *   è®°å½•å®¢æˆ·æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ã€é€šçŸ¥ã€è‰å•ã€å®˜è´¹æ¸…å•
6.  **ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆCase-level Receiptsï¼‰**
    *   æŒ‰æ¡ˆä»¶ç»´åº¦è®°å½•åº”æ”¶/å®æ”¶é‡‘é¢ã€æ¬ æ¬¾æ ‡è®°ã€å¯ææˆæ ‡è®°å’Œå‘ç¥¨å·ï¼Œä¾›è´¹ç”¨æƒ…å†µæŸ¥è¯¢å’Œææˆè®¡ç®—ä½¿ç”¨
7.  **æ”¯å‡ºè´¹ç”¨ï¼ˆé¡¹ç›®æˆæœ¬ï¼‰**
    *   è®°å½•æ¡ˆä»¶æˆ–é¡¾é—®é¡¹ç›®çš„ç¬¬ä¸‰æ–¹æ”¯å‡ºï¼ˆç¿»è¯‘ã€æ£€ç´¢æ•°æ®åº“ã€å·®æ—…ã€å¿«é€’ç­‰ï¼‰ï¼Œä¾›æˆæœ¬/æ¯›åˆ©åˆ†æä½¿ç”¨

### 5.1.2 è§’è‰²

*   **Formalities / Flow Admin**
    *   åœ¨æˆæƒ/å¹´è´¹/ä¸­é—´æ–‡ä»¶å·¥ä½œä¸­è§¦å‘è´¹ç”¨è‰å•ç”Ÿæˆå’Œæˆæƒè´¹/å¹´è´¹ç®¡ç†
*   **Financeï¼ˆè´¢åŠ¡ï¼‰**
    *   è´Ÿè´£æ ‡å‡†è´¹ç‡ç»´æŠ¤ã€å®˜è´¹æ¸…å•ç”Ÿæˆä¸å®˜æ–¹ç¼´è´¹ç™»è®°
    *   è´Ÿè´£ä¸ªæ¡ˆæ”¶æ¬¾ç™»è®°
    *   ä¸ºè´¦å•æ¨¡å—æä¾›è´¹ç”¨åŸºç¡€æ•°æ®
*   **Agent / é¡¹ç›®è´Ÿè´£äºº**
    *   åœ¨é¡¾é—®/æ£€ç´¢é¡¹ç›®ä¸­è¾“å…¥æœåŠ¡è´¹è®¡ç®—åŸºç¡€ï¼ˆä¾‹å¦‚å·¥æ—¶ã€æŠ¥ä»·ï¼‰
    *   æŸ¥çœ‹æœ¬æ¡ˆè´¹ç”¨è‰å•ä¸æ”¶æ¬¾ä¿¡æ¯
*   **Manager / Partner**
    *   ä½¿ç”¨è´¹ç”¨æƒ…å†µæŸ¥è¯¢ä¸æ”¯å‡ºè®°å½•è¿›è¡Œè´¢åŠ¡åˆ†æå’Œå†³ç­–

***

## 5.2 User Stories & Functional Requirements

### 5.2.1 User Storiesï¼ˆUSï¼‰

**US-FE-01 è´¹ç”¨è‰å•ç”Ÿæˆä¸ç»´æŠ¤**\
ä½œä¸ºæµç¨‹/è´¢åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›æŒ‰â€œæ¡ˆä»¶ + è‰å•ç±»å‹â€ç”Ÿæˆå¹¶ç»´æŠ¤è´¹ç”¨è‰å•ï¼ˆç”³è¯·è´¹ã€æˆæƒè´¹ã€å¹´è´¹ã€ä¸­é—´è´¹ã€æ— æ•ˆã€é¡¾é—®ç­‰ï¼‰ï¼Œè‰å•é‡Œå¯ä»¥æœ‰å¤šæ¡è´¹ç”¨æ˜ç»†ï¼Œæ”¯æŒè‡ªåŠ¨ä»æ ‡å‡†è´¹ç‡è¡¨è®¡ç®—é‡‘é¢ï¼Œä¹Ÿæ”¯æŒæ‰‹å·¥è°ƒæ•´ã€‚

**US-FE-02 æ ‡å‡†è´¹ç‡ä¸è´¹å‡/æŠ˜æ‰£è®¡ç®—**\
ä½œä¸ºè´¢åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›é€šè¿‡ä¸€å¼ æ ‡å‡†è´¹ç‡è¡¨ç»´æŠ¤å„å›½å„ç±»è´¹ç”¨ï¼ˆå®˜è´¹/æœåŠ¡è´¹/æ‚è´¹ï¼‰ï¼Œè‰å•ç”Ÿæˆæ—¶æ ¹æ®æ¡ˆä»¶ç±»å‹ã€å›½åˆ«ã€å¹´å·ã€è´¹å‡æ¯”ä¾‹ã€æŠ˜æ‰£ç‡è‡ªåŠ¨è®¡ç®—é‡‘é¢ã€‚

**US-FE-03 å®˜è´¹æ¸…å•ä¸ç¼´è´¹**\
ä½œä¸ºè´¢åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›ä»å¤šä¸ªæ¡ˆä»¶çš„è‰å•ä¸­æ±‡æ€»å®˜æ–¹è´¹ç”¨ï¼Œç”Ÿæˆâ€œå®˜è´¹æ¸…å•â€ï¼ˆæŒ‰ç±»å‹/æ–¹å‘/æ—¥æœŸï¼‰ï¼Œå¯¼å‡ºç»™å®˜æ–¹å®¢æˆ·ç«¯ï¼Œç¼´è´¹åç™»è®°å®é™…ç¼´è´¹æ—¥æœŸã€å‘ç¥¨å·ã€å‡­è¯å·ç­‰ã€‚

**US-FE-04 æˆæƒè´¹ / å¹´ç™»å°è´¹ç®¡ç†**\
ä½œä¸ºæµç¨‹/è´¢åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›ä»â€œå·²æˆæƒä½†å°šæœªç¼´ç™»è®°è´¹â€çš„æ¡ˆä»¶ä¸­æ‰¹é‡æå–åº”ç¼´â€œç™»è®°è´¹+å°èŠ±ç¨+è¯ä¹¦è´¹â€ï¼Œæ ¹æ®å®¢æˆ·æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ç”Ÿæˆé€šçŸ¥å‡½å’Œè‰å•ã€‚

**US-FE-05 å¹´è´¹ç®¡ç†ï¼ˆå¤šå¹´åº¦ï¼‰**\
ä½œä¸ºå¹´è´¹äººå‘˜ï¼Œæˆ‘å¸Œæœ›æŒ‰åˆ°æœŸåŒºé—´æ‰¹é‡æå–å¹´è´¹æ¡ˆä»¶ï¼Œç®¡ç†å®¢æˆ·æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ã€é€šçŸ¥æ¬¡æ•°ã€æ˜¯å¦åŒæ—¶ç¼´ä¸‹ä¸€å¹´åº¦ï¼Œå¹¶ä¸ºåŒæ„ç¼´è´¹çš„æ¡ˆä»¶ç”Ÿæˆå¹´è´¹è‰å•+é€šçŸ¥å‡½ã€‚

**US-FE-06 ä¸ªæ¡ˆæ”¶æ¬¾ç™»è®°**\
ä½œä¸ºè´¢åŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›é’ˆå¯¹æ¯ä¸ªæ¡ˆä»¶ç™»è®°æ”¶åˆ°çš„æ¬¾é¡¹ï¼Œè®°å½•è´¹ç”¨ä»£ç ã€é‡‘é¢ã€å¸ç§ã€æ˜¯å¦æ¬ æ¬¾ã€æ˜¯å¦å¯è®¡é…¬å’Œå‘ç¥¨å·ï¼Œä»¥ä¾¿åç»­å¯¹è´¦å’Œææˆè®¡ç®—ã€‚

**US-FE-07 æ”¯å‡ºè´¹ç”¨ç®¡ç†**\
ä½œä¸ºè´¢åŠ¡æˆ–éƒ¨é—¨è´Ÿè´£äººï¼Œæˆ‘å¸Œæœ›è®°å½•æ¯ä¸ªæ¡ˆä»¶çš„ç¿»è¯‘è´¹ã€ç»˜å›¾è´¹ã€äº¤é€šè´¹ç­‰æ”¯å‡ºè´¹ç”¨ï¼Œç»Ÿè®¡æˆæœ¬ä¸æ¯›åˆ©ã€‚

**US-FE-08 è´¹ç”¨æƒ…å†µç»¼åˆæŸ¥è¯¢**\
ä½œä¸ºç®¡ç†å±‚æˆ–è´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›æŸ¥è¯¢æŸæ¡ˆä»¶æˆ–æŸå®¢æˆ·çš„â€œç¼´è´¹æƒ…å†µä¸€è§ˆ + æ”¶æ¬¾æƒ…å†µä¸€è§ˆâ€ï¼ŒåŒ…æ‹¬å®˜è´¹ç¼´çº³è®°å½•ã€ä¸ªæ¡ˆæ”¶æ¬¾ã€æ¬ æ¬¾ä¸é¢„æ”¶æ¬¾æƒ…å†µã€‚

### 5.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-FE-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç»´æŠ¤æ ‡å‡†è´¹ç‡è¡¨ `T_FeeRate`ï¼ŒæŒ‰è´¹ç”¨ç±»å‹/å›½åˆ«/ä¸“åˆ©ç±»åˆ«/æ¡ˆä»¶ç±»å‹åŒºåˆ†å®˜è´¹ã€æœåŠ¡è´¹ã€æ‚è´¹åŠé»˜è®¤é‡‘é¢ä¸å¸ç§ã€‚

**FR-FE-02**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒæŒ‰â€œæ¡ˆä»¶+è‰å•ç±»å‹â€åˆ›å»ºè´¹ç”¨è‰å• `T_FeeDraft`ï¼Œå¹¶åŒ…å« 1..N æ¡è´¹ç”¨æ˜ç»† `T_FeeItem`ã€‚

**FR-FE-03**ï¼šç³»ç»Ÿå¿…é¡»æ ¹æ®æ ‡å‡†è´¹ç‡è¡¨ + æ¡ˆä»¶å‚æ•° + è´¹å‡æ¯”ä¾‹/æŠ˜æ‰£ç‡ï¼Œè‡ªåŠ¨è®¡ç®—è´¹ç”¨æ˜ç»†é‡‘é¢ï¼Œå¯è¢«ç”¨æˆ·æ‰‹å·¥è¦†ç›–ã€‚

**FR-FE-04**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒåŸºäºè´¹ç”¨è‰å•æ„é€ â€œå®˜è´¹æ¸…å• `T_PayList` + å®˜è´¹ç¼´è´¹æ˜ç»† `T_GovPayment`â€ï¼Œå¹¶æ”¯æŒå¯¼å‡ºã€ç¼´è´¹ç™»è®°ä»¥åŠçŠ¶æ€è¿½è¸ªã€‚

**FR-FE-05**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå¹´ç™»å°è´¹ç®¡ç†ï¼šä»æˆæƒæ¡ˆä»¶ä¸­æå–ç™»è®°è´¹ä»»åŠ¡ï¼Œè®°å½•å®¢æˆ·æŒ‡ç¤ºä¸é€šçŸ¥çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆç›¸å…³è‰å•ä¸é€šçŸ¥å‡½ã€‚

**FR-FE-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå¹´è´¹ç®¡ç†ï¼šæŒ‰åˆ°æœŸåŒºé—´æå–å¹´è´¹ä»»åŠ¡ï¼Œè®°å½•å®¢æˆ·æŒ‡ç¤º/é€šçŸ¥çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå¹´è´¹è‰å•ä¸é€šçŸ¥å‡½ã€‚

**FR-FE-07**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä¸ªæ¡ˆæ”¶æ¬¾ç™»è®° `T_CaseReceipt`ï¼Œè®°å½•åº”æ”¶/å®æ”¶ã€æ¬ æ¬¾æ ‡è®°ã€å¯ææˆæ ‡è®°å’Œå‘ç¥¨ä¿¡æ¯ã€‚

**FR-FE-08**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç¬¬ä¸‰æ–¹æ”¯å‡ºè®°å½• `T_Expense`ï¼Œå¹¶å¯æŒ‰æ¡ˆä»¶ã€é¡¹ç›®ã€æ—¶é—´æŸ¥è¯¢ä¸ç»Ÿè®¡ã€‚

**FR-FE-09**ï¼šç³»ç»Ÿå¿…é¡»æä¾›â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢â€ï¼Œå°†å®˜æ–¹ç¼´è´¹è®°å½•ä¸ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ä»¥ä¸¤å¼ ä¸€è§ˆè¡¨æ–¹å¼å±•ç¤ºã€‚

***

## 5.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

### 5.3.1 `T_FeeRate` â€“ æ ‡å‡†è´¹ç‡è¡¨

ç”¨äºç»´æŠ¤å„ç±»è´¹ç”¨é¡¹ç›®çš„æ ‡å‡†é‡‘é¢å’Œè®¡ç®—è§„åˆ™ã€‚

**å­—æ®µ**

*   `RateID` PK
*   `Group` varchar â€“ è´¹ç”¨ç»„åˆ«ï¼š
    *   APPLY â€“ ç”³è¯·è´¹ç›¸å…³
    *   GRANT â€“ æˆæƒè´¹/å¹´ç™»å°è´¹
    *   ANNUITY â€“ å¹´è´¹
    *   INTERMEDIATE â€“ ä¸­é—´è´¹/OA ç­‰
    *   INVALID â€“ æ— æ•ˆ/è¯‰è®¼ç›¸å…³
    *   CONSULT â€“ é¡¾é—®/æ£€ç´¢
    *   OTHER â€“ å…¶ä»–
*   `Code` varchar â€“ è´¹ç‡ä»£ç ï¼ˆå”¯ä¸€ï¼‰ï¼Œå¦‚ï¼š
    *   CN\_APPL\_BASE â€“ å›½å†…åŸºæœ¬ç”³è¯·è´¹
    *   CN\_APPL\_EXTRA\_CLAIM â€“ è¶…é¡¹è´¹
    *   CN\_GRANT\_CERT â€“ æˆæƒè¯ä¹¦è´¹
    *   CN\_ANNUITY\_YEAR\_1 â€“ å¹´è´¹ç¬¬1å¹´
    *   CN\_INVALID\_REQUEST\_FEE â€“ æ— æ•ˆè¯·æ±‚å®˜æ–¹è´¹
    *   CONSULT\_FIXED â€“ é¡¾é—®å›ºå®šè´¹
*   `Name_CN`, `Name_EN` â€“ ä¸­æ–‡/è‹±æ–‡åç§°
*   `FeeType` enum â€“ GOV / SERVICE / MISC
*   `CountryCode` FK â†’ T\_Countryï¼ˆå¯ç©ºï¼Œç©º = é€šç”¨ï¼‰
*   `PatentCategory` enumï¼ˆå¯ç©ºï¼‰
*   `CaseType` enumï¼ˆå¯ç©ºï¼‰
*   `DefaultCurrency` varchar â€“ é»˜è®¤å¸ç§
*   `DefaultAmount` decimal â€“ åŸºç¡€é‡‘é¢

**è®¡ç®—æ¨¡å¼**

*   `CalcMode` enumï¼š
    *   FIXED â€“ å›ºå®šé‡‘é¢
    *   BY\_YEAR â€“ æŒ‰å¹´åº¦åˆ†æ¡£
    *   BY\_CLAIMS â€“ æŒ‰æƒåˆ©è¦æ±‚é¡¹æ•°åˆ†æ¡£/ç´¯åŠ 
    *   BY\_PAGES â€“ æŒ‰é¡µæ•°åˆ†æ¡£/ç´¯åŠ 
    *   COMPOSITE â€“ å¤æ‚ç»„åˆï¼ˆå¤šä¸ªå‚æ•°ï¼‰
*   `CalcParams` json â€“ å­˜å‚¨è®¡ç®—å‚æ•°ï¼Œä¾‹å¦‚ï¼š
    *   å¹´è´¹ï¼šä¸åŒ YearNo å¯¹åº”ä¸åŒé‡‘é¢
    *   è¶…é¡¹è´¹ï¼šè¶…è¿‡ 10 é¡¹ï¼Œæ¯é¡¹å¤šå°‘
    *   è¶…é¡µè´¹ï¼šè¯´æ˜ä¹¦è¶…è¿‡ 30 é¡µï¼Œæ¯é¡µå¤šå°‘

**å…¶ä»–å­—æ®µ**

*   `AllowReduction` bool â€“ æ˜¯å¦å…è®¸è´¹å‡
*   `AllowDiscount` bool â€“ æ˜¯å¦å…è®¸æŠ˜æ‰£ï¼ˆé€šå¸¸æœåŠ¡è´¹å…è®¸ï¼‰
*   `IsActive` bool
*   å®¡è®¡å­—æ®µ

***

### 5.3.2 `T_FeeDraft` â€“ è´¹ç”¨è‰å•ï¼ˆå¤´ï¼‰

**ç”¨é€”**

ä»£è¡¨ä¸€ä¸ªâ€œå¾…æ”¶è´¹é›†åˆâ€ï¼ŒæŒ‰ã€æ¡ˆä»¶ + ç±»å‹ã€‘ç»„ç»‡ï¼Œå³æŸæ¡ˆçš„ç”³è¯·è´¹è‰å•ã€å¹´è´¹è‰å•ç­‰ã€‚

**å­—æ®µ**

*   `DraftID` PK
*   `CaseID` FK â†’ T\_Case
*   `Type` enumï¼š
    *   APPLY\_FEE â€“ ç”³è¯·è´¹è‰å•
    *   GRANT\_FEE â€“ æˆæƒç™»è®°è´¹/å¹´ç™»å°è´¹è‰å•
    *   ANNUITY\_FEE â€“ å¹´è´¹è‰å•
    *   OA\_FEE â€“ OA/ä¸­é—´è´¹è‰å•
    *   INVALID\_FEE â€“ æ— æ•ˆ/è¯‰è®¼è´¹è‰å•
    *   CONSULT\_FEE / SEARCH\_FEE â€“ é¡¾é—®/æ£€ç´¢æœåŠ¡è‰å•
    *   OTHER\_FEE â€“ å…¶ä»–
*   `Currency` â€“ è‰å•ä¸»å¸ç§
*   `TotalGov`, `TotalService`, `TotalMisc` â€“ ä¸‰ç±»é‡‘é¢å°è®¡
*   `TotalAmt` â€“ æ€»é‡‘é¢
*   `Status` enumï¼š
    *   OPEN â€“ å¯ç»§ç»­ç¼–è¾‘
    *   LOCKED â€“ å·²ç”¨äºè´¦å•æˆ–æ¸…å•ï¼Œä¸å»ºè®®å†æ”¹
    *   CANCELLED â€“ ä½œåºŸ
*   `CreatedBy/At`, `UpdatedBy/At`

***

### 5.3.3 `T_FeeItem` â€“ è´¹ç”¨æ˜ç»†

**å­—æ®µ**

*   `ItemID` PK
*   `DraftID` FK â†’ T\_FeeDraft
*   `RateID` FK â†’ T\_FeeRateï¼ˆå¯ç©ºï¼Œå¯¹æ‰‹å·¥é¡¹ç›®å¯ä¸ºç©ºï¼‰
*   `FeeCode`, `FeeName_CN`, `FeeName_EN`
*   `FeeType` enumï¼šGOV / SERVICE / MISC
*   `YearNo` int? â€“ å¹´åº¦ï¼ˆå¹´è´¹/å¹´ç™»å°è´¹ï¼‰
*   `Quantity` decimal â€“ æ•°é‡ï¼ˆå¯ä¸ºéæ•´æ•°ï¼Œå¦‚å·¥æ—¶ï¼‰
*   `UnitPrice` decimal â€“ å•ä»·ï¼ˆåŸå¸ç§ï¼‰
*   `Amount` decimal â€“ é‡‘é¢ï¼ˆåŸå¸ç§ï¼Œ=Quantity\*UnitPriceï¼Œå¯æ‰‹å·¥ä¿®æ”¹ï¼‰
*   `Currency` varchar â€“ åŸå¸ç§
*   `ExchangeRate` decimal â€“ ä¸è´¦å•å¸ç§/æœ¬å¸çš„æ±‡ç‡
*   `LocalAmount` decimal â€“ AmountÃ—ExchangeRate
*   `IsAuto` bool â€“ æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ
*   `IsReduced` bool â€“ æ˜¯å¦åº”ç”¨äº†è´¹å‡æ¯”ä¾‹
*   `IsDiscounted` bool â€“ æ˜¯å¦åº”ç”¨äº†æŠ˜æ‰£
*   `Remark` nvarchar

***

### 5.3.4 `T_PayList` â€“ å®˜è´¹æ¸…å•ï¼ˆå¤´ï¼‰

**å­—æ®µ**

*   `PayListID` PK
*   `ListNo` varchar â€“ æ¸…å•ç¼–å·
*   `Type` enum â€“ APPLY / GRANT / ANNUITY / INTERMEDIATE / INVALID / OTHER
*   `FlowDir` â€“ ç”³è¯·æ–¹å‘ï¼ˆå¯é€‰ï¼‰
*   `PlannedPayDate` date â€“ è®¡åˆ’ç¼´è´¹æ—¥æœŸ
*   `ActualPayDate` date? â€“ å®é™…ç¼´è´¹æ—¥æœŸ
*   `Currency`
*   `TotalAmt` decimal â€“ æ¸…å•æ€»é‡‘é¢
*   `InvoiceNoFrom`, `InvoiceNoTo` â€“ å®˜æ–¹å‘ç¥¨å·èŒƒå›´
*   `Status` enumï¼šDRAFT / EXPORTED / PAID / CANCELLED
*   `CreatedBy/At`, `UpdatedBy/At`

***

### 5.3.5 `T_GovPayment` â€“ å®˜è´¹ç¼´è´¹è®°å½•ï¼ˆæ˜ç»†ï¼‰

**å­—æ®µ**

*   `GovPayID` PK
*   `PayListID` FK â†’ T\_PayList
*   `CaseID` FK â†’ T\_Case
*   `ItemID` FK â†’ T\_FeeItemï¼ˆå¯¹åº”è‰å•æ˜ç»†ï¼Œå¯ç©ºï¼‰
*   `FeeCode`
*   `YearNo` â€“ å¯¹å¹´è´¹æˆ–å¹´ç™»å°è´¹
*   `PlannedAmt`, `PlannedCurrency` â€“ è®¡åˆ’ç¼´è´¹é‡‘é¢/å¸ç§
*   `PaidAmt`, `PaidCurrency` â€“ å®ç¼´é‡‘é¢/å¸ç§
*   `VoucherNo` â€“ è´¢åŠ¡è®°è´¦å‡­è¯å·
*   `InvoiceNo` â€“ å®˜æ–¹å‘ç¥¨å·
*   `PlannedPayDate`
*   `PaidDate`
*   `Remark`

***

### 5.3.6 `T_GrantFeeTask` ä¸ `T_AnnuityTask` â€“ æˆæƒè´¹/å¹´è´¹ä»»åŠ¡

**`T_GrantFeeTask`ï¼ˆæˆæƒè´¹/å¹´ç™»å°è´¹ï¼‰**

*   `TaskID` PK
*   `CaseID` FK
*   `Type` enum = GRANT
*   `DueDate` â€“ å®˜æ–¹ç¼´è´¹æˆªæ­¢æ—¥
*   `GovFeeAmt`, `ServiceFeeAmt`, `Currency` â€“ é¢„ä¼°é‡‘é¢
*   `ClientInstruction` enumï¼šNONE / PAY / ABANDON
*   `NotifyCount` int â€“ é€šçŸ¥æ¬¡æ•°
*   `DraftGenerated` bool â€“ æ˜¯å¦å·²ç”Ÿæˆè‰å•
*   `NoticeSent` bool â€“ æ˜¯å¦å·²å‘é€šçŸ¥å‡½
*   `IsOverdue` bool â€“ æ˜¯å¦é€¾æœŸ
*   `Remark`, å®¡è®¡

**`T_AnnuityTask`ï¼ˆå¹´è´¹ï¼‰**

*   `TaskID` PK
*   `CaseID`
*   `Type` enum = ANNUITY
*   `YearNo` â€“ å¹´è´¹å¹´å·
*   `DueDate` â€“ å¹´è´¹ç¼´è´¹æˆªæ­¢æ—¥
*   `GovFeeAmt`, `ServiceFeeAmt`, `Currency`
*   `ClientInstruction` enumï¼šNONE / PAY / ABANDON
*   `NotifyCount`
*   `PayNextYear` bool â€“ æ˜¯å¦åŒæ—¶ç¼´ä¸‹å¹´åº¦
*   `DraftGenerated`, `NoticeSent`, `IsOverdue`
*   `Remark`, å®¡è®¡

***

### 5.3.7 `T_CaseReceipt` â€“ ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•

**å­—æ®µ**

*   `ReceiptID` PK
*   `CaseID` FK â†’ T\_Case
*   `FeeCode`
*   `FeeName`
*   `YearNo` â€“ å¯¹å¹´è´¹/å¹´ç™»å°è´¹åœºæ™¯
*   `FeeType` enum â€“ GOV / SERVICE / MISC
*   `Currency`
*   `ReceivableAmt` decimal â€“ åº”æ”¶é‡‘é¢
*   `ReceivedAmt` decimal â€“ å®æ”¶é‡‘é¢ï¼ˆç´¯ç§¯ï¼‰
*   `ReceiptDate` date â€“ æœ€åä¸€æ¬¡æ”¶æ¬¾æ—¥æœŸï¼ˆæˆ–å¹³å‡/é¦–æ¬¡ï¼Œè§†è®¾è®¡ï¼‰
*   `DueDate` date â€“ åº”æ”¶åˆ°æœŸæ—¥ï¼ˆä»è´¦å•/åˆåŒè€Œæ¥ï¼‰
*   `IsArrears` bool â€“ æ˜¯å¦æ¬ æ¬¾ï¼ˆReceivedAmt < ReceivableAmtï¼‰
*   `IsPrepayment` bool â€“ æ˜¯å¦é¢„æ”¶æ¬¾ï¼ˆé¢„æ”¶é˜¶æ®µ ReceivableAmt=0, ReceivedAmt>0ï¼‰
*   `IsCommissionable` bool â€“ æ˜¯å¦å…è®¸çº³å…¥ææˆåŸºæ•°
*   `InvoiceNo` varchar â€“ å®¢æˆ·å‘ç¥¨å·
*   `Remark` nvarchar

***

### 5.3.8 `T_Expense` â€“ æ”¯å‡ºè´¹ç”¨è®°å½•

**å­—æ®µ**

*   `ExpenseID` PK
*   `CaseID` FK â†’ T\_Caseï¼ˆé¡¾é—®/æ£€ç´¢é¡¹ç›®äº¦å¯é™„åœ¨è¿™é‡Œï¼‰
*   `AgentID` FK â†’ Userï¼ˆå¯ç©ºï¼‰ â€“ å…³è”ä»£ç†äºº/é¡¾é—®
*   `ItemName` â€“ è´¹ç”¨åç§°ï¼ˆç¿»è¯‘è´¹/å·®æ—…è´¹/æ•°æ®åº“æ£€ç´¢è´¹ç­‰ï¼‰
*   `Category` enum â€“ TRANSLATION / SEARCH\_DB / TRANSPORT / OTHER
*   `WorkerID` â€“ ç»æ‰‹äºº/æŠ¥é”€äºº
*   `Date` â€“ å‘ç”Ÿæ—¥æœŸ
*   `Quantity` â€“ æ•°é‡
*   `UnitPrice` â€“ å•ä»·
*   `Total` â€“ æ€»é¢
*   `Currency`
*   `Remark`

***

## 5.4 æ ‡å‡†è´¹ç‡ç»´æŠ¤ä¸é‡‘é¢è®¡ç®—ï¼ˆFR-FE-01/03ï¼‰

### 5.4.1 è´¹ç‡ç»´æŠ¤ç•Œé¢

**æŸ¥è¯¢åŒº**

*   Groupï¼ˆAPPLY/GRANT/ANNUITY/INTERMEDIATE/INVALID/CONSULT/OTHERï¼‰
*   Country
*   CaseType
*   FeeCode/Name æ¨¡ç³Šæœç´¢

**åˆ—è¡¨åŒº**

*   Code, Name\_CN, Name\_EN, FeeType, CountryCode, PatentCategory, CaseType, DefaultAmount, DefaultCurrency, CalcMode, IsActive ç­‰ã€‚

**ç¼–è¾‘åŒºåŸŸ**

*   å¯ç¼–è¾‘æ‰€æœ‰å­—æ®µï¼š
    *   Group, Code, Name\_CN/EN, FeeType, CountryCode, PatentCategory, CaseType
    *   DefaultCurrency, DefaultAmount
    *   CalcMode, CalcParams
    *   AllowReduction, AllowDiscount, IsActive

### 5.4.2 é‡‘é¢è®¡ç®—è§„åˆ™ï¼ˆè‰å•ç”Ÿæˆ/æ›´æ–°æ—¶ä½¿ç”¨ï¼‰

å¯¹æŸæ¡ˆçš„æŸé¡¹è´¹ç”¨ï¼š

1.  æŸ¥æ‰¾ `T_FeeRate`ï¼šæŒ‰ Group, CountryCode, CaseType, PatentCategory è¿‡æ»¤ï¼Œé€‰å‡ºåŒ¹é…çš„è´¹ç‡è®°å½•ï¼›
2.  ä¾æ® CalcMode å†³å®š UnitPrice/Amountï¼š

**FIXED**

*   `UnitPrice = DefaultAmount`
*   `Quantity` ä¸€èˆ¬ä¸º 1ï¼›`Amount = UnitPrice * Quantity`

**BY\_YEAR**

*   ä» CalcParams ä¸­è¯»å– YearNo å¯¹åº”çš„é‡‘é¢ï¼›
*   ä¾‹å¦‚ï¼šCalcParams = { "1":1000, "2":1200, "3":1500, ... }ï¼›
*   `UnitPrice = CalcParams[YearNo]`ï¼›`Amount = UnitPrice * Quantity`

**BY\_CLAIMS**

*   æ ¹æ® `ClaimCount` è¶…å‡ºæŸé˜ˆå€¼è®¡ç®—ï¼š
    *   CalcParams å¯åŒ…å«ï¼š`{ "base":10, "per_extra":100 }`
    *   è‹¥ ClaimCount â‰¤ baseï¼Œåˆ™ Amount=0ï¼ˆæˆ–åŸºç¡€é‡‘é¢ï¼‰ï¼›
    *   è‹¥ ClaimCount > baseï¼Œåˆ™ `Amount = (ClaimCount - base) * per_extra`

**BY\_PAGES**

*   åŒä¸Šï¼Œä½†å‚æ•°ä¸º `SpecPages` æˆ– `ClaimPages` ç­‰ã€‚

**COMPOSITE**

*   ç»„åˆé€»è¾‘ï¼Œå¦‚â€œåŸºç¡€é‡‘é¢ + è¶…é¡¹è´¹ + è¶…é¡µè´¹â€ç­‰ï¼›
*   ç”±æœåŠ¡å®ç°ï¼Œä¾èµ– CalcParams ä¸­çš„å¤šå­—æ®µã€‚
    3\.  è´¹å‡è®¡ç®—ï¼š
    *   è‹¥ FeeType=GOV ä¸” `AllowReduction=true` ä¸” Case.FeeReduction>0ï¼š
    *   `Amount = Amount * (1 - Case.FeeReduction)`
    *   `IsReduced=true`
        4\.  æŠ˜æ‰£è®¡ç®—ï¼š
    *   å¯¹æœåŠ¡è´¹ï¼šå¯åœ¨è´¦å•é˜¶æ®µç”± `DiscountRate` ç»Ÿä¸€åº”ç”¨ï¼›
*   å¦‚éœ€åœ¨è‰å•é˜¶æ®µå°±åº”ç”¨æŠ˜æ‰£ï¼Œå¯åœ¨è‰å•ç”Ÿæˆé€»è¾‘ä¸­é¢å¤–å¤„ç†ï¼š
    *   `Amount = Amount * (1 - DiscountRate)`
    *   `IsDiscounted=true`

***

## 5.5 è´¹ç”¨è‰å•ï¼ˆUS-FE-01/02ï¼ŒFR-FE-02/03ï¼‰

### 5.5.1 è‰å•åˆ›å»ºå…¥å£

*   ä»æ¡ˆä»¶è¯¦æƒ…çš„â€œè´¹ç”¨è‰å•â€æ ‡ç­¾åˆ›å»ºï¼›
*   ä»ä¸­é—´æ–‡ä»¶å‘å¯¼ï¼ˆæ¨¡å—äºŒ Step4ï¼‰è‡ªåŠ¨ç”Ÿæˆï¼›
*   ä»æˆæƒ/å¹´è´¹ç®¡ç†ç•Œé¢æ‰¹é‡ç”Ÿæˆã€‚

### 5.5.2 è‰å•å¤´ UI å­—æ®µ

| å­—æ®µ                 | ç±»å‹ | å¿…å¡« | è¯´æ˜                                                                     |
| ------------------ | -- | -- | ---------------------------------------------------------------------- |
| è‰å•ç±»å‹ Type          | ä¸‹æ‹‰ | âœ”ï¸ | APPLY\_FEE/GRANT\_FEE/ANNUITY\_FEE/OA\_FEE/INVALID\_FEE/CONSULT\_FEE ç­‰ |
| å¸ç§ Currency        | ä¸‹æ‹‰ | âœ”ï¸ | é»˜è®¤=å®¢æˆ·å¸ç§ï¼Œå¯ä¿®æ”¹                                                            |
| çŠ¶æ€ Status          | æ ‡ç­¾ | âœ”ï¸ | OPEN/LOCKED/BILLING\_DONE/CANCELLED                                    |
| å®˜è´¹å°è®¡ TotalGov      | æ˜¾ç¤º | è‡ªåŠ¨ | FeeType=GOV æ˜ç»†åˆè®¡                                                       |
| æœåŠ¡è´¹å°è®¡ TotalService | æ˜¾ç¤º | è‡ªåŠ¨ | FeeType=SERVICE æ˜ç»†åˆè®¡                                                   |
| æ‚è´¹å°è®¡ TotalMisc     | æ˜¾ç¤º | è‡ªåŠ¨ | FeeType=MISC æ˜ç»†åˆè®¡                                                      |
| è‰å•æ€»é¢ TotalAmt      | æ˜¾ç¤º | è‡ªåŠ¨ | ä¸Šè¿°ä¸‰ç±»ä¹‹å’Œ                                                                 |

**æ ¡éªŒ**

*   V-FD-01ï¼šå¿…é¡»æœ‰è‡³å°‘ä¸€æ¡ `T_FeeItem`ï¼›
*   V-FD-02ï¼šCurrency ä¸å¾—ä¸ºç©ºï¼›æ”¹å˜å¸ç§æ—¶é¡»æ›´æ–°æ‰€æœ‰æ˜ç»†çš„ LocalAmountï¼ˆæŒ‰æ–°æ±‡ç‡è®¡ç®—ï¼‰ã€‚

### 5.5.3 è‰å•æ˜ç»† UI å­—æ®µï¼ˆå¯¹åº” T\_FeeItemï¼‰

| å­—æ®µ               | ç±»å‹    | å¿…å¡« | è¯´æ˜                         |
| ---------------- | ----- | -- | -------------------------- |
| è´¹ç”¨ä»£ç  FeeCode     | ä¸‹æ‹‰/æ–‡æœ¬ | âœ”ï¸ | è‹¥é€‰æ‹©è´¹ç‡è¡¨é¡¹åˆ™ä¸‹æ‹‰ï¼Œå¦åˆ™å¯æ‰‹è¾“           |
| è´¹ç”¨åç§° FeeName\_CN | æ–‡æœ¬    | âœ”ï¸ | é»˜è®¤ä»è´¹ç‡å¸¦å…¥                    |
| å¹´åº¦ YearNo        | æ•´æ•°    | æ¡ä»¶ | å¹´è´¹/å¹´ç™»å°è´¹ç­‰æ—¶å¿…å¡«                |
| è´¹ç”¨ç±»å‹ FeeType     | ä¸‹æ‹‰    | âœ”ï¸ | GOV/SERVICE/MISC           |
| æ•°é‡ Quantity      | æ•°å­—    | âœ”ï¸ | é»˜è®¤ 1ï¼Œå¯ç”¨ä½œå·¥æ—¶/å€æ•°              |
| å•ä»· UnitPrice     | æ•°å­—    | âœ”ï¸ | å¯æ‰‹å·¥æ”¹å†™                      |
| é‡‘é¢ Amount        | æ•°å­—    | âœ”ï¸ | é»˜è®¤=Quantity\*UnitPriceï¼Œå¯å†è°ƒ |
| å¸ç§ Currency      | ä¸‹æ‹‰    | âœ”ï¸ | åŸå¸ç§                        |
| æ±‡ç‡ ExchangeRate  | æ•°å­—    | âœ”ï¸ | åŸå¸ç§â†’è‰å•/è´¦å•å¸ç§                |
| æœ¬å¸é‡‘é¢ LocalAmount | æ•°å­—    | è‡ªåŠ¨ | =AmountÃ—ExchangeRate       |
| æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ IsAuto    | åªè¯»    | âœ”ï¸ | æ˜¾ç¤º true/false              |
| å¤‡æ³¨ Remark        | æ–‡æœ¬    | âœ–ï¸ | è¡¥å……ä¿¡æ¯                       |

**æ ¡éªŒ**

*   V-FI-01ï¼šFeeCode å’Œ FeeName ä¸å¾—åŒæ—¶ä¸ºç©ºï¼›
*   V-FI-02ï¼šQuantity/UnitPrice/Amount/LocalAmount â‰¥ 0ï¼›è‹¥ Amount=0 ä¸”ä¸åˆç†ï¼Œå¯æç¤ºåˆ é™¤è¯¥è¡Œï¼›
*   V-FI-03ï¼šè‹¥é€‰æ‹©äº† RateIDï¼Œåˆ™ FeeType å¿…é¡»ä¸ T\_FeeRate.FeeType ä¸€è‡´ï¼›
*   V-FI-04ï¼šType=ANNUITY\_FEE æ—¶ï¼ŒYearNo å¿…å¡«ä¸” YearNo â‰¥ Case.FirstAnnuityYearï¼›
*   V-FI-05ï¼šå¯¹äº FeeType=GOV ä¸” AllowReduction=true çš„é¡¹ç›®ï¼Œåº”è‡ªåŠ¨åº”ç”¨è´¹å‡ï¼›è‹¥ç”¨æˆ·æ‰‹å·¥æ”¹é‡‘é¢ï¼Œå¯å…è®¸ä½†è®¾ç½® IsReduced=falseï¼Œå¹¶ç»™å‡ºæç¤ºã€‚

***

## 5.6 å®˜è´¹æ¸…å•ä¸å®˜æ–¹ç¼´è´¹ï¼ˆUS-FE-03ï¼ŒFR-FE-04ï¼‰

### 5.6.1 æ¸…å•ç”Ÿæˆå…¥å£ä¸æ¡ä»¶

**å…¥å£**

*   èœå•ï¼šâ€œè´¹ç”¨ç®¡ç† â†’ å®˜è´¹æ¸…å•â€
*   ä¹Ÿå¯ä»è‰å•åˆ—è¡¨ä¸­å‹¾é€‰å¤šæ¡è‰å•çš„å®˜è´¹é¡¹ç›®ï¼Œç‚¹å‡»â€œåŠ å…¥æ¸…å•â€ã€‚

**æ¡ä»¶**

*   ä»…é€‰æ‹© FeeType=GOV çš„ `T_FeeItem`ï¼›
*   æŒ‰è‰å•ç±»å‹/å›½åˆ«/ç”³è¯·æ–¹å‘/å¸ç§ç­‰ç­›é€‰ã€‚

### 5.6.2 æ¸…å•å¤´ UI å­—æ®µ

| å­—æ®µ                     | ç±»å‹ | å¿…å¡« | è¯´æ˜                                         |
| ---------------------- | -- | -- | ------------------------------------------ |
| æ¸…å•ç¼–å· ListNo            | æ–‡æœ¬ | âœ”ï¸ | è‡ªåŠ¨ç”Ÿæˆï¼Œå…è®¸äººå·¥è°ƒæ•´                                |
| æ¸…å•ç±»å‹ Type              | ä¸‹æ‹‰ | âœ”ï¸ | APPLY/GRANT/ANNUITY/INTERMEDIATE/INVALID ç­‰ |
| ç”³è¯·æ–¹å‘ FlowDir           | ä¸‹æ‹‰ | âœ–ï¸ | å¯é€‰                                         |
| è®¡åˆ’ç¼´è´¹æ—¥ PlannedPayDate   | æ—¥æœŸ | âœ”ï¸ | è®¡åˆ’æäº¤å®˜æ–¹ç¼´è´¹æ—¥æœŸ                                 |
| å®é™…ç¼´è´¹æ—¥ ActualPayDate    | æ—¥æœŸ | âœ–ï¸ | ç¼´è´¹åå¡«                                       |
| å¸ç§ Currency            | ä¸‹æ‹‰ | âœ”ï¸ | æ¸…å•å®é™…æ‰€ä½¿ç”¨å¸ç§                                  |
| é‡‘é¢åˆè®¡ TotalAmt          | æ˜¾ç¤º | è‡ªåŠ¨ | æ‰€æœ‰æ˜ç»† PlannedAmt/LocalAmount åˆè®¡             |
| å‘ç¥¨å·èŒƒå›´ InvoiceNoFrom/To | æ–‡æœ¬ | âœ–ï¸ | ç¼´è´¹åå¡«                                       |
| çŠ¶æ€ Status              | æ ‡ç­¾ | âœ”ï¸ | DRAFT/EXPORTED/PAID/CANCELLED              |

**æ ¡éªŒ**

*   V-PL-01ï¼šPlannedPayDate ä¸å¾—æ—©äºå½“å‰æ—¥æœŸå¤ªä¹…ï¼Œé¿å…å½•å…¥é”™è¯¯ï¼›
*   V-PL-02ï¼šStatusâ‰ PAID æ—¶ä¸åº”å¡« ActualPayDate/InvoiceNoFrom/Toï¼›
*   V-PL-03ï¼šStatus=PAID æ—¶å¿…é¡»æœ‰ ActualPayDate ä¸”æœ‰è‡³å°‘ä¸€æ¡ T\_GovPayment è®°å½•ã€‚

### 5.6.3 æ¸…å•æ˜ç»† â€“ T\_GovPayment

åœ¨ UI ä¸­ï¼š

*   æ˜¾ç¤º CaseNo/AppNo/FeeCode/FeeName/YearNo/PlannedAmt/PlannedPayDate/InvoiceNo/PaidAmt/PaidDate/VoucherNo ç­‰ï¼›
*   å¯¹æ¯æ¡æ˜ç»†å…è®¸åœ¨ç¼´è´¹ç™»è®°æ—¶ä¿®æ”¹ PaidAmt/PaidDate/InvoiceNo/VoucherNoã€‚

**æ ¡éªŒ**

*   V-GP-01ï¼šPaidAmt â‰¥ 0ï¼Œè‹¥ä¸ºç©ºåˆ™é»˜è®¤=PlannedAmtï¼›
*   V-GP-02ï¼šPaidDate è· ActualPayDate ä¸åº”è¶…è¿‡åˆç†èŒƒå›´ï¼ˆä¾‹å¦‚ Â±7 å¤©ï¼‰ï¼Œå¦åˆ™è­¦å‘Šï¼›
*   V-GP-03ï¼šå¦‚å·²æœ‰ PaidAmt/PaidDateï¼Œå†ä¿®æ”¹å¿…é¡»æœ‰è¾ƒé«˜æƒé™å¹¶è®°å½•å˜æ›´æ—¥å¿—ï¼ˆåœ¨è´¹ç”¨æ¨¡å—æˆ–è´¢åŠ¡æ¨¡å—å•ç‹¬è®¾è®¡æ—¥å¿—ï¼‰ã€‚

***

## 5.7 æˆæƒè´¹ / å¹´ç™»å°è´¹ç®¡ç†ï¼ˆUS-FE-04ï¼ŒFR-FE-05ï¼‰

> ä¸æˆæƒ E2E åœºæ™¯ï¼ˆG0ï¼‰å¼ºç›¸å…³ï¼Œè¿™é‡Œèšç„¦äº Fee ç®¡ç†ä¾§çš„å­—æ®µä¸æµç¨‹ã€‚

### 5.7.1 æ•°æ®æºä¸åˆ—è¡¨è§†å›¾

**æ•°æ®æº**

*   `T_Case` ä¸­ Status=GRANTED ä¸” `IsFeeMonitor` å¯é€‰ï¼›
*   `T_GrantFeeTask` å­˜æ”¾æ¯æ¡ˆæˆæƒè´¹ä»»åŠ¡ï¼ˆæˆ–å¤šä¸ªä»»åŠ¡ï¼‰ã€‚

**åˆ—è¡¨å­—æ®µ**

*   CaseNo, AppNo, GrantNo, GrantDate
*   ClientName, ToCountry
*   GovFeeAmt, ServiceFeeAmt
*   ClientInstructionï¼ˆNONE/PAY/ABANDONï¼‰
*   NotifyCount
*   DraftGenerated
*   NoticeSent
*   IsOverdue

### 5.7.2 å®¢æˆ·æŒ‡ç¤º & é€šçŸ¥

åœ¨â€œæˆæƒè´¹ç®¡ç†â€ç•Œé¢ï¼š

*   å¯å‹¾é€‰å¤šæ¡è®°å½•ï¼Œå°† `ClientInstruction` æ‰¹é‡è®¾ç½®ä¸ºï¼š
    *   PAY â€“ å®¢æˆ·ç¡®è®¤ç¼´çº³
    *   ABANDON â€“ å®¢æˆ·æ˜ç¡®æ”¾å¼ƒ
*   å¯¹ ClientInstruction=NONE çš„è®°å½•æ‰§è¡Œâ€œç”Ÿæˆæˆæƒè´¹é€šçŸ¥å‡½â€ï¼š
    *   è°ƒç”¨æ¨¡å—äºŒçš„æ¨¡æ¿ç³»ç»Ÿç”Ÿæˆ `T_Document(TemplateCode=GRANT_FEE_NOTICE)`ï¼›
    *   å°† Word æ–‡æ¡£å­˜æ¡£ï¼›
    *   æ›´æ–°è¯¥ä»»åŠ¡ï¼š`NoticeSent=true`, `NotifyCount++`ã€‚

### 5.7.3 æˆæƒè´¹è‰å•ç”Ÿæˆ

å¯¹ `ClientInstruction=PAY` ä¸” `DraftGenerated=false` çš„è®°å½•ï¼š

1.  æŒ‰æ¡ˆä»¶ç±»å‹ã€å›½åˆ«ã€ä¸“åˆ©ç±»åˆ«ä» `T_FeeRate(Group=GRANT)` æå–ç™»è®°è´¹/è¯ä¹¦è´¹/å°èŠ±ç¨ç­‰è´¹ç‡ï¼›
2.  åˆ›å»º `T_FeeDraft(Type=GRANT_FEE)`ï¼ŒCaseID=è¯¥æ¡ˆï¼›
3.  å¯¹æ¯é¡¹è´¹ç‡ç”Ÿæˆä¸€æ¡ `T_FeeItem`ï¼š
    *   FeeType=GOV æˆ– SERVICE
    *   åº”ç”¨è´¹å‡ï¼ˆå¦‚é€‚ç”¨ï¼‰
4.  æ±‡æ€»è®¡ç®— `T_FeeDraft.TotalGov/TotalService/TotalMisc/TotalAmt`ï¼›
5.  æ›´æ–° `T_GrantFeeTask.DraftGenerated=true`ã€‚

**æ ¡éªŒ**

*   V-GF-01ï¼šè´¹ç‡ä¸­å¿…é¡»å­˜åœ¨å¯¹åº”ç™»è®°è´¹/è¯ä¹¦è´¹/å°èŠ±ç¨ç­‰ï¼›è‹¥ç¼ºå¤±åˆ™é˜»æ­¢ç”Ÿæˆï¼›
*   V-GF-02ï¼šè‹¥åŒä¸€æ¡ˆåŒç±»å‹è‰å•å·²å­˜åœ¨ï¼Œéœ€æç¤ºç”¨æˆ·é¿å…é‡å¤ã€‚

***

## 5.8 å¹´è´¹ç®¡ç†ï¼ˆUS-FE-05ï¼ŒFR-FE-06ï¼‰

> å¹´è´¹ E2E åœºæ™¯ D ä¸­å·²è®²è¿‡æ—¶é—´çº¿ï¼Œè¿™é‡Œèšç„¦ Fee æ¨¡å—å­—æ®µä¸ç•Œé¢ã€‚

### 5.8.1 å¹´è´¹ä»»åŠ¡åˆå§‹åŒ–ï¼ˆT\_AnnuityTaskï¼‰

æˆæƒæ—¶ï¼ˆæ¨¡å—ä¸€ + æˆæƒåœºæ™¯ï¼‰ï¼š

*   æ ¹æ® `FirstAnnuityYear` å’Œ `ValidUntil` è®¡ç®—å¯ç¼´å¹´åº¦èŒƒå›´ï¼›
*   ç³»ç»Ÿå¯ä¸€æ¬¡æ€§ä¸ºæ¯ä¸ª YearNo åˆ›å»º `T_AnnuityTask`ï¼š
    *   YearNo, DueDate, GovFeeAmt/ServiceFeeAmtï¼ˆå¯åˆå§‹ä¸º 0 æˆ–é¢„ä¼°ï¼‰ã€Currency
    *   ClientInstruction=NONE, NotifyCount=0, DraftGenerated=false, NoticeSent=false, IsOverdue=false

ä¹Ÿå¯é‡‡ç”¨æ»šåŠ¨ç”Ÿæˆç­–ç•¥ï¼ˆä¾‹å¦‚ï¼šæ¯æ™šå®šæ—¶ä»»åŠ¡æ£€æŸ¥æœªæ¥ 3 å¹´å†…æœªå»ºä»»åŠ¡çš„å¹´åº¦ï¼‰ã€‚

### 5.8.2 å¹´è´¹ä»»åŠ¡æ£€ç´¢ä¸æ“ä½œç•Œé¢

**ç­›é€‰æ¡ä»¶**

*   DueDate èŒƒå›´ï¼ˆæ”¯æŒâ€œæœªæ¥ 3 ä¸ªæœˆ/6 ä¸ªæœˆ/1 å¹´â€ç­‰ï¼‰
*   Client/Applicant
*   Country, PatentCategory
*   ClientInstructionï¼ˆNONE/PAY/ABANDONï¼‰
*   DraftGeneratedã€NoticeSentã€IsOverdue

**åˆ—è¡¨åˆ—**

*   CaseNo, AppNo, PatentNoï¼ˆå¦‚æœ‰ï¼‰
*   ClientName
*   YearNo, DueDate
*   GovFeeAmt/ServiceFeeAmt
*   ClientInstruction, NotifyCount
*   DraftGenerated, NoticeSent, IsOverdue

**æ“ä½œ**

*   æ›´æ–° ClientInstruction â€“ PAY/ABANDON
    *   è‹¥ ABANDONï¼Œåç»­å¹´è´¹ä»»åŠ¡ä¹Ÿå¯æ‰¹é‡æ ‡è®° ABANDONï¼ˆè§†ä¸šåŠ¡ç­–ç•¥ï¼‰
*   ç”Ÿæˆå¹´è´¹é€šçŸ¥å‡½ï¼š
    *   å¯¹ ClientInstruction=NONE çš„è®°å½•ï¼Œç”Ÿæˆ `T_Document(ANNUITY_NOTICE)`ï¼›
    *   NoticeSent=true, NotifyCount++ï¼›
*   ç”Ÿæˆå¹´è´¹è‰å•ï¼š
    *   å¯¹ ClientInstruction=PAY ä¸” DraftGenerated=false çš„è®°å½•ï¼ŒæŒ‰ç…§ YearNo ç”Ÿæˆ `T_FeeDraft(Type=ANNUITY_FEE)`ï¼›
    *   å¦‚å‹¾é€‰â€œåŒæ—¶ç¼´ä¸‹ä¸€å¹´åº¦â€ï¼Œå°† YearNo å’Œ YearNo+1 åŒæ—¶çº³å…¥è‰å•ã€‚

### 5.8.3 å¹´è´¹è‰å•ä¸å®˜è´¹æ¸…å•

è§ 5.5 & 5.6ï¼š

*   ç”Ÿæˆå¹´è´¹è‰å• `T_FeeDraft(Type=ANNUITY_FEE)` + å¤šä¸ªå¹´åº¦æ¡ç›®çš„ `T_FeeItem(YearNo=N)`ï¼›
*   å°†è‰å•ä¸­ FeeType=GOV æ˜ç»†æ±‡æ€»è¿› `T_PayList(Type=ANNUITY)` + `T_GovPayment`ï¼›
*   ç¼´è´¹åè®°å½• `PaidDate/PaidAmt/InvoiceNo`ã€‚

***

## 5.9 ä¸ªæ¡ˆæ”¶æ¬¾ç™»è®°ï¼ˆUS-FE-06ï¼ŒFR-FE-07ï¼‰

> æ³¨æ„ï¼šä¸ªæ¡ˆæ”¶æ¬¾ä¸è´¦å•/æ”¶æ¬¾ï¼ˆæ¨¡å—äº”ï¼‰è”åŠ¨ã€‚è¿™é‡Œå¼ºè°ƒ Case-level è®°å½•ã€‚

### 5.9.1 æ”¶æ¬¾ç™»è®°å…¥å£

ä¸¤ç§æ–¹å¼ï¼š

1.  ä»â€œä¸ªæ¡ˆæ”¶æ¬¾â€èœå•æŒ‰æ¡ˆå·é€æ¡ˆç™»è®°ï¼›
2.  ä»è´¦å•/å†²é”€æµç¨‹ä¸­è‡ªåŠ¨ç”Ÿæˆ/æ›´æ–°ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ã€‚

ä»¥ä¸‹ä»¥â€œé€æ¡ˆç™»è®°â€è§†è§’è¯´æ˜ UI å­—æ®µã€‚

### 5.9.2 ä¸ªæ¡ˆæ”¶æ¬¾ UI å­—æ®µï¼ˆT\_CaseReceiptï¼‰

| å­—æ®µ                     | ç±»å‹    | å¿…å¡«    | è¯´æ˜                                   |
| ---------------------- | ----- | ----- | ------------------------------------ |
| è´¹ç”¨ä»£ç  FeeCode           | ä¸‹æ‹‰/æ–‡æœ¬ | âœ”ï¸    | å¯ä»æ ‡å‡†è´¹ç‡è¡¨æˆ–è´¦å•æ˜ç»†ä¸­é€‰æ‹©ï¼Œä¹Ÿå¯æ‰‹å·¥è¾“å…¥               |
| è´¹ç”¨åç§° FeeName           | æ–‡æœ¬    | âœ”ï¸    | ä¸ FeeCode ä¸€è‡´çš„åç§°                      |
| å¹´åº¦ YearNo              | æ•´æ•°    | æ¡ä»¶    | å¹´è´¹/æˆæƒè´¹ç›¸å…³æ—¶å¿…å¡«                          |
| è´¹ç”¨ç±»å‹ FeeType           | ä¸‹æ‹‰    | âœ”ï¸    | GOV/SERVICE/MISC                     |
| åº”æ”¶é‡‘é¢ ReceivableAmt     | æ•°å­—    | âœ”ï¸    | å¯ä»è‰å•/è´¦å•å¯¼å…¥ï¼Œä¹Ÿå¯æ‰‹å¡«                       |
| å®æ”¶é‡‘é¢ ReceivedAmt       | æ•°å­—    | âœ”ï¸    | é»˜è®¤=åº”æ”¶ï¼Œéƒ¨åˆ†æ”¶æ¬¾æ—¶å¯å°äº                       |
| å¸ç§ Currency            | ä¸‹æ‹‰    | âœ”ï¸    | ä¸è´¦å•/æ”¶æ¬¾å¸ç§ä¸€è‡´                           |
| æ”¶æ¬¾æ—¥æœŸ ReceiptDate       | æ—¥æœŸ    | âœ”ï¸    | å®é™…åˆ°è´¦æ—¥æœŸ                               |
| ç¼´è´¹æœŸé™ DueDate           | æ—¥æœŸ    | âœ–ï¸    | ç”¨äºè´¦é¾„åˆ†æ                               |
| æ˜¯å¦æ¬ æ¬¾ IsArrears         | å‹¾é€‰æ¡†   | è‡ªåŠ¨/å¯æ”¹ | Received\<Receivable æ—¶è‡ªåŠ¨å‹¾é€‰ï¼Œå¯äººå·¥è¦†ç›–ä½†éœ€ç†ç”± |
| æ˜¯å¦é¢„æ”¶ IsPrepayment      | å‹¾é€‰æ¡†   | âœ–ï¸    | è‹¥æ˜¯é¢„æ”¶æ¬¾ï¼ŒReceivable å¯ä¸º 0ï¼ŒReceived>0     |
| æ˜¯å¦å¯ææˆ IsCommissionable | å‹¾é€‰æ¡†   | âœ–ï¸    | å¯è®¡å…¥ææˆåŸºæ•°çš„éƒ¨åˆ†å‹¾é€‰                         |
| å‘ç¥¨å· InvoiceNo          | æ–‡æœ¬    | âœ–ï¸    | å‘å®¢æˆ·å¼€å…·çš„å‘ç¥¨å·ç                            |
| å¤‡æ³¨ Remark              | æ–‡æœ¬    | âœ–ï¸    | è®°å½•ç‰¹æ®Šæƒ…å†µ                               |

**æ ¡éªŒ**

*   V-CR-01ï¼šReceivableAmt â‰¥ 0, ReceivedAmt â‰¥ 0ï¼›
*   V-CR-02ï¼šReceivedAmt > ReceivableAmt æ—¶ï¼Œç³»ç»Ÿåº”è®¤å®šä¸ºé¢„æ”¶ï¼›å¯è‡ªåŠ¨å‹¾é€‰ IsPrepayment å¹¶æç¤ºç”¨æˆ·ç¡®è®¤ï¼›
*   V-CR-03ï¼šè‹¥ ReceivedAmt < ReceivableAmt ä¸” IsArrears æœªå‹¾é€‰ï¼Œåº”ç»™å‡ºæç¤ºï¼›

**ä¸è´¦å•/å†²é”€å…³ç³»**

*   é€šå¸¸ `ReceivableAmt` ä» `T_BillItem` åŒæ­¥ï¼Œ`ReceivedAmt` ä» `T_Offset` åˆ†é…é‡‘é¢ç´¯ç§¯å¾—åˆ°ï¼›
*   æ‰‹å·¥æ¨¡å¼ä¸»è¦ç”¨äºæ— è´¦å•/å†å²è´¦å•åœºæ™¯çš„è¡¥å½•ã€‚

***

## 5.10 æ”¯å‡ºè´¹ç”¨ç®¡ç†ï¼ˆUS-FE-07ï¼ŒFR-FE-08ï¼‰

### 5.10.1 æ”¯å‡ºå½•å…¥ç•Œé¢ï¼ˆT\_Expenseï¼‰

**å­—æ®µ**

| å­—æ®µ            | ç±»å‹ | å¿…å¡«    | è¯´æ˜                                     |
| ------------- | -- | ----- | -------------------------------------- |
| é¡¹ç›®åç§° ItemName | æ–‡æœ¬ | âœ”ï¸    | å¦‚â€œç¿»è¯‘è´¹â€ã€â€œæ•°æ®åº“æ£€ç´¢è´¹â€ã€â€œå·®æ—…è´¹â€ç­‰                 |
| ç±»åˆ« Category   | ä¸‹æ‹‰ | âœ”ï¸    | TRANSLATION/SEARCH\_DB/TRANSPORT/OTHER |
| ç»æ‰‹äºº WorkerID  | ä¸‹æ‹‰ | âœ”ï¸    | æŠ¥é”€äººæˆ–æ‰§è¡Œäºº                                |
| æ—¥æœŸ Date       | æ—¥æœŸ | âœ”ï¸    | è´¹ç”¨å‘ç”Ÿæ—¥æœŸ                                 |
| æ•°é‡ Quantity   | æ•°å­— | âœ”ï¸    | é»˜è®¤=1ï¼Œå¯ç”¨äºå·¥æ—¶/ä»¶æ•°ç­‰                         |
| å•ä»· UnitPrice  | æ•°å­— | âœ”ï¸    | å•ä»·                                     |
| æ€»é¢ Total      | æ•°å­— | è‡ªåŠ¨/å¯æ”¹ | é»˜è®¤=Quantity\*UnitPrice                 |
| å¸ç§ Currency   | ä¸‹æ‹‰ | âœ”ï¸    | æ”¯ä»˜å¸ç§                                   |
| å¤‡æ³¨ Remark     | æ–‡æœ¬ | âœ–ï¸    | æè¿°ä¾›åº”å•†/ç¥¨æ®å·ç­‰                             |

**æ ¡éªŒ**

*   V-EX-01ï¼šQuantity/UnitPrice/Total â‰¥ 0ï¼›
*   V-EX-02ï¼šTotal ä¸ Quantity\*UnitPrice ä¸ä¸€è‡´æ—¶ï¼Œåº”æç¤ºç”¨æˆ·æ˜¯å¦é‡‡ç”¨æ‰‹å·¥æŒ‡å®šçš„ Totalï¼›

### 5.10.2 æŸ¥è¯¢ä¸ç»Ÿè®¡

*   æŒ‰æ¡ˆä»¶/é¡¹ç›®ã€æ—¶é—´èŒƒå›´ã€Categoryã€ç»æ‰‹äººæ£€ç´¢æ”¯å‡ºè´¹ç”¨ï¼›
*   æ±‡æ€»ï¼š
    *   æ¯æ¡ˆæ€»æ”¯å‡º
    *   æ¯å®¢æˆ·/æ¯éƒ¨é—¨æ”¯å‡º
*   ä¸ `T_CaseReceipt` ç»“åˆå¯åšæ¯›åˆ©åˆ†æï¼ˆæ”¶æ¬¾ â€“ æ”¯å‡ºï¼‰ã€‚

***

## 5.11 è´¹ç”¨æƒ…å†µæŸ¥è¯¢ä¸€è§ˆï¼ˆUS-FE-08ï¼ŒFR-FE-09ï¼‰

> å¯¹åº”æ—§ç³»ç»Ÿé‡Œçš„â€œç¼´è´¹æƒ…å†µä¸€è§ˆ + æ”¶æ¬¾æƒ…å†µä¸€è§ˆâ€åŒå±‚è¡¨æ ¼ã€‚

### 5.11.1 æŸ¥è¯¢æ¡ä»¶

*   æ¡ˆå·å· CaseNo / ç”³è¯·å· AppNo / ä¸“åˆ©å·
*   å®¢æˆ· Client / ç”³è¯·äºº Applicant
*   æ—¶é—´èŒƒå›´ï¼š
    *   å¯¹â€œç¼´è´¹æƒ…å†µâ€ï¼šå®˜è´¹ç¼´è´¹æ—¥æœŸ PaidDate èŒƒå›´
    *   å¯¹â€œæ”¶æ¬¾æƒ…å†µâ€ï¼šReceiptDate èŒƒå›´
*   è´¹ç”¨ç±»å‹ç­›é€‰ï¼š
    *   ç”³è¯·è´¹ã€æˆæƒè´¹ã€å¹´è´¹ã€æ— æ•ˆè´¹ã€é¡¾é—®è´¹ç­‰

### 5.11.2 ä¸ŠåŠè¡¨ï¼šå®˜è´¹ç¼´è´¹æƒ…å†µä¸€è§ˆï¼ˆT\_GovPaymentï¼‰

**æ˜¾ç¤ºå­—æ®µ**

*   æ¡ˆå·å· CaseNo
*   ç”³è¯·å· AppNo
*   è´¹ç”¨ä»£ç  FeeCode
*   è´¹ç”¨åç§° FeeName
*   å¹´åº¦ YearNoï¼ˆå¹´è´¹/å¹´ç™»å°è´¹ï¼‰
*   åº”ç¼´é‡‘é¢ PlannedAmt / å¸ç§
*   å®ç¼´é‡‘é¢ PaidAmt / å¸ç§
*   æ¸…å•ç¼–å· ListNo
*   è®°è´¦å‡­è¯å· VoucherNo
*   å‘ç¥¨å· InvoiceNo
*   è®¡åˆ’ç¼´è´¹æ—¥ PlannedPayDate
*   å®é™…ç¼´è´¹æ—¥ PaidDate

**æ•°æ®æ¥æº**

*   `T_GovPayment` å…³è” `T_PayList`ã€`T_FeeItem`ã€`T_Case`ã€‚

### 5.11.3 ä¸‹åŠè¡¨ï¼šä¸ªæ¡ˆæ”¶æ¬¾æƒ…å†µä¸€è§ˆï¼ˆT\_CaseReceiptï¼‰

**æ˜¾ç¤ºå­—æ®µ**

*   æ¡ˆå·å· CaseNo
*   è´¹ç”¨ä»£ç /åç§° FeeCode/FeeName
*   å¹´åº¦ YearNoï¼ˆå¦‚æœ‰ï¼‰
*   è´¹ç”¨ç±»å‹ FeeTypeï¼ˆå®˜è´¹/æœåŠ¡è´¹/æ‚è´¹ï¼‰
*   åº”æ”¶é‡‘é¢ ReceivableAmt
*   å®æ”¶é‡‘é¢ ReceivedAmt
*   æ¬ æ¬¾æ ‡è®° IsArrears
*   æ˜¯å¦é¢„æ”¶ IsPrepayment
*   æ˜¯å¦å¯ææˆ IsCommissionable
*   æ”¶æ¬¾æ—¥æœŸ ReceiptDate
*   ç¼´è´¹æœŸé™ DueDate
*   å‘ç¥¨å· InvoiceNo

**æ•°æ®æ¥æº**

*   `T_CaseReceipt` è”ç»“ `T_Case`ã€‚

**ç”¨é€”**

*   å¿«é€ŸæŸ¥çœ‹æŸæ¡ˆæˆ–æŸå®¢æˆ·åœ¨å®˜è´¹ç¼´è´¹ä¸å®¢æˆ·å›æ¬¾ä¸¤ä¸ªå±‚é¢çš„è´¹ç”¨æƒ…å†µï¼›
*   è¾…åŠ©å‚¬æ¬¾ä¸è´¢åŠ¡åˆ†æã€‚

***

## 5.12 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ï¼‰

### 5.12.1 User Story â†’ FR â†’ ç« èŠ‚æ˜ å°„ï¼ˆè¡¨ 7ï¼‰

| US                  | æ¶‰åŠ FR                           | ä¸»è¦ç« èŠ‚              | è¯´æ˜                                                                                                                                               |
| ------------------- | ------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| US-FE-01 è‰å•ç”Ÿæˆä¸ç»´æŠ¤    | FR-FE-02, FR-FE-03, é—´æ¥ FR-FE-01 | 5.3.2, 5.3.3, 5.5 | `T_FeeDraft/T_FeeItem` å®šä¹‰è‰å•å’Œæ˜ç»†ï¼›5.5 æè¿°è‰å•åˆ›å»º UIã€å­—æ®µæ ¡éªŒå’Œè‡ªåŠ¨é‡‘é¢è®¡ç®—æµç¨‹ï¼›æ ‡å‡†è´¹ç‡ç”± 5.3.1 æä¾›ã€‚                                                                       |
| US-FE-02 æ ‡å‡†è´¹ç‡ä¸è´¹å‡/æŠ˜æ‰£ | FR-FE-01, FR-FE-03              | 5.3.1, 5.4        | 5.3.1 å®šä¹‰ `T_FeeRate` å­—æ®µï¼ˆGroup/Code/FeeType/Country/CaseType/CalcMode/AllowReduction ç­‰ï¼‰ï¼›5.4 é˜è¿°ä»è´¹ç‡è¡¨+æ¡ˆä»¶å‚æ•°+è´¹å‡/æŠ˜æ‰£è®¡ç®— UnitPrice/Amount/LocalAmount çš„è§„åˆ™ã€‚ |
| US-FE-03 å®˜è´¹æ¸…å•ä¸ç¼´è´¹    | FR-FE-04                        | 5.3.4, 5.3.5, 5.6 | `T_PayList/T_GovPayment` å»ºæ¨¡å®˜è´¹æ¸…å•ä¸ç¼´è´¹æ˜ç»†ï¼›5.6 æè¿°ç”Ÿæˆæ¸…å•ã€å¯¼å‡ºã€ç¼´è´¹ç™»è®°åŠçŠ¶æ€/å­—æ®µå˜åŒ–ã€‚                                                                                 |
| US-FE-04 æˆæƒè´¹/å¹´ç™»å°è´¹ç®¡ç† | FR-FE-05, é—´æ¥ FR-FE-02           | 5.3.6, 5.7        | `T_GrantFeeTask` å­˜æ”¾æˆæƒè´¹ä»»åŠ¡åŠæŒ‡ç¤º/é€šçŸ¥/è‰å•çŠ¶æ€ï¼›5.7 æè¿°åˆ—è¡¨è§†å›¾ã€å®¢æˆ·æŒ‡ç¤ºã€é€šçŸ¥å‡½ç”Ÿæˆã€è‰å•ç”ŸæˆåŠæ ¡éªŒè§„åˆ™ã€‚                                                                             |
| US-FE-05 å¹´è´¹ç®¡ç†       | FR-FE-06, é—´æ¥ FR-FE-02           | 5.3.6, 5.8        | `T_AnnuityTask` å®šä¹‰å¹´è´¹ä»»åŠ¡ï¼›5.8 æè¿°ä»»åŠ¡åˆå§‹åŒ–/å¹´åº¦æ£€ç´¢/å®¢æˆ·æŒ‡ç¤º/é€šçŸ¥/è‰å•/å®˜è´¹æ¸…å•ç­‰å®Œæ•´æµç¨‹ã€‚                                                                                    |
| US-FE-06 ä¸ªæ¡ˆæ”¶æ¬¾ç™»è®°     | FR-FE-07                        | 5.3.7, 5.9        | `T_CaseReceipt` å­—æ®µè®¾è®¡æ”¯æŒåº”æ”¶/å®æ”¶/æ¬ æ¬¾/é¢„æ”¶/å¯ææˆè®°å½•ï¼›5.9 ç»™å‡º UI å­—æ®µä¸æ ¡éªŒã€‚                                                                                         |
| US-FE-07 æ”¯å‡ºè´¹ç”¨ç®¡ç†     | FR-FE-08                        | 5.3.8, 5.10       | `T_Expense` è®°å½•æ¡ˆä»¶æˆæœ¬ï¼›5.10 ç»™å‡ºå½•å…¥ç•Œé¢å’Œæ ¡éªŒé€»è¾‘ã€‚                                                                                                             |
| US-FE-08 è´¹ç”¨æƒ…å†µç»¼åˆæŸ¥è¯¢   | FR-FE-09                        | 5.11              | 5.11 å®šä¹‰äº†â€œç¼´è´¹æƒ…å†µä¸€è§ˆâ€ï¼ˆT\_GovPaymentï¼‰å’Œâ€œæ”¶æ¬¾æƒ…å†µä¸€è§ˆâ€ï¼ˆT\_CaseReceiptï¼‰ä¸¤å¼ è¡¨çš„å­—æ®µä¸æ•°æ®æ¥æºï¼Œå®ç°ç»¼åˆæŸ¥è¯¢ã€‚                                                                      |

### 5.12.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 8ï¼‰

| FR ID    | æè¿°             | ä¸»è¦ç« èŠ‚              | å­—æ®µ/æ ¡éªŒ/æµç¨‹ç‚¹                                                                                                 |
| -------- | -------------- | ----------------- | --------------------------------------------------------------------------------------------------------- |
| FR-FE-01 | æ ‡å‡†è´¹ç‡è¡¨ç»´æŠ¤        | 5.3.1, 5.4        | `T_FeeRate` å­—æ®µå’Œ CalcMode/CalcParams å®šä¹‰ï¼›5.4 ä¸­çš„é‡‘é¢è®¡ç®—é€»è¾‘å±•ç¤ºå¦‚ä½•ç»“åˆæ¡ˆä»¶å‚æ•°ä¸è´¹å‡/æŠ˜æ‰£è®¡ç®—å•ä»·å’Œé‡‘é¢ã€‚                               |
| FR-FE-02 | æŒ‰â€œæ¡ˆä»¶+è‰å•ç±»å‹â€åˆ›å»ºè‰å• | 5.3.2, 5.3.3, 5.5 | `T_FeeDraft`ï¼ˆè‰å•çº§ï¼‰å’Œ `T_FeeItem` å®ç°å¤šæ¡æ˜ç»†ï¼›5.5 æè¿°è‰å•ç•Œé¢å­—æ®µ+V-FD/V-FI æ ¡éªŒå’Œç”Ÿæˆæµç¨‹ï¼ˆå«ä»ä¸­é—´æ–‡ä»¶æ¨¡æ¿/å¹´è´¹ä»»åŠ¡è§¦å‘ï¼‰ã€‚                    |
| FR-FE-03 | è‡ªåŠ¨è®¡ç®—é‡‘é¢         | 5.4               | å¯¹ FIXED/BY\_YEAR/BY\_CLAIMS/BY\_PAGES/COMPOSITE æ¨¡å¼çš„è¯¦ç»†å¤„ç†ï¼Œä»¥åŠ Apply FeeReduction/Discount é€»è¾‘ã€‚                |
| FR-FE-04 | å®˜è´¹æ¸…å•ä¸ç¼´è´¹        | 5.3.4, 5.3.5, 5.6 | `T_PayList/T_GovPayment` æ•°æ®æ¨¡å‹+5.6 æ¸…å•ç”Ÿæˆ/å¯¼å‡º/ç¼´è´¹ç™»è®° UI å’Œæ ¡éªŒï¼ˆV-PL-01~03, V-GP-01~03ï¼‰ã€‚                            |
| FR-FE-05 | æˆæƒè´¹/å¹´ç™»å°è´¹ç®¡ç†     | 5.3.6, 5.7        | `T_GrantFeeTask` ä¸­ DueDate/ClientInstruction/DraftGenerated/NoticeSent ç­‰å­—æ®µï¼›5.7 ä¸­å®¢æˆ·æŒ‡ç¤º/é€šçŸ¥å‡½/è‰å•ç”Ÿæˆã€‚            |
| FR-FE-06 | å¹´è´¹ç®¡ç†           | 5.3.6, 5.8        | `T_AnnuityTask` ä¸­ YearNo/DueDate/GovFeeAmt/ServiceFeeAmt/ClientInstruction ç­‰å­—æ®µï¼›5.8 ä¸­å¹´è´¹ä»»åŠ¡æå–ã€å®¢æˆ·æŒ‡ç¤ºã€é€šçŸ¥ã€è‰å•ã€æ¸…å•ã€‚ |
| FR-FE-07 | ä¸ªæ¡ˆæ”¶æ¬¾ç™»è®°         | 5.3.7, 5.9        | `T_CaseReceipt` å­—æ®µå®Œæ•´æ”¯æŒä¸ªæ¡ˆåº”æ”¶/å®æ”¶/æ¬ æ¬¾/é¢„æ”¶/å¯ææˆ/å‘ç¥¨ï¼›5.9 æè¿°é€æ¡ˆå½•å…¥ UI å’Œç›¸å…³ V-CR æ ¡éªŒã€‚                                     |
| FR-FE-08 | æ”¯å‡ºè´¹ç”¨è®°å½•         | 5.3.8, 5.10       | `T_Expense` æè¿°æ¡ˆä»¶æ”¯å‡ºå’Œæˆæœ¬åˆ†ç±»ï¼›5.10 ä¸­å½•å…¥/æ ¡éªŒå’Œç»Ÿè®¡æŸ¥è¯¢ã€‚                                                                 |
| FR-FE-09 | è´¹ç”¨æƒ…å†µæŸ¥è¯¢         | 5.11              | 5.11 çš„åŒè¡¨ç»“æ„ï¼ˆT\_GovPayment + T\_CaseReceiptï¼‰å’ŒæŸ¥è¯¢æ¡ä»¶ï¼Œæ»¡è¶³ç»¼åˆè´¹ç”¨æƒ…å†µæŸ¥è¯¢éœ€æ±‚ã€‚                                             |

***

âœ… è‡³æ­¤ï¼Œæ¨¡å—å››ï¼ˆè´¹ç”¨ç®¡ç†ï¼‰çš„æ‰€æœ‰å†…å®¹â€”â€”åŒ…æ‹¬æ ‡å‡†è´¹ç‡ã€è‰å•ã€å®˜è´¹æ¸…å•ã€æˆæƒè´¹/å¹´è´¹ä»»åŠ¡ã€ä¸ªæ¡ˆæ”¶æ¬¾ã€æ”¯å‡ºã€æŸ¥è¯¢å’Œ FR æ˜ å°„â€”â€”å·²ç»å®Œæ•´åŠ å…¥ v2.0 æ–‡æ¡£ï¼Œæ²¡æœ‰ä»»ä½•å‹ç¼©æˆ–åˆ å‡ã€‚

## 6. æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦ï¼ˆBilling, Receivables, Dunning & Bad Debtï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”æ—§ç‰ˆæ‰‹å†Œä¸­â€œè´¦å•ç®¡ç† + å‚¬æ¬¾ + åè´¦â€ç›¸å…³ç« èŠ‚ï¼Œå¹¶åˆå¹¶æˆ‘ä»¬ä¹‹å‰å†™è¿‡çš„æ‰€æœ‰ Billing ä¾§å†…å®¹ï¼š
>
> *   è´¦å•å¤´/æ˜ç»†ï¼ˆT\_Bill/T\_BillItemï¼‰
>
> *   æ”¶æ¬¾å•/æ”¶æ¬¾è¡Œï¼ˆT\_Payment/T\_PaymentLineï¼‰
>
> *   å†²é”€è®°å½•ï¼ˆT\_Offsetï¼‰
>
> *   é¢„æ”¶æ¬¾ï¼ˆåœºæ™¯ Fï¼‰
>
> *   å‚¬æ¬¾å•/å‚¬æ¬¾å‡½ï¼ˆT\_Dunning/T\_DunningLineï¼‰
>
> *   åè´¦æ ‡è®°ä¸åè´¦åçš„æ”¶æ¬¾
>
> æœ¬æ¨¡å—åªå…³æ³¨â€œåº”æ”¶/åº”ä»˜ + å‚¬æ¬¾ + åè´¦â€æœ¬èº«ï¼›**ä»£ç†äººææˆ**ï¼ˆCommissionï¼‰ç›¸å…³å†…å®¹åœ¨æ¨¡å—å…­ä¸“ç« å±•å¼€ã€‚

***

## 6.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 6.1.1 èŒƒå›´

è´¦å•ä¸åº”æ”¶æ¨¡å—è´Ÿè´£ä»¥ä¸‹ä¸šåŠ¡èƒ½åŠ›ï¼š

1.  **è´¦å•ï¼ˆBillï¼‰**
    *   ä»è´¹ç”¨è‰å•ç”Ÿæˆâ€œåº”æ”¶è´¦å•â€
    *   ä¹Ÿæ”¯æŒçº¯æ‰‹å·¥è´¦å•
    *   æ”¯æŒ ARï¼ˆåº”æ”¶ï¼‰å’Œ APï¼ˆåº”ä»˜ï¼‰æ–¹å‘
    *   è´¦å•çŠ¶æ€ï¼šæœªç»“ / éƒ¨åˆ†ç»“æ¸… / å…¨éƒ¨ç»“æ¸… / åè´¦
2.  **æ”¶æ¬¾ï¼ˆPaymentï¼‰**
    *   ç™»è®°å®¢æˆ·å®é™…ä»˜æ¬¾
    *   å°†ä¸€ç¬”ä»˜æ¬¾æ‹†åˆ†ç»™å¤šä¸ªæ¡ˆä»¶æˆ–è´¦å•ï¼ˆPaymentLineï¼‰
    *   å½¢æˆâ€œé¢„æ”¶æ¬¾æ± â€ï¼ˆå½“å°šæœªä¸è´¦å•å¯¹åº”æ—¶ï¼‰
3.  **å†²é”€ï¼ˆOffsetï¼‰**
    *   å°†æ”¶æ¬¾åˆ†é…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªè´¦å•ä¸Š
    *   å†²å‡è´¦å•ä½™é¢ï¼Œæ›´æ–°è´¦å•çŠ¶æ€
    *   å½¢æˆâ€œè´¦å•â€“æ”¶æ¬¾â€çš„é…å¯¹è®°å½•
4.  **é¢„æ”¶æ¬¾ç®¡ç†ï¼ˆPrepaymentï¼‰**
    *   æ”¯æŒå…ˆæ”¶ä¸€ç¬”é¢„ä»˜æ¬¾ï¼Œå†é€æ­¥ç”¨æ¥æŠµæ‰£åç»­è´¦å•
    *   æ¸…æ™°è®°å½•é¢„æ”¶æ¬¾çš„ä½™é¢ä¸ä½¿ç”¨æƒ…å†µ
5.  **å‚¬æ¬¾ï¼ˆDunningï¼‰**
    *   åŸºäºé€¾æœŸè´¦å•ç”Ÿæˆå‚¬æ¬¾å•
    *   è‡ªåŠ¨ç”Ÿæˆå‚¬æ¬¾å‡½ï¼ˆWord/Emailï¼‰
    *   è¿½è¸ªå‚¬æ¬¾æ‰¹æ¬¡å’Œå‚¬æ¬¾æ•ˆæœ
6.  **åè´¦ç®¡ç†**
    *   å¯¹é•¿æœŸæœªæ”¶/æ— æ³•æ”¶å›çš„è´¦å•æ ‡è®°åè´¦
    *   åç»­è‹¥å†æ”¶å›ï¼Œä»å¯ä»¥ç™»è®°æ”¶æ¬¾å¹¶å†³å®šæ˜¯å¦å–æ¶ˆåè´¦æ ‡è®°

### 6.1.2 è§’è‰²

*   **Financeï¼ˆè´¢åŠ¡ï¼‰**
    *   ç”Ÿæˆè´¦å•ã€ç™»è®°æ”¶æ¬¾ã€æ‰§è¡Œå†²é”€ã€æ ‡è®°åè´¦
    *   ç”Ÿæˆå‚¬æ¬¾å•åŠå‚¬æ¬¾å‡½
    *   ç®¡ç†é¢„æ”¶æ¬¾ä¸å¯¹è´¦
*   **Formalities / Flow Admin**
    *   åœ¨è´¹ç”¨è‰å•å±‚å‘èµ·è´¦å•ç”Ÿæˆ
    *   æŸ¥çœ‹è´¦å•ä¸å‚¬æ¬¾å¯¹æ¡ˆä»¶çš„å½±å“
*   **Agent / Manager**
    *   æŸ¥çœ‹æœ¬æ¡ˆå¯¹åº”çš„è´¦å•å’Œæ”¶æ¬¾çŠ¶å†µ
    *   åœ¨å‚¬æ¬¾ä¸åè´¦å†³ç­–ä¸­æä¾›ä¸šåŠ¡æ„è§

***

## 6.2 User Stories & Functional Requirements

### 6.2.1 User Storiesï¼ˆUSï¼‰

**US-BL-01 ä»è´¹ç”¨è‰å•ç”Ÿæˆè´¦å•**\
ä½œä¸ºè´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›èƒ½é€‰æ‹©è‹¥å¹²è´¹ç”¨è‰å•ï¼Œä¸ºæŒ‡å®šå®¢æˆ·ç”Ÿæˆä¸€å¼ æˆ–å¤šå¼ è´¦å•ï¼Œè´¦å•ä¸­æŒ‰æ¡ˆä»¶+è´¹ç”¨æ˜ç»†å±•å¼€ï¼Œå¹¶è‡ªåŠ¨æ‹†åˆ†ä¸ºå®˜è´¹/æœåŠ¡è´¹/æ‚è´¹å°è®¡ã€‚

**US-BL-02 æ‰‹å·¥ç»´æŠ¤è´¦å•**\
ä½œä¸ºè´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›åœ¨æ²¡æœ‰è‰å•çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ‰‹å·¥å½•å…¥è´¦å•å¤´å’Œæ˜ç»†ï¼ˆåŒ…æ‹¬è°ƒæ•´æ€§è´¦å•ã€åº”ä»˜è´¦å•ï¼‰ï¼Œå¹¶å¯è®¾ç½®æŠ˜æ‰£ç‡ã€åè´¦æ ‡è®°ç­‰ã€‚

**US-BL-03 è´¦å•æ‰“å°ä¸æ¨¡æ¿è¾“å‡º**\
ä½œä¸ºè´¢åŠ¡å’Œå®¢æˆ·ç»ç†ï¼Œæˆ‘å¸Œæœ›è´¦å•å¯ä»¥æŒ‰ä¸åŒç‰ˆå¼ï¼ˆä¸­/è‹±ã€æ¨ªå¼/çºµå¼ï¼‰æ‰“å°æˆ–å¯¼å‡º Word/Excelï¼Œç”¨äºé‚®å¯„æˆ–é‚®ä»¶å‘é€ã€‚

**US-BL-04 æ”¶æ¬¾ç™»è®°ä¸è´¦å•å†²é”€**\
ä½œä¸ºè´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›è®°å½•æ¯ä¸€ç¬”æ¥è‡ªå®¢æˆ·çš„æ”¶æ¬¾ï¼ˆå¯èƒ½å¯¹åº”å¤šä¸ªè´¦å•ï¼‰ï¼Œå¹¶é€šè¿‡â€œå†²é”€â€æœºåˆ¶å°†æ”¶æ¬¾é‡‘é¢åˆ†é…åˆ°å…·ä½“è´¦å•ä¸Šï¼Œæ›´æ–°è´¦å•ä½™é¢ä¸å·²æ”¶çŠ¶æ€ã€‚

**US-BL-05 å†²é”€åè½¬ï¼ˆåå†²é”€ï¼‰**\
ä½œä¸ºè´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›å½“å†²é”€å‡ºé”™æ—¶å¯ä»¥åœ¨æƒé™æ§åˆ¶ä¸‹å¯¹ç‰¹å®šæ—¶é—´æ®µå†…çš„å†²é”€è®°å½•è¿›è¡Œåè½¬ï¼Œè¿˜åŸè´¦å•ä½™é¢ä¸æ”¶æ¬¾ä½™é¢ã€‚

**US-BL-06 åè´¦ä¸å‚¬æ¬¾ç®¡ç†**\
ä½œä¸ºç®¡ç†å±‚/è´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›å¯ä»¥å°†é•¿æœŸæœªæ”¶è´¦å•æ ‡è®°ä¸ºåè´¦ï¼Œå¹¶æŒ‰å®¢æˆ· + æˆªæ­¢æ—¥æœŸç”Ÿæˆå‚¬æ¬¾å•ï¼Œåˆ—å‡ºæ‰€æœ‰é€¾æœŸæœªä»˜è´¦å•ï¼Œå¹¶åŸºäºæ¨¡æ¿ç”Ÿæˆä¸­è‹±æ–‡å‚¬æ¬¾å‡½ã€‚

**US-BL-07 é¢„æ”¶æ¬¾ç®¡ç†**\
ä½œä¸ºè´¢åŠ¡ï¼Œæˆ‘å¸Œæœ›å¯ä»¥å…ˆç™»è®°å®¢æˆ·é¢„æ”¶æ¬¾ï¼ˆæ— å…·ä½“è´¦å•ï¼‰ï¼Œä¹‹ååœ¨ä¸€æ®µæ—¶é—´å†…é™†ç»­ç”¨è¿™ç¬”é’±å†²æŠµä¸åŒæ¡ˆä»¶çš„è´¦å•ï¼Œå¹¶æ—¶åˆ»çœ‹åˆ°å‰©ä½™é¢„æ”¶æ¬¾ä½™é¢ã€‚

### 6.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-BL-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç»´æŠ¤è´¦å•å¤´ `T_Bill` ä¸è´¦å•æ˜ç»† `T_BillItem`ï¼ŒåŒ…æ‹¬æ”¶ä»˜æ–¹å‘ï¼ˆåº”æ”¶/åº”ä»˜ï¼‰ã€è´¦å•çŠ¶æ€ï¼ˆå°šæœªå†²é”€/éƒ¨åˆ†å†²é”€/å·²ç»å†²é”€/åè´¦ï¼‰ã€æŠ˜æ‰£ç‡ã€åè´¦ä¿¡æ¯ç­‰ã€‚

**FR-BL-02**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä»è´¹ç”¨è‰å• `T_FeeDraft/T_FeeItem` è‡ªåŠ¨ç”Ÿæˆè´¦å•ï¼ˆåº”æ”¶ä¸ºä¸»ï¼‰ï¼Œå¹¶ç»‘å®šè´¦å•æ˜ç»†ä¸åŸè‰å•/è´¹ç”¨æ˜ç»†ã€‚

**FR-BL-03**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒçº¯æ‰‹å·¥åˆ›å»ºè´¦å•ï¼Œå…è®¸ç›´æ¥å½•å…¥æ˜ç»†è¡Œï¼ˆä¸ä¾èµ–è‰å•ï¼‰ï¼ŒåŒæ—¶æ”¯æŒ ARï¼ˆåº”æ”¶ï¼‰ä¸ APï¼ˆåº”ä»˜ï¼‰æ–¹å‘ã€‚

**FR-BL-04**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒåŸºäºæ¨¡æ¿ç³»ç»Ÿæ‰“å°/å¯¼å‡ºè´¦å•æ–‡æ¡£ï¼ˆä¸­/è‹±ã€ä¸åŒç‰ˆå¼ï¼‰ã€‚

**FR-BL-05**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒè®°å½•æ”¶æ¬¾ `T_Payment`ï¼Œå¹¶é€šè¿‡ `T_Offset` å°†æ”¶æ¬¾åˆ†é…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªè´¦å•ä¸Šï¼Œè‡ªåŠ¨æ›´æ–°è´¦å•ä½™é¢ä¸çŠ¶æ€ã€‚

**FR-BL-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå¯¹å†²é”€è®°å½•è¿›è¡Œåå†²é”€ï¼ˆåœ¨æ—¶é—´/æƒé™æ§åˆ¶ä¸‹ï¼‰ï¼Œæ¢å¤è´¦å•ä½™é¢ä¸æ”¶æ¬¾ä½™é¢ã€‚

**FR-BL-07**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå°†è´¦å•æ ‡è®°ä¸ºåè´¦/ä»åè´¦æ¢å¤ï¼Œå¹¶åœ¨å‚¬æ¬¾ä¸æ™®é€šç»Ÿè®¡ä¸­åŒºåˆ«æ˜¾ç¤ºã€‚

**FR-BL-08**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç”Ÿæˆå‚¬æ¬¾å• `T_Dunning/T_DunningLine`ï¼ŒæŒ‰å®¢æˆ·+æˆªæ­¢æ—¥æœŸåˆ—å‡ºæœªç»“è´¦å•ï¼Œå¹¶å¯åŸºäºæ¨¡æ¿ç”Ÿæˆå‚¬æ¬¾å‡½ã€‚

**FR-BL-09**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒé¢„æ”¶æ¬¾ç®¡ç†ï¼šå…è®¸ç™»è®°é¢„æ”¶æ”¶æ¬¾è¡Œï¼Œåœ¨æœªåˆ†é…åˆ°è´¦å•æ—¶ä¿æŒâ€œé¢„æ”¶çŠ¶æ€â€ï¼Œå¹¶åœ¨åç»­å†²é”€è´¦å•æ—¶ä»é¢„æ”¶æ¬¾ä¸­æ‰£å‡ã€‚

***

## 6.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

### 6.3.1 `T_Bill` â€“ è´¦å•å¤´

**å­—æ®µ**

*   `BillID` PK
*   `BillNo` varchar â€“ è´¦å•ç¼–å·ï¼ˆå”¯ä¸€ï¼‰ï¼Œæ ¼å¼å¯é…ç½®ï¼ˆä¾‹å¦‚ï¼šYYYYMMDD-åºå·ï¼‰
*   `ClientID` FK â†’ T\_Client â€“ å¯¹åº”å®¢æˆ·
*   `Direction` enum â€“ ARï¼ˆåº”æ”¶ï¼‰ / APï¼ˆåº”ä»˜ï¼‰

**æ—¶é—´ä¸å¸ç§**

*   `BillDate` date â€“ è´¦å•æ—¥æœŸ
*   `DueDate` date â€“ è´¦å•åˆ°æœŸæ—¥/ä»˜æ¬¾æœŸé™
*   `Currency` varchar â€“ è´¦å•å¸ç§ï¼ˆä¸€èˆ¬=å®¢æˆ·å¸ç§ï¼‰
*   `ExchangeRate` decimal â€“ è´¦å•å¸ç§å¯¹åŸºç¡€å¸ç§ï¼ˆå¦‚ RMBï¼‰çš„æ±‡ç‡

**é‡‘é¢å­—æ®µ**

*   `DiscountRate` decimal(5,4) â€“ è´¦å•æ•´ä½“æŠ˜æ‰£ç‡ï¼ˆåº”ç”¨äºæœåŠ¡è´¹ï¼‰ï¼›
*   `TotalGov` decimal â€“ å®˜è´¹å°è®¡ï¼ˆåœ¨è´¦å•å¸ç§ï¼‰
*   `TotalService` decimal â€“ æœåŠ¡è´¹å°è®¡
*   `TotalMisc` decimal â€“ æ‚è´¹å°è®¡
*   `Amount` decimal â€“ æ€»é‡‘é¢ï¼ˆTotalGov+TotalService+TotalMiscï¼‰
*   `Balance` decimal â€“ æœªç»“ä½™é¢ï¼ˆåˆå€¼=Amountï¼Œéšå†²é”€å‡å°‘ï¼‰

**çŠ¶æ€ & åè´¦ä¿¡æ¯**

*   `Status` enumï¼š
    *   UNSETTLED â€“ å°šæœªå†²é”€/æœªç»“è´¦å•
    *   PARTIALLY\_SETTLED â€“ éƒ¨åˆ†å†²é”€/éƒ¨åˆ†ç»“æ¸…
    *   SETTLED â€“ å·²å…¨éƒ¨å†²é”€/ç»“æ¸…
    *   BAD\_DEBT â€“ åè´¦
*   `IsBadDebt` bool â€“ æ˜¯å¦åè´¦
*   `BadDebtDate` date? â€“ æ ‡è®°åè´¦æ—¥æœŸ
*   `BadDebtReason` nvarchar â€“ åè´¦åŸå› æè¿°

**å¤‡æ³¨ & å®¡è®¡**

*   `Remark` nvarchar
*   `CreatedBy`, `CreatedAt`, `UpdatedBy`, `UpdatedAt`

***

### 6.3.2 `T_BillItem` â€“ è´¦å•æ˜ç»†

**å­—æ®µ**

*   `BillItemID` PK
*   `BillID` FK â†’ T\_Bill
*   `CaseID` FK â†’ T\_Caseï¼ˆå¯ç©ºï¼Œç”¨äºâ€œéæ¡ˆä»¶è´¦å•â€ä¸ºç©ºï¼‰
*   `DraftID` FK â†’ T\_FeeDraftï¼ˆå¯ç©ºï¼šæ¥è‡ªå“ªä»½è‰å•ï¼‰
*   `FeeItemID` FK â†’ T\_FeeItemï¼ˆå¯ç©ºï¼šæ¥è‡ªè‰å•æ˜ç»†ï¼‰
*   `FeeCode` varchar
*   `FeeName` nvarchar
*   `YearNo` int? â€“ å¹´è´¹æˆ–å¹´ç™»å°è´¹çš„å¹´åº¦
*   `FeeType` enum â€“ GOV / SERVICE / MISC
*   `Quantity` decimal
*   `UnitPrice` decimal
*   `Amount` decimal â€“ æ˜ç»†é‡‘é¢ï¼ˆè´¦å•å¸ç§ï¼‰
*   `Currency` varchar â€“ åŸå¸ç§ï¼ˆå¦‚è‰å•å¸ç§ï¼‰
*   `LocalAmount` decimal â€“ æ¢ç®—åˆ°è´¦å•å¸ç§çš„é‡‘é¢ï¼ˆé€šå¸¸=Amountï¼Œè§† ExchangeRateï¼‰
*   `TaxRate` decimal? â€“ å¦‚éœ€è¦ç¨åŠ¡ä¿¡æ¯
*   `TaxAmount` decimal?
*   `Remark` nvarchar

**è¯´æ˜**

*   å¯¹åº”è‰å•ç”Ÿæˆçš„è´¦å•æ—¶ï¼ŒDraftID/FeeItemID ç­‰ç”¨äºè¿½è¸ªï¼›
*   æ‰‹å·¥è´¦å•æ—¶å¯æ—  DraftID/FeeItemIDã€‚

***

### 6.3.3 `T_Payment` â€“ æ”¶æ¬¾å•ï¼ˆå¤´ï¼‰

**å­—æ®µ**

*   `PaymentID` PK
*   `ClientID` FK â†’ T\_Client
*   `PayNo` varchar â€“ æ”¶æ¬¾å•å·ï¼ˆå”¯ä¸€ï¼‰
*   `PayDate` date â€“ æ”¶æ¬¾æ—¥æœŸ
*   `Currency` varchar â€“ æ”¶æ¬¾å¸ç§
*   `Amount` decimal â€“ æ”¶æ¬¾æ€»é‡‘é¢
*   `ExchangeRate` decimal â€“ æ”¶æ¬¾å¸ç§å¯¹åŸºç¡€å¸ç§æ±‡ç‡
*   `PayMethod` varchar â€“ ä»˜æ¬¾æ–¹å¼ï¼ˆç°é‡‘/è½¬è´¦/æ”¯ç¥¨/æ±‡ç¥¨ç­‰ï¼‰
*   `BankRefNo` varchar â€“ é“¶è¡Œæµæ°´å·/æ”¯ç¥¨å·
*   `Remark` nvarchar
*   `CreatedBy`, `CreatedAt`, `UpdatedBy`, `UpdatedAt`

***

### 6.3.4 `T_PaymentLine` â€“ æ”¶æ¬¾åˆ†é…è¡Œ

**ç”¨é€”**

ä¸€ç¬” Payment å¯æŒ‰æ¡ˆä»¶æˆ–ç”¨é€”æ‹†åˆ†ä¸ºè‹¥å¹²è¡Œï¼Œæ¯è¡Œå†é€šè¿‡ Offset åˆ†é…åˆ°è´¦å•ã€‚

**å­—æ®µ**

*   `PaymentLineID` PK
*   `PaymentID` FK â†’ T\_Payment
*   `CaseID` FK â†’ T\_Caseï¼ˆå¯ç©ºï¼‰ï¼š
    *   è‹¥é¢„å…ˆçŸ¥é“è¯¥è¡Œä»…ç”¨äºæŸæ¡ˆï¼Œåˆ™å¯æŒ‡å®šï¼›
    *   è‹¥ä¸ºç©ºï¼Œåˆ™ä»£è¡¨â€œå¾…åˆ†é…é¢„æ”¶æ¬¾æ± â€ä¸€éƒ¨åˆ†ã€‚
*   `RawAmount` decimal â€“ åŸå§‹è¾“å…¥é‡‘é¢ï¼ˆè¯¥è¡Œæ€»é‡‘é¢ï¼‰
*   `AllocatedAmt` decimal â€“ å·²é€šè¿‡ Offset åˆ†é…é‡‘é¢
*   `BalanceAmt` decimal â€“ å‰©ä½™å¯åˆ†é…é‡‘é¢ï¼ˆRawAmount - AllocatedAmtï¼‰
*   `Remark` nvarchar

**è¯´æ˜**

*   è‹¥æ•´ä¸ªé¢„æ”¶æ¬¾ä¸ä¸å…·ä½“æ¡ˆä»¶ç»‘å®šï¼Œåˆ™ PaymentLine.CaseID ä¸ºç©ºï¼›
*   è‹¥å·²çŸ¥è¯¥æ¬¾åªç”¨äºæŸæ¡ˆï¼Œå¯å°† CaseID æŒ‡å®šä¸ºè¯¥æ¡ˆï¼Œç”¨äºåç»­å†²é”€å’Œç»Ÿè®¡ã€‚

***

### 6.3.5 `T_Offset` â€“ å†²é”€è®°å½•ï¼ˆè¿æ¥ PaymentLine ä¸ Billï¼‰

**å­—æ®µ**

*   `OffsetID` PK
*   `PaymentLineID` FK â†’ T\_PaymentLine
*   `BillID` FK â†’ T\_Bill
*   `OffsetAmt` decimal â€“ æœ¬æ¬¡å†²é”€é‡‘é¢
*   `OffsetDate` date â€“ å†²é”€æ—¥æœŸ
*   `CreatedBy`, `CreatedAt`
*   `IsReversed` bool â€“ æ˜¯å¦å·²åå†²é”€
*   `ReversedAt` datetime? â€“ åå†²é”€æ—¶é—´
*   `ReversedBy` FK â†’ User? â€“ æ“ä½œäºº

**è¯´æ˜**

*   æ¯æ¡ T\_Offset ä»£è¡¨ä¸€æ¬¡â€œæŸæ¡ PaymentLine å‘æŸå¼  Bill å†²é”€äº†ä¸€éƒ¨åˆ†é‡‘é¢â€ï¼›
*   é€šè¿‡ç´¯ç§¯æ‰€æœ‰ T\_Offset å¯ä»¥ç®—å‡ºï¼š
    *   å¯¹æ¯æ¡ PaymentLine å·²è¢«ä½¿ç”¨å¤šå°‘ï¼ˆAllocatedAmtï¼‰ï¼›
    *   å¯¹æ¯å¼  Bill å·²æ”¶åˆ°å¤šå°‘æ¬¾ï¼ˆAmount-Balanceï¼‰ã€‚

***

### 6.3.6 `T_Dunning` â€“ å‚¬æ¬¾å•ï¼ˆå¤´ï¼‰

**å­—æ®µ**

*   `DunningID` PK
*   `DunningNo` varchar â€“ å‚¬æ¬¾å•å·
*   `ClientID` FK â†’ T\_Client
*   `ToDate` date â€“ å‚¬æ¬¾ç»Ÿè®¡çš„æˆªæ­¢æ—¥æœŸ
*   `Currency` varchar â€“ æ˜¾ç¤ºå¸ç§ï¼ˆé€šå¸¸=å®¢æˆ·å¸ç§ï¼‰
*   `TotalAmt` decimal â€“ æˆªè‡³ ToDate çš„é€¾æœŸæœªç»“é‡‘é¢æ±‡æ€»
*   `Status` enum â€“ OPEN / SENT / CLOSED
*   `SentDate` date? â€“ å‚¬æ¬¾å‡½å‘é€æ—¥æœŸ
*   `Remark` nvarchar
*   `CreatedBy`, `CreatedAt`, `UpdatedBy`, `UpdatedAt`

***

### 6.3.7 `T_DunningLine` â€“ å‚¬æ¬¾æ˜ç»†

**å­—æ®µ**

*   `DunningLineID` PK
*   `DunningID` FK â†’ T\_Dunning
*   `BillID` FK â†’ T\_Bill
*   `BillNo`
*   `BillDate`
*   `DueDate`
*   `OutstandingAmt` decimal â€“ å‚¬æ¬¾æ—¶è¯¥è´¦å•æœªç»“ä½™é¢
*   `Remark` nvarchar

**è¯´æ˜**

*   `OutstandingAmt` æ˜¯å¿«ç…§å€¼ï¼Œç”¨äºå‚¬æ¬¾å‡½å†…å®¹ï¼›
*   ä¹‹åå®é™…æ”¶æ¬¾å¯æ›´æ–° `T_Bill.Balance`ï¼Œä½†ä¸ä¼šä¿®æ”¹å†å² DunningLine ä¸­çš„æ•°å€¼ã€‚

***

## 6.4 è´¦å•ç”Ÿæˆä¸ç»´æŠ¤ï¼ˆUS-BL-01/02ï¼ŒFR-BL-01/02/03ï¼‰

### 6.4.1 ä»è´¹ç”¨è‰å•ç”Ÿæˆè´¦å•ï¼ˆFR-BL-02ï¼‰

**å…¥å£**

*   â€œè´¹ç”¨è‰å•â€åˆ—è¡¨ â†’ é€‰ä¸­å¤šä¸ªè‰å• â†’ â€œç”Ÿæˆè´¦å•â€

**å‰ç½®æ¡ä»¶**

*   æ‰€é€‰è‰å•çš„ `CaseID` å¯¹åº”åŒä¸€ `ClientID`ï¼ˆå³åŒä¸€å®¢æˆ·ï¼‰
*   æˆ–è€…ç”¨æˆ·é€‰æ‹©â€œæ¯æ¡ˆä¸€å¼ è´¦å•â€ï¼Œå…è®¸ä¸åŒå®¢æˆ·ï¼Œè¿™éœ€è¦é¢å¤–çš„ä¸šåŠ¡çº¦å®šï¼ˆæ¨èæŒ‰å®¢æˆ·èšåˆï¼‰ã€‚

**æ­¥éª¤**

1.  Finance é€‰æ‹©ä¸€ä¸ªå®¢æˆ·çš„è‹¥å¹²è‰å•ï¼ˆå¯èƒ½ä¸åŒæ¡ˆä»¶ï¼‰ï¼›
2.  ç‚¹å‡»â€œç”Ÿæˆè´¦å•â€ï¼Œç³»ç»Ÿå¼¹å‡ºè´¦å•å¤´ä¿¡æ¯é…ç½®ç•Œé¢ï¼›

**è´¦å•å¤´å­—æ®µ**

*   `ClientID`ï¼šè‡ªåŠ¨=è¯¥å®¢æˆ·
*   `Direction=AR`ï¼šåº”æ”¶è´¦å•
*   `BillDate`ï¼šé»˜è®¤=ä»Šæ—¥ï¼Œå¯è°ƒ
*   `DueDate`ï¼šé»˜è®¤=BillDate+é»˜è®¤è´¦æœŸå¤©æ•°ï¼ˆå¦‚ 30 æ—¥ï¼‰
*   `Currency`ï¼šé»˜è®¤=å®¢æˆ·å¸ç§
*   `DiscountRate`ï¼šæ•´ä½“æŠ˜æ‰£ç‡ï¼ˆä»…ä½œç”¨äºæœåŠ¡è´¹ï¼›å¯é€‰ï¼‰

**ç”Ÿæˆæ˜ç»†**

å¯¹æ¯ä¸ª `T_FeeDraft` çš„ `T_FeeItem`ï¼š

*   å¦‚æœ FeeType=GOV/SERVICE/MISC å‡å¯ç”Ÿæˆï¼›
*   åˆ›å»º `T_BillItem`ï¼š
    *   CaseID=FeeDraft.CaseID
    *   DraftID/ FeeItemID å¯¹åº”åŸè‰å•è®°å½•
    *   FeeCode/FeeName/YearNo/FeeType/Amount/Currency/LocalAmount å¤åˆ¶
*   æ›´æ–°è´¦å•å¤´é‡‘é¢ï¼š
    *   TotalGov += LocalAmount where FeeType=GOV
    *   TotalService += LocalAmount where FeeType=SERVICE
    *   TotalMisc += LocalAmount where FeeType=MISC
*   è´¦å•æ€»é¢ï¼šAmount=TotalGov+TotalService+TotalMiscï¼›Balance=Amount

**æ ¡éªŒ**

*   V-BL-01ï¼šæ‰€é€‰è‰å•è‹¥å±äºä¸åŒ ClientID è€Œé€‰æ‹©ç”Ÿæˆå•ä¸€è´¦å•ï¼Œåº”é˜»æ­¢æˆ–è¦æ±‚æ‹†åˆ†ï¼›
*   V-BL-02ï¼šCurrency ä¸å¾—ä¸ºç©ºï¼›å¦‚è‰å•æ˜ç»†å¸ç§ä¸åŒï¼Œéœ€æä¾›æ±‡ç‡ï¼Œè½¬æ¢åæ–¹å¯ç”Ÿæˆè´¦å•ï¼›
*   V-BL-03ï¼šè‡³å°‘æœ‰ä¸€æ¡ `T_BillItem`ï¼›
*   V-BL-04ï¼šDirection=AR çš„è´¦å• Amount ä¸å®œä¸ºè´Ÿï¼›å¦‚éœ€è´Ÿæ•°ï¼Œåˆ™å»ºè®®ä½¿ç”¨è°ƒæ•´è´¦å•ï¼ˆè§ 6.4.2ï¼‰ã€‚

### 6.4.2 æ‰‹å·¥è´¦å•ï¼ˆFR-BL-03ï¼‰

**åœºæ™¯**

*   æ‰‹å·¥è°ƒæ•´æ€§è´¦å•ï¼ˆCredit Noteï¼‰
*   åº”ä»˜è´¦å•ï¼ˆAPï¼Œä¾‹å¦‚ä»˜ç»™å¤–æ‰€æˆ–ä¾›åº”å•†ï¼‰
*   æ— è‰å•æƒ…å†µä¸‹çš„å†å²è´¦å•å½•å…¥

**UI å­—æ®µ**

*   `BillNo`ï¼šè‡ªåŠ¨ç”Ÿæˆå¯ä¿®æ”¹
*   `ClientID`
*   `Direction`ï¼šAR/AP
*   `BillDate`, `DueDate`
*   `Currency`, `ExchangeRate`
*   `DiscountRate`
*   `Remark`

**æ˜ç»†**

*   æ‰‹åŠ¨æ·»åŠ  `T_BillItem` è¡Œï¼ˆç±»ä¼¼è‰å•æ˜ç»†ï¼‰ï¼š
    *   CaseIDï¼ˆå¯ç©ºï¼‰
    *   FeeCode/Name
    *   YearNoï¼ˆå¦‚é€‚ç”¨ï¼‰
    *   FeeType, Quantity, UnitPrice, Amount, Currency, LocalAmount
    *   Remark

**æ ¡éªŒ**

*   V-BL-05ï¼šDirection=AP æ—¶ï¼Œå¯å…è®¸ Amount>0 è¡¨ç¤ºäº‹åŠ¡æ‰€å¯¹å®¢æˆ·æˆ–ä¾›åº”å•†çš„â€œåº”ä»˜â€ï¼›å±•ç°é€»è¾‘ä¸Šè¦æ˜ç¡®ä¸ºâ€œåº”ä»˜è´¦å•â€ï¼Œä¸è¿›å…¥å®¢æˆ·åº”æ”¶ç»Ÿè®¡ï¼›
*   V-BL-06ï¼šCaseID ä¸ºç©ºæ—¶æ ‡è®°ä¸ºâ€œéæ¡ˆä»¶è´¦å•â€ï¼›
*   V-BL-07ï¼šè‡³å°‘æœ‰ä¸€æ¡æ˜ç»†ï¼ŒAmount åº”ç­‰äºæ˜ç»† LocalAmount åˆè®¡ã€‚

***

## 6.5 è´¦å•æ‰“å°ä¸æ¨¡æ¿è¾“å‡ºï¼ˆUS-BL-03ï¼ŒFR-BL-04ï¼‰

**æ¨¡æ¿æ•°æ®æº**

*   å¤´éƒ¨å­—æ®µï¼š
    *   BillNo, BillDate, DueDate, Currency, DiscountRate
    *   ClientName, ClientAddressï¼ˆä» T\_Client/T\_ClientAddressï¼‰
    *   TotalGov/TotalService/TotalMisc/Amount
*   æ˜ç»†å­—æ®µï¼š
    *   åºå·
    *   CaseNo / AppNo
    *   FeeCode/FeeName
    *   YearNo
    *   FeeType
    *   Amount

**è¾“å‡ºå½¢å¼**

*   ä¸­æ–‡è´¦å•ï¼ˆRMB / æœ¬å¸ç‰ˆï¼‰
*   è‹±æ–‡è´¦å•ï¼ˆå¦‚å¤–æ‰€/å¤–ä¼éœ€è¦ï¼‰
*   æ¨ªå¼/çºµå¼è¡¨æ ¼å½¢å¼ï¼ˆé€šè¿‡ä¸åŒ Word æ¨¡æ¿å®ç°ï¼‰
*   Excel å¯¼å‡ºï¼ˆç”¨äºé‚®ä»¶æˆ–å†…éƒ¨åˆ†æï¼‰

**æµç¨‹**

1.  åœ¨è´¦å•è¯¦æƒ…ç•Œé¢ç‚¹å‡»â€œæ‰“å°/å¯¼å‡ºâ€ï¼›
2.  ç”¨æˆ·é€‰æ‹©æ¨¡æ¿ï¼ˆå¦‚â€œä¸­æ–‡æ ‡å‡†è´¦å•â€ã€â€œè‹±æ–‡è´¦å•â€ç­‰ï¼‰ï¼›
3.  ç³»ç»Ÿé€šè¿‡æ¨¡æ¿å¼•æ“ï¼ˆdocxtplï¼‰ç”Ÿæˆ Word æ–‡ä»¶ï¼Œå¹¶æä¾›ä¸‹è½½ï¼›
4.  ä»»æ„ç”Ÿæˆçš„ Word æ–‡ä»¶å¯é€šè¿‡â€œç”µå­ä¸­é—´æ–‡ä»¶â€æ¨¡å—ä½œä¸º T\_Document+é™„ä»¶å­˜æ¡£ï¼ˆå¯é€‰ï¼‰ã€‚

***

## 6.6 æ”¶æ¬¾ç™»è®°ä¸è´¦å•å†²é”€ï¼ˆUS-BL-04/05ï¼ŒFR-BL-05/06ï¼‰

### 6.6.1 æ”¶æ¬¾å• `T_Payment` çš„åˆ›å»º

**å…¥å£**

*   èœå•ï¼šâ€œè´¢åŠ¡ â†’ æ”¶æ¬¾ç™»è®°â€ï¼›
*   æˆ–è´¦å•è¯¦æƒ…é¡µä¸Šçš„â€œç™»è®°æ”¶æ¬¾â€å¿«æ·å…¥å£ã€‚

**å­—æ®µ**

*   `ClientID`
*   `PayNo`ï¼ˆè‡ªåŠ¨ç¼–å·ï¼‰
*   `PayDate` â€“ å¿…å¡«
*   `Currency` â€“ å¿…å¡«
*   `Amount` â€“ å¿…å¡«
*   `PayMethod`, `BankRefNo`, `Remark`

**æ ¡éªŒ**

*   V-PM-01ï¼šAmount â‰¥ 0ï¼›
*   V-PM-02ï¼šPayDate ä¸å¾—è¶…å‡ºå½“å‰æ—¥æœŸå¤ªè¿œï¼ˆé˜²æ­¢é”™è¯¯ï¼‰ï¼›
*   V-PM-03ï¼šåŒä¸€ ClientID + PayNo åº”å”¯ä¸€ã€‚

**ç”Ÿæˆ PaymentLine**

*   é»˜è®¤ç”Ÿæˆä¸€æ¡ `T_PaymentLine`ï¼š
    *   RawAmount=Amount
    *   AllocatedAmt=0
    *   BalanceAmt=Amount
    *   CaseID å¯ç©ºï¼ˆè§†æ˜¯å¦ç«‹å³æŒ‡å®šæ¡ˆåˆ«ï¼‰ã€‚

***

### 6.6.2 å†²é”€åˆ°è´¦å•ï¼ˆT\_Offsetï¼ŒFR-BL-05ï¼‰

**å…¥å£**

*   â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼š
    *   å·¦ä¾§ï¼šPayment/PaymentLine åˆ—è¡¨
    *   å³ä¾§ï¼šè¯¥å®¢æˆ·æœªç»“è´¦å•åˆ—è¡¨

**æ­¥éª¤**

1.  é€‰æ‹©æŸæ¡ `T_PaymentLine`ï¼ˆBalanceAmt>0ï¼‰ï¼›
2.  ç³»ç»ŸæŸ¥è¯¢è¯¥å®¢æˆ·æ‰€æœ‰ `T_Bill`ï¼ŒStatus âˆˆ {UNSETTLED, PARTIALLY\_SETTLED}ï¼›
3.  ç”¨æˆ·åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ª Billï¼Œå¹¶ä¸ºæ¯ä¸ª Bill è¾“å…¥åˆ†é…é‡‘é¢ OffsetAmtï¼›
4.  æ ¡éªŒï¼š
    *   V-OF-01ï¼šå¯¹æŸä¸ª PaymentLineï¼Œæœ¬æ¬¡æ‰€æœ‰ OffsetAmt ä¹‹å’Œä¸å¾—è¶…è¿‡ `BalanceAmt`ï¼›
    *   V-OF-02ï¼šå¯¹æŸä¸ª Billï¼Œæ‰€æœ‰æœ¬æ¬¡ OffsetAmt ä¹‹å’Œä¸å¾—è¶…è¿‡ `Bill.Balance`ï¼›
5.  ä¿å­˜å†²é”€ï¼š

å¯¹æ¯ä¸ª `(PaymentLine, Bill)`ï¼š

*   æ–°å¢ `T_Offset`ï¼š
    *   PaymentLineID=é€‰ä¸­çš„ PaymentLineID
    *   BillID=é€‰ä¸­çš„ BillID
    *   OffsetAmt=è¾“å…¥é‡‘é¢
    *   OffsetDate=å½“å‰æ—¥æœŸ
    *   CreatedBy/At
*   æ›´æ–° `T_PaymentLine`ï¼š
    *   AllocatedAmt += OffsetAmt
    *   BalanceAmt = RawAmount - AllocatedAmt
*   æ›´æ–° `T_Bill`ï¼š
    *   Balance -= OffsetAmt
    *   è‹¥ Balance == 0 â†’ Status=SETTLED
    *   è‹¥ 0 < Balance < Amount â†’ Status=PARTIALLY\_SETTLED

**æ•ˆæœ**

*   ä¸€ç¬”æˆ–å¤šç¬”æ”¶æ¬¾è¢«åˆ†é…åˆ°å¤šä¸ªè´¦å•ï¼Œè´¦å•ä½™é¢éšä¹‹å‡å°‘ï¼›
*   è‹¥ä½¿ç”¨çš„æ˜¯é¢„æ”¶æ¬¾ PaymentLineï¼Œåˆ™ä»£è¡¨â€œæ¶ˆè€—é¢„æ”¶æ¬¾â€ã€‚

***

### 6.6.3 å†²é”€åè½¬ï¼ˆåå†²é”€ï¼ŒFR-BL-06ï¼‰

**éœ€æ±‚**

*   å†²é”€é”™è¯¯æˆ–ä¸šåŠ¡å˜æ›´æ—¶ï¼Œéœ€è¦æ’¤é”€æŸäº› Offset çš„å½±å“ï¼Œæ¢å¤è´¦å•ä¸ Payment çš„åŸå§‹çŠ¶æ€ã€‚

**å…¥å£**

*   â€œåå†²é”€â€ç•Œé¢ï¼Œæä¾›æŒ‰æ—¶é—´/å®¢æˆ·æ£€ç´¢ T\_Offsetï¼š
    *   æŒ‰ OffsetDate èŒƒå›´
    *   æŒ‰ ClientID
    *   æŒ‰ BillNo/PayNo

**æ­¥éª¤**

1.  è´¢åŠ¡ï¼ˆå…·å¤‡é«˜æƒé™ï¼‰ç­›é€‰å‡ºéœ€è¦åè½¬çš„ T\_Offset è®°å½•ï¼›
2.  å‹¾é€‰ä¸€æ¡æˆ–å¤šæ¡ï¼Œç‚¹å‡»â€œåå†²é”€â€ï¼›
3.  ç³»ç»Ÿæ‰§è¡Œï¼š

å¯¹æ¯æ¡ `T_Offset`ï¼š

*   å°† `IsReversed=true`, `ReversedAt=å½“å‰æ—¶é—´`, `ReversedBy=å½“å‰ç”¨æˆ·`ï¼›
*   é€†å‘è°ƒæ•´ï¼š
    *   å¯¹åº” `T_PaymentLine`:
        *   AllocatedAmt -= OffsetAmt
        *   BalanceAmt += OffsetAmt
    *   å¯¹åº” `T_Bill`:
        *   Balance += OffsetAmt
        *   è‹¥ Bill.Status=SETTLED ä¸” Balance>0 â†’ Status=PARTIALLY\_SETTLED æˆ– UNSETTLED

**é™åˆ¶**

*   ä»…å…è®¸åå†²é”€åœ¨æŸä¸€æ—¶é—´çª—å£å†…çš„ Offsetï¼ˆä¾‹å¦‚ 30 å¤©å†…ï¼‰ï¼Œå…·ä½“ç”±ä¸šåŠ¡ç­–ç•¥å†³å®šï¼›
*   è‹¥æ¶‰åŠè·¨æœŸè´¦åŠ¡ç»“ç®—ï¼Œé¡»éµå¾ªè´¢åŠ¡ç®¡ç†è§„å®šï¼›
*   å¯ä»¥åœ¨ T\_Offset ä¸Šè®°å½•æ›´å¤šå®¡è®¡ä¿¡æ¯ï¼ˆä¸ºä»€ä¹ˆåå†²é”€ï¼‰ã€‚

***

## 6.7 é¢„æ”¶æ¬¾ç®¡ç†ï¼ˆUS-BL-07ï¼ŒFR-BL-09ï¼‰

> å¯¹åº”æˆ‘ä»¬ä¹‹å‰çš„ E2E åœºæ™¯ Fï¼šå®¢æˆ·é¢„æ”¶æ¬¾ & è´¦å•è°ƒæ•´ã€‚

### 6.7.1 é¢„æ”¶æ¬¾ç™»è®°

**åœºæ™¯**

*   å®¢æˆ·é¢„å…ˆæ”¯ä»˜ä¸€ç¬”æ¬¾é¡¹ï¼Œç”¨äºæœªæ¥ä¸€æ®µæ—¶é—´çš„å„ç§æœåŠ¡ï¼›
*   å°šæœªäº§ç”Ÿå¯¹åº”è´¦å•ã€‚

**å¤„ç†**

1.  åœ¨â€œæ”¶æ¬¾ç™»è®°â€ä¸­å½•å…¥ `T_Payment`ï¼š
    *   `ClientID`, `PayDate`, `Currency`, `Amount`
    *   `Remark` = â€œé¢„æ”¶æ¬¾â€æˆ–ç±»ä¼¼è¯´æ˜
2.  ç”Ÿæˆ `T_PaymentLine`ï¼š
    *   CaseID = NULLï¼ˆä¸€èˆ¬ä¸ºâ€œé€šç”¨é¢„æ”¶â€ï¼‰
    *   RawAmount=Amount
    *   AllocatedAmt=0
    *   BalanceAmt=Amount

**æ•ˆæœ**

*   åœ¨â€œå®¢æˆ·é¢„æ”¶æ¬¾â€æŠ¥è¡¨ä¸­ï¼Œè¿™æ¡ PaymentLine ä½œä¸ºä¸€æ¡é¢„æ”¶è®°å½•æ˜¾ç¤ºï¼šBalanceAmt>0ã€‚

### 6.7.2 ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€åç»­è´¦å•

åç»­å¯¹è¯¥å®¢æˆ·å¼€å‡ºè‹¥å¹²è´¦å•ï¼ˆä¾‹å¦‚æ–°æ¡ˆç”³è¯·è´¹è´¦å•ã€å¹´è´¹è´¦å•ã€é¡¾é—®è´¹è´¦å•ï¼‰ï¼Œè´¢åŠ¡å¸Œæœ›â€œç›´æ¥ç”¨é¢„æ”¶æ¬¾æŠµæ‰£â€ã€‚

**æµç¨‹**

1.  åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼Œé€‰æ‹©é¢„æ”¶æ¬¾å¯¹åº”çš„ `T_PaymentLine`ï¼ˆBalanceAmt>0ï¼‰ï¼›
2.  åœ¨å³ä¾§å‹¾é€‰æ–°è´¦å•ï¼Œè¾“å…¥ OffsetAmtï¼Œä»£è¡¨â€œä»é¢„æ”¶æ¬¾ä¸­æ‹¿å¤šå°‘æŠµæ‰£è¯¥è´¦å•â€ï¼›
3.  ä¿å­˜åï¼š
    *   å¯¹ PaymentLineï¼šAllocatedAmt/BalancedAmt ç›¸åº”å˜åŒ–ï¼›

*   å¯¹ Billï¼šBalance å‡å°‘ï¼Œè‹¥æŠµæ‰£å…¨é¢åˆ™ Status=SETTLEDï¼›
*   é€šè¿‡æ‹†åˆ† Offset æ›´æ–° `T_CaseReceipt`ï¼ˆå‚è§æ¨¡å—å››/è´¹ç”¨æƒ…å†µï¼‰ï¼Œå°†é¢„æ”¶åœ¨æ¡ˆå·çº§åˆ«è½¬ä¸ºå®æ”¶ã€‚

**é¢„æ”¶ä½™é¢**

*   å½“ PaymentLine.BalanceAmt>0 ä¸”æ‰€æœ‰è´¦å•éƒ½å·²ç»“æ¸…æ—¶ï¼Œä»£è¡¨ä»æœ‰æœªä½¿ç”¨çš„é¢„æ”¶æ¬¾ï¼›
*   å¯ä»¥ç»§ç»­ç”¨äºæœªæ¥è´¦å•ï¼Œæˆ–é€šè¿‡è´¢åŠ¡æ“ä½œé€€è¿˜ç»™å®¢æˆ·ï¼ˆé€šè¿‡è´Ÿè´¦å•/é€€æ¬¾æµç¨‹å¤„ç†ï¼‰ã€‚

### 6.7.3 å®¢æˆ·é¢„æ”¶æ¬¾æŠ¥è¡¨

*   æŒ‰å®¢æˆ·æ±‡æ€»æ‰€æœ‰ PaymentLineï¼š
    *   æ˜¾ç¤ºï¼šPayNo/PayDate/åŸé‡‘é¢/BalanceAmt/Remark
    *   æ±‡æ€»ï¼šå®¢æˆ·æ€»é¢„æ”¶ä½™é¢
*   æä¾›â€œé¢„æ”¶æ˜ç»†å¯¼å‡ºâ€åŠŸèƒ½ã€‚

***

## 6.8 å‚¬æ¬¾ä¸åè´¦ï¼ˆUS-BL-06ï¼ŒFR-BL-07/08ï¼‰

> å¯¹åº”æˆ‘ä»¬ä¹‹å‰çš„ E2E åœºæ™¯ Gï¼šå‚¬æ¬¾ & åè´¦ç”Ÿå‘½å‘¨æœŸã€‚

### 6.8.1 é€¾æœŸè´¦å•è¯†åˆ«

**æ¡ä»¶**

*   `Direction=AR`ï¼ˆåº”æ”¶è´¦å•ï¼‰
*   `Status âˆˆ {UNSETTLED, PARTIALLY_SETTLED}`
*   `IsBadDebt = false`
*   `DueDate <= æŸä¸ªæˆªæ­¢æ—¥æœŸ ToDate`
*   `Balance > 0`

**è´¦é¾„è®¡ç®—**

*   `DaysPastDue = Today - DueDate`ï¼ŒæŒ‰è´¦é¾„åŒºé—´ç»Ÿè®¡ï¼š0â€“30ã€31â€“60ã€61â€“90ã€>90 å¤©ç­‰ã€‚

### 6.8.2 ç”Ÿæˆå‚¬æ¬¾å•ï¼ˆT\_Dunning/T\_DunningLineï¼ŒFR-BL-08ï¼‰

**æ­¥éª¤**

1.  åœ¨â€œå‚¬æ¬¾ç®¡ç†â€ç•Œé¢ï¼Œé€‰æ‹©ï¼š
    *   ClientID
    *   ToDateï¼ˆæˆªè‡³æ—¥æœŸï¼‰
2.  ç³»ç»Ÿåº”ç”¨ä¸Šè¿°é€¾æœŸæ¡ä»¶æ£€ç´¢è´¦å•ï¼›
3.  ç”¨æˆ·ç¡®è®¤åˆ—è¡¨ â†’ ç‚¹å‡»â€œç”Ÿæˆå‚¬æ¬¾å•â€ï¼š
    *   æ–°å¢ `T_Dunning`ï¼š
        *   DunningNoï¼ˆè‡ªåŠ¨ç¼–å·ï¼‰ã€ClientIDã€ToDateã€Currencyã€TotalAmtï¼ˆæ‰€æœ‰æœªç»“ä½™é¢ä¹‹å’Œï¼‰ã€Status=OPENï¼›
    *   ä¸ºæ¯ä¸ªè´¦å•æ–°å¢ `T_DunningLine`ï¼š
        *   è®°å½• BillID/BillNo/BillDate/DueDate/OutstandingAmtï¼ˆ=Bill.Balanceï¼‰ï¼›

### 6.8.3 å‚¬æ¬¾å‡½ç”Ÿæˆä¸å‘é€

åœ¨å‚¬æ¬¾å•è¯¦æƒ…é¡µï¼š

1.  ç”¨æˆ·é€‰æ‹©â€œç”Ÿæˆå‚¬æ¬¾å‡½â€ï¼š
    *   é€‰æ‹©æ¨¡æ¿ï¼ˆä¸­æ–‡/è‹±æ–‡ç‰ˆï¼‰
    *   æ•°æ®æº = `T_Dunning + T_DunningLine`
2.  æ¨¡æ¿å¼•æ“ç”Ÿæˆ Word æ–‡æ¡£ï¼š
    *   åŒ…å«å®¢æˆ·åç§°/åœ°å€/æŠ¬å¤´ä¿¡æ¯/è´¦å•æ˜ç»†/åˆè®¡æ¬ æ¬¾ï¼›
3.  å¯é€‰ï¼šå°†å‚¬æ¬¾å‡½ä½œä¸º T\_Document è®°å½•ï¼ˆDocType=CLIENT\_OUT, Template=DUNNING\_LETTERï¼‰ï¼Œå¹¶ä¸Šä¼  Word æ–‡ä»¶åˆ° T\_DocAttachmentã€‚
4.  æ›´æ–° `T_Dunning`ï¼š
    *   `Status = SENT`
    *   `SentDate = Today`

### 6.8.4 å‚¬æ¬¾åçš„æ”¶æ¬¾ä¸è´¦å•å˜åŒ–

å®¢æˆ·åœ¨å‚¬æ¬¾åæ”¯ä»˜éƒ¨åˆ†/å…¨éƒ¨æ¬¾é¡¹ï¼š

*   Finance åœ¨ `T_Payment/T_PaymentLine` ä¸­ç™»è®°æ”¶æ¬¾ï¼›
*   åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼Œå°†æ”¶æ¬¾åˆ†é…åˆ°ç›¸åº”è´¦å•ï¼›
*   æ›´æ–° `T_Bill.Balance/Status` ä¸ä¸ªæ¡ˆæ”¶æ¬¾ `T_CaseReceipt`ï¼›
*   åç»­è‹¥éœ€è¦ï¼Œå¯åœ¨ Dunning æŠ¥è¡¨ä¸­åˆ†æâ€œå‚¬æ¬¾å N å¤©çš„å›æ¬¾æƒ…å†µâ€ã€‚

### 6.8.5 æ ‡è®°åè´¦ï¼ˆFR-BL-07ï¼‰

**é€‰æ‹©è´¦å•**

*   åœ¨â€œåº”æ”¶è´¦æ¬¾â€æˆ–â€œé€¾æœŸè´¦æ¬¾â€æŠ¥è¡¨ä¸­ï¼Œå¯¹ç¬¦åˆç‰¹å®šè´¦é¾„å’Œé‡‘é¢çš„è´¦å•è¿›è¡Œç­›é€‰ï¼›

**æ ‡è®°åè´¦**

1.  åœ¨è´¦å•è¯¦æƒ…é¡µç‚¹å‡»â€œæ ‡è®°åè´¦â€ï¼›
2.  å¡«å†™ï¼š
    *   `BadDebtDate` â€“ åè´¦ç¡®è®¤æ—¥
    *   `BadDebtReason` â€“ æ–‡æœ¬è¯´æ˜ï¼ˆå¦‚å®¢æˆ·ç ´äº§/å¾‹å¸ˆæ„è§/å†…éƒ¨å†³ç­–ï¼‰
3.  æ›´æ–° `T_Bill`ï¼š
    *   `IsBadDebt=true`
    *   `Status=BAD_DEBT`
    *   `BadDebtDate`, `BadDebtReason` å¡«å…¥

**å½±å“**

*   åœ¨åº”æ”¶/é€¾æœŸè´¦æ¬¾æŠ¥è¡¨ä¸­ï¼Œä¸å†æŠŠ BAD\_DEBT è´¦å•è®¡å…¥â€œå¾…æ”¶åº”æ”¶â€ï¼›
*   åœ¨åè´¦æŠ¥è¡¨ä¸­ä¸“é—¨åˆ—å‡ºè¿™äº›è´¦å•åŠé‡‘é¢ã€‚

### 6.8.6 åè´¦åæ”¶å›æ¬¾é¡¹ä¸æ¢å¤

å³ä½¿æ ‡è®°ä¸º BAD\_DEBTï¼Œç³»ç»Ÿä»å…è®¸ï¼š

1.  ç™»è®° Payment/T\_PaymentLineï¼›
2.  å†²é”€ BAD\_DEBT è´¦å•ï¼ˆOffsetï¼‰ï¼Œå‡å°‘ `T_Bill.Balance`ï¼›

**æ˜¯å¦å–æ¶ˆåè´¦æ ‡è®°**

*   ç­–ç•¥ Aï¼š
    *   åè´¦ç¡®è®¤æ˜¯ä¸€ä¸ªå†å²ä¼šè®¡äº‹ä»¶ï¼Œä¸å› åç»­å›æ¬¾è€Œæ”¹å˜ï¼›
    *   è´¦å•ä»ä¿æŒ Status=BAD\_DEBTï¼Œä»… Balance å‡å°‘ï¼›
    *   å°†å›æ¬¾è§†ä¸ºâ€œåè´¦è½¬å›æ”¶ç›Šâ€ã€‚
*   ç­–ç•¥ Bï¼š
    *   å¦‚æœè´¦å•å¤§éƒ¨åˆ†/å…¨éƒ¨æ”¶å›ï¼Œå¯ä»¥é€šè¿‡â€œå–æ¶ˆåè´¦â€æ“ä½œï¼š
        *   è®¾ç½® `IsBadDebt=false`ï¼›
        *   `BadDebtDate/Reason` å¯ä»¥ä¿ç•™åœ¨å®¡è®¡æ—¥å¿—ä¸­æˆ–å­˜æ¡£å­—æ®µï¼›
        *   `Status` æ ¹æ®å½“å‰ Balance é‡ç®—ï¼šBalance=0 â†’ SETTLEDï¼›Balance>0 â†’ PARTIALLY\_SETTLED/UNSETTLEDã€‚

å…·ä½“é‡‡ç”¨å“ªç§ç­–ç•¥ç”±å®æ–½æ–¹çš„è´¢åŠ¡æ”¿ç­–å†³å®šï¼Œç³»ç»Ÿå¯æä¾›ä¸¤ç§æ¨¡å¼é…ç½®ã€‚

***

## 6.9 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ï¼‰

### 6.9.1 User Story â†’ FR â†’ ç« èŠ‚æ˜ å°„ï¼ˆè¡¨ 9ï¼‰

| US                 | æ¶‰åŠ FR                 | ä¸»è¦ç« èŠ‚                             | è¯´æ˜                                                                                                                                               |
| ------------------ | --------------------- | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| US-BL-01 ä»è‰å•ç”Ÿæˆè´¦å•   | FR-BL-01, FR-BL-02    | 6.3.1, 6.3.2, 6.4.1              | `T_Bill/T_BillItem` å®šä¹‰è´¦å•ä¸æ˜ç»†ç»“æ„ï¼›6.4.1 æè¿°ä» `T_FeeDraft/T_FeeItem` ç”Ÿæˆè´¦å•çš„ UIã€å­—æ®µæ˜ å°„å’Œæ ¡éªŒï¼ˆå•å®¢æˆ·ã€å¸ç§ã€è‡³å°‘ä¸€æ¡æ˜ç»†ï¼‰ã€‚                                                  |
| US-BL-02 æ‰‹å·¥ç»´æŠ¤è´¦å•    | FR-BL-01, FR-BL-03    | 6.3.1, 6.3.2, 6.4.2              | 6.4.2 æè¿°æ‰‹å·¥è´¦å•åˆ›å»ºï¼ŒåŒ…æ‹¬åº”æ”¶/åº”ä»˜æ–¹å‘ã€CaseID å¯ç©ºã€è´Ÿè´¦å•/è°ƒæ•´è´¦å•ç­‰ï¼Œé…åˆå­—æ®µæ ¡éªŒã€‚                                                                                             |
| US-BL-03 è´¦å•æ‰“å°ä¸æ¨¡æ¿è¾“å‡º | FR-BL-04              | 6.5                              | å®šä¹‰è´¦å•æ¨¡æ¿æ•°æ®æºå­—æ®µï¼ˆå¤´éƒ¨+æ˜ç»†ï¼‰å’Œ Word/Excel æ¨¡æ¿è¾“å‡ºæµç¨‹ã€‚                                                                                                           |
| US-BL-04 æ”¶æ¬¾ç™»è®°ä¸è´¦å•å†²é”€ | FR-BL-05, éƒ¨åˆ† FR-BL-09 | 6.3.3â€“6.3.5, 6.6.1, 6.6.2, 6.7.2 | `T_Payment/T_PaymentLine/T_Offset` å»ºæ¨¡æ”¶æ¬¾ä¸å†²é”€ï¼›6.6 è¯¦ç»†è¯´æ˜æ”¶æ¬¾ç™»è®°ä¸å†²é”€é€»è¾‘å’Œæ ¡éªŒï¼›ä¸é¢„æ”¶æ¬¾éƒ¨åˆ† 6.7.2 è”åŠ¨æ˜¾ç¤ºâ€œé¢„æ”¶â†’è´¦å•å†²é”€â€çš„è¿‡ç¨‹ã€‚                                                   |
| US-BL-05 å†²é”€åè½¬      | FR-BL-06              | 6.3.5, 6.6.3                     | 6.6.3 æè¿°åå†²é”€æ“ä½œï¼Œé€šè¿‡è®¾ç½® `T_Offset.IsReversed` å¹¶é€†å‘è°ƒæ•´ `T_PaymentLine.AllocatedAmt/BalanceAmt` ä¸ `T_Bill.Balance/Status`ã€‚                                |
| US-BL-06 åè´¦ä¸å‚¬æ¬¾ç®¡ç†   | FR-BL-07, FR-BL-08    | 6.3.1, 6.3.6, 6.3.7, 6.8         | 6.3.1 ä¸­çš„ `IsBadDebt/Status=BAD_DEBT/BadDebtDate/Reason` æ”¯æŒåè´¦æ ‡è®°ï¼›6.3.6/6.3.7 çš„ `T_Dunning/T_DunningLine` æ”¯æŒå‚¬æ¬¾å•ï¼›6.8 æè¿°é€¾æœŸç­›é€‰ã€å‚¬æ¬¾å•ç”Ÿæˆã€å‚¬æ¬¾å‡½ã€åè´¦æ ‡è®°ä¸åè´¦åçš„æ”¶æ¬¾å¤„ç†ã€‚ |
| US-BL-07 é¢„æ”¶æ¬¾ç®¡ç†     | FR-BL-05, FR-BL-09    | 6.3.3, 6.3.4, 6.7                | PaymentLine.BalanceAmt>0 è¡¨ç¤ºé¢„æ”¶æ¬¾ï¼›6.7 è¯´æ˜é¢„æ”¶æ¬¾ç™»è®° â†’ å†²é”€è´¦å• â†’ å°†é¢„æ”¶æ¬¾è½¬åŒ–ä¸ºå…·ä½“è´¦å•åº”æ”¶/å®æ”¶ï¼Œå¹¶é€šè¿‡ T\_CaseReceipt æ˜¾ç¤ºåœ¨ä¸ªæ¡ˆè§†è§’ã€‚                                                 |

### 6.9.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 10ï¼‰

| FR ID    | æè¿°       | ä¸»è¦ç« èŠ‚                       | å­—æ®µ/æ ¡éªŒ/æµç¨‹ç‚¹                                                                                                                                                                                                                              |
| -------- | -------- | -------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| FR-BL-01 | è´¦å•å¤´/æ˜ç»†ç»“æ„ | 6.3.1, 6.3.2, 6.4.1, 6.4.2 | `T_Bill` ä¸­ Direction/Status/DiscountRate/TotalGov/TotalService/TotalMisc/Amount/Balance/IsBadDebt/BadDebtDate/BadDebtReasonï¼›`T_BillItem` ä¸­ CaseID/DraftID/FeeItemID/FeeCode/YearNo/FeeType/Amount ç­‰æ„æˆè´¦å•æ¨¡å‹ï¼›6.4.1/6.4.2 æè¿°ä»è‰å•/æ‰‹å·¥ç”Ÿæˆé€»è¾‘å’Œæ ¡éªŒã€‚ |
| FR-BL-02 | ä»è‰å•ç”Ÿæˆè´¦å•  | 6.4.1                      | é€‰æ‹©å¤šä¸ªè‰å• â†’ éªŒè¯åŒä¸€ Client/å¸ç§ â†’ ç”Ÿæˆ `T_Bill/T_BillItem`ï¼›æ ¡éªŒå•å®¢æˆ·/å¸ç§/è‡³å°‘ä¸€æ¡æ˜ç»†ç­‰ã€‚                                                                                                                                                                     |
| FR-BL-03 | çº¯æ‰‹å·¥è´¦å•    | 6.4.2                      | å¯è‡ªç”±è¾“å…¥æ˜ç»†å’Œé‡‘é¢ã€æ”¯æŒ AR/APï¼›æ ¡éªŒ CaseID å¯ç©ºï¼ŒDirection=AP çš„è§†å›¾å±•ç¤ºé€»è¾‘ï¼Œå¹¶ç¡®ä¿ Amount=æ˜ç»†åˆè®¡ã€‚                                                                                                                                                                 |
| FR-BL-04 | è´¦å•æ‰“å°     | 6.5                        | ä½¿ç”¨æ¨¡æ¿ç³»ç»Ÿï¼Œä» `T_Bill/T_BillItem/T_Client/T_ClientAddress` æ„é€ æ¨¡æ¿ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆä¸­/è‹±è´¦å• Word/Excelã€‚                                                                                                                                                      |
| FR-BL-05 | æ”¶æ¬¾ä¸å†²é”€    | 6.3.3â€“6.3.5, 6.6.1, 6.6.2  | `T_Payment/T_PaymentLine` è¡¨è®°å½•æ”¶æ¬¾æ€»é¢å’Œå‰©ä½™å¯åˆ†é…é‡‘é¢ï¼›`T_Offset` è®°å½•å†²é”€æ˜ç»†ï¼Œ6.6.2 çš„ V-OF-01/02 ç¡®ä¿å†²é”€é‡‘é¢ä¸è¶…è¿‡ PaymentLine.BalanceAmt å’Œ Bill.Balanceï¼›æ›´æ–° Balance/Statusã€‚                                                                                      |
| FR-BL-06 | åå†²é”€      | 6.3.5, 6.6.3               | åˆ©ç”¨ `T_Offset.IsReversed/ReversedAt/ReversedBy` æ ‡è¯†ä¸é€†å‘æ›´æ–° PaymentLine.AllocatedAmt/BalanceAmt å’Œ Bill.Balance/Statusã€‚                                                                                                                      |
| FR-BL-07 | åè´¦       | 6.3.1, 6.8.5, 6.8.6        | `T_Bill.IsBadDebt/Status=BAD_DEBT/BadDebtDate/BadDebtReason` å­—æ®µï¼›6.8.5 æè¿°æ ‡è®°åè´¦çš„æ“ä½œï¼›6.8.6 è¯´æ˜åè´¦åä»å¯æ”¶æ¬¾ä¸æ˜¯å¦å–æ¶ˆåè´¦æ ‡è®°çš„ç­–ç•¥ã€‚                                                                                                                           |
| FR-BL-08 | å‚¬æ¬¾å•      | 6.3.6, 6.3.7, 6.8.2, 6.8.3 | `T_Dunning/T_DunningLine` ç»“æ„ï¼›6.8.2 é€šè¿‡é€¾æœŸè´¦å•ç­›é€‰ç”Ÿæˆå‚¬æ¬¾å•ï¼›6.8.3 é€šè¿‡æ¨¡æ¿ç”Ÿæˆå‚¬æ¬¾å‡½ã€‚                                                                                                                                                                      |
| FR-BL-09 | é¢„æ”¶æ¬¾ç®¡ç†    | 6.3.3, 6.3.4, 6.7          | `T_PaymentLine.BalanceAmt>0` è¡¨ç¤ºæœªç”¨äºä»»ä½•è´¦å•çš„é¢„æ”¶æ¬¾ï¼›6.7 æè¿°é¢„æ”¶æ¬¾ç™»è®°ã€ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€è´¦å•ä»¥åŠé¢„æ”¶ä½™é¢çš„æŸ¥è¯¢æŠ¥è¡¨ã€‚                                                                                                                                                           |

***

âœ… åˆ°è¿™é‡Œï¼Œ**æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦**æ‰€æœ‰ç»†èŠ‚ï¼ˆæ•°æ®æ¨¡å‹ã€å­—æ®µçº§è¡Œä¸ºã€æ ¡éªŒä¸æµç¨‹ã€é¢„æ”¶ã€å‚¬æ¬¾ã€åè´¦å’Œ FR æ˜ å°„ï¼‰å·²ç»å®Œæ•´å†™å…¥ v2.0 æ–‡æ¡£ï¼Œæ²¡æœ‰å‹ç¼©æˆ–çœç•¥ã€‚

## 7. æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ç®¡ç†ï¼ˆAgent Commission Managementï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”æ—§ç‰ˆæ‰‹å†Œä¸­â€œé…¬é‡‘ç®¡ç†â€ç›¸å…³ç« èŠ‚ï¼Œå¹¶å®Œå…¨åˆå¹¶ä¹‹å‰æˆ‘ä»¬å†™è¿‡çš„æ‰€æœ‰ææˆç›¸å…³è®¾è®¡ä¸è¯´æ˜ï¼š
>
> *   ææˆè§„åˆ™ï¼ˆT\_CommissionRuleï¼‰
>
> *   ææˆè®°å½•ï¼ˆT\_Commissionï¼‰
>
> *   ç»“ç®—æ‰¹æ¬¡åŠç»“ç®—æ˜ç»†ï¼ˆT\_CommissionSettlement/T\_CommissionSettleLineï¼‰
>
> *   ä¸åŒ CaseTypeï¼ˆæ–°æ¡ˆ Aã€OA Bã€PCT/å›½å®¶ Cã€å¹´è´¹ Dã€æ— æ•ˆ/è¯‰è®¼ Eã€é¢„æ”¶ Fã€é¡¾é—®/æ£€ç´¢ Hã€æˆæƒ G0ï¼‰åœ¨ææˆä¸­çš„ BaseFee ç´¯ç§¯æ–¹å¼
>
> *   WaitPayï¼ˆæ¬¾åˆ°åç»“ç®—ï¼‰ä¸ ForceSettleï¼ˆå¼ºåˆ¶å¯ç»“ç®—ï¼‰è¯­ä¹‰
>
> *   å¤šä»£ç†äººåˆ†æ‘Š
>
> ä¸åšå‹ç¼©ã€ä¸åˆ å‡ï¼šä»»ä½•ä¹‹å‰æåˆ°è¿‡çš„å­—æ®µã€æ¨¡å¼ã€æ¡ä»¶å’Œç­–ç•¥ï¼Œéƒ½åœ¨æœ¬ç« å±•å¼€ã€‚

***

## 7.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 7.1.1 èŒƒå›´

ä»£ç†äººé…¬é‡‘æ¨¡å—è´Ÿè´£æ‰€æœ‰ä¸â€œæŒ‰æ¡ˆä»¶/é¡¹ç›®ç»™ä»£ç†äººåˆ†æˆâ€ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬ï¼š

1.  **ææˆè§„åˆ™é…ç½®ï¼ˆCommissionRuleï¼‰**
    *   æŒ‰ CaseTypeï¼ˆNORMAL/PCT\_NATIONAL/INVALIDATION/LITIGATION/CONSULTING/SEARCH ç­‰ï¼‰ã€FlowDirã€ä¸“åˆ©ç±»åˆ«ã€å®¢æˆ·ç»„ç­‰ç»´åº¦ï¼Œé…ç½®ä¸€æ¬¡/äºŒæ¬¡ï¼ˆç”šè‡³æ‰©å±•ï¼‰ææˆæ¯”ä¾‹
    *   æŒ‡å®šææˆåŸºæ•°è®¡ç®—æ–¹å¼ï¼ˆBaseModeï¼šæŒ‰æœåŠ¡è´¹ã€æŒ‰å›ºå®šé‡‘é¢ã€æ··åˆï¼‰
2.  **ææˆè®°å½•ç”Ÿæˆï¼ˆCommissionï¼‰**
    *   åœ¨è´¹ç”¨è´¦å•ç”Ÿæˆæ—¶ï¼Œä»è´¦å•ä¸­æ‰¾å‡ºæœåŠ¡è´¹éƒ¨åˆ†ï¼ŒæŒ‰ç…§è§„åˆ™è®¡ç®—æ¯ä¸ªæ¡ˆä»¶çš„ææˆåŸºæ•°å’Œææˆé‡‘é¢
    *   æ”¯æŒå¤šä»£ç†äººåˆ†æ‘ŠåŒä¸€æ¡ˆä»¶çš„ BaseFeeï¼ˆä¾‹å¦‚ä¸»åŠä»£ç†äºº/ååŠ/å›¢é˜Ÿæˆå‘˜æŒ‰æ¯”ä¾‹åˆ†é…ï¼‰
3.  **æ¬¾åˆ°åæ‰èƒ½ç»“ç®—ï¼ˆWaitPayï¼‰**
    *   å¯¹æŸäº›è§„åˆ™/å®¢æˆ·ï¼Œå¯è¦æ±‚â€œæ”¶æ¬¾è¾¾åˆ°ä¸€å®šæ¯”ä¾‹åæ‰èƒ½çœŸæ­£ç»“ç®—ææˆâ€
    *   WaitPay=true æ—¶ï¼Œææˆè®°å½•å­˜åœ¨ä½†ä¸å¯ç»“ç®—ï¼›å¾…æ”¶æ¬¾æ»¡è¶³æ¡ä»¶åæ‰è¿›å…¥å¯ç»“ç®—åˆ—è¡¨
4.  **å¼ºåˆ¶å¯ç»“ç®—æ ‡è®°ï¼ˆForceSettleï¼‰**
    *   å¯¹æŸäº›æ¡ˆä»¶ï¼ˆé‡å¤§æ¡ˆä»¶ã€ç‰¹æ®Šé¡¹ç›®ï¼‰ï¼Œå³ä½¿å°šæœªå®Œå…¨æ”¶æ¬¾æˆ–æœªæ»¡è¶³ WaitPay æ¡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹å·¥æ ‡è®° ForceSettle=trueï¼Œä½¿ä¹‹çº³å…¥ç»“ç®—
5.  **ç»“ç®—æ‰¹æ¬¡åŠæŠ¥è¡¨ï¼ˆCommission Settlementï¼‰**
    *   æŒ‰æ—¶é—´æ®µ/ä»£ç†äººé€‰æ‹©å¯ç»“ç®—çš„ææˆè®°å½•ï¼Œç”Ÿæˆç»“ç®—æ‰¹æ¬¡
    *   æ”¯æŒå¯¼å‡ºç»“ç®—å•ï¼ˆæŒ‰ä»£ç†äºº / æŒ‰æ¡ˆä»¶ç­‰ç»´åº¦ï¼‰
    *   æ ‡è®°ç›¸å…³ææˆè®°å½•å·²ç»è¢«ç»“ç®—ï¼ˆæ¯”å¦‚ S1\_Done/S2\_Doneï¼‰

### 7.1.2 è§’è‰²

*   **Agentï¼ˆä»£ç†äºº/å¾‹å¸ˆ/é¡¾é—®ï¼‰**
    *   æœ€ç»ˆææˆçš„å—ç›Šäºº
    *   åœ¨ç³»ç»Ÿä¸­å¯ä»¥æŸ¥çœ‹è‡ªå·±æ¡ˆä»¶çš„ææˆè®°å½•å’Œå†å²ç»“ç®—æ‰¹æ¬¡
*   **Manager / Partnerï¼ˆåˆä¼™äºº/éƒ¨é—¨è´Ÿè´£äººï¼‰**
    *   å‚ä¸é…ç½®ææˆè§„åˆ™
    *   å®¡æ ¸ææˆç»“ç®—æ‰¹æ¬¡ä¸æŠ¥è¡¨
*   **Financeï¼ˆè´¢åŠ¡ï¼‰**
    *   å‘èµ·ææˆç»“ç®—æ‰¹æ¬¡ç”Ÿæˆ
    *   å¯¼å‡ºç»“ç®—æŠ¥è¡¨ï¼Œä½œä¸ºå‘æ”¾ä¾æ®
    *   ç»´æŠ¤ç»“ç®—çš„è®°è´¦æƒ…å†µï¼ˆæœ¬æ¨¡å—åªè´Ÿè´£â€œä¸šåŠ¡é€»è¾‘ç»Ÿè®¡â€ï¼Œå®é™…å·¥èµ„å‘æ”¾åœ¨è´¢åŠ¡ç³»ç»Ÿï¼‰
*   **Admin**
    *   ç®¡ç†ææˆè§„åˆ™æ¨¡æ¿çš„å¢åˆ æ”¹
    *   ç®¡æ§ WaitPay/ForceSettle å­—æ®µä¿®æ”¹æƒé™

***

## 7.2 User Stories & Functional Requirements

### 7.2.1 User Storiesï¼ˆUSï¼‰

\*\*US-CM-01ï¼ˆé’ˆå¯¹ææˆï¼‰\*\*æˆ‘ä»¬ä¹‹å‰åœ¨ä¸šåŠ¡æè¿°é‡Œæ²¡å•ç‹¬ç»™ US IDï¼Œè¿™é‡Œè¡¥å……ï¼š

**US-COM-01 ææˆè§„åˆ™é…ç½®**\
ä½œä¸º **ç®¡ç†å±‚/ç®¡ç†å‘˜**ï¼Œæˆ‘å¸Œæœ›æŒ‰æ¡ˆä»¶ç±»å‹ã€ç”³è¯·æ–¹å‘ã€ä¸“åˆ©ç±»åˆ«å’Œå®¢æˆ·åˆ†ç»„è®¾å®šä»£ç†äººææˆè§„åˆ™ï¼ˆåŒ…æ‹¬ä¸€æ¬¡/äºŒæ¬¡ææˆæ¯”ä¾‹å’ŒåŸºæ•°è®¡ç®—æ–¹å¼ï¼‰ï¼Œä»¥ä½“ç°ä¸åŒä¸šåŠ¡ç±»å‹ã€å®¢æˆ·ç¾¤å’Œéš¾åº¦çš„å·®å¼‚ã€‚

**US-COM-02 ææˆè®°å½•è‡ªåŠ¨ç”Ÿæˆ**\
ä½œä¸º **è´¢åŠ¡/ç®¡ç†å±‚**ï¼Œæˆ‘å¸Œæœ›åœ¨æœåŠ¡è´¹è´¦å•ç”Ÿæˆæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºç›¸åº”æ¡ˆä»¶å’Œä»£ç†äººç”Ÿæˆ/æ›´æ–°ææˆè®°å½•ï¼ŒåŒ…æ‹¬åŸºæ•°ã€ä¸€æ¬¡/äºŒæ¬¡ææˆé‡‘é¢å’Œæ ‡è®°ä¿¡æ¯ã€‚

**US-COM-03 å¤šä»£ç†äººåˆ†æ‘Š**\
ä½œä¸º **ç®¡ç†å±‚**ï¼Œæˆ‘å¸Œæœ›åŒä¸€æ¡ˆä»¶çš„ææˆèƒ½åœ¨å¤šä¸ªä»£ç†äººä¹‹é—´æŒ‰æ¯”ä¾‹åˆ†é…ï¼ˆä¸»åŠ/ååŠ/å›¢é˜Ÿæˆå‘˜ï¼‰ï¼Œå¹¶åœ¨ç»“ç®—æŠ¥è¡¨ä¸­æŒ‰äººç»Ÿè®¡ã€‚

**US-COM-04 æ¬¾åˆ°åæ‰èƒ½ç»“ç®—**\
ä½œä¸º **ç®¡ç†å±‚/è´¢åŠ¡**ï¼Œæˆ‘å¸Œæœ›å¯¹äºæŸäº›æ¡ˆä»¶/å®¢æˆ·ï¼Œåªèƒ½åœ¨æœåŠ¡è´¹è´¦å•æ¬¾é¡¹å®æ”¶è¾¾åˆ°ä¸€å®šæ¯”ä¾‹æ—¶ï¼Œæ‰å…è®¸ç»“ç®—ææˆï¼ˆä¾‹å¦‚ 50%/90% æ”¶æ¬¾ï¼‰ã€‚

**US-COM-05 å¼ºåˆ¶å¯ç»“ç®—ï¼ˆç‰¹æ®Šæ ‡è®°ï¼‰**\
ä½œä¸º **ç®¡ç†å±‚**ï¼Œæˆ‘å¸Œæœ›å¯¹äºç‰¹æ®Šæ¡ˆä»¶å¯ä»¥æ ‡è®°â€œæ¡ˆä»¶å¯ä»¥ç»“ç®—é…¬é‡‘â€ï¼Œå³ä½¿å°šæœªå®Œå…¨æ”¶æ¬¾æˆ–æ¡ˆä»¶æœªå®Œå…¨ç»ˆç»“ï¼Œä¹Ÿå…è®¸ç»“ç®—ææˆã€‚

**US-COM-06 ææˆç»“ç®—æ‰¹æ¬¡ä¸æŠ¥è¡¨**\
ä½œä¸º **è´¢åŠ¡**ï¼Œæˆ‘å¸Œæœ›åœ¨æŸä¸ªç»“ç®—æœŸé—´å†…æŒ‰ä»£ç†äºº/æ¡ˆä»¶ç­›é€‰å¯ç»“ç®—ææˆè®°å½•ï¼Œå°†å…¶çº³å…¥ä¸€ä¸ªç»“ç®—æ‰¹æ¬¡ï¼Œå¹¶ç”Ÿæˆè¯¦å°½çš„ç»“ç®—æŠ¥è¡¨ä¾›å®¡æ‰¹å’Œå‘æ”¾ä½¿ç”¨ã€‚

### 7.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-COM-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒç»´æŠ¤ææˆè§„åˆ™ `T_CommissionRule`ï¼ŒåŒ…æ‹¬ä¸€æ¬¡/äºŒæ¬¡ææˆæ¯”ä¾‹ã€åŸºæ•°è®¡ç®—æ–¹å¼å’Œé€‚ç”¨èŒƒå›´ã€‚

**FR-COM-02**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒåœ¨æœåŠ¡è´¹è´¦å•ç”Ÿæˆæ—¶ï¼Œæ ¹æ®ææˆè§„åˆ™è‡ªåŠ¨ä¸ºç›¸å…³æ¡ˆä»¶å’Œä»£ç†äººç”Ÿæˆæˆ–æ›´æ–°ææˆè®°å½• `T_Commission`ã€‚

**FR-COM-03**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒå¤šä»£ç†äººï¼ˆä¸»åŠ/ååŠ/å›¢é˜Ÿæˆå‘˜ï¼‰æŒ‰æ¯”ä¾‹åˆ†æ‘ŠææˆåŸºæ•°ï¼Œå¹¶åˆ†åˆ«è®°å½•å„è‡ªææˆé‡‘é¢ã€‚

**FR-COM-04**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒ `WaitPay`ï¼ˆæ¬¾åˆ°åæ‰èƒ½ç»“ç®—ï¼‰é€»è¾‘ï¼Œå³åœ¨ç›¸å…³è´¦å•æ”¶æ¬¾æ¯”ä¾‹æœªè¾¾æ¡ä»¶æ—¶ï¼Œå°†ææˆè®°å½•æ ‡è®°ä¸ºâ€œä¸å¯ç»“ç®—â€ã€‚

**FR-COM-05**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒ `ForceSettle`ï¼ˆæ¡ˆä»¶å¯ç»“ç®—é…¬é‡‘ï¼‰é€»è¾‘ï¼Œä»¥å…è®¸å¯¹ç‰¹æ®Šæ¡ˆä»¶æå‰ç»“ç®—ææˆã€‚

**FR-COM-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒææˆç»“ç®—æ‰¹æ¬¡ `T_CommissionSettlement` çš„åˆ›å»ºï¼Œä¸ç»“ç®—æ˜ç»† `T_CommissionSettleLine` çš„ç”Ÿæˆï¼Œå¹¶æ ‡è®°å¯¹åº”çš„ææˆè®°å½•ï¼ˆS1\_Done/S2\_Doneï¼‰ã€‚

**FR-COM-07**ï¼šç³»ç»Ÿå¿…é¡»æä¾›ææˆç»“ç®—æŠ¥è¡¨ï¼ŒæŒ‰ä»£ç†äºº/æ¡ˆä»¶/æ—¶é—´åŒºé—´ç»Ÿè®¡ææˆé‡‘é¢ï¼Œå¹¶æ”¯æŒå¯¼å‡ºã€‚

***

## 7.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

### 7.3.1 `T_CommissionRule` â€“ ææˆè§„åˆ™è¡¨

**ç”¨é€”**

å®šä¹‰â€œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ï¼Œå¦‚ä½•ä»æŸæ¡ˆä»¶çš„æœåŠ¡è´¹ä¸­è®¡ç®—ææˆåŸºæ•°ä¸ææˆæ¯”ä¾‹â€ã€‚

**å­—æ®µ**

*   `RuleID` PK
*   **é€‚ç”¨èŒƒå›´ï¼š**
    *   `CaseType` enum? â€“ NORMAL / PCT\_NATIONAL / INVALIDATION / LITIGATION / CONSULTING / SEARCH / ANNUITY\_SERVICE ç­‰ï¼Œå¯ç©ºï¼ˆç©º=æ‰€æœ‰ç±»å‹ï¼‰
    *   `FlowDir` enum? â€“ IN\_IN / IN\_OUT / OUT\_IN / HK\_IN / OUT\_OUTï¼Œå¯ç©ºï¼ˆç©º=æ‰€æœ‰æ–¹å‘ï¼‰
    *   `PatentCategory` enum? â€“ INVENTION / UTILITY / DESIGNï¼Œå¯ç©º
    *   `ClientGroup` varchar? â€“ å®¢æˆ·åˆ†ç»„ï¼ˆå¦‚é‡ç‚¹å®¢æˆ·/æ™®é€šå®¢æˆ·/å†…å¤–éƒ¨å®¢æˆ·åˆ†ç»„ç­‰ï¼‰ï¼Œå¯ç©º
*   **ææˆæ¯”ä¾‹ï¼š**
    *   `Stage1Rate` decimal(5,4) â€“ ä¸€æ¬¡ææˆæ¯”ä¾‹ï¼ˆS1ï¼‰ï¼Œä¾‹å¦‚ 0.3
    *   `Stage2Rate` decimal(5,4) â€“ äºŒæ¬¡ææˆæ¯”ä¾‹ï¼ˆS2ï¼‰ï¼Œä¾‹å¦‚ 0.2
    *   ï¼ˆæ³¨ï¼šç†è®ºå¯æ‰©å±• S3 ç­‰ï¼Œæœ¬è®¾è®¡å…ˆæ”¯æŒ S1/S2ï¼‰
*   **åŸºæ•°æ¨¡å¼ï¼š**
    *   `BaseMode` enumï¼š
        *   BY\_SERVICE\_FEE â€“ åŸºæ•°æ¥æºäºæœåŠ¡è´¹é‡‘é¢
        *   FIXED\_PER\_CASE â€“ åŸºæ•°ä¸ºæ¯æ¡ˆå›ºå®šé‡‘é¢
        *   MIXED â€“ å›ºå®š + æœåŠ¡è´¹æ¯”ä¾‹æ··åˆ
    *   `BaseFixedAmt` decimal? â€“ å½“ BaseMode ä¸º FIXED\_PER\_CASE æˆ– MIXED æ—¶ä½¿ç”¨
*   **å…¶ä»–å‚æ•°ï¼ˆå¯æ‰©å±•ï¼‰ï¼š**
    *   `ServiceFeeFactor` decimal? â€“ åœ¨ MIXED æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡è´¹éƒ¨åˆ†ç³»æ•°ï¼ˆä¾‹å¦‚ BaseFee=BaseFixedAmt + ServiceFeeSumÃ—ServiceFeeFactorï¼‰
*   `IsActive` bool
*   `Remark` nvarchar
*   `CreatedBy/At`, `UpdatedBy/At`

**æ ¡éªŒ**

*   RuleID è‡ªåŠ¨ç”Ÿæˆï¼›
*   CaseType+FlowDir+PatentCategory+ClientGroup çš„ç»„åˆä¸å®œé‡å å¤ªå¤šï¼›è‹¥å­˜åœ¨å¤šä¸ªè§„åˆ™â€œåŒ¹é…åŒä¸€æ¡ˆâ€ï¼Œç³»ç»Ÿéœ€å®šä¹‰ä¼˜å…ˆçº§ï¼ˆå¯ç”±è§„åˆ™åˆ—è¡¨é¡ºåºæˆ–æ›´ç²¾ç»†é…ç½®å†³å®šï¼‰ï¼›
*   Stage1Rate+Stage2Rate å¯ >1ï¼Œä½†ç³»ç»Ÿåº”æç¤ºâ€œææˆæ€»æ¯”ä¾‹è¾ƒé«˜â€ï¼›æ˜¯å¦å…è®¸ç”±ç®¡ç†å±‚å†³å®šã€‚

***

### 7.3.2 `T_Commission` â€“ ææˆè®°å½•è¡¨

**ç”¨é€”**

ä¸ºæ¯ä¸ªæ¡ˆä»¶ + ä»£ç†äººè®°å½•â€œæœ¬æ¡ˆæœ¬é˜¶æ®µåº”æœ‰çš„ææˆåŸºæ•°å’Œææˆé‡‘é¢â€ï¼Œå¯åˆ†é˜¶æ®µï¼ˆS1/S2ï¼‰ã€‚

**å­—æ®µ**

*   `CommID` PK
*   `CaseID` FK â†’ T\_Case â€“ å¯¹åº”æ¡ˆä»¶
*   `AgentID` FK â†’ User â€“ å¯¹åº”ä»£ç†äºº/é¡¾é—®
*   `RuleID` FK â†’ T\_CommissionRuleï¼ˆå¯ç©ºï¼‰ â€“ ä½¿ç”¨å“ªä¸ªè§„åˆ™ç”Ÿæˆæœ¬è®°å½•
*   `BaseFee` decimal â€“ è®¡é…¬åŸºæ•°ï¼š
    *   å¯¹ BY\_SERVICE\_FEEï¼šæœåŠ¡è´¹æ€»é¢ï¼ˆæˆ–éƒ¨åˆ†ï¼‰
    *   å¯¹ FIXED\_PER\_CASEï¼šå›ºå®šé‡‘é¢
    *   å¯¹ MIXEDï¼šå›ºå®š + æœåŠ¡è´¹æ¯”ä¾‹åˆæˆ
*   `S1_Rate` decimal â€“ ä¸€æ¬¡ææˆæ¯”ä¾‹
*   `S1_Amt` decimal â€“ ä¸€æ¬¡ææˆé‡‘é¢ï¼ˆBaseFee Ã— S1\_Rateï¼‰
*   `S1_Done` bool â€“ æ˜¯å¦å·²åœ¨ç»“ç®—ä¸­ç»“ç®—ä¸€æ¬¡ææˆ
*   `S2_Rate` decimal â€“ äºŒæ¬¡ææˆæ¯”ä¾‹
*   `S2_Amt` decimal â€“ äºŒæ¬¡ææˆé‡‘é¢
*   `S2_Done` bool â€“ æ˜¯å¦å·²ç»“ç®—äºŒæ¬¡ææˆ
*   `WaitPay` bool â€“ æ˜¯å¦â€œæ¬¾åˆ°åæ‰èƒ½ç»“ç®—â€ï¼Œå†³å®šç»“ç®—å¯ç”¨æ¡ä»¶
*   `ForceSettle` bool â€“ æ˜¯å¦æ ‡è®°ä¸ºâ€œæ¡ˆä»¶å¯ä»¥ç»“ç®—é…¬é‡‘â€ï¼ˆå³ä¾¿æœªæ»¡è¶³ WaitPay æ”¶æ¬¾æ¯”ä¾‹ï¼ŒçŠ¶æ€ç¬¦åˆä¹Ÿå¯ç»“ç®—ï¼‰
*   `CreatedAt`, `CreatedBy`, `UpdatedAt`, `UpdatedBy`
*   `Remark` nvarchar â€“ å¯è®°å½•é˜¶æ®µï¼ˆæ¯”å¦‚â€œæ–°æ¡ˆé˜¶æ®µâ€ã€â€œOAé˜¶æ®µâ€ã€â€œæˆæƒé˜¶æ®µâ€ã€â€œå¹´è´¹é˜¶æ®µâ€ã€â€œæ— æ•ˆé˜¶æ®µâ€ã€â€œé¡¾é—®é¡¹ç›®é˜¶æ®µâ€ç­‰ï¼‰æˆ–å…¶å®ƒè¯´æ˜

***

### 7.3.3 `T_CommissionSettlement` â€“ ææˆç»“ç®—æ‰¹æ¬¡å¤´

**ç”¨é€”**

å°†ä¸€æ‰¹ â€œå¯ç»“ç®—çš„ææˆè®°å½•ï¼ˆå¯èƒ½å¤šä¸ªä»£ç†äººã€å¤šä¸ªæ¡ˆä»¶ï¼‰â€ é›†åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå¸¦ç¼–å·çš„â€œç»“ç®—æ‰¹æ¬¡â€ï¼Œç”¨äºæŠ¥è¡¨ä¸å®¡æ‰¹ã€‚

**å­—æ®µ**

*   `SettleID` PK
*   `SettleNo` varchar â€“ ç»“ç®—æ‰¹æ¬¡å·ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
*   `PeriodFrom` date â€“ æ­¤æ‰¹æ¬¡è¦†ç›–çš„ç»“ç®—èµ·å§‹æ—¥æœŸï¼ˆä¾›å‚è€ƒï¼‰
*   `PeriodTo` date â€“ ç»“ç®—æˆªæ­¢æ—¥æœŸ
*   `CreatedAt` datetime
*   `CreatedBy` FK â†’ User
*   `Remark` nvarchar â€“ è¯´æ˜ï¼ˆä¾‹å¦‚â€œ2025å¹´Q1ä»£ç†äººææˆç»“ç®—â€ï¼‰

> æ³¨æ„ï¼šåŒä¸€ä¸ªæ‰¹æ¬¡å†…å¯ä»¥åŒ…å«å¤šä¸ªä»£ç†äººï¼›æŒ‰æŠ¥è¡¨æ—¶å¯ä»¥åˆ†ç»„æ˜¾ç¤ºã€‚

***

### 7.3.4 `T_CommissionSettleLine` â€“ ç»“ç®—æ˜ç»†

**ç”¨é€”**

è®°å½•â€œæœ¬æ¬¡ç»“ç®—æ‰¹æ¬¡ä¸­ï¼Œä¸ºæŸä»£ç†æŸæ¡ˆä»¶/æŸé˜¶æ®µç»“ç®—çš„å…·ä½“é‡‘é¢â€ã€‚

**å­—æ®µ**

*   `SettleLineID` PK
*   `SettleID` FK â†’ T\_CommissionSettlement
*   `CommID` FK â†’ T\_Commission â€“ å¯¹åº”çš„ææˆè®°å½•
*   `AgentID` FK â†’ User â€“ å“ªä¸ªä»£ç†äºº
*   `Stage` enum â€“ S1 / S2ï¼ˆè¡¨ç¤ºç»“ç®—çš„æ˜¯ä¸€æ¬¡ææˆæˆ–äºŒæ¬¡ææˆï¼‰
*   `Amount` decimal â€“ æœ¬æ¬¡ç»“ç®—é‡‘é¢ï¼ˆé€šå¸¸ = S1\_Amt æˆ– S2\_Amtï¼‰
*   `CaseID` FK â†’ T\_Case â€“ æ–¹ä¾¿æŠ¥è¡¨æŒ‰æ¡ˆä»¶å±•ç¤º
*   `BillID` FK â†’ T\_Bill?ï¼ˆå¯ç©ºï¼‰ â€“ å¯æŒ‡å‘ç›¸å…³è´¦å•
*   `PaymentID` FK â†’ T\_Payment?ï¼ˆå¯ç©ºï¼‰ â€“ è‹¥ä¸ç‰¹å®šæ”¶æ¬¾å…³è”

**è¯´æ˜**

*   ä¸€æ¡ Commission è®°å½•å¯ä»¥è¢«åˆ†æˆå¤šä¸ª SettleLineï¼ˆç†è®ºä¸Šï¼‰ï¼Œä½†å¸¸è§æƒ…å†µæ˜¯ä¸€æ¡ CommID+Stage å¯¹åº”ä¸€æ¡ SettleLineï¼›
*   åœ¨ç”Ÿæˆç»“ç®—æ‰¹æ¬¡åï¼Œç›¸åº” `T_Commission.S1_Done/S2_Done` åº”è®¾ä¸º trueã€‚

***

## 7.4 ææˆè§„åˆ™é…ç½®ï¼ˆUS-COM-01ï¼ŒFR-COM-01ï¼‰

### 7.4.1 ææˆè§„åˆ™ç»´æŠ¤ç•Œé¢

**æŸ¥è¯¢åŒº**

*   CaseType
*   FlowDir
*   PatentCategory
*   ClientGroup
*   RuleID / Code / å…³é”®å­—

**åˆ—è¡¨åŒº**

*   åˆ—å‡ºæ‰€æœ‰è§„åˆ™ï¼šRuleID, CaseType, FlowDir, PatentCategory, ClientGroup, Stage1Rate, Stage2Rate, BaseMode, BaseFixedAmt, IsActive

**ç¼–è¾‘åŒº**

*   åˆ›å»º/ç¼–è¾‘ `T_CommissionRule`ï¼šå¡«å…¥ä¸Šè¿°æ‰€æœ‰å­—æ®µ
*   å¯å¢åŠ â€œä¼˜å…ˆçº§â€å­—æ®µï¼ˆPriorityï¼‰ï¼ŒæŒ‰æ•°å€¼è¶Šå°ä¼˜å…ˆåŒ¹é…ï¼ˆå¯é€‰ï¼‰

### 7.4.2 åŒ¹é…é€»è¾‘æ¦‚è§ˆ

å½“ä¸ºæŸæ¡ˆè®¡ç®—ææˆè§„åˆ™æ—¶ï¼š

1.  æŒ‰ CaseType ç²¾ç¡®åŒ¹é…ï¼›CaseType ä¸ºç©ºçš„è§„åˆ™è§†ä¸ºé€šç”¨å€™é€‰ï¼›
2.  æŒ‰ FlowDir åŒ¹é…ï¼ˆFlowDir ä¸ºç©ºä¸ºé€šç”¨ï¼‰
3.  æŒ‰ PatentCategory åŒ¹é…ï¼ˆä¸ºç©ºä¸ºé€šç”¨ï¼‰
4.  æŒ‰ ClientGroup åŒ¹é…ï¼š
    *   ClientGroup å¯ä» T\_Client æˆ–å•ç‹¬é…ç½®ä¸­è·å–å®¢æˆ·æ‰€å±ç»„åˆ«ï¼›
    *   è§„åˆ™ä¸­çš„ ClientGroup ç”¨äºé™å®šï¼šåªé€‚ç”¨äºç‰¹å®šå®¢æˆ·ç»„ï¼›

è‹¥æœ‰å¤šæ¡è§„åˆ™åŒ¹é…åŒä¸€æ¡ˆä»¶ï¼š

*   æŒ‰ Priority/è§„åˆ™åˆ—è¡¨é¡ºåºå–ç¬¬ä¸€æ¡ï¼›
*   æˆ–åœ¨å®ç°æ—¶ç»Ÿä¸€è§„å®šï¼šCaseType/FlowDir/Category/ClientGroup çš„åŒ¹é…æ˜¯æœ‰æ˜ç¡®ä¼˜å…ˆçº§çš„ï¼ˆæ›´ç²¾ç»†çš„è§„åˆ™ä¼˜å…ˆï¼‰ã€‚

***

## 7.5 ææˆè®°å½•ç”Ÿæˆï¼šåŸºæ•° & å¤šä»£ç†äººåˆ†æ‘Šï¼ˆUS-COM-02/03ï¼ŒFR-COM-02/03ï¼‰

### 7.5.1 è§¦å‘ç‚¹ï¼šè´¦å•ç”Ÿæˆæ—¶

**æ¨èç­–ç•¥**

*   åœ¨ **è´¦å•ç”Ÿæˆï¼ˆæ¨¡å—äº” 6.4.1/6.4.2ï¼‰ä¹‹å**ï¼Œå¯¹æ–°ç”Ÿæˆçš„ `T_Bill` åšä¸€æ¬¡â€œææˆç”Ÿæˆâ€ï¼š
    1.  æ‰¾å‡ºè¯¥è´¦å•ä¸­æ‰€æœ‰ `T_BillItem`ï¼Œç­›é€‰ `FeeType=SERVICE` çš„æ˜ç»†ï¼›

1.  æŒ‰ CaseID åˆ†ç»„è®¡ç®— `ServiceSum`ï¼š
    *   `ServiceSum(case) = Î£(LocalAmount where FeeType=SERVICE and CaseID=case)`ï¼›
2.  å¯¹æ¯ä¸ª CaseIDï¼Œè°ƒç”¨â€œææˆè®¡ç®—â€é€»è¾‘ï¼š
    ```text
    GenerateOrUpdateCommission(caseId, serviceSum, billId)
    ```

> æ³¨ï¼šå¯¹äºåœºæ™¯ A/B/C/D/E/G0/H ç­‰ï¼Œæ¯ä¸ªé˜¶æ®µäº§ç”Ÿä¸åŒæœåŠ¡è´¹è´¦å•æ—¶ï¼Œæœ¬æ–¹æ³•å¯é‡å¤è°ƒç”¨ï¼Œå®ç°æŒ‰é˜¶æ®µâ€œç´¯åŠ  BaseFeeâ€æˆ–â€œå¤šä¸ª Commission è®°å½•åˆ†é˜¶æ®µè®°å½•â€ã€‚

### 7.5.2 åŸºæ•°è®¡ç®—ï¼ˆBaseFeeï¼‰æ¨¡å¼

æ ¹æ®åŒ¹é…åˆ°çš„ `T_CommissionRule` çš„ `BaseMode`ï¼š

**æ¨¡å¼ 1ï¼šBY\_SERVICE\_FEE**

*   `BaseFee = ServiceSum`ï¼ˆæœ¬æ¬¡è´¦å•ä¸­è¯¥æ¡ˆæœåŠ¡è´¹åˆè®¡ï¼‰ï¼Œå¯ä»¥ç´¯åŠ åˆ°å·²æœ‰ Commission ä¸­ã€‚

**æ¨¡å¼ 2ï¼šFIXED\_PER\_CASE**

*   ä¸ç®¡æœåŠ¡è´¹å¤šå°‘ï¼Œæ¯æ¡ˆç»™å›ºå®šåŸºæ•°ï¼š`BaseFee = BaseFixedAmt`ã€‚
    *   å¯ä»¥åœ¨ Commission è®°å½•é¦–æ¬¡åˆ›å»ºæ—¶èµ‹å€¼ï¼Œåç»­è´¦å•ä¸å†æé«˜ BaseFeeï¼Œæˆ–è€…
    *   å¯¹æ¯ä¸ªè´¦å•é˜¶æ®µéƒ½åŠ ä¸€éƒ¨åˆ†å›ºå®šé¢ï¼ˆè§†ä¸šåŠ¡è€Œå®šï¼‰ã€‚

**æ¨¡å¼ 3ï¼šMIXEDï¼ˆæ··åˆï¼‰**

*   `BaseFee = BaseFixedAmt + ServiceSum Ã— ServiceFeeFactor`
*   ä¾‹å¦‚ï¼šåŸºç¡€ 5000 + æœåŠ¡è´¹çš„ 20% ä½œä¸ºææˆåŸºæ•°ã€‚

> âš ï¸ æ³¨æ„ï¼šå¯¹äº**ç´¯ç§¯é˜¶æ®µ**ï¼ˆæ–°æ¡ˆ + OA + æˆæƒ + å¹´è´¹ + æ— æ•ˆ + é¡¾é—®é¡¹ç›®ï¼‰ï¼Œå¯ä»¥é€‰æ‹©ä¸¤ç§ç­–ç•¥ï¼ˆè§åæ–‡ 7.6ï¼‰ï¼š

*   Aï¼šåŒä¸€æ¡ˆä»¶çš„å¤šä¸ªé˜¶æ®µé€šè¿‡ **ç´¯è®¡ BaseFee** åˆ°å•æ¡ Commissionï¼›
*   Bï¼šä¸ºæ¯ä¸ªé˜¶æ®µç”Ÿæˆå•ç‹¬çš„ Commission è®°å½•ï¼ŒSettle æ—¶æ±‡æ€»ã€‚

### 7.5.3 å¤šä»£ç†äººåˆ†æ‘Š

**ä»£ç†äººè§’è‰²æ¥æº**

*   T\_Case ä¸­çš„ï¼š
    *   `PrimaryAgentID` â€“ ä¸»åŠä»£ç†äºº
    *   `SecondAgentID` â€“ ååŠä»£ç†äºº
*   è‹¥æœ‰æ›´å¤šå‚ä¸äººï¼Œå¯åœ¨ `T_Case` æˆ–å•ç‹¬å…³ç³»è¡¨ï¼ˆå¦‚ `T_CaseAgentRole`ï¼‰ä¸­ç»´æŠ¤ã€‚

**åˆ†æ‘Šç­–ç•¥**

*   å®šä¹‰åˆ†æ‘Šæ¯”ä¾‹ï¼Œä¾‹å¦‚ï¼š
    *   ä¸»åŠ:ååŠ = 70%:30%
    *   æˆ–æ ¹æ®æ›´å¤šå‚ä¸äººå®šä¹‰å¦‚ 60/20/20 ç­‰

**è®¡ç®—**

å¯¹æ¯ä¸ªå‚ä¸ä»£ç†äººï¼š

*   `BaseFee_for_agent = BaseFee * agent_share_ratio`
*   `S1_Amt_for_agent = BaseFee_for_agent * S1_Rate`
*   `S2_Amt_for_agent = BaseFee_for_agent * S2_Rate`

**å†™å…¥ T\_Commission**

*   å¯¹äºæ¯ä¸ªä»£ç†äºº AgentIDï¼š
    *   è‹¥è¯¥æ¡ˆ + AgentID å°šæ—  Commission è®°å½•ï¼Œåˆ™æ–°å»ºä¸€æ¡ï¼›
    *   è‹¥å·²æœ‰è®°å½•ä¸”ç­–ç•¥ä¸ºâ€œç´¯åŠ æ¨¡å¼â€ï¼Œåˆ™ç´¯åŠ  BaseFeeï¼ˆåŠé‡æ–°è®¡ç®— S1/S2\_Amtï¼‰ï¼›
    *   è‹¥é‡‡ç”¨â€œåˆ†é˜¶æ®µå¤šè®°å½•æ¨¡å¼â€ï¼Œåˆ™æ–°å»ºä¸€æ¡ Commission å¹¶åœ¨ Remark ä¸­æ³¨æ˜é˜¶æ®µã€‚

***

## 7.6 æ¡ˆä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ææˆç´¯ç§¯ç­–ç•¥ï¼ˆåœºæ™¯ A/B/C/D/E/H/G0ï¼‰

> è¿™é‡ŒæŠŠæˆ‘ä»¬åœ¨å„ E2E åœºæ™¯ä¸­è°ˆåˆ°çš„ææˆéƒ¨åˆ†é›†ä¸­å½’çº³ï¼Œä½œä¸ºâ€œè®¾è®¡ç­–ç•¥â€è¯´æ˜ï¼Œé¿å…é—æ¼ã€‚

æˆ‘ä»¬æ›¾ç»™å‡ºä¸¤ç§æ¨¡å¼ï¼š

### 7.6.1 æ¨¡å¼ Aï¼š**å•è®°å½•ç´¯ç§¯æ¨¡å¼**ï¼ˆæ¨èï¼‰

å¯¹äºæ¯ä¸ª CaseID + AgentIDï¼š

*   ä½¿ç”¨ **ä¸€æ¡ `T_Commission` è®°å½•** è¡¨ç¤ºè¯¥æ¡ˆåœ¨è¯¥ä»£ç†äººçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸææˆæƒ…å†µï¼›
*   BaseFee éšç€ä¸åŒé˜¶æ®µçš„æ–°è´¦å•ç”Ÿæˆä¸æ–­å¢åŠ ï¼Œä¾‹å¦‚ï¼š
    *   æ–°æ¡ˆæœåŠ¡è´¹ï¼ˆåœºæ™¯ Aï¼‰
    *   OA ç­”å¤æœåŠ¡è´¹ï¼ˆåœºæ™¯ Bï¼‰
    *   æˆæƒé˜¶æ®µæœåŠ¡è´¹ï¼ˆåœºæ™¯ G0ï¼‰
    *   å¹´è´¹ä»£ç¼´æœåŠ¡è´¹ï¼ˆåœºæ™¯ Dï¼‰
    *   æ— æ•ˆ/è¯‰è®¼æœåŠ¡è´¹ï¼ˆåœºæ™¯ Eï¼‰
    *   é¡¾é—®/æ£€ç´¢æœåŠ¡è´¹ï¼ˆåœºæ™¯ Hï¼Œå¦‚ä¸è¯¥æ¡ˆå¼ºå…³è”ï¼‰

**ä¼˜åŠ¿**

*   ç»“æ„ç®€æ´ï¼šæ¯æ¡ˆæ¯ä»£ç†äººä¸€æ¡ Commissionï¼ŒæŠ¥è¡¨ç®€å•ï¼›
*   ææˆé˜¶æ®µï¼ˆS1/S2ï¼‰ä»£è¡¨ä¸åŒç»“ç®—æ—¶ç‚¹ï¼ˆä¾‹å¦‚ï¼šS1=åˆæ¬¡é˜¶æ®µï¼ŒS2=æˆæƒ/ç»“æ¡ˆé˜¶æ®µï¼‰ã€‚

**é€‚é…**

*   ä¾‹å¦‚ï¼š
    *   S1ï¼šåœ¨æ¡ˆä»¶å—ç†/åˆæ¬¡ç¼´è´¹åå¯ç»“ç®—ä¸€å®šæ¯”ä¾‹ï¼ˆå¦‚ 30%ï¼‰ï¼›
    *   S2ï¼šåœ¨æ¡ˆä»¶æˆæƒ/ç»“æ¡ˆ/æ— æ•ˆ/è¯‰è®¼ç»ˆå±€åç»“ç®—å…¶ä½™æ¯”ä¾‹ï¼ˆå¦‚ 20%ï¼‰ï¼›
    *   å¹´è´¹å¯è§†ä¸ºé•¿æœŸé˜¶æ®µï¼Œç”¨åŒä¸€ BaseFee æˆ–é€šè¿‡ separate flag åŒºåˆ†ã€‚

### 7.6.2 æ¨¡å¼ Bï¼š**åˆ†é˜¶æ®µå¤šè®°å½•æ¨¡å¼**

å¯¹äºæ¯ä¸ª CaseID + AgentID + é˜¶æ®µï¼š

*   ä¸ºæ–°æ¡ˆé˜¶æ®µã€OA é˜¶æ®µã€æˆæƒé˜¶æ®µã€å¹´è´¹é˜¶æ®µã€æ— æ•ˆé˜¶æ®µã€é¡¾é—®é˜¶æ®µåˆ†åˆ«ç”Ÿæˆä¸åŒçš„ `T_Commission` è®°å½•ï¼ˆRemark/Stage å­—æ®µæ ‡æ³¨é˜¶æ®µï¼‰ï¼š
    *   å¦‚ï¼šCommID-1ï¼ˆæ–°æ¡ˆï¼‰ã€CommID-2ï¼ˆOAï¼‰ã€CommID-3ï¼ˆæˆæƒï¼‰â€¦

**ä¼˜åŠ¿**

*   ç²¾ç»†åˆ†æï¼šå¯ä»¥å•ç‹¬çœ‹æ¯ä¸ªé˜¶æ®µè´¡çŒ®äº†å¤šå°‘ææˆï¼›
*   æŸäº›é˜¶æ®µå¯ä»¥å•ç‹¬é…ä¸åŒçš„è§„åˆ™ï¼ˆç”šè‡³ä¸åŒ S1/S2 å«ä¹‰ï¼‰ã€‚

**å¤æ‚åº¦**

*   æŠ¥è¡¨ä¸ç»“ç®—é€»è¾‘è¦å¤„ç†å¤šæ¡ CommIDï¼›
*   å¯¹ç»“ç®—/æŠ¥è¡¨é€»è¾‘è€Œè¨€æ¯”æ¨¡å¼ A ç¨å¤æ‚ã€‚

> åœ¨æœ¬è§„æ ¼ä¸­ä¸¤ç§æ¨¡å¼éƒ½æ”¯æŒï¼Œå®é™…å®æ–½å¯é€‰æ‹©å…¶ä¸€ä¸ºä¸»ï¼š
>
> *   è‹¥å¸Œæœ›â€œç®¡ç†å±‚å’Œå¼€å‘ç®€å•â€ï¼š**æ¨èæ¨¡å¼ Aï¼ˆç´¯åŠ æ¨¡å¼ï¼‰**ï¼›
> *   è‹¥å¸Œæœ›â€œåˆ†æç²¾ç»†â€ï¼šå¯é‡‡ç”¨æ¨¡å¼ Bï¼Œå¹¶åœ¨ `T_Commission.Remark` ä¸­æ¸…æ™°æ ‡è¯†é˜¶æ®µã€‚

***

## 7.7 WaitPay ä¸ ForceSettleï¼ˆUS-COM-04/05ï¼ŒFR-COM-04/05ï¼‰

### 7.7.1 WaitPayï¼ˆæ¬¾åˆ°åæ‰èƒ½ç»“ç®—ï¼‰

**å­—æ®µå«ä¹‰**

*   `T_Commission.WaitPay = true` æ—¶ï¼Œè¡¨ç¤ºè¯¥æ¡ææˆè®°å½•åªæœ‰åœ¨â€œç›¸å…³è´¦å•/æœåŠ¡è´¹å·²æ”¶æ¬¾è¾¾åˆ°æŸæ¯”ä¾‹â€ä¹‹åæ‰èƒ½ç»“ç®—ã€‚

**æ”¶æ¬¾æ¯”ä¾‹è®¡ç®—ï¼ˆæ¦‚å¿µï¼‰**

å¯¹æŸæ¡ˆçš„æœåŠ¡è´¹è´¦å•å’Œæ”¶æ¬¾æ•°æ®ï¼š

*   è®¾ `ServiceFeeTotal(case)` = æ‰€æœ‰è´¦å•ä¸­æœåŠ¡è´¹æ˜ç»†é‡‘é¢åˆè®¡ï¼›
*   `ServiceFeeReceived(case)` = é€šè¿‡ T\_Offset & T\_CaseReceipt æ‹†åˆ†åçš„æœåŠ¡è´¹æ”¶æ¬¾æ€»é¢ï¼›
*   æ”¶æ¬¾æ¯”ä¾‹ `PaidRatio = ServiceFeeReceived(case) / ServiceFeeTotal(case)`ã€‚

**è§¦å‘æ¡ä»¶ç¤ºä¾‹**

*   å¯¹ S1ï¼ˆä¸€æ¬¡ææˆï¼‰ï¼š
    *   è¦æ±‚ `PaidRatio >= 0.5`ï¼ˆ50%ï¼‰
*   å¯¹ S2ï¼ˆäºŒæ¬¡ï¼‰ï¼š
    *   è¦æ±‚ `PaidRatio >= 0.9` æˆ– `>= 1.0`ï¼ˆåŸºæœ¬å…¨æ”¶ï¼‰

å…·ä½“æ¯”ä¾‹å¯é€šè¿‡é…ç½®æˆ– CommissionRule ä¸­é™„åŠ å‚æ•°å†³å®šã€‚

### 7.7.2 ForceSettleï¼ˆæ¡ˆä»¶å¯ç»“ç®—é…¬é‡‘ï¼‰

**å­—æ®µå«ä¹‰**

*   `T_Commission.ForceSettle = true` æ—¶ï¼Œè¡¨ç¤ºè¯¥æ¡ˆåœ¨æ»¡è¶³çŠ¶æ€èŠ‚ç‚¹ï¼ˆä¾‹å¦‚å—ç†/æˆæƒ/ç»“æ¡ˆï¼‰åï¼Œå³ä¾¿æœªè¾¾åˆ° WaitPay è§„å®šçš„æ”¶æ¬¾æ¯”ä¾‹ï¼Œä¹Ÿå¯ä»¥è¿›å…¥å¯ç»“ç®—åˆ—è¡¨ã€‚

**ä½¿ç”¨åœºæ™¯**

*   é‡å¤§å®¢æˆ·æˆ–æˆ˜ç•¥é¡¹ç›®ï¼šåˆä¼™äººå…è®¸æå‰ç»“ç®—ææˆä»¥æ¿€åŠ±ä»£ç†äººï¼›
*   å®¢æˆ·è´¦æœŸæé•¿ä½†ä¿¡ç”¨æå¥½ï¼Œå¯ä»¥ä¸å¼ºåˆ¶ WaitPay æ¡ä»¶ã€‚

**æƒé™æ§åˆ¶**

*   ForceSettle é€šå¸¸ä»…å…è®¸ç®¡ç†å±‚ç¼–è¾‘ï¼›
*   åœ¨ UI ä¸Šæä¾›â€œæ ‡è®°ä¸ºå¯ç»“ç®—é…¬é‡‘â€å‹¾é€‰æ¡†ï¼›
*   æ“ä½œè®°å½•è¦å†™å…¥é¢å¤–å®¡è®¡æ—¥å¿—ï¼ˆå¯ç”¨ç»Ÿä¸€çš„å®¡è®¡è¡¨è®°å½•ï¼‰ã€‚

***

## 7.8 å¯ç»“ç®—ææˆè¯†åˆ«ä¸ç»“ç®—æ‰¹æ¬¡ï¼ˆUS-COM-06ï¼ŒFR-COM-06/07ï¼‰

### 7.8.1 å¯ç»“ç®—æ¡ä»¶ï¼ˆç¤ºä¾‹ï¼‰

**å¯¹ Stage1ï¼ˆS1ï¼‰**

*   `S1_Done = false`
*   æ¡ˆä»¶çŠ¶æ€è¾¾åˆ°æŸä¸ªé˜¶æ®µï¼ˆä¾‹å¦‚ï¼šCase.Status å·²â€œå—ç†â€/â€œè¿›å…¥å®å®¡â€/â€œè¿›å…¥æˆæƒé˜¶æ®µâ€ï¼‰
*   è‹¥ `WaitPay=true`ï¼š
    *   `PaidRatio >= Rule.S1_RequiredRatio`ï¼ˆä¾‹å¦‚ 0.5ï¼‰
*   è‹¥ `WaitPay=false`ï¼š
    *   æ— éœ€æ”¶æ¬¾æ¯”ä¾‹é™åˆ¶
*   è‹¥ `ForceSettle=true`ï¼š
    *   å¯å¿½ç•¥ WaitPay é€»è¾‘ï¼Œåªè¦çŠ¶æ€è¾¾æ ‡å³å¯ï¼›

**å¯¹ Stage2ï¼ˆS2ï¼‰**

*   `S2_Done = false`
*   æ¡ˆä»¶çŠ¶æ€è¾¾åˆ°â€œæˆæƒ/ç»“æ¡ˆ/ç»ˆå±€â€é˜¶æ®µï¼ˆä¾‹å¦‚ Case.Statusâˆˆ{GRANTED, TERMINATED, INVALIDATED, LITIGATION\_WON/LOST/SETTLED}ï¼‰
*   `WaitPay=true` æ—¶è¦æ±‚è¾ƒé«˜æ”¶æ¬¾æ¯”ä¾‹ï¼ˆä¾‹å¦‚ 0.9 æˆ– 1.0ï¼‰ï¼›
*   `ForceSettle=true` æ—¶å¯æå‰ã€‚

> å¹´è´¹/é¡¾é—®/æ— æ•ˆç­‰ CaseType çš„å…·ä½“çŠ¶æ€é˜ˆå€¼ï¼Œå¯åœ¨è§„åˆ™é‡ŒæŒ‰ CaseType åŒºåˆ†é…ç½®ã€‚

### 7.8.2 ç»“ç®—æ‰¹æ¬¡ç”Ÿæˆæµç¨‹

**å…¥å£**

*   èœå•ï¼šâ€œé…¬é‡‘ç®¡ç† â†’ ææˆç»“ç®—â€

**æ­¥éª¤**

1.  é€‰æ‹©ç»“ç®—æœŸé—´ï¼ˆPeriodFrom/PeriodToï¼‰ï¼Œä»¥åŠè¿‡æ»¤æ¡ä»¶ï¼š
    *   ä»£ç†äººï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªäººï¼‰
    *   CaseTypeï¼ˆå¯é€‰ï¼‰
    *   Stageï¼ˆS1/S2 æˆ–å…¨éƒ¨ï¼‰
2.  ç³»ç»Ÿæ ¹æ®ä¸Šè¿°â€œå¯ç»“ç®—æ¡ä»¶â€æ‰«æ `T_Commission`ï¼š
    *   æ‰¾å‡ºæ»¡è¶³æ¡ä»¶çš„è®°å½•é›†åˆ CommListã€‚
3.  åœ¨ç•Œé¢æ˜¾ç¤º CommListï¼š
    *   åˆ—ï¼šCaseNoã€Clientã€CaseTypeã€BaseFeeã€S1/S2 æ¯”ä¾‹ä¸é‡‘é¢ã€PaidRatioã€WaitPay/ForceSettle æ ‡è®°ç­‰ã€‚
4.  ç”¨æˆ·å‹¾é€‰è¦çº³å…¥æœ¬æ‰¹æ¬¡çš„è®°å½•ï¼ˆå¯ä»¥å…¨é€‰æˆ–éƒ¨åˆ†é€‰ï¼‰ã€‚
5.  ç‚¹å‡»â€œç”Ÿæˆç»“ç®—æ‰¹æ¬¡â€ï¼š
    *   æ–°å»º `T_CommissionSettlement`ï¼š
        *   SettleNo è‡ªåŠ¨ç¼–å·ï¼›
        *   PeriodFrom/To=ç”¨æˆ·æŒ‡å®šï¼›
        *   CreatedBy/Atï¼›
        *   Remark ç”±ç”¨æˆ·å¡«å†™ã€‚
    *   å¯¹æ¯æ¡è¢«é€‰ä¸­çš„ CommIDï¼š
        *   è‹¥ç»“ç®— Stage1ï¼š
            *   æ–°å»º `T_CommissionSettleLine`ï¼š
                *   SettleIDã€CommIDã€AgentIDã€Stage=S1ã€Amount=S1\_Amtã€CaseIDã€BillID/PaymentIDï¼ˆå¦‚éœ€è®°å½•ï¼‰ï¼›
            *   å°† `T_Commission.S1_Done=true`ã€‚
        *   è‹¥ç»“ç®— Stage2ï¼š
            *   ç±»ä¼¼å¤„ç†ï¼ŒStage=S2ï¼ŒAmount=S2\_Amtï¼Œ`S2_Done=true`ã€‚

### 7.8.3 ç»“ç®—æŠ¥è¡¨

ä» `T_CommissionSettlement` + `T_CommissionSettleLine` ç”ŸæˆæŠ¥è¡¨ï¼š

*   æŒ‰ä»£ç†äººåˆ†ç»„ï¼š
    *   æ¯ä¸ªä»£ç†äººçš„ï¼šæ¡ˆä»¶åˆ—è¡¨ã€æ¯æ¡ˆ S1/S2 ææˆé‡‘é¢ã€æ€»é¢ï¼›
*   æŒ‰æ¡ˆä»¶åˆ†ç»„ï¼š
    *   æ¯ä¸ªæ¡ˆä»¶åœ¨æœ¬æ‰¹æ¬¡ç»“ç®—ç»™å“ªäº›ä»£ç†äººã€é‡‘é¢æ•°ï¼›
*   æ”¯æŒå¯¼å‡ºï¼šExcel/Word/PDFï¼›
*   å¯ç›´æ¥å¯¼å…¥è´¢åŠ¡ç³»ç»Ÿä½œä¸ºå‘æ”¾ä¾æ®ï¼ˆå…·ä½“æ ¼å¼ç”±å®æ–½æ–¹å†³å®šï¼‰ã€‚

***

## 7.9 ä¸å„ E2E åœºæ™¯çš„è¡”æ¥è¯´æ˜ï¼ˆæ±‡æ€»ï¼‰

> è™½ç„¶åœ¨å„åœºæ™¯ç« èŠ‚ä¼šè¯¦ç»†å†è®²ä¸€æ¬¡ï¼Œè¿™é‡Œç®€è¦åˆ—å‡ºæ¯ä¸ªåœºæ™¯å¦‚ä½•å½±å“ `T_Commission`ï¼š

1.  **åœºæ™¯ Aï¼šæ–°æ¡ˆç”³è¯·é˜¶æ®µ**
    *   æœåŠ¡è´¹è´¦å•ç”Ÿæˆï¼š
        *   ä»è´¦å•ä¸­ç­›é€‰ FeeType=SERVICE çš„ BillItem â†’ è®¡ç®— ServiceSumï¼›
        *   æ ¹æ®è§„åˆ™ç”Ÿæˆ/ç´¯åŠ  `T_Commission.BaseFee`ï¼ˆæ–°æ¡ˆé˜¶æ®µæœåŠ¡è´¹ï¼‰ï¼›
2.  **åœºæ™¯ Bï¼šOA / è¡¥æ­£é˜¶æ®µ**
    *   OA æœåŠ¡è´¹è´¦å•ç”Ÿæˆï¼š
        *   å°† OA æœåŠ¡è´¹ ServiceSum ç´¯åŠ åˆ°åŒä¸€ Commission çš„ BaseFeeï¼ˆæ¨¡å¼ Aï¼‰ï¼Œæˆ–è€…ç”Ÿæˆç¬¬äºŒæ¡ Commissionï¼ˆæ¨¡å¼ Bï¼‰ï¼›
3.  **åœºæ™¯ Cï¼šPCT â†’ å›½å®¶é˜¶æ®µ**
    *   PCT å›½é™…æ¡ˆï¼šå¯é…ç½®å•ç‹¬è§„åˆ™ï¼ˆä¾‹å¦‚å›½é™…é˜¶æ®µæœåŠ¡è´¹ææˆæ¯”ä¾‹ï¼‰ï¼›
    *   æ¯ä¸ªå›½å®¶é˜¶æ®µæ¡ˆï¼šå„è‡ªçš„ç”³è¯·é˜¶æ®µ/å¹´è´¹é˜¶æ®µæœåŠ¡è´¹ä¹Ÿä¼šå†™å…¥å¯¹åº”æ¡ˆä»¶çš„ Commissionï¼›
4.  **åœºæ™¯ G0ï¼šæˆæƒé˜¶æ®µ**
    *   æˆæƒé˜¶æ®µæœåŠ¡è´¹ï¼ˆç™»è®°è´¹/è¯ä¹¦è´¹çš„æœåŠ¡è´¹éƒ¨åˆ†ï¼‰ â†’ è®¡å…¥ BaseFeeï¼›
    *   é€šå¸¸æˆæƒé˜¶æ®µæ˜¯åˆ¤æ–­ S2 å¯ç»“ç®—çš„å…³é”®çŠ¶æ€èŠ‚ç‚¹ï¼›
5.  **åœºæ™¯ Dï¼šå¹´è´¹é˜¶æ®µ**
    *   å¹´è´¹æœåŠ¡è´¹ï¼ˆæ¯å¹´åº¦å¹´è´¹ä»£ç¼´æœåŠ¡è´¹ï¼‰å¯ä»¥æŒ‰è§„åˆ™è®¡å…¥ BaseFeeï¼š
        *   å¯ä»¥å…¨éƒ¨å½’å…¥ S1ï¼ˆé•¿æœŸç»´æŠ¤é˜¶æ®µï¼‰ï¼›
        *   æˆ–åªå°†éƒ¨åˆ†å¹´åº¦è®¡å…¥ï¼›
        *   è‹¥å¹´è´¹ä¹Ÿæœ‰ä¸“é—¨çš„ Stage3ï¼Œå¯åœ¨ CommissionRule å’Œæ•°æ®æ¨¡å‹ä¸­æ‰©å±•ï¼ˆå½“å‰è®¾è®¡æ”¯æŒåˆ° S2ï¼ŒS3 å¯é€šè¿‡é¢å¤–è®°å½•/å­—æ®µå®ç°ï¼‰ã€‚
6.  **åœºæ™¯ Eï¼šæ— æ•ˆ/è¯‰è®¼**
    *   æ— æ•ˆ/è¯‰è®¼è´¦å•ä¸­çš„æœåŠ¡è´¹éƒ¨åˆ† â†’ ç‰¹å®š CaseType=INVALIDATION/LITIGATION ææˆè§„åˆ™ä¸‹è®¡ç®— BaseFeeï¼›
    *   æ— æ•ˆ/è¯‰è®¼æ¡ˆä»¶çš„é˜¶æ®µï¼ˆå—ç†/å¼€åº­/åˆ¤å†³ï¼‰å¯åˆ†åˆ«å¯¹åº” S1/S2 çŠ¶æ€é˜ˆå€¼ï¼›
7.  **åœºæ™¯ Fï¼šé¢„æ”¶æ¬¾**
    *   é¢„æ”¶æ¬¾çš„å­˜åœ¨ä¸ç›´æ¥å½±å“ Commission.BaseFeeï¼ˆå› ä¸ºåŸºæ•°æ˜¯æŒ‰æœåŠ¡è´¹è´¦å•å†³å®šï¼‰
    *   ä½†å½±å“ WaitPay çš„ PaidRatio åˆ¤æ–­ï¼š
        *   åªæœ‰å½“é¢„æ”¶æ¬¾é€šè¿‡ Offset ä¸å…·ä½“è´¦å•/æ¡ˆä»¶ç»‘å®šåï¼Œæ‰è¢«è§†ä¸ºå¯¹è¯¥æ¡ˆæœåŠ¡è´¹çš„â€œå®æ”¶â€ï¼Œä»è€Œæé«˜ PaidRatioï¼›
8.  **åœºæ™¯ Hï¼šé¡¾é—®/æ£€ç´¢**
    *   é¡¾é—®/æ£€ç´¢æœåŠ¡è´¹è´¦å• â†’ CaseType=CONSULTING/SEARCH å¯¹åº”è§„åˆ™è®¡ç®— BaseFeeï¼›
    *   é€šå¸¸åªéœ€è¦ä¸€æ¬¡æ€§ææˆï¼ˆä¾‹å¦‚ S1=40%, S2=0ï¼‰ï¼›
    *   æˆ– S1=30%ã€S2=10% åˆ†ä¸¤æ¬¡ç»“ç®—ã€‚

***

## 7.10 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ï¼‰

### 7.10.1 User Story â†’ FR â†’ ç« èŠ‚æ˜ å°„ï¼ˆè¡¨ 11ï¼‰

| US                  | æ¶‰åŠ FR                | ä¸»è¦ç« èŠ‚              | è¯´æ˜                                                                                                         |
| ------------------- | -------------------- | ----------------- | ---------------------------------------------------------------------------------------------------------- |
| US-COM-01 ææˆè§„åˆ™é…ç½®    | FR-COM-01            | 7.3.1, 7.4        | 7.3.1 å®šä¹‰ `T_CommissionRule` å­—æ®µï¼›7.4 æè¿°è§„åˆ™ç»´æŠ¤ UIã€åŒ¹é…é€»è¾‘ä¸ä¼˜å…ˆçº§ï¼Œæ»¡è¶³æŒ‰ CaseType/FlowDir/Category/ClientGroup ç­‰ç»´åº¦é…ç½®è§„åˆ™éœ€æ±‚ã€‚ |
| US-COM-02 ææˆè®°å½•è‡ªåŠ¨ç”Ÿæˆ  | FR-COM-02            | 7.3.2, 7.5        | 7.3.2 å®šä¹‰ Commission æ•°æ®ç»“æ„ï¼›7.5 æè¿°åœ¨è´¦å•ç”Ÿæˆæ—¶ï¼Œå¦‚ä½•ä»æœåŠ¡è´¹ BillItem è®¡ç®— ServiceSumâ†’BaseFeeâ†’S1/S2 ææˆé‡‘é¢ï¼Œå¹¶å†™å…¥/ç´¯åŠ åˆ° Commissionã€‚ |
| US-COM-03 å¤šä»£ç†äººåˆ†æ‘Š    | FR-COM-03            | 7.5.3             | åˆ©ç”¨ T\_Case ä¸­ PrimaryAgent/SecondAgent æˆ–æ‰©å±•è¡¨ï¼ŒæŒ‰é¢„è®¾æ¯”ä¾‹åˆ†æ‘Š BaseFeeï¼Œå¹¶ä¸ºæ¯ä¸ª Agent å»ºç«‹/æ›´æ–°å„è‡ªçš„ Commissionã€‚                 |
| US-COM-04 æ¬¾åˆ°åæ‰èƒ½ç»“ç®—   | FR-COM-04            | 7.3.2, 7.7        | 7.3.2 ä¸­ `WaitPay` å­—æ®µï¼Œ7.7.1 æè¿° PaidRatio è®¡ç®—ä¸ S1/S2 ç»“ç®—é˜ˆå€¼ï¼›ä»…åœ¨æ»¡è¶³ WaitPay æ¡ä»¶æ—¶çº³å…¥å¯ç»“ç®—åˆ—è¡¨ã€‚                            |
| US-COM-05 å¼ºåˆ¶å¯ç»“ç®—     | FR-COM-05            | 7.3.2, 7.7.2      | 7.3.2 ä¸­ `ForceSettle` å­—æ®µï¼›7.7.2 æè¿°åœ¨ ForceSettle=true æ—¶ï¼Œå¯ä»¥å¿½ç•¥ WaitPay é™åˆ¶ï¼Œåªè¦çŠ¶æ€è¾¾åˆ°é˜ˆå€¼å³å¯ç»“ç®—ã€‚                        |
| US-COM-06 ææˆç»“ç®—æ‰¹æ¬¡ä¸æŠ¥è¡¨ | FR-COM-06, FR-COM-07 | 7.3.3, 7.3.4, 7.8 | 7.3.3/7.3.4 å®šä¹‰ç»“ç®—å¤´/è¡Œç»“æ„ï¼›7.8 æè¿°å¦‚ä½•é€‰æ‹©å¯ç»“ç®—è®°å½•ã€ç”Ÿæˆç»“ç®—æ‰¹æ¬¡å’Œç»“ç®—æŠ¥è¡¨ï¼Œå¹¶æ ‡è®° CommID çš„ S1\_Done/S2\_Doneã€‚                          |

### 7.10.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æ ¡éªŒæ˜ å°„ï¼ˆè¡¨ 12ï¼‰

| FR ID     | æè¿°             | å®ç°ç« èŠ‚                | å­—æ®µ/æ ¡éªŒ/æµç¨‹ç‚¹                                                                                                                            |
| --------- | -------------- | ------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| FR-COM-01 | ææˆè§„åˆ™è¡¨          | 7.3.1, 7.4          | `T_CommissionRule` è®¾ç½® CaseType/FlowDir/PatentCategory/ClientGroup çš„è§„åˆ™å’Œ Stage1Rate/Stage2Rate/BaseMode/BaseFixedAmtï¼›7.4 æè¿° UI å’ŒåŒ¹é…ä¼˜å…ˆçº§ã€‚ |
| FR-COM-02 | æœåŠ¡è´¹è´¦å•ç”Ÿæˆææˆè®°å½•    | 7.3.2, 7.5          | ä» BillItem ç­›é€‰ FeeType=SERVICEï¼ŒæŒ‰ CaseID èšåˆ ServiceSumï¼›æ ¹æ®è§„åˆ™è®¡ç®— BaseFee/S1/S2ï¼Œå¹¶å†™å…¥/æ›´æ–° `T_Commission`ã€‚                                     |
| FR-COM-03 | å¤šä»£ç†äººåˆ†æ‘Š         | 7.5.3               | æŒ‰ T\_Case ä¸­ä»£ç†äººè§’è‰²å®šä¹‰çš„åˆ†æ‘Šæ¯”ä¾‹ï¼Œå°† BaseFee åˆ†é…ç»™å¤šä¸ª Agentï¼Œå¹¶ä¸ºå„è‡ªå»ºç«‹ Commission è®°å½•ã€‚                                                                  |
| FR-COM-04 | WaitPay é€»è¾‘     | 7.3.2, 7.7.1        | Commission ä¸­ `WaitPay` å­—æ®µ + PaidRatio é€»è¾‘ï¼›åœ¨å¯ç»“ç®—åˆ¤å®šæ—¶ï¼Œå¦‚æœ WaitPay=true ä¸”æ”¶æ¬¾æ¯”ä¾‹ä¸è¶³ï¼Œå°±ä¸å…è®¸ç»“ç®—ã€‚                                                     |
| FR-COM-05 | ForceSettle é€»è¾‘ | 7.3.2, 7.7.2        | Commission ä¸­ `ForceSettle` å­—æ®µï¼›åœ¨åˆ¤å®šå¯ç»“ç®—æ—¶ï¼Œå¯è·³è¿‡ WaitPay å’Œ PaidRatio æ£€æŸ¥ï¼Œåªçœ‹ Case.Status æ˜¯å¦è¾¾åˆ°ã€‚                                                |
| FR-COM-06 | ç»“ç®—æ‰¹æ¬¡ç”Ÿæˆ         | 7.3.3, 7.3.4, 7.8.2 | `T_CommissionSettlement/SettleLine` å®šä¹‰æ‰¹æ¬¡åŠæ˜ç»†ç»“æ„ï¼›7.8.2 æè¿°ä»å¯ç»“ç®—åˆ—è¡¨å‹¾é€‰ CommIDâ†’ç”Ÿæˆç»“ç®—æ‰¹æ¬¡â†’æ ‡è®° S1\_Done/S2\_Doneã€‚                                   |
| FR-COM-07 | ç»“ç®—æŠ¥è¡¨           | 7.8.3               | åŸºäº CommissionSettlement & SettleLine æŒ‰ Agent/Case/æœŸé—´èšåˆæ•°æ®ï¼Œå¹¶å¯¼å‡ºæŠ¥è¡¨ã€‚                                                                      |

***

âœ… è‡³æ­¤ï¼Œæ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ç®¡ç† çš„æ‰€æœ‰ç»†èŠ‚ï¼ˆæ•°æ®æ¨¡å‹ã€å­—æ®µçº§é€»è¾‘ã€å¤šåœºæ™¯ç´¯ç§¯ç­–ç•¥ã€WaitPay/ForceSettleã€ç»“ç®—æ‰¹æ¬¡ã€æŠ¥è¡¨å’Œ FR æ˜ å°„ï¼‰å·²ç»å®Œæ•´å†™å…¥ v2.0 æ–‡æ¡£ï¼Œæ²¡æœ‰å‹ç¼©æˆ–åˆ å‡ã€‚

## 8. æ¨¡å—ä¸ƒï¼šé¡¾é—® / æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®ï¼ˆConsulting & Searchï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« å¯¹åº”â€œéä¸“åˆ©æµç¨‹å‹é¡¹ç›®â€ï¼ˆé¡¾é—®/æ£€ç´¢/åŸ¹è®­/å°½èŒè°ƒæŸ¥ç­‰ï¼‰ï¼Œæ•´åˆä¹‹å‰å¯¹åœºæ™¯ H çš„å…¨éƒ¨æè¿°ï¼š
>
> *   CaseType=CONSULTING/SEARCH çš„æ¡ˆå·å»ºæ¨¡
>
> *   å†…éƒ¨ä»»åŠ¡ç®¡ç†ï¼ˆå¯é€‰ï¼‰
>
> *   æ”¯å‡ºè´¹ç”¨è®°å½•ï¼ˆT\_Expenseï¼‰
>
> *   æœåŠ¡è´¹è‰å• â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆæ²¿ç”¨æ¨¡å—å››/äº”ï¼‰
>
> *   ä»£ç†äºº/é¡¾é—®ææˆï¼ˆæ²¿ç”¨æ¨¡å—å…­ï¼‰
>
> ç‰¹åˆ«ä¹‹å¤„ï¼š**æ²¡æœ‰å®˜è´¹ / OA / æˆæƒ / å¹´è´¹ / å®˜æ–¹æ¸…å•**ï¼Œä½†å®Œæ•´å¤ç”¨è´¹ç”¨ã€è´¦å•ã€æ”¶æ¬¾ã€ææˆç®¡é“ã€‚

***

## 8.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 8.1.1 èŒƒå›´

é¡¾é—® / æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®æ¨¡å—ç”¨äºå¤„ç†â€œ**ä¸èµ°ä¸“åˆ©å®˜æ–¹æµç¨‹çš„é¡¹ç›®å‹æœåŠ¡**â€ï¼Œå…¸å‹åŒ…æ‹¬ï¼š

*   é¡¾é—®é¡¹ç›®ï¼š
    *   IP æˆ˜ç•¥å’¨è¯¢
    *   ä¸“åˆ©å¸ƒå±€å’¨è¯¢
    *   ä¼ä¸š IP ä½“ç³»æ­å»º
    *   å°½èŒè°ƒæŸ¥ï¼ˆIP DDï¼‰
    *   å†…éƒ¨åŸ¹è®­ï¼ˆä¿¡æ¯å®‰å…¨ã€ä¸“åˆ©åŸºç¡€ã€IP è¿è¥ç­‰ï¼‰
*   æ£€ç´¢é¡¹ç›®ï¼š
    *   ç°æœ‰æŠ€æœ¯æ£€ç´¢
    *   FTOï¼ˆè‡ªç”±å®æ–½ï¼‰æ£€ç´¢
    *   ä¸“åˆ©åœ°å›¾/ç«äº‰åˆ†æ
    *   ä¸“é¢˜æ£€ç´¢/ç›‘æ§é¡¹ç›®

è¿™äº›é¡¹ç›®çš„å…±æ€§ï¼š

*   æ²¡æœ‰å®˜æ–¹æ¥æ–‡/å»æ–‡ï¼Œä¹Ÿæ²¡æœ‰æˆæƒ/å¹´è´¹ç­‰æµç¨‹ï¼›
*   åªæœ‰æœåŠ¡è´¹ï¼ˆService Feeï¼‰ï¼Œå¤–åŠ å¯èƒ½çš„ç¬¬ä¸‰æ–¹æ”¯å‡ºï¼ˆç¿»è¯‘/æ•°æ®åº“/å·®æ—…ï¼‰ï¼›
*   **ä½¿ç”¨å’Œä¸“åˆ©æ¡ˆå®Œå…¨ç›¸åŒçš„è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆç®¡é“**ï¼Œåªæ˜¯ç±»å‹ä¸åŒã€‚

### 8.1.2 è§’è‰²

*   **Project Owner / é¡¾é—®è´Ÿè´£äººï¼ˆAgent ä¸€ç§ï¼‰**
    *   æ˜¯è¯¥é¡¹ç›®çš„ä¸»è¦è´Ÿè´£äººï¼ˆå¯ä»¥å¤ç”¨ T\_Case.PrimaryAgentIDï¼‰
    *   è´Ÿè´£é¡¹ç›®æ‰§è¡Œå’Œäº¤ä»˜
*   **Team Membersï¼ˆé¡¹ç›®ç»„æˆå‘˜ï¼‰**
    *   å‚ä¸é¡¹ç›®éƒ¨åˆ†å·¥ä½œï¼ˆæ£€ç´¢ã€åˆ†æã€æ’°å†™æŠ¥å‘Šï¼‰
*   **Formalities / PMOï¼ˆé¡¹ç›®ç®¡ç†åŠå…¬å®¤ï¼Œå¯é€‰ï¼‰**
    *   è´Ÿè´£ç«‹é¡¹ã€çŠ¶æ€è·Ÿè¸ªã€æˆæœ¬å½•å…¥ï¼ˆT\_Expenseï¼‰
    *   åè°ƒé¡¹ç›®è¿›åº¦
*   **Finance**
    *   è´Ÿè´£æœåŠ¡è´¹è‰å•ã€è´¦å•ã€æ”¶æ¬¾ã€ææˆç»“ç®—ç­‰
*   **Manager / Partner**
    *   å®¡æ‰¹é¡¹ç›®æŠ¥ä»·/ç»“ç®—æ–¹æ¡ˆ
    *   å®šä¹‰ææˆè§„åˆ™ï¼ˆConsulting/Search ç±»å‹ï¼‰

***

## 8.2 User Stories & Functional Requirements

### 8.2.1 User Storiesï¼ˆUSï¼‰

**US-CS-01 é¡¾é—®/æ£€ç´¢é¡¹ç›®ç«‹æ¡ˆ**\
ä½œä¸º **é¡¹ç›®è´Ÿè´£äºº/æµç¨‹äººå‘˜**ï¼Œæˆ‘å¸Œæœ›å°†é¡¾é—®/æ£€ç´¢é¡¹ç›®å½“ä½œä¸€ä¸ª Case ç«‹æ¡ˆï¼Œè®°å½•é¡¹ç›®èŒƒå›´ã€å®¢æˆ·ã€è´Ÿè´£äººå’Œé¢„ä¼°å·¥ä½œé‡ç­‰ï¼Œä¸ºåç»­ä»»åŠ¡ã€è´¹ç”¨å’Œææˆç®¡ç†æ‰“åŸºç¡€ã€‚

**US-CS-02 å†…éƒ¨ä»»åŠ¡ç®¡ç†ï¼ˆå¯é€‰ï¼‰**\
ä½œä¸º **é¡¹ç›®è´Ÿè´£äºº**ï¼Œæˆ‘å¸Œæœ›åœ¨é¡¹ç›®ä¸Šåˆ›å»ºå¤šä¸ªå†…éƒ¨ä»»åŠ¡ï¼ˆå·¥ä½œåŒ…ï¼‰ï¼Œå¦‚â€œéœ€æ±‚è®¿è°ˆ/èŒƒå›´ç¡®è®¤â€ã€â€œæ£€ç´¢æ‰§è¡Œâ€ã€â€œåˆ†ææŠ¥å‘Šæ’°å†™â€ã€â€œå¯¹å®¢æ±‡æŠ¥â€ç­‰ï¼Œä»¥ä¾¿åˆ†æ´¾å›¢é˜Ÿæˆå‘˜å¹¶è·Ÿè¸ªè¿›åº¦ã€‚

**US-CS-03 æ”¯å‡ºè´¹ç”¨è®°å½•**\
ä½œä¸º **è´¢åŠ¡/é¡¹ç›®è´Ÿè´£äºº**ï¼Œæˆ‘å¸Œæœ›è®°å½•è¯¥é¡¹ç›®çš„ç¬¬ä¸‰æ–¹æ”¯å‡ºï¼ˆæ£€ç´¢æ•°æ®åº“æ”¶è´¹ã€ç¿»è¯‘è´¹ã€å·®æ—…ç­‰ï¼‰ï¼Œç”¨äºæˆæœ¬ä¸æ¯›åˆ©åˆ†æã€‚

**US-CS-04 æœåŠ¡è´¹è‰å•ç”Ÿæˆ**\
ä½œä¸º **é¡¹ç›®è´Ÿè´£äºº/è´¢åŠ¡**ï¼Œæˆ‘å¸Œæœ›åœ¨é¡¹ç›®è¾¾åˆ°æŸä¸ªé‡Œç¨‹ç¢‘ï¼ˆæˆ–ç»“æŸï¼‰æ—¶ï¼Œç”Ÿæˆæœ¬é¡¹ç›®çš„æœåŠ¡è´¹è‰å•ï¼Œå¯ä»¥æ˜¯å›ºå®šæŠ¥ä»·ã€æŒ‰å·¥æ—¶è®¡è´¹æˆ–æ··åˆè®¡è´¹ã€‚

**US-CS-05 è´¦å•ã€æ”¶æ¬¾ä¸ææˆ**\
ä½œä¸º **è´¢åŠ¡/ç®¡ç†å±‚**ï¼Œæˆ‘å¸Œæœ›é¡¾é—®/æ£€ç´¢é¡¹ç›®å¯ä»¥åƒæ™®é€šæ¡ˆå­ä¸€æ ·ç”Ÿæˆè´¦å•ã€ç™»è®°æ”¶æ¬¾ã€è¿›è¡Œè´¦å•å†²é”€ï¼Œå¹¶é€šè¿‡ææˆæ¨¡å—ä¸ºå‚ä¸é¡¾é—®/ä»£ç†äººè®¡ç®—å’Œç»“ç®—ææˆã€‚

### 8.2.2 Functional Requirementsï¼ˆFRï¼‰

**FR-CS-01**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä»¥ CaseType=CONSULTING/SEARCH çš„æ–¹å¼ä¸ºé¡¾é—®/æ£€ç´¢é¡¹ç›®å»ºç«‹æ¡ˆå·è®°å½•ï¼Œå¹¶è®°å½•é¡¹ç›®ä¸“å±å±æ€§ï¼ˆèŒƒå›´ã€è´Ÿè´£äººã€é¢„è®¡å·¥æ—¶ç­‰ï¼‰ã€‚

**FR-CS-02**ï¼šç³»ç»Ÿå¿…é¡»å…è®¸åœ¨é¡¾é—®/æ£€ç´¢æ¡ˆå·ä¸Šåˆ›å»ºå†…éƒ¨ä»»åŠ¡ `T_Task`ï¼ˆéå®˜æ–¹æ—¶é™ä»»åŠ¡ï¼‰ï¼Œç”¨äºé¡¹ç›®æ‰§è¡Œç®¡ç†ã€‚

**FR-CS-03**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒè®°å½•é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„æ”¯å‡ºè´¹ç”¨ `T_Expense`ï¼ŒæŒ‰æ¡ˆä»¶/ç±»åˆ«/æ—¶é—´è¿›è¡ŒæŸ¥è¯¢å’Œç»Ÿè®¡ã€‚

**FR-CS-04**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä¸ºé¡¾é—®/æ£€ç´¢é¡¹ç›®ç”ŸæˆæœåŠ¡è´¹è‰å• `T_FeeDraft/T_FeeItem`ï¼Œæ”¯æŒå›ºå®šæŠ¥ä»·ã€æŒ‰å·¥æ—¶è®¡è´¹æˆ–æ··åˆæ¨¡å¼ã€‚

**FR-CS-05**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒä»é¡¾é—®/æ£€ç´¢è‰å•ç”Ÿæˆè´¦å• `T_Bill/T_BillItem`ï¼Œå¹¶ä½¿ç”¨æ”¶æ¬¾/å†²é”€æœºåˆ¶å¤„ç†ç›¸å…³æ¬¾é¡¹ã€‚

**FR-CS-06**ï¼šç³»ç»Ÿå¿…é¡»æ”¯æŒæŒ‰ç…§ `T_CommissionRule` çš„ CONSULTING/SEARCH è§„åˆ™ä¸ºé¡¾é—®/æ£€ç´¢é¡¹ç›®ç”Ÿæˆææˆè®°å½• `T_Commission`ï¼Œå¹¶çº³å…¥ç»“ç®—æ‰¹æ¬¡ã€‚

***

## 8.3 æ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰

> é¡¾é—®/æ£€ç´¢é¡¹ç›®å¤ç”¨å¤§é‡æ ¸å¿ƒè¡¨ï¼ˆT\_Case/T\_Task/T\_Expense/T\_FeeDraft/T\_Bill/T\_Payment/T\_Offset/T\_CaseReceipt/T\_Commissionï¼‰ã€‚\
> æœ¬èŠ‚åªå¼ºè°ƒ **CaseType=CONSULTING/SEARCH æ—¶æœ‰æ‰€æ‰©å±•æˆ–ç‰¹åˆ«ä½¿ç”¨çš„å­—æ®µ**ã€‚

### 8.3.1 `T_Case` â€“ é¡¾é—®/æ£€ç´¢é¡¹ç›®æ¡ˆå·

**åœ¨æ¨¡å—ä¸€ä¸­å·²å®šä¹‰**ï¼Œè¿™é‡Œè¡¥å……é¡¾é—®/æ£€ç´¢é¡¹ç›®ç‰¹æœ‰å±æ€§å»ºè®®ï¼ˆå¯æ”¾åœ¨ ExtraData æˆ–æ‰©å±•å­—æ®µï¼‰ï¼š

*   `CaseType` = CONSULTING / SEARCH
*   å¸¸ç”¨æ‰©å±•å­—æ®µï¼ˆå¯åœ¨ T\_Case å¢åŠ æˆ–å­˜å…¥ ExtraDataï¼‰ï¼š
    *   `ConsultingScope` nvarchar â€“ é¡¹ç›®èŒƒå›´/ç®€è¦æè¿°
    *   `DeliverableType` nvarchar â€“ æŠ¥å‘Šç±»å‹ï¼ˆWord æŠ¥å‘Š/Presentation/PDF/æ•°æ®è¡¨ç­‰ï¼‰
    *   `FixedFee` decimal? â€“ é¡¹ç›®æŠ¥ä»·ï¼ˆå›ºå®šé‡‘é¢é¡¹ç›®ï¼‰
    *   `EstimatedHours` decimal? â€“ é¢„è®¡å·¥æ—¶ï¼ˆç”¨äºå·¥æ—¶é¢„ç®—ä¸æ ¸ç®—ï¼‰
    *   `StartDate` date? â€“ é¡¹ç›®å¼€å§‹æ—¥æœŸ
    *   `EndDate` date? â€“ é¡¹ç›®é¢„è®¡å®Œæˆæ—¥æœŸ

**çŠ¶æ€å»ºè®®**

*   `Status` æšä¸¾ä¸­å¢åŠ ï¼š
    *   NOT\_STARTED â€“ æœªå¯åŠ¨
    *   IN\_PROGRESS â€“ è¿›è¡Œä¸­
    *   COMPLETED â€“ å®Œæˆï¼ˆæŠ¥å‘Š/äº¤ä»˜ç‰©å·²æäº¤ï¼‰
    *   CLOSED â€“ å·²ç»“æ¡ˆï¼ˆè´¹ç”¨ä¸ææˆå‡å·²ç»“ï¼‰

çŠ¶æ€æµè½¬ç¤ºä¾‹ï¼š

*   NOT\_STARTED â†’ IN\_PROGRESS â†’ COMPLETED â†’ CLOSED

***

### 8.3.2 `T_Task` â€“ å†…éƒ¨ä»»åŠ¡ï¼ˆé¡¹ç›®å·¥ä½œåŒ…ï¼‰

é¡¾é—®/æ£€ç´¢åœºæ™¯å¯ä»¥ä½¿ç”¨æ—¶é™æ¨¡å—çš„ T\_Task ä½œä¸ºå†…éƒ¨ä»»åŠ¡ç®¡ç†å·¥å…·ï¼š

*   `CaseID` = é¡¾é—®/æ£€ç´¢æ¡ˆ CaseID
*   `TemplateCode` å¯ä»¥ä¸ºç©ºæˆ–ä½¿ç”¨ç‰¹å®šå†…éƒ¨æ¨¡æ¿ Codeï¼ˆä¾‹å¦‚ï¼šCONSULT\_SCOPING, SEARCH\_EXECUTION, ANALYSIS\_REPORT, CLIENT\_PRESENTATIONï¼‰
*   `Type` ç”¨äºè¡¨ç¤ºä»»åŠ¡åç§°ï¼š
    *   â€œéœ€æ±‚è®¿è°ˆ/èŒƒå›´ç¡®è®¤â€ã€â€œæ£€ç´¢æ‰§è¡Œâ€ã€â€œåˆ†æä¸æŠ¥å‘Šæ’°å†™â€ã€â€œå¯¹å®¢æ±‡æŠ¥â€ç­‰
*   `BaseDate` å’Œ `Deadline`ï¼šå¯ä»¥ç”¨æ¥ç®¡ç†å†…éƒ¨è®¡åˆ’ï¼ˆä¾‹å¦‚ 10 å¤©å†…å®ŒæˆæŠ¥å‘Šï¼‰ï¼Œä¸æ¶‰åŠå®˜æ–¹æ—¶é™ï¼›
*   `WorkerID` / `SupervisorID` åˆ†é…ç»™é¡¹ç›®ç»„æˆå‘˜å’Œè´Ÿè´£äººã€‚

> æ ¡éªŒä¸æ“ä½œè§„åˆ™ä½¿ç”¨æ¨¡å—ä¸‰ä¸­å®šä¹‰çš„ Task é€šç”¨é€»è¾‘ã€‚\
> é¡¾é—®/æ£€ç´¢åœºæ™¯é€šå¸¸ä¸ä½¿ç”¨ WaitPay/S1/S2 ææˆé˜¶æ®µå¯¹ Task çš„å«ä¹‰ï¼Œä½†ä»»åŠ¡å®Œæˆå¯ä»¥ä½œä¸ºè§¦å‘ç”Ÿæˆè‰å•æˆ–è´¦å•çš„ä¸šåŠ¡èŠ‚ç‚¹ï¼ˆä¾‹å¦‚åœ¨ ANALYSIS\_REPORT ä»»åŠ¡å®Œæˆåç”ŸæˆæœåŠ¡è´¹è‰å•ï¼‰ã€‚

***

### 8.3.3 `T_Expense` â€“ é¡¾é—®/æ£€ç´¢é¡¹ç›®æ”¯å‡º

åœ¨è´¹ç”¨æ¨¡å—ä¸­å·²ç»è¯¦ç»†æè¿°ï¼Œè¿™é‡Œå¼ºè°ƒé¡¾é—®/æ£€ç´¢é¡¹ç›®çš„å¸¸è§ç±»åˆ«ï¼š

*   Category:
    *   SEARCH\_DB â€“ æ£€ç´¢æ•°æ®åº“è´¹ç”¨ï¼ˆDerwentã€PatBaseã€Orbit ç­‰ï¼‰
    *   TRANSLATION â€“ æ–‡çŒ®/æŠ¥å‘Šç¿»è¯‘è´¹
    *   TRANSPORT â€“ å·®æ—…/äº¤é€šè´¹
    *   OTHER â€“ å…¶ä»–ï¼ˆåœºåœ°è´¹ç”¨ã€ä¼šè®®è´¹ç”¨ç­‰ï¼‰

æ”¯å‡ºè®°å½•å­—æ®µåŒæ¨¡å—å›› 5.3.8/5.10ï¼š

*   `ExpenseID`, `CaseID`, `AgentID`, `ItemName`, `Category`, `WorkerID`, `Date`, `Quantity`, `UnitPrice`, `Total`, `Currency`, `Remark`ã€‚

***

### 8.3.4 `T_FeeDraft` / `T_FeeItem` â€“ é¡¾é—®/æ£€ç´¢æœåŠ¡è´¹è‰å•

é¡¾é—®/æ£€ç´¢é¡¹ç›®ä½¿ç”¨ Type=CONSULT\_FEE / SEARCH\_FEE çš„è‰å•ï¼š

*   `T_FeeDraft`ï¼š
    *   `CaseID` = é¡¾é—®/æ£€ç´¢æ¡ˆ CaseID
    *   `Type` = CONSULT\_FEE æˆ– SEARCH\_FEE
    *   `Currency` = å®¢æˆ·å¸ç§
    *   `TotalService`ã€`TotalMisc`ã€`TotalGov`ï¼ˆé€šå¸¸ TotalGov=0ï¼‰
    *   `Status`=OPEN/LOCKED ç­‰
*   `T_FeeItem`ï¼š
    *   ä¸€æ¡æˆ–å¤šæ¡æœåŠ¡è´¹æ˜ç»†ï¼š
        *   å›ºå®šæŠ¥ä»·ï¼š1 æ¡ `FeeCode="CONSULT_FIXED"`, `Amount=å›ºå®šé‡‘é¢`;
        *   æŒ‰å·¥æ—¶è®¡è´¹ï¼šå¤šæ¡ `FeeCode=CONSULT_SENIOR_HOUR/SEARCH_ANALYST_HOUR`ï¼ŒQuantity=å·¥æ—¶æ•°ï¼ŒUnitPrice=æ—¶è–ªï¼›
    *   éœ€è¦è½¬å«çš„æ”¯å‡ºå¯ä»¥æŒ‰ `FeeType=MISC` æˆ– `SERVICE` æ–¹å¼åŠ å…¥æ˜ç»†ï¼ˆè§†ä¸šåŠ¡ç­–ç•¥ï¼‰ã€‚

***

### 8.3.5 è´¦å•/æ”¶æ¬¾/ææˆç›¸å…³è¡¨

é¡¾é—®/æ£€ç´¢é¡¹ç›®å®Œå…¨å¤ç”¨ï¼š

*   æ¨¡å—äº”çš„ `T_Bill/T_BillItem/T_Payment/T_PaymentLine/T_Offset`
*   æ¨¡å—å››çš„ `T_CaseReceipt`
*   æ¨¡å—å…­çš„ `T_CommissionRule/T_Commission/T_CommissionSettlement/T_CommissionSettleLine`

åŒºåˆ«ä»…åœ¨äºè§„åˆ™åŒ¹é…ï¼š

*   CommissionRule ä¸­ä¼šæœ‰ä¸“é—¨é’ˆå¯¹ CaseType=CONSULTING/SEARCH çš„è§„åˆ™æ¡ç›®ï¼›
*   Bill/FeeDraft ä¸­ FeeType=SERVICE æ˜ç»†å…¨éƒ¨æˆ–éƒ¨åˆ†è®¡å…¥ BaseFeeã€‚

***

## 8.4 é¡¾é—®/æ£€ç´¢é¡¹ç›®æ ¸å¿ƒæµç¨‹

> è¿™é‡Œå…ˆç»™**æ¦‚è¦æµç¨‹**ï¼Œè¯¦ç»†çš„ E2E æ—¶åºåœ¨ Part II çš„åœºæ™¯ H ä¸­å·²ç»/å°†è¢«å±•å¼€ã€‚

### 8.4.1 é¡¹ç›®ç«‹æ¡ˆï¼ˆFR-CS-01ï¼‰

**æ­¥éª¤**

1.  åœ¨â€œæ¡ˆå·ç»´æŠ¤â€æ¨¡å—ä¸­æ–°å»º Caseï¼š
    *   `CaseType = CONSULTING` æˆ– `SEARCH`
    *   å¡«å†™ï¼šCaseNoã€Titleï¼ˆé¡¹ç›®åç§°ï¼‰ã€ClientIDã€PrimaryAgentID ç­‰
    *   å¯å¡«å†™æ‰©å±•å­—æ®µ `ConsultingScope`, `DeliverableType`, `FixedFee`, `EstimatedHours`, `StartDate`, `EndDate`
2.  åˆå§‹ `Status = NOT_STARTED` æˆ– `IN_PROGRESS`ï¼ˆæ ¹æ®ç»„ç»‡è§„åˆ™ï¼Œæœ‰çš„é¡¹ç›®ä¸€ç«‹æ¡ˆå³è§†ä¸º IN\_PROGRESSï¼‰ã€‚

**ç»“æœ**

*   `T_Case` æ–°å¢ä¸€æ¡é¡¹ç›®å‹è®°å½•ï¼›
*   ç”¨äºåç»­å†…éƒ¨ä»»åŠ¡/æ”¯å‡º/è‰å•/è´¦å•åŠææˆç»Ÿè®¡ã€‚

***

### 8.4.2 å†…éƒ¨ä»»åŠ¡ç®¡ç†ï¼ˆFR-CS-02ï¼‰

åœ¨é¡¹ç›® Case çš„â€œä»»åŠ¡â€æ ‡ç­¾ä¸­ï¼š

1.  æ ¹æ®é¡¹ç›®è®¡åˆ’ï¼Œæ–°å¢è‹¥å¹² `T_Task` è®°å½•ï¼š
    *   ä¾‹å¦‚ï¼š
        *   Type=â€œéœ€æ±‚è®¿è°ˆ/èŒƒå›´ç¡®è®¤â€ï¼ˆCONSULT\_SCOPINGï¼‰
        *   Type=â€œæ£€ç´¢æ‰§è¡Œâ€ï¼ˆSEARCH\_EXECUTIONï¼‰
        *   Type=â€œåˆ†ææŠ¥å‘Šæ’°å†™â€ï¼ˆANALYSIS\_REPORTï¼‰
        *   Type=â€œå¯¹å®¢æ±‡æŠ¥â€ï¼ˆCLIENT\_PRESENTATIONï¼‰
2.  å¯¹æ¯ä¸ª Task è®¾ç½®ï¼š
    *   `BaseDate`ï¼ˆä»»åŠ¡å¼€å§‹æ—¥ï¼‰
    *   `Deadline`ï¼ˆå†…éƒ¨ç›®æ ‡å®Œæˆæ—¥ï¼‰
    *   `WorkerID`ï¼ˆåˆ†é…ç»™å…·ä½“é¡¾é—®/æ£€ç´¢äººå‘˜ï¼‰
    *   `SupervisorID`ï¼ˆé¡¹ç›®è´Ÿè´£äººï¼‰
3.  ä»£ç†äººå¯åœ¨â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾çœ‹åˆ°è¿™äº›å†…éƒ¨ä»»åŠ¡ï¼›
4.  å®Œæˆåé€šè¿‡æ¨¡å—ä¸‰çš„æ ¸é”€æœºåˆ¶å°†ä»»åŠ¡æ ‡è®°ä¸º DONEã€‚

**è¯´æ˜**

*   é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„ Task ä¸æ¶‰åŠå®˜æ–¹æœŸé™å’Œ WaitPay/S1/S2ï¼›
*   åšæŒå¤ç”¨ `T_Task` æ¨¡å‹å¯ä»¥ç®€åŒ–å‰ç«¯å’ŒæŠ¥è¡¨å¼€å‘ã€‚

***

### 8.4.3 æ”¯å‡ºè®°å½•ï¼ˆFR-CS-03ï¼‰

åœ¨é¡¹ç›® Case çš„â€œæ”¯å‡ºè´¹ç”¨â€æ ‡ç­¾ä¸­ï¼š

1.  Project Owner/Finance å¯¹æ¯ä¸€é¡¹æ”¯å‡ºæ–°å¢ `T_Expense`ï¼š
    *   ItemName = â€œDerwent æ£€ç´¢è´¹â€ã€â€œç¿»è¯‘è´¹â€ã€â€œä¸Šæµ·å·®æ—…â€ç­‰
    *   Category = SEARCH\_DB/TRANSLATION/TRANSPORT/OTHER
    *   WorkerID = æŠ¥é”€äºº
    *   Date, Quantity, UnitPrice, Total, Currency
    *   Remark = ä¾›åº”å•†ä¿¡æ¯ã€ç¥¨æ®å·ç­‰
2.  åœ¨æŠ¥è¡¨ä¸­å¯æ±‡æ€»æŸé¡¹ç›®çš„æ€»æ”¯å‡ºï¼Œç”¨äºæ¯›åˆ©åˆ†æã€‚

***

### 8.4.4 æœåŠ¡è´¹è‰å•ç”Ÿæˆï¼ˆFR-CS-04ï¼‰

**åˆ›å»ºæ—¶æœº**

*   é¡¹ç›®å®Œæˆæ—¶ï¼ˆStatus ä» IN\_PROGRESS â†’ COMPLETEDï¼‰
*   æˆ–æŒ‰é˜¶æ®µé‡Œç¨‹ç¢‘ï¼ˆä¾‹å¦‚å®Œæˆâ€œåˆ†ææŠ¥å‘Šâ€é˜¶æ®µå°±å¼€ä¸€å¼ é˜¶æ®µæ€§è´¦å•ï¼‰

**æµç¨‹**

1.  åœ¨é¡¹ç›® Case çš„â€œè´¹ç”¨è‰å•â€æ ‡ç­¾ä¸­ç‚¹å‡»â€œæ–°å»ºè‰å•â€ï¼š
    *   `T_FeeDraft`ï¼šCaseID=æœ¬é¡¹ç›®ï¼ŒType=CONSULT\_FEE æˆ– SEARCH\_FEEï¼ŒCurrency=å®¢æˆ·å¸ç§ï¼›
2.  å½•å…¥/ç”Ÿæˆ `T_FeeItem`ï¼š

**å›ºå®šæŠ¥ä»·**

*   ä¸€æ¡æ˜ç»†ï¼š
    *   FeeCode=CONSULT\_FIXED
    *   FeeName=â€œé¡¾é—®é¡¹ç›®å›ºå®šæœåŠ¡è´¹â€
    *   Quantity=1
    *   UnitPrice = é¡¹ç›®æŠ¥ä»·ï¼ˆä¾‹å¦‚ 30000ï¼‰
    *   Amount=30000

**æŒ‰å·¥æ—¶è®¡è´¹**

*   ä»é¡¹ç›®ç®¡ç†å·¥å…·/å·¥æ—¶ç³»ç»Ÿå¯¼å…¥æˆ–æ‰‹å·¥å½•å…¥ï¼š
    *   é¡¹ç›®è´Ÿè´£äººï¼šFeeCode=CONSULT\_SENIOR\_HOUR, Quantity=æ—¶æ•°, UnitPrice=æ—¶è–ª
    *   æ£€ç´¢å‘˜ï¼šFeeCode=SEARCH\_ANALYST\_HOUR, etc.

**æ··åˆæ¨¡å¼**

*   å›ºå®šéƒ¨åˆ† + æŒ‰å·¥æ—¶éƒ¨åˆ†ï¼šå„è‡ªä¸ºç‹¬ç«‹ FeeItemã€‚
    3\.  ä¿å­˜è‰å•ï¼ŒTotalService = Î£æ˜ç»† LocalAmountï¼›TotalGov=0ï¼›TotalMisc=Î£éœ€è½¬å«æ”¯å‡ºé¡¹çš„ LocalAmountã€‚

***

### 8.4.5 è´¦å•ã€æ”¶æ¬¾ä¸ææˆï¼ˆFR-CS-05/06ï¼‰

**è´¦å•ç”Ÿæˆ**

*   ä»é¡¾é—®/æ£€ç´¢è‰å•ç”Ÿæˆ `T_Bill/T_BillItem`ï¼š
    *   `Direction=AR`
    *   FeeItem ä¸­çš„æœåŠ¡è´¹/æ‚è´¹å…¨éƒ¨å¤åˆ¶ä¸º BillItemï¼›
    *   åˆè®¡ TotalService/TotalMisc/Amount/Balanceã€‚

**æ”¶æ¬¾ä¸å†²é”€**

*   ä¸æ¨¡å—äº”ç›¸åŒï¼š
    *   å®¢æˆ·ä»˜æ¬¾ â†’ `T_Payment/T_PaymentLine`ï¼›
    *   å†²é”€ â†’ `T_Offset`ï¼›
    *   æ›´æ–° T\_Bill.Balance/Statusï¼›
    *   æ‹†åˆ† Offset â†’ æ›´æ–° `T_CaseReceipt`ï¼ˆæœ¬é¡¹ç›®çš„ ReceivableAmt/ReceivedAmt/IsArrearsï¼‰ã€‚

**ææˆè®¡ç®—**

*   åœ¨è´¦å•ç”Ÿæˆæ—¶ï¼Œä»¥ CaseType=CONSULTING/SEARCH åŒ¹é… `T_CommissionRule`ï¼š
    *   ä¾‹å¦‚ Stage1Rate=0.3, Stage2Rate=0ï¼ˆæˆ– Stage2 ä¸ºåæœŸå¥–åŠ±ï¼‰ï¼›
    *   BaseMode=BY\_SERVICE\_FEEï¼ˆBaseFee=æœåŠ¡è´¹æ€»é¢ï¼‰ï¼Œæˆ– FIXED\_PER\_CASEã€‚
*   é€šè¿‡å¤šä»£ç†äººåˆ†æ‘ŠæŠŠ BaseFee åˆ†é…ç»™é¡¹ç›®è´Ÿè´£äººå’Œå›¢é˜Ÿæˆå‘˜ï¼›
*   åœ¨ `T_Commission` ä¸­è®°å½• BaseFee/S1\_Amt/S2\_Amt ç­‰ï¼›
*   WaitPay å¤šæ•°è®¾ç½®ä¸º trueï¼ˆæ¬¾åˆ°æ‰ç»“ç®—ï¼‰ï¼Œä¹Ÿå¯æŒ‰é¡¹ç›®ç­–ç•¥è°ƒæ•´ï¼›
*   åœ¨é¡¹ç›®å®Œæˆ + æ”¶æ¬¾è¾¾åˆ°æ¡ä»¶åï¼Œçº³å…¥ç»“ç®—æ‰¹æ¬¡è¿›è¡Œææˆç»“ç®—ã€‚

***

## 8.5 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆUser Story â†” FR â†” ç« èŠ‚ï¼‰

### 8.5.1 User Story â†’ FR â†’ ç« èŠ‚æ˜ å°„ï¼ˆè¡¨ 13ï¼‰

| US                 | æ¶‰åŠ FR              | ä¸»è¦ç« èŠ‚                    | è¯´æ˜                                                                                                                                   |
| ------------------ | ------------------ | ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| US-CS-01 é¡¾é—®/æ£€ç´¢é¡¹ç›®ç«‹æ¡ˆ | FR-CS-01           | 8.3.1, æ¨¡å—ä¸€ 2.3          | é€šè¿‡ `T_Case` CaseType=CONSULTING/SEARCH å»ºç«‹é¡¹ç›®æ¡ˆå·ï¼›8.3.1 å»ºè®®æ‰©å±•å­—æ®µï¼ˆConsultingScope/DeliverableType/FixedFee/EstimatedHoursç­‰ï¼‰ï¼Œæ¨¡å—ä¸€ä¸­æœ‰åŸºç¡€å­—æ®µå®šä¹‰ã€‚    |
| US-CS-02 å†…éƒ¨ä»»åŠ¡ç®¡ç†    | FR-CS-02           | 8.3.2, æ¨¡å—ä¸‰              | åˆ©ç”¨ `T_Task` ä½œä¸ºé¡¹ç›®å·¥ä½œåŒ…çš„å®¹å™¨ï¼›8.3.2 ä¸­è¯´æ˜ Type/WorkerID/SupervisorID ç”¨äºå†…éƒ¨è°ƒåº¦ï¼›æ ¡éªŒå’Œè§†å›¾å¤ç”¨æ¨¡å—ä¸‰ã€‚                                                       |
| US-CS-03 æ”¯å‡ºè´¹ç”¨è®°å½•    | FR-CS-03           | 8.3.3, æ¨¡å—å›› 5.10         | `T_Expense` åœ¨ 8.3.3 ä¸­ï¼Œç”¨ Category=SEARCH\_DB/TRANSLATION/TRANSPORT/OTHER ç­‰æ ‡è®°æ”¯å‡ºï¼›5.10 æè¿°å½•å…¥å’Œæ ¡éªŒé€»è¾‘ã€‚                                        |
| US-CS-04 æœåŠ¡è´¹è‰å•ç”Ÿæˆ   | FR-CS-04           | 8.3.4, æ¨¡å—å›› 5.5          | åœ¨ 8.3.4 ä¸­è¯´æ˜ `T_FeeDraft(Type=CONSULT_FEE/SEARCH_FEE)` çš„ä½¿ç”¨ï¼›5.5 æè¿°è‰å•æ˜ç»†å­—æ®µåŠé‡‘é¢è®¡ç®—è§„åˆ™ã€‚                                                       |
| US-CS-05 è´¦å•ã€æ”¶æ¬¾ä¸ææˆ  | FR-CS-05, FR-CS-06 | 8.3.5, æ¨¡å—äº” 6.x, æ¨¡å—å…­ 7.x | 8.3.5 ä¸­é¡¾é—®/æ£€ç´¢é¡¹ç›®å¤ç”¨è´¦å•/æ”¶æ¬¾/å†²é”€/CaseReceipt ç®¡é“ï¼›ææˆéƒ¨åˆ†ä½¿ç”¨æ¨¡å—å…­ä¸­çš„ CommissionRule/Commission/Settlement æœºåˆ¶ï¼Œæ ¹æ® CaseType=CONSULTING/SEARCH è§„åˆ™ç”Ÿæˆä¸ç»“ç®—ææˆã€‚ |

***

### 8.5.2 FR â†’ ç« èŠ‚ / å­—æ®µ / æµç¨‹ç‚¹æ˜ å°„ï¼ˆè¡¨ 14ï¼‰

| FR ID    | æè¿°                      | ä¸»è¦ç« èŠ‚            | å­—æ®µ/æµç¨‹ç‚¹                                                                                                                     |
| -------- | ----------------------- | --------------- | -------------------------------------------------------------------------------------------------------------------------- |
| FR-CS-01 | æ”¯æŒ CONSULTING/SEARCH æ¡ˆå· | 8.3.1, æ¨¡å—ä¸€      | åœ¨ `T_Case` ä¸­ä½¿ç”¨ CaseType=CONSULTING/SEARCHï¼Œå¢åŠ é¡¹ç›®èŒƒå›´/äº¤ä»˜ç‰©ç›¸å…³å­—æ®µï¼›çŠ¶æ€æµè½¬ NOT\_STARTEDâ†’IN\_PROGRESSâ†’COMPLETEDâ†’CLOSEDã€‚                  |
| FR-CS-02 | é¡¾é—®æ¡ˆå·ä¸Šçš„å†…éƒ¨ä»»åŠ¡              | 8.3.2, æ¨¡å—ä¸‰      | `T_Task` ç”¨ä½œå†…éƒ¨ä»»åŠ¡ï¼ŒType=CONSULT\_SCOPING/SEARCH\_EXECUTION/ANALYSIS\_REPORT ç­‰ï¼ŒBaseDate/Deadline/WorkerID/SupervisorID ç®¡ç†é¡¹ç›®å·¥ä½œã€‚ |
| FR-CS-03 | è®°å½•é¡¹ç›®æ”¯å‡º                  | 8.3.3, æ¨¡å—å›› 5.10 | `T_Expense` è®°å½•æ”¯å‡ºï¼ŒCategory ä½“ç°æ£€ç´¢/ç¿»è¯‘/å·®æ—…ç­‰ç±»å‹ï¼›æ”¯æŒæŒ‰ Case/æ—¶é—´/ç±»åˆ«æŸ¥è¯¢ä¸æ±‡æ€»ã€‚                                                               |
| FR-CS-04 | ç”ŸæˆæœåŠ¡è´¹è‰å•                 | 8.3.4, æ¨¡å—å›› 5.5  | `T_FeeDraft(Type=CONSULT_FEE/SEARCH_FEE)` å’Œ `T_FeeItem` æ”¯æŒå›ºå®šæŠ¥ä»·/æŒ‰å·¥æ—¶/æ··åˆæ¨¡å¼çš„æœåŠ¡è´¹è®¡ç®—ï¼›TotalService/TotalMisc ç”±æ˜ç»†ç´¯åŠ ã€‚                |
| FR-CS-05 | ç”Ÿæˆè´¦å•ä¸æ”¶æ¬¾/å†²é”€              | 8.3.5, æ¨¡å—äº”      | ä»é¡¾é—®/æ£€ç´¢è‰å•ç”Ÿæˆ `T_Bill/T_BillItem`ï¼ŒDirection=ARï¼›æ”¶æ¬¾ç™»è®°ä¸å†²é”€ä½¿ç”¨ `T_Payment/T_Offset` æ›´æ–° Balance/Statusï¼›`T_CaseReceipt` è®°å½•é¡¹ç›®æ”¶æ¬¾æƒ…å†µã€‚     |
| FR-CS-06 | ç”Ÿæˆææˆè®°å½•å¹¶çº³å…¥ç»“ç®—             | 8.3.5, æ¨¡å—å…­      | CaseType=CONSULTING/SEARCH åŒ¹é… CommissionRuleï¼›åœ¨è´¦å•ç”Ÿæˆæ—¶è®¡ç®— BaseFee/S1/S2ï¼Œè®°å½•åˆ° `T_Commission`ï¼Œå¹¶åœ¨æ»¡è¶³çŠ¶æ€/WaitPay æ¡ä»¶æ—¶é€šè¿‡ç»“ç®—æ‰¹æ¬¡å‘æ”¾ã€‚         |

***

âœ… åˆ°è¿™é‡Œï¼Œ**æ¨¡å—ä¸ƒï¼šé¡¾é—® / æ£€ç´¢åŠå…¶ä»–æœåŠ¡é¡¹ç›®** çš„æ‰€æœ‰ç»†èŠ‚ï¼ˆæ¡ˆä¾‹ç±»å‹ã€å†…éƒ¨ä»»åŠ¡ã€æ”¯å‡ºã€è‰å•ã€è´¦å•ã€æ”¶æ¬¾ã€ææˆï¼Œä»¥åŠä¸å…¶ä»–æ¨¡å—çš„å…³ç³»ï¼‰å·²ç»å®Œæ•´å†™å…¥ v2.0 æ–‡æ¡£ã€‚

## 9. æ¨¡å—å…«ï¼šè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨æ€»è§ˆï¼ˆSettings, Search & Reportsï¼‰â€“ å…¨ç»†èŠ‚ç‰ˆ

> æœ¬ç« æ˜¯â€œæ¨ªå‘èƒ½åŠ›â€æ€»æ½ï¼ŒæŠŠå‰é¢æ•£è½åœ¨æ¨¡å—ä¸€ï½ä¸ƒä¸­çš„å„ç±»**é…ç½®ã€æŸ¥è¯¢ä¸ç»Ÿè®¡**ç»Ÿä¸€æ”¶æ‹¢ï¼Œå¸®åŠ©ä½ ä»ç³»ç»Ÿçº§è§†è§’çœ‹æ¸…ï¼š
>
> *   éƒ½æœ‰å“ªäº›â€œå¯è®¾ç½®â€çš„ä¸œè¥¿ï¼ˆä¸»æ•°æ®ã€å‚æ•°ã€æ¨¡æ¿ã€ä¿¡å¤´ç­‰ï¼‰
>
> *   éƒ½æœ‰å“ªäº›â€œé€šç”¨æŸ¥è¯¢â€ï¼ˆå°¤å…¶æ˜¯é«˜çº§æ¡ˆä»¶æ£€ç´¢ï¼‰
>
> *   éƒ½æœ‰å“ªäº›â€œç»Ÿè®¡æŠ¥è¡¨â€ï¼ˆæ¡ˆä»¶/è´¹ç”¨/å¹´è´¹/è´¦å•/åè´¦/ææˆç­‰ï¼‰
>
> é‡è¦è¯´æ˜ï¼š
>
> *   **å…·ä½“æ•°æ®ç»“æ„**ï¼ˆå¦‚ T\_Clientã€T\_Applicantã€T\_FeeRateã€T\_TaskTemplateã€T\_Templateã€T\_LetterHeadã€T\_AnnuityTask ç­‰ï¼‰å·²ç»åœ¨å„ä¸šåŠ¡æ¨¡å—ä¸­å®Œæ•´å±•å¼€ï¼Œæœ¬ç« ä¸é‡å¤å­—æ®µå®šä¹‰ï¼Œè€Œæ˜¯ä»â€œåŠŸèƒ½ + æµç¨‹ + ç»„åˆç»´åº¦â€çš„è§’åº¦æŠŠå®ƒä»¬ä¸²èµ·æ¥ï¼›
> *   æŒ‰ä½ çš„è¦æ±‚â€œä¸è¦å‹ç¼©â€ï¼Œä¹‹å‰æ‰€æœ‰å…³äºè¿™äº›è¡¨çš„å­—æ®µçº§ç»†èŠ‚å·²ç»æ•£è½åœ¨æ¨¡å—ä¸€ï½ä¸ƒä¸­ï¼Œç°åœ¨æˆ‘ä»¬ä¸ä¼šåˆ å‡ï¼Œåªæ˜¯å¢åŠ ä¸€ä¸ªæ€»è§ˆå±‚ï¼Œå¸®ä½ /è¯»è€…ä»ä¸Šè€Œä¸‹ç†è§£ç³»ç»Ÿã€‚

***

## 9.1 æ¨¡å—èŒƒå›´ä¸è§’è‰²

### 9.1.1 èŒƒå›´

â€œè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨â€æ¨¡å—æ¶µç›–ï¼š

1.  **è®¾ç½®ï¼ˆSettingsï¼‰**
    *   ä¸»æ•°æ®ï¼šå®¢æˆ·ã€åœ°å€ã€è”ç³»äººã€ç”³è¯·äººã€å›½å®¶/åœ°åŒºã€èŒç§ä¿è—å•ä½
    *   å‚æ•°ï¼šæ ‡å‡†è´¹ç‡ã€æ—¶é™æ¨¡æ¿ã€å…¨å±€å‚æ•°ï¼ˆå¦‚å¹´è´¹å®½é™è§„åˆ™ï¼‰
    *   æ–‡æ¡£æ¨¡æ¿ä¸ä¿¡å¤´ï¼šWord æ¨¡æ¿ï¼ˆé€šçŸ¥å‡½/è´¦å•/å‚¬æ¬¾å‡½/æ¸…å•ç­‰ï¼‰ã€ä¿¡ç¬ºæŠ¬å¤´ä¿¡æ¯
2.  **é€šç”¨æŸ¥è¯¢ï¼ˆSearchï¼‰**
    *   é«˜çº§æ¡ˆä»¶æŸ¥è¯¢ï¼ˆæ‰€æœ‰æ¨¡å—çš„å¤šå­—æ®µè”åˆæŸ¥è¯¢å…¥å£ï¼‰
    *   ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ä¸æ¸…å•è¾“å‡º
    *   è´¹ç”¨æƒ…å†µæŸ¥è¯¢åŒè¡¨ï¼ˆä¸€è§ˆå®˜è´¹ç¼´è´¹ + ä¸€è§ˆä¸ªæ¡ˆæ”¶æ¬¾ï¼‰
    *   æ—¶é™æ£€ç´¢ï¼ˆç‰¹åˆ«æ˜¯ç”³è¯·è´¹/å®å®¡è¯·æ±‚éƒ¨åˆ†ï¼‰
3.  **ç»Ÿè®¡æŠ¥è¡¨ï¼ˆReportsï¼‰**
    *   æ¡ˆä»¶ç»Ÿè®¡æŠ¥è¡¨ï¼ˆæŒ‰å®¢æˆ·/å›½åˆ«/ä»£ç†äºº/ç±»å‹/æ—¶é—´ç­‰ç»´åº¦ï¼‰
    *   è´¹ç”¨ç»Ÿè®¡æŠ¥è¡¨ï¼ˆç”³è¯·è´¹/æˆæƒè´¹/å¹´è´¹/æ— æ•ˆè´¹/é¡¾é—®è´¹ç­‰ï¼‰
    *   å¹´è´¹ç»Ÿè®¡æŠ¥è¡¨ï¼ˆæŒ‰å¹´ä»½/å›½åˆ«/å®¢æˆ·ï¼‰
    *   è´¦å•/åº”æ”¶/é€¾æœŸ/åè´¦æŠ¥è¡¨
    *   ææˆæŠ¥è¡¨ï¼ˆæŒ‰ä»£ç†äºº/æ¡ˆä»¶/æ—¶æœŸç»Ÿè®¡ææˆé‡‘é¢ï¼‰
    *   å…¶å®ƒéœ€è¦ä» T\_Case/T\_Fee/T\_Bill/T\_Task/T\_Commission äº¤å‰ç»Ÿè®¡çš„è§†å›¾

### 9.1.2 è§’è‰²

*   **Adminï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰**
    *   ç»´æŠ¤åŸºç¡€ä¸»æ•°æ®
    *   ç»´æŠ¤è´¹ç‡ã€æ—¶é™æ¨¡æ¿ã€æ¨¡æ¿æ–‡ä»¶ã€ä¿¡å¤´é…ç½®
    *   ç®¡æ§ç³»ç»Ÿçº§å‚æ•°ï¼ˆå¦‚æé†’ç­–ç•¥ï¼‰
*   **Formalities / Flow Admin**
    *   ä½¿ç”¨é«˜çº§æ¡ˆä»¶æŸ¥è¯¢
    *   æŸ¥çœ‹æ—¶é™æ£€ç´¢ä¸ä¸­é—´æ–‡ä»¶æ¸…å•
    *   æ ¹æ®æŠ¥è¡¨è°ƒåº¦å·¥ä½œï¼ˆæ–°æ¡ˆ/OA/å¹´è´¹ï¼‰
*   **Financeï¼ˆè´¢åŠ¡ï¼‰**
    *   ä½¿ç”¨è´¹ç”¨æƒ…å†µæŸ¥è¯¢ã€è´¦å•/åº”æ”¶/åè´¦æŠ¥è¡¨
    *   ä½¿ç”¨å®˜è´¹ç¼´è´¹ä¸æ”¶æ¬¾æƒ…å†µåŒè¡¨å¯¹è´¦
*   **Agent / Manager / Partner**
    *   ä½¿ç”¨æ¡ˆä»¶/è´¹ç”¨/ææˆæŠ¥è¡¨äº†è§£è‡ªå·±çš„å·¥ä½œé‡å’Œæ”¶ç›Š
    *   ä½¿ç”¨é«˜çº§æŸ¥è¯¢æŸ¥çœ‹è‡ªå·±åä¸‹æ¡ˆä»¶çš„è¿›å±•/é£é™©ï¼ˆå¦‚å¤§é‡å³å°†åˆ°æœŸä»»åŠ¡ï¼‰

***

## 9.2 è®¾ç½®ï¼ˆSettingsï¼‰

> æ‰€æœ‰è®¾ç½®å¤§ä½“åˆ†ä¸ºï¼š**ä¸»æ•°æ®**ï¼ˆâ€œè°/åœ¨å“ªå„¿â€ï¼‰ã€**ä¸šåŠ¡å‚æ•°**ï¼ˆâ€œæ€ä¹ˆç®—â€ï¼‰ã€**æ–‡æ¡£æ¨¡æ¿/ä¿¡å¤´**ï¼ˆâ€œæ€ä¹ˆè¾“å‡ºâ€ï¼‰ã€‚\
> å„è¡¨å­—æ®µå·²åœ¨å‰é¢æ¨¡å—ä¸­è¯¦ç»†å®šä¹‰ï¼Œæœ¬èŠ‚åªä»â€œåŠŸèƒ½å’Œç•Œé¢â€è§’åº¦æ±‡æ€»ã€‚

### 9.2.1 ä¸»æ•°æ®è®¾ç½®

#### 9.2.1.1 å®¢æˆ·ï¼ˆT\_Client/T\_ClientAddress/T\_ClientContactï¼‰

**ç”¨é€”**

*   æ‰€æœ‰æ¡ˆä»¶åŠè´¦å•çš„â€œå®¢æˆ·â€éƒ½æ˜¯ä»è¿™é‡Œé€‰å‡º
*   å¯¹åº”â€œå§”æ‰˜äººâ€â€œå¤–æ–¹ä»£ç†â€â€œå¤§å®¢æˆ·â€ç­‰è§’è‰²

**ä¸»è¦åŠŸèƒ½**

1.  å®¢æˆ·åŸºæœ¬ä¿¡æ¯ç»´æŠ¤
    *   å®¢æˆ·ç¼–ç ã€åç§°ï¼ˆä¸­/è‹±æ–‡ï¼‰ã€å›½å®¶/åœ°åŒºã€å®¢æˆ·ç±»å‹ï¼ˆç›´æ¥å®¢æˆ·/ä»£ç†æ‰€/å…¶ä»–ï¼‰
    *   é»˜è®¤è´§å¸/è´¦æœŸ/æŠ˜æ‰£ç­–ç•¥ï¼ˆå¯é€‰ï¼‰
2.  å¤šåœ°å€ç»´æŠ¤ï¼ˆT\_ClientAddressï¼‰
    *   æ¯ä¸ªå®¢æˆ·å¯é…ç½®å¤šä¸ªåœ°å€
    *   æ ‡è®°â€œé»˜è®¤æ–‡ä»¶é‚®å¯„åœ°å€â€ã€â€œé»˜è®¤è´¦å•åœ°å€â€
    *   æä¾›å¯é€‰â€œæ”¶ä»¶äººå§“å/éƒ¨é—¨â€ç­‰å­—æ®µ
3.  è”ç³»äººç»´æŠ¤ï¼ˆT\_ClientContactï¼‰
    *   æ¯ä¸ªå®¢æˆ·å¯æœ‰å¤šä¸ªè”ç³»äºº
    *   å­˜å‚¨å§“åã€èŒä½ã€ç”µè¯ã€é‚®ç®±
    *   åœ¨æŸäº›æ¨¡æ¿é‡Œï¼ˆä¾‹å¦‚é€šçŸ¥å‡½/é¡¾é—®é¡¹ç›®é‚®ä»¶ï¼‰å¯å¼•ç”¨

**ç•Œé¢**

*   â€œå®¢æˆ·ç»´æŠ¤â€é¡µé¢ï¼š
    *   æœç´¢ï¼ˆæŒ‰ç¼–ç /åç§°/å›½å®¶/ç±»å‹ï¼‰
    *   åˆ—è¡¨ + æ˜ç»†ç¼–è¾‘
    *   åµŒå¥—åœ°å€/è”ç³»äººå­è¡¨ç¼–è¾‘

***

#### 9.2.1.2 ç”³è¯·äººï¼ˆT\_Applicantï¼‰

**ç”¨é€”**

*   ä½œä¸ºæ¡ˆä»¶ä¸­â€œç”³è¯·äººâ€åˆ—è¡¨æ¥æº
*   æä¾›ç»Ÿè®¡æŠ¥è¡¨çš„ç»´åº¦ï¼ˆæŒ‰ç”³è¯·äººç»Ÿè®¡ï¼‰

**ä¸»è¦åŠŸèƒ½**

*   æ–°å»º/ç¼–è¾‘/æœç´¢ç”³è¯·äººï¼š
    *   ä¸­/è‹±æ–‡åç§°ã€å›½ç±ã€åœ°å€ã€é‚®ç¼–ã€province/city/districtã€ç»Ÿè®¡åœ°åŒº
    *   èŒåŠ¡å‘æ˜æ ‡è®°ï¼ˆIsJobInventionï¼‰
    *   æ˜¯å¦æ³•äººï¼ˆIsLegalEntityï¼‰
    *   æ˜¯å¦æœ‰é€šç”¨å§”æ‰˜ä¹¦ï¼ˆHasGeneralPowerï¼‰

**ç•Œé¢**

*   â€œç”³è¯·äººç»´æŠ¤â€ï¼šæ”¯æŒå¿«é€Ÿæœç´¢ã€åˆ—è¡¨ç¼–è¾‘ã€åˆå¹¶ï¼ˆå¦‚æœå­˜åœ¨é‡å¤è®°å½•æ—¶è¿›è¡Œåˆå¹¶ï¼‰ã€‚

***

#### 9.2.1.3 å›½å®¶/åœ°åŒºï¼ˆT\_Countryï¼‰

**ç”¨é€”**

*   ä¸ºæ¡ˆä»¶ã€è´¹ç‡ã€å¹´è´¹ã€æŠ¥è¡¨ç­‰æä¾›å›½å®¶/åœ°åŒºç»´åº¦
*   å†³å®šéƒ¨åˆ†è§„åˆ™ï¼ˆFeeReduction é€‚ç”¨èŒƒå›´ã€å¹´è´¹è®¡ç®—ç­‰ï¼‰

**ä¸»è¦åŠŸèƒ½**

*   ç»´æŠ¤ CountryCodeã€Name\_CN/ENã€IsDomesticã€DefaultCurrencyã€DefaultLanguageã€æ˜¯å¦ PCT æˆå‘˜ç­‰
*   å¯é…ç½®å›½å®¶å±‚çº§ï¼šå¦‚åœ°åŒº/æ´²ç­‰ï¼ˆè§†æŠ¥è¡¨éœ€è¦ï¼‰

***

#### 9.2.1.4 èŒç§ä¿è—å•ä½ï¼ˆT\_BioDepositUnitï¼‰

**ç”¨é€”**

*   ä¸ºèŒç§ä¿è—ä¿¡æ¯ï¼ˆT\_BioDepositï¼‰æä¾›å•ä½åˆ—è¡¨
*   å¤šç”¨äºç”Ÿç‰©ç›¸å…³å‘æ˜æ¡ˆ

**ä¸»è¦åŠŸèƒ½**

*   ç»´æŠ¤ç¼–ç ã€å•ä½åç§°ï¼ˆä¸­/è‹±æ–‡ï¼‰ã€åœ°å€ã€è”ç³»äººç­‰ï¼›
*   åœ¨æ¡ˆå· â€œèŒç§ä¿è—â€ æ ‡ç­¾é¡µä¸­é€‰æ‹©è¿™ä¸ªå•ä½ã€‚

***

### 9.2.2 ä¸šåŠ¡å‚æ•°è®¾ç½®

#### 9.2.2.1 æ ‡å‡†è´¹ç‡ï¼ˆT\_FeeRateï¼‰

**å·²åœ¨ 5.3.1 / 5.4 ä¸­è¯¦ç»†å®šä¹‰**ï¼Œåœ¨è¿™é‡Œä»é…ç½®è§’åº¦å†å¼ºè°ƒï¼š

*   Admin/Finance ç•Œé¢ä¸­æŒ‰ Group/Country/CaseType/PatentCategory æµè§ˆè´¹ç‡ï¼›
*   æ”¯æŒå¯¼å…¥/å¯¼å‡ºè´¹ç‡è¡¨ï¼ˆä¾‹å¦‚ä» Excel æ‰¹é‡å¯¼å…¥ï¼‰ï¼›
*   é…ç½® CalcMode/CalcParams ç”¨äºè‡ªåŠ¨è®¡ç®—è‰å•é‡‘é¢ï¼›
*   å°† FeeRate ä¸ FeeDraft æ¨¡å—ï¼ˆæ¨¡å—å››ï¼‰ç›¸è¿ï¼Œè‰å•ç”Ÿæˆå’Œæ›´æ–°è‡ªåŠ¨å¼•ç”¨æœ€æ–°è´¹ç‡ã€‚

***

#### 9.2.2.2 æ—¶é™æ¨¡æ¿ï¼ˆT\_TaskTemplateï¼‰

**å·²åœ¨ 4.3.1 / 4.4 ä¸­å…¨é¢å®šä¹‰**ï¼Œè¿™é‡Œå¼ºè°ƒè®¾ç½®è§†è§’ï¼š

*   Admin ç•Œé¢ä¸­å¯ç»´æŠ¤â€œç”³è¯·è´¹æ—¶é™â€ã€â€œå®å®¡è¯·æ±‚æ—¶é™â€ã€â€œOA ç­”å¤æ—¶é™â€ã€â€œæˆæƒè´¹æ—¶é™â€ã€â€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™â€ã€â€œå¹´è´¹ç¼´è´¹æ—¶é™â€ç­‰æ¨¡æ¿ï¼›
*   å¯ä»¥ä¸ºä¸åŒå›½å®¶/æ¡ˆä»¶ç±»å‹éƒ¨ç½²ä¸åŒæ¨¡æ¿ï¼ˆä¾‹å¦‚ä¸åŒå›½å®¶çš„ PCT å›½å®¶é˜¶æ®µè¿›å…¥è§„åˆ™ï¼‰ï¼›
*   ä¸€åˆ‡æ—¶é™è®¡ç®—é€»è¾‘å°½é‡é€šè¿‡è¯¥è¡¨å‚æ•°åŒ–ï¼Œå‡å°‘ä»£ç ç¡¬ç¼–ç ã€‚

***

#### 9.2.2.3 å…¨å±€å‚æ•°ï¼ˆå¯é€‰é…ç½®è¡¨ï¼‰

å»ºè®®å¼•å…¥ç»Ÿä¸€çš„å…¨å±€å‚æ•°è¡¨ï¼ˆä¾‹å¦‚ `T_SystemParam`ï¼‰å­˜æ”¾ä»¥ä¸‹ä¿¡æ¯ï¼š

*   å¹´è´¹å®½é™è§„åˆ™ï¼š
    *   é»˜è®¤å®½é™å¤©æ•°/æœˆä»½
    *   æ˜¯å¦å‘å®¢æˆ·å±•ç¤ºå®½é™ä¿¡æ¯
*   å‚¬æ¬¾ç­–ç•¥ï¼š
    *   é¦–æ¬¡/ç¬¬äºŒæ¬¡/ç¬¬ä¸‰æ¬¡å‚¬æ¬¾é—´éš”
    *   å‚¬æ¬¾å‡½æ¨¡æ¿é€‰æ‹©
*   é¢„æ”¶æ¬¾ç­–ç•¥ï¼š
    *   æ˜¯å¦å…è®¸è´Ÿè´¦å•
    *   é€€æ¬¾ç­–ç•¥çš„é»˜è®¤è¡Œä¸ºï¼ˆç”Ÿæˆè´Ÿè´¦å•è¿˜æ˜¯ä»…è®°è´¦ï¼‰
*   ææˆç­–ç•¥ï¼š
    *   é»˜è®¤ WaitPay é˜ˆå€¼ï¼ˆå¦‚ 50%/90%ï¼‰
    *   é»˜è®¤ ForceSettle æ˜¯å¦å¼€å¯/éœ€å®¡æ‰¹ç­‰

**è¯´æ˜**ï¼šæ­¤å¤„åªå»ºè®®è®¾è®¡ï¼Œä¸å¼ºåˆ¶å…·ä½“å­—æ®µï¼Œä»¥å®é™…å®æ–½æ—¶çš„é…ç½®éœ€æ±‚ä¸ºä¾æ®ã€‚

***

### 9.2.3 æ–‡æ¡£æ¨¡æ¿ä¸ä¿¡å¤´è®¾ç½®

#### 9.2.3.1 æ–‡æ¡£æ¨¡æ¿ï¼ˆT\_Templateï¼‰

**ç”¨é€”**

*   å­˜æ”¾ Word æ¨¡æ¿çš„å…ƒæ•°æ®ï¼ˆæ–‡ä»¶åã€è·¯å¾„ã€ç”¨é€”ã€è¯­è¨€ï¼‰
*   ä¸ `T_DocTemplate` å…³è”ç”¨äºè¾“å‡ºå„ç±» Word æ–‡æ¡£ï¼š
    *   æˆæƒé€šçŸ¥å‡½
    *   OA é€šçŸ¥/ç­”å¤æ¨¡æ¿
    *   å¹´è´¹é€šçŸ¥å‡½
    *   æˆæƒè´¹/å¹´è´¹æ¸…å•
    *   è´¦å•ã€å‚¬æ¬¾å‡½
    *   ä¸­é—´æ–‡ä»¶æ¸…å•ã€è¯ä¹¦æ¸…å•
    *   å„ç§é¡¹ç›®æŠ¥å‘Šå°é¢/æŠ¥å‘Šæ¨¡æ¿ï¼ˆå¯¹é¡¾é—®/æ£€ç´¢åœºæ™¯ï¼‰

**å…¸å‹å­—æ®µ**

*   TemplateID, Name, Group (module/usage), Language, FilePath, Enabled
*   åœ¨æ¨¡å—äºŒ/å››/äº”ä¸­å·²æåˆ°ä¸ `T_DocTemplate.PlainTemplateID_CN/EN` çš„å…³è”ã€‚

***

#### 9.2.3.2 ä¿¡å¤´ï¼ˆT\_LetterHeadï¼‰

**ç”¨é€”**

*   åœ¨æ‰€æœ‰å¯¹å¤–æ–‡ä¹¦ï¼ˆè´¦å•/é€šçŸ¥å‡½/æŠ¥å‘Š/å‚¬æ¬¾å‡½ç­‰ï¼‰ä¸­ç»Ÿä¸€ä½¿ç”¨æŠ¬å¤´ä¿¡æ¯ï¼ˆäº‹åŠ¡æ‰€åç§°/åœ°å€/logo/è”ç³»æ–¹å¼ç­‰ï¼‰

**å­—æ®µï¼ˆä¹‹å‰æœ‰ç®€è¿°ï¼Œè¿™é‡Œå®Œæ•´å¯¹é½ï¼‰**

*   `HeadID` PK
*   `Language` enum â€“ CN / EN
*   `FirmName` nvarchar â€“ äº‹åŠ¡æ‰€åç§°
*   `FirmCode` varchar â€“ äº‹åŠ¡æ‰€ä»£ç ï¼ˆå¦‚éœ€è¦ï¼‰
*   `AddressLines[1..6]` â€“ å¤šè¡Œåœ°å€
*   `PostalCode`
*   `Tel`
*   `LogoPath` â€“ logo æ–‡ä»¶è·¯å¾„
*   `Enabled` bool

**è®¾ç½®ç•Œé¢**

*   â€œä¿¡å¤´è®¾ç½®â€é¡µé¢ä¸­å¯ç»´æŠ¤å¤šå¥—ä¿¡å¤´ï¼›
*   å„æ¨¡æ¿ï¼ˆT\_Templateï¼‰å¯ä»¥é…ç½®ä½¿ç”¨å“ªä¸€ç§ä¿¡å¤´ã€‚

***

## 9.3 æŸ¥è¯¢ï¼ˆSearchï¼‰

### 9.3.1 é«˜çº§æ¡ˆä»¶æŸ¥è¯¢ï¼ˆå…¨å±€å…¥å£ï¼‰

> è™½ç„¶åœ¨å„åœºæ™¯ä¸­å·²ç»å¼•ç”¨è¿‡å¤šæ¬¡ï¼Œè¿™é‡Œç»™ä¸€ä¸ªç³»ç»Ÿçº§æ€»è§ˆï¼Œç¡®ä¿â€œæ‰€æœ‰å¯èƒ½çš„æŸ¥è¯¢ç»´åº¦â€éƒ½æ”¶å½•ã€‚

**æŸ¥è¯¢å…¥å£**

*   èœå•ï¼šâ€œæ¡ˆä»¶æŸ¥è¯¢ â†’ é«˜çº§æŸ¥è¯¢â€

**å¯é€‰æ¡ä»¶ï¼ˆå»ºè®®åŒ…å«ï¼‰**

1.  **åŸºæœ¬ä¿¡æ¯ç»´åº¦**
    *   CaseNoï¼ˆæ¡ˆå·å·ï¼Œæ”¯æŒæ¨¡ç³Š/å‰ç¼€ï¼‰
    *   AppNoï¼ˆç”³è¯·å·ï¼‰
    *   PatentNoï¼ˆä¸“åˆ©å·/æˆæƒå·ï¼‰
    *   CaseTypeï¼ˆNORMAL/PCT\_INTL/PCT\_NATIONAL/INVALIDATION/LITIGATION/CONSULTING/SEARCHâ€¦ï¼‰
    *   PatentCategoryï¼ˆINVENTION/UTILITY/DESIGNï¼‰
    *   FlowDir
    *   Statusï¼ˆå¯å¤šé€‰ï¼šæœªé€’äº¤/åœ¨å®¡/å·²æˆæƒ/ç»ˆæ­¢/æ— æ•ˆç­‰ï¼‰
2.  **å®¢æˆ·/ç”³è¯·äºº/ä»£ç†äººç»´åº¦**
    *   ClientID / å®¢æˆ·åç§°
    *   ApplicantID / ç”³è¯·äººåç§°
    *   PrimaryAgentID / SecondAgentID / DraftorID
3.  **æ—¶é—´ç»´åº¦**
    *   RecvDate èŒƒå›´ï¼ˆæ”¶æ¡ˆæ—¥ï¼‰
    *   FilingDate èŒƒå›´ï¼ˆç”³è¯·æ—¥ï¼‰
    *   PubDate èŒƒå›´ï¼ˆå…¬å¼€æ—¥ï¼‰
    *   GrantDate èŒƒå›´ï¼ˆæˆæƒæ—¥ï¼‰
    *   PCT\_NationalEntryDate èŒƒå›´ï¼ˆå›½å®¶é˜¶æ®µè¿›å…¥ï¼‰
    *   æˆæƒé€šçŸ¥å‘å‡ºæ—¥æœŸèŒƒå›´ï¼ˆä¾æ®ç‰¹å®š GRANT\_NOTICE æ–‡æ¡£ï¼‰
4.  **æ§åˆ¶æ ‡è®°ç»´åº¦**
    *   IsFeeMonitorï¼ˆæ˜¯å¦å¹´è´¹ç›‘è§†ï¼‰
    *   ApplicantKindï¼ˆæ³•äºº/è‡ªç„¶äººï¼‰
    *   HasExamRequestï¼ˆæ˜¯å¦å·²ç»æå®å®¡ï¼‰
    *   NoPower/NoPrioTextï¼ˆç¼ºå§”æ‰˜ä¹¦/ç¼ºä¼˜å…ˆæƒæ–‡æœ¬ï¼‰
    *   FeeReductionï¼ˆæœ‰/æ— è´¹å‡ï¼‰
5.  **è´¹ç”¨/æ”¶æ¬¾ç»´åº¦ï¼ˆè”æŸ¥ï¼‰**
    *   æ˜¯å¦æœ‰æœªç»“è´¦å•
    *   æ˜¯å¦æœ‰å¹´è´¹æ¬ æ¬¾
    *   æ€»æœåŠ¡è´¹ï¼ˆæŸåŒºé—´ï¼‰æ¡ä»¶ï¼ˆå¦‚æœåŠ¡è´¹>æŸæ•°ï¼‰

**ç»“æœåˆ—è¡¨**

*   CaseNo/AppNo/PubNo/GrantNo
*   Title\_CN
*   Client/Applicant
*   CaseType/PatentCategory/FlowDir
*   Status
*   RecvDate/FilingDate/PubDate/GrantDate
*   PrimaryAgent/SecondAgent
*   IsFeeMonitor/FeeReduction/HasExamRequest ç­‰

**åç»­æ“ä½œ**

*   ç‚¹å‡»æ¡ˆä»¶è¡Œå¯ç›´æ¥è¿›å…¥æ¡ˆå·è¯¦æƒ…é¡µï¼›
*   å¯ä»¥ç›´æ¥ä»ç»“æœä¸­å‹¾é€‰éƒ¨åˆ†æ¡ˆä»¶æ‰§è¡Œæ‰¹é‡æ“ä½œï¼ˆå¦‚ç”ŸæˆæŠ¥è¡¨/å¯¼å‡ºåˆ—è¡¨ï¼‰ã€‚

***

### 9.3.2 ä¸­é—´æ–‡ä»¶æŸ¥è¯¢ï¼ˆä¸æ¨¡å—äºŒ 3.8 ä¸€è‡´ï¼Œé›†ä¸­å¼ºè°ƒï¼‰

**å…¥å£**

*   â€œä¸­é—´æ–‡ä»¶ â†’ ä¸­é—´æ–‡ä»¶æŸ¥è¯¢â€

**æ¡ä»¶**

*   DocTypeï¼ˆå®˜æ–¹æ¥æ–‡/å»æ–‡/å®¢æˆ·æ¥æ–‡/è‡´å‡½å®¢æˆ·ï¼‰
*   TemplateCode/DocNameï¼ˆå¯æ¨¡ç³Šæœç´¢ï¼‰
*   CaseNo/AppNo
*   Client/Agent
*   æ—¶é—´èŒƒå›´ï¼ˆDispatchDate/ReceiveDate/InputDateï¼‰
*   NeedReply/æ˜¯å¦å·²å›å¤ï¼ˆDeadline/ReplyDate åˆ¤å®šï¼‰

**ç»“æœåˆ—è¡¨ä¸å¯¼å‡º**

*   å·²åœ¨æ¨¡å—äºŒ 3.8 ä¸­è¯¦ç»†è¯´æ˜ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ï¼›
*   æ”¯æŒå¯¼å‡ºä¸­é—´æ–‡ä»¶æ¸…å•/è¯ä¹¦æ¸…å•ç­‰ã€‚

***

### 9.3.3 è´¹ç”¨æƒ…å†µæŸ¥è¯¢ï¼ˆå®˜è´¹ç¼´è´¹ + ä¸ªæ¡ˆæ”¶æ¬¾ï¼‰

**å…¥å£**

*   â€œè´¹ç”¨ç®¡ç† â†’ è´¹ç”¨æƒ…å†µæŸ¥è¯¢â€

**æ¡ä»¶ï¼ˆæ¨¡å—å›› 5.11.1 å·²åˆ—ï¼Œè¿™é‡Œå¤è¿°ï¼‰**

*   CaseNo/AppNo
*   Client/Applicant
*   æ—¶é—´èŒƒå›´ï¼š
    *   å®˜è´¹ç¼´è´¹æ—¥æœŸ PaidDate èŒƒå›´
    *   å®¢æˆ·æ”¶æ¬¾æ—¥æœŸ ReceiptDate èŒƒå›´

**ä¸ŠåŠè¡¨ï¼šå®˜è´¹ç¼´è´¹æƒ…å†µä¸€è§ˆ**

*   æ•°æ®æºï¼šT\_GovPayment + T\_PayList + T\_FeeItem + T\_Case
*   å­—æ®µï¼šè§ 5.11.2

**ä¸‹åŠè¡¨ï¼šä¸ªæ¡ˆæ”¶æ¬¾æƒ…å†µä¸€è§ˆ**

*   æ•°æ®æºï¼šT\_CaseReceipt + T\_Case
*   å­—æ®µï¼šè§ 5.11.3

***

### 9.3.4 æ—¶é™æ£€ç´¢ â€“ ç”³è¯·è´¹/å®å®¡/å¹´è´¹ï¼ˆä¸æ¨¡å—ä¸‰è”åŠ¨ï¼‰

**å…¥å£**

*   â€œæ—¶é™ç®¡ç† â†’ ç”³è¯·è´¹æ—¶é™æ£€ç´¢â€
*   â€œæ—¶é™ç®¡ç† â†’ å®å®¡æ—¶é™æ£€ç´¢â€
*   å¹´è´¹åˆ°æœŸæ£€ç´¢åœ¨å¹´è´¹æ¨¡å—é‡Œï¼ˆæ¨¡å—å›› 5.8ï¼‰

**è¯´æ˜**

*   ç”³è¯·è´¹/å®å®¡æ£€ç´¢ç”¨äºè·¨å¤šä¸ªæ¡ˆä»¶æŸ¥çœ‹â€œå³å°†åˆ°æœŸä½†æœªå¤„ç†çš„ç”³è¯·è´¹/å®å®¡è¯·æ±‚æ—¶é™â€ï¼›
*   å®ç°ç»†èŠ‚åœ¨æ¨¡å—ä¸‰ 4.8 ä¸­å·²ç»å±•å¼€ï¼Œè¿™é‡Œä¸å†é‡å¤å­—æ®µã€‚

***

## 9.4 ç»Ÿè®¡æŠ¥è¡¨ï¼ˆReportsï¼‰

> æŠ¥è¡¨å¤šç§å¤šæ ·ï¼Œè¿™é‡Œç»™å‡ºä¸€å¥—**æ¨èçš„ä¸»æŠ¥è¡¨æ¸…å•**å’Œæ¯ç§æŠ¥è¡¨çš„ä¸»è¦ç»´åº¦ä¸æŒ‡æ ‡ã€‚å®é™…å®æ–½æ—¶å¯æŒ‰ä¼˜å…ˆçº§é€‰åšã€‚

### 9.4.1 æ¡ˆä»¶ç»Ÿè®¡æŠ¥è¡¨

**æŠ¥è¡¨ç±»å‹ç¤ºä¾‹**

1.  æŒ‰å®¢æˆ·ç»Ÿè®¡æ¡ˆä»¶æ•°é‡ä¸ç±»å‹åˆ†å¸ƒ
2.  æŒ‰å›½åˆ«ç»Ÿè®¡æ¡ˆä»¶æ•°é‡
3.  æŒ‰ä»£ç†äººç»Ÿè®¡æ¡ˆä»¶æ•°é‡å’Œæˆæƒç‡ç­‰
4.  æŒ‰å¹´åº¦/æœˆåº¦ç»Ÿè®¡æ–°æ¡ˆ/æˆæƒ/ç»ˆæ­¢æ•°é‡è¶‹åŠ¿

**ç»´åº¦å­—æ®µ**

*   Clientï¼ˆå®¢æˆ·ï¼‰
*   Applicantï¼ˆç”³è¯·äººï¼‰
*   Countryï¼ˆå›½å®¶/åœ°åŒºï¼‰
*   PatentCategoryï¼ˆå‘æ˜/æ–°å‹/å¤–è§‚ï¼‰
*   CaseTypeï¼ˆæ™®é€š/PCT/å›½å®¶/æ— æ•ˆ/è¯‰è®¼/é¡¾é—®/æ£€ç´¢ï¼‰
*   PrimaryAgent/SecondAgent
*   Year/Month

**æŒ‡æ ‡å­—æ®µ**

*   æ–°æ¡ˆæ•°é‡
*   æˆæƒæ•°é‡/æˆæƒç‡
*   ç»ˆæ­¢/æ— æ•ˆæ•°é‡
*   æ­£åœ¨å®¡ä¸­æ•°é‡
*   é¡¾é—®/æ£€ç´¢é¡¹ç›®ç«‹æ¡ˆæ•°é‡ç­‰

***

### 9.4.2 è´¹ç”¨ä¸æ”¶å…¥ç»Ÿè®¡æŠ¥è¡¨

**æŠ¥è¡¨ç±»å‹**

1.  æŒ‰å®¢æˆ·ã€æ¡ˆä»¶ç±»å‹ã€å›½åˆ«ç»Ÿè®¡æœåŠ¡è´¹/å®˜æ–¹è´¹æ”¶å…¥
2.  æŒ‰ä»£ç†äººç»Ÿè®¡å…¶æ‰€è´Ÿè´£æ¡ˆä»¶å¸¦æ¥çš„æœåŠ¡è´¹æ”¶å…¥
3.  æŒ‰æ—¶é—´æ®µç»Ÿè®¡å„ç§è´¹ç”¨ç±»å‹ï¼ˆç”³è¯·è´¹/æˆæƒè´¹/å¹´è´¹/æ— æ•ˆè´¹/é¡¾é—®è´¹ï¼‰çš„æ€»é¢

**æ•°æ®æ¥æº**

*   T\_Bill/T\_BillItemï¼ˆè´¦å•é‡‘é¢ï¼‰
*   å¯é€‰è¿‡æ»¤ï¼šä»…è®¡å…¥å·²æ”¶/éƒ¨åˆ†æ”¶çš„è´¦å•ï¼ˆéœ€ç»“åˆ T\_Offset/T\_CaseReceiptï¼‰

**æŒ‡æ ‡**

*   æœåŠ¡è´¹æ€»é¢
*   å®˜è´¹/ä»£å«è´¹ç”¨æ€»é¢ï¼ˆå¯¹å†…éƒ¨ç°é‡‘æµé‡è¦ï¼‰
*   æœªæ”¶é‡‘é¢ï¼ˆBalance åˆè®¡ï¼‰

***

### 9.4.3 å¹´è´¹ç»Ÿè®¡æŠ¥è¡¨

**æŠ¥è¡¨ç±»å‹**

1.  æŒ‰å›½åˆ«/å®¢æˆ·/å¹´ä»½ç»Ÿè®¡å¹´è´¹åº”ç¼´/å®ç¼´æƒ…å†µ
2.  å¹´è´¹ç›‘è§†é¡¹ç›®æˆåŠŸç‡ï¼ˆç›‘è§†æ¡ˆä»¶ä¸­æŒ‰æ—¶ç¼´è´¹æ¯”ä¾‹ï¼‰

**æ•°æ®æ¥æº**

*   T\_AnnuityTaskï¼ˆDueDate/YearNo/ClientInstruction/IsOverdueï¼‰
*   T\_GovPaymentï¼ˆPaidDate/YearNoï¼‰
*   T\_CaseReceiptï¼ˆå®¢æˆ·å¹´è´¹æ”¶æ¬¾ï¼‰

**å…¸å‹å­—æ®µ**

*   æ¡ˆå·å·ã€å®¢æˆ·ã€å›½åˆ«ã€å¹´åº¦ã€åº”ç¼´é‡‘é¢ã€å®˜æ–¹å®ç¼´é‡‘é¢ã€å®¢æˆ·å®æ”¶é‡‘é¢ã€æ˜¯å¦æ”¾å¼ƒ/ç»ˆæ­¢ã€‚

***

### 9.4.4 è´¦å•ã€åº”æ”¶ã€é€¾æœŸã€åè´¦æŠ¥è¡¨

**æŠ¥è¡¨ç±»å‹**

1.  åº”æ”¶è´¦æ¬¾æŠ¥è¡¨ï¼ˆæŒ‰å®¢æˆ·/è´¦é¾„åŒºé—´ï¼‰
2.  é€¾æœŸè´¦æ¬¾æŠ¥è¡¨ï¼ˆæŒ‰å®¢æˆ·/è´¦é¾„ï¼‰
3.  åè´¦æŠ¥è¡¨ï¼ˆæŒ‰å¹´ä»½ç»Ÿè®¡åè´¦é‡‘é¢ä¸æ¯”ä¾‹ï¼‰
4.  å‚¬æ¬¾æ•ˆæœæŠ¥è¡¨ï¼ˆå‚¬æ¬¾å N å¤©å†…çš„å›æ¬¾æƒ…å†µï¼‰

**æ•°æ®æ¥æº**

*   T\_Billï¼ˆDirection/Amount/Balance/Status/IsBadDebt/BadDebtDateç­‰ï¼‰
*   T\_Offsetï¼ˆå›æ¬¾é…å¯¹ä¿¡æ¯ï¼‰
*   T\_Dunning/T\_DunningLineï¼ˆå‚¬æ¬¾æ‰¹æ¬¡ä¿¡æ¯ï¼‰

**æŒ‡æ ‡**

*   å„è´¦é¾„åŒºé—´åº”æ”¶é‡‘é¢
*   å®¢æˆ·çº§åº”æ”¶ä¸åè´¦åˆè®¡
*   æ¯ä¸ªå‚¬æ¬¾æ‰¹æ¬¡å 30/60/90 å¤©çš„æ”¶æ¬¾é‡ï¼ˆæ•ˆæœåˆ†æï¼‰

***

### 9.4.5 ææˆç»Ÿè®¡æŠ¥è¡¨

**æŠ¥è¡¨ç±»å‹**

1.  æŒ‰ä»£ç†äºº/æ—¶é—´æ®µç»Ÿè®¡ææˆé‡‘é¢ï¼ˆS1/S2 åˆ†å¼€æˆ–åˆè®¡ï¼‰
2.  æŒ‰æ¡ˆä»¶ç»Ÿè®¡å„ä»£ç†äººçš„ææˆåˆ†é…
3.  æŒ‰æ¡ˆä»¶ç±»å‹/å®¢æˆ·ç±»å‹ç»Ÿè®¡ææˆæˆæœ¬ï¼ˆææˆå æœåŠ¡è´¹æ¯”ä¾‹ï¼‰

**æ•°æ®æ¥æº**

*   T\_CommissionRuleï¼ˆç”¨äºè§£é‡Šè§„åˆ™/æ¯”ä¾‹ï¼‰
*   T\_Commissionï¼ˆè®°å½• BaseFee/S1/S2 é‡‘é¢ï¼‰
*   T\_CommissionSettlement & T\_CommissionSettleLineï¼ˆè®°å½•å·²ç»“ç®—çš„ææˆï¼‰

**å…¸å‹å­—æ®µ**

*   AgentName, CaseNo, CaseType, BaseFee, S1\_Amt, S2\_Amt, SettleNo, SettleDate ç­‰ã€‚

***

## 9.5 éœ€æ±‚è¿½è¸ªçŸ©é˜µï¼ˆSettings & Search & Reportsï¼‰

> ç”±äºæœ¬æ¨¡å—ä¸»è¦æ˜¯â€œè·¨æ¨¡å—æ€»è§ˆâ€ï¼Œä¸åƒå‰é¢é‚£æ ·é€é¡¹åˆ— FRï¼Œè¿™é‡Œåšä¸€ä¸ªå°ç»“ï¼Œå°†â€œè®¾ç½®/æŸ¥è¯¢/æŠ¥è¡¨â€ä¸å‰é¢æ¨¡å—çš„ FR åšä¸€ä¸ªè½»åº¦æ˜ å°„ï¼Œæ–¹ä¾¿ä½ ä»æ•´ä½“è§†è§’å®¡é˜…ã€‚

### 9.5.1 Settings éƒ¨åˆ†

*   ä¸»æ•°æ®è®¾ç½®ï¼ˆT\_Client/T\_Applicant/T\_Country/T\_BioDepositUnitï¼‰æ”¯æŒæ¨¡å—ä¸€ä¸­æ‰€æœ‰å…³äºå®¢æˆ·/ç”³è¯·äºº/å›½åˆ«/èŒç§ç®¡ç†çš„ FRï¼›
*   æ ‡å‡†è´¹ç‡ï¼ˆT\_FeeRateï¼‰æ”¯æ’‘æ¨¡å—å›› FR-FE-01/03ï¼›
*   æ—¶é™æ¨¡æ¿ï¼ˆT\_TaskTemplateï¼‰æ”¯æ’‘æ¨¡å—ä¸‰ FR-DL-01/02ï¼›
*   æ–‡æ¡£æ¨¡æ¿ï¼ˆT\_Templateï¼‰ä¸å¸¸ç”¨æ–‡ä»¶å®šä¹‰ï¼ˆT\_DocTemplateï¼‰æ”¯æ’‘æ¨¡å—äºŒä¸­æ‰€æœ‰æ–‡ä¹¦ç”Ÿæˆä¸è”åŠ¨ï¼ˆFR-WD-03/05/07/09/10 ç­‰ï¼‰ï¼›
*   ä¿¡å¤´ï¼ˆT\_LetterHeadï¼‰æ”¯æŒæ‰€æœ‰å¯¹å¤–è¾“å‡ºæ–‡æ¡£çš„ç»Ÿä¸€æŠ¬å¤´ã€‚

### 9.5.2 Search éƒ¨åˆ†

*   é«˜çº§æ¡ˆä»¶æŸ¥è¯¢æ•´åˆäº†æ¨¡å—ä¸€/äºŒ/ä¸‰/å››/äº”/å…­/ä¸ƒçš„å„ç±»ç»´åº¦ï¼šCaseType/Status/æ—¥æœŸ/æ§åˆ¶æ ‡è®°/è´¹ç”¨/æ”¶æ¬¾/ææˆç­‰ã€‚
*   ä¸­é—´æ–‡ä»¶æŸ¥è¯¢èšç„¦æ¨¡å—äºŒ T\_Documentï¼›
*   è´¹ç”¨æƒ…å†µæŸ¥è¯¢èšç„¦æ¨¡å—å›› T\_GovPayment/T\_CaseReceiptï¼›
*   æ—¶é™æ£€ç´¢èšç„¦æ¨¡å—ä¸‰ T\_Task + æ¨¡å—å›› T\_AnnuityTaskã€‚

### 9.5.3 Reports éƒ¨åˆ†

*   æ¡ˆä»¶ç»Ÿè®¡æŠ¥è¡¨ä¸»è¦åŸºäº T\_Caseï¼ˆæ¨¡å—ä¸€ï¼‰+ T\_CaseApplicant/T\_CaseInventor/T\_Countryï¼›
*   è´¹ç”¨/æ”¶å…¥ç»Ÿè®¡æŠ¥è¡¨ä¸»è¦åŸºäº T\_FeeDraft/T\_FeeItemï¼ˆæ¨¡å—å››ï¼‰+ T\_Bill/T\_BillItem/T\_CaseReceiptï¼ˆæ¨¡å—äº”ï¼‰ï¼›
*   å¹´è´¹ç»Ÿè®¡æŠ¥è¡¨åŸºäº T\_AnnuityTask + T\_GovPayment + T\_CaseReceiptï¼›
*   åº”æ”¶/è´¦é¾„/åè´¦/å‚¬æ¬¾æŠ¥è¡¨åŸºäº T\_Bill/T\_Offset/T\_Dunningï¼›
*   ææˆæŠ¥è¡¨åŸºäºæ¨¡å—å…­çš„ T\_Commission\*ã€‚

***

âœ… è‡³æ­¤ï¼Œ**æ¨¡å—å…«ï¼šè®¾ç½®ã€æŸ¥è¯¢ä¸æŠ¥è¡¨æ€»è§ˆ** å·²ç»å®Œæ•´å±•å¼€ï¼Œå¹¶ä¸å‰ä¸ƒä¸ªæ¨¡å—çš„æ‰€æœ‰æ•°æ®ç»“æ„å’Œ FR å¯¹åº”èµ·æ¥ã€‚

***

æ¥ä¸‹æ¥ï¼ŒæŒ‰ç…§ä½ æœ€åˆçš„è¦æ±‚ï¼Œä¸‹ä¸€å¤§å—å°±æ˜¯ï¼š

> **Part IIï¼šE2E åœºæ™¯ï¼ˆæ–°æ¡ˆ A + OA B + PCT/å›½å®¶ C + æˆæƒ + å¹´è´¹ D + æ— æ•ˆ/è¯‰è®¼ E + å‚¬æ¬¾/åè´¦ G + é¢„æ”¶ F + é¡¾é—® Hï¼‰çš„â€œæ—¶é—´çº¿ + æ•°æ®æµâ€æ±‡æ€»**\
> å¤–åŠ ï¼š
>
> *   â€œå…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆâ€
> *   Mermaid æ³³é“å›¾
> *   Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨

## 10. Part II â€“ E2E åœºæ™¯ Aï¼šæ–°æ¡ˆç”³è¯·å…¨æµç¨‹ â€“ æ—¶é—´çº¿ & æ•°æ®æµè¯´æ˜ï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯æŠŠâ€œæ–°æ¡ˆä»ç«‹æ¡ˆåˆ°ç”³è¯·è´¹æ”¶å®Œ + ä¸€æ¬¡ææˆâ€çš„ **åŠ¨æ€è¿‡ç¨‹** å’Œå‰é¢æ¨¡å—ä¸€/ä¸‰/å››/äº”/å…­ä¸­çš„ **é™æ€æ•°æ®æ¨¡å‹** ä¸²èµ·æ¥ã€‚\
> æˆ‘ä¼šæŒ‰æ—¶é—´çº¿åˆ† Phase A0â€“A8ï¼š
>
> *   æ¯ä¸ªé˜¶æ®µéƒ½å†™ï¼š**å‚ä¸è§’è‰² â†’ æ“ä½œ â†’ æ›´æ–°å“ªäº›è¡¨/å“ªäº›å­—æ®µ â†’ ä¸åç»­æ¨¡å—çš„è”åŠ¨**
> *   æŠŠæˆ‘ä»¬ä¹‹å‰æ‰€æœ‰å…³äºåœºæ™¯ A çš„ç‚¹ï¼ˆåŒ…æ‹¬ä¸¤æ¬¡ä¸åŒç‰ˆæœ¬çš„æè¿°ï¼‰å…¨éƒ¨åˆå¹¶ï¼Œä¿è¯æ²¡æœ‰ä¿¡æ¯ä¸¢å¤±ã€‚

***

## 10.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> å®¢æˆ·æå‡ºä¸€ä¸ªæ–°çš„ä¸“åˆ©ç”³è¯·éœ€æ±‚ â†’ å¾‹æ‰€å½•å…¥æ–°æ¡ˆæ¡ˆå· â†’ å®Œæˆæ’°å†™å’Œå†…éƒ¨å®¡æ‰¹åå°†æ–°æ¡ˆé€’äº¤å®˜æ–¹ â†’ äº§ç”Ÿç”³è¯·è´¹ç¼´çº³çš„æ—¶é™ â†’ åœ¨åˆé€‚æ—¶ç‚¹ç”Ÿæˆç”³è¯·è´¹è‰å•ï¼ˆå®˜è´¹+æœåŠ¡è´¹ï¼‰ â†’ ä¸ºå®˜è´¹ç”Ÿæˆå®˜è´¹æ¸…å•å¹¶å‘å®˜æ–¹ç¼´è´¹ â†’ å¼€å…·ç»™å®¢æˆ·ç”³è¯·è´¹è´¦å• â†’ å®¢æˆ·æ”¯ä»˜è´¹ç”¨ â†’ ç³»ç»Ÿåšæ”¶æ¬¾ç™»è®°+è´¦å•å†²é”€+ä¸ªæ¡ˆæ”¶æ¬¾è®°å½• â†’ ç³»ç»ŸåŸºäºæœåŠ¡è´¹ä¸ºä»£ç†äººè®¡ç®—ä¸€æ¬¡ææˆï¼Œå¹¶åœ¨æ»¡è¶³æ¡ä»¶åçº³å…¥ææˆç»“ç®—æ‰¹æ¬¡ã€‚

**æ¶‰åŠæ¨¡å—ä¸è¡¨ï¼ˆç®€è¡¨ï¼‰**

*   **æ¨¡å—ä¸€ â€“ æ¡ˆå·ç»´æŠ¤**
    *   `T_Case` / `T_CaseApplicant` / `T_CaseInventor` / `T_Priority`
*   **æ¨¡å—äºŒ â€“ ä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†**
    *   ï¼ˆæœ¬åœºæ™¯ä¸­ï¼Œé€’äº¤æ¸…å•å¯é€‰ï¼›ä¸»è¦ä½¿ç”¨æ¨¡å—ä¸€/ä¸‰/å››/äº”/å…­ï¼‰
*   **æ¨¡å—ä¸‰ â€“ æ—¶é™ç®¡ç†**
    *   `T_TaskTemplate`ï¼ˆAPPLY\_FEE\_LIMITï¼‰
    *   `T_Task`ï¼ˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼‰
    *   `T_TaskLog`
*   **æ¨¡å—å›› â€“ è´¹ç”¨ç®¡ç†**
    *   `T_FeeRate`ï¼ˆç”³è¯·è´¹ç›¸å…³æ ‡å‡†è´¹ç‡ï¼‰
    *   `T_FeeDraft`ï¼ˆType=APPLY\_FEEï¼‰
    *   `T_FeeItem`ï¼ˆç”³è¯·è´¹è‰å•æ˜ç»†ï¼‰
    *   `T_PayList`ï¼ˆType=APPLYï¼‰
    *   `T_GovPayment`
    *   `T_CaseReceipt`ï¼ˆä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ï¼Œå¯ä»è´¦å•/å†²é”€æ‹†åˆ†å†™å…¥ï¼‰
*   **æ¨¡å—äº” â€“ è´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦**
    *   `T_Bill` / `T_BillItem`
    *   `T_Payment` / `T_PaymentLine`
    *   `T_Offset`
*   **æ¨¡å—å…­ â€“ ä»£ç†äººé…¬é‡‘**
    *   `T_CommissionRule`ï¼ˆCaseType=NORMAL çš„è§„åˆ™ï¼‰
    *   `T_Commission`ï¼ˆæœ¬æ¡ˆ+ä»£ç†äººçš„ææˆè®°å½•ï¼‰
    *   `T_CommissionSettlement` / `T_CommissionSettleLine`ï¼ˆåç»­ç»“ç®—é˜¶æ®µï¼‰

***

## 10.2 Phase A0ï¼šå‰ç½®ä¸šåŠ¡åœºæ™¯ & åˆå§‹æ¡ä»¶

**å‚ä¸è§’è‰²**

*   å®¢æˆ·ï¼ˆClientï¼‰
*   Formalitiesï¼ˆæµç¨‹/å½¢å¼å®¡æŸ¥ï¼‰
*   Agentï¼ˆä»£ç†äºº/å¾‹å¸ˆï¼‰

**æè¿°**

*   å®¢æˆ·é€šè¿‡é‚®ä»¶/ç”µè¯/ä¼šè®®è¡¨è¾¾éœ€è¦ä»£ç†ä¸€ä¸ªæ–°çš„ä¸“åˆ©ç”³è¯·ï¼ˆå›½å†…æˆ–æ¶‰å¤–ï¼‰ã€‚
*   æ­¤æ—¶ **ç³»ç»Ÿå†…å°šæ— ä»»ä½•è®°å½•**ï¼Œåªæ˜¯ä¸€ä¸ªä¸šåŠ¡æœºä¼šã€‚

**æŠ€æœ¯å±‚é¢**

*   æ•°æ®åº“ä¸­ï¼šä¸æ¶‰åŠä»»ä½•å†™æ“ä½œã€‚
*   å¼€å‘è§†è§’ï¼šå¯ä»¥åœ¨ CRM / çº¿ç´¢æ¨¡å—è®°ï¼Œä½† FPMS çš„èµ·ç‚¹ä»æ–°æ¡ˆç«‹æ¡ˆï¼ˆA1ï¼‰å¼€å§‹ã€‚

***

## 10.3 Phase A1ï¼šæ–°æ¡ˆç«‹æ¡ˆï¼ˆCase Creationï¼‰

**è§’è‰²**

*   Formalities

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­å»ºç«‹æ–°çš„ `T_Case` è®°å½•ï¼ŒçŠ¶æ€ä¸º `NOT_FILED`ï¼Œå¹¶ç™»è®°ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒç­‰åŸºæœ¬ä¿¡æ¯ã€‚

### 10.3.1 æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰

1.  ç”¨æˆ·åœ¨â€œæ¡ˆå·ç»´æŠ¤ â†’ æ–°å»ºæ¡ˆå·â€é¡µé¢ç‚¹å‡»â€œæ–°å»ºâ€ï¼›
2.  å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼ˆå‚è€ƒæ¨¡å—ä¸€ 2.4ï¼‰ï¼š
    *   **åŸºæœ¬ä¿¡æ¯**
        *   CaseNoï¼šæ‰‹å·¥æˆ–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
        *   CaseType=NORMAL
        *   PatentCategoryï¼ˆå‘æ˜/æ–°å‹/å¤–è§‚ï¼‰
        *   FlowDirï¼ˆIN\_IN/IN\_OUT/...ï¼‰
        *   FromCountryã€ToCountryï¼ˆæ¶‰å¤–æ¡ˆè¦æŒ‡å®š ToCountryï¼‰
        *   Title\_CNã€Title\_EN
    *   **å‚ä¸æ–¹**
        *   ClientIDï¼ˆä»å®¢æˆ·ä¸»æ•°æ®é€‰ï¼Œæˆ–åœ¨æ­¤è·³è½¬æ–°å¢ï¼‰
        *   ForeignAgentIDï¼ˆè‹¥æ¶‰å¤–ä¸”æœ‰å¤–æ‰€ï¼‰
    *   **ç”³è¯·äºº/å‘æ˜äºº**
        *   CaseApplicant åˆ—è¡¨ï¼ˆè‡³å°‘ä¸€äººï¼Œå”¯ä¸€å®šä¹‰ IsPrimary=trueï¼‰
        *   CaseInventor åˆ—è¡¨ï¼ˆå¯ç©ºæˆ–â‰¥1ï¼Œè§†ä¸šåŠ¡è§„åˆ™ï¼‰
    *   **æ—¥æœŸ/ç¼–å·**
        *   RecvDateï¼ˆæ”¶æ¡ˆæ—¥ï¼‰
        *   å…¶ä»–æ—¥æœŸï¼Œå¦‚ FilingDate/AppNoï¼Œä¸€èˆ¬æ­¤åˆ»è¿˜æ²¡æœ‰ï¼Œç•™ç©º
    *   **è§„æ ¼ä¸æ§åˆ¶**
        *   SpecPages/ClaimCount ç­‰
        *   ApplicantKindï¼ˆæ³•äºº/è‡ªç„¶äººï¼‰
        *   FeeReductionï¼ˆå®˜è´¹è´¹å‡æ¯”ä¾‹ï¼Œå¦‚æœå·²çŸ¥ï¼‰
        *   IsFeeMonitorï¼ˆæ˜¯å¦è®¡åˆ’å¹´è´¹ç›‘è§†ï¼‰
        *   NoPower/NoPrioText ç­‰
3.  ç‚¹å‡»â€œä¿å­˜â€ã€‚

### 10.3.2 æ•°æ®åº“æ›´æ–°ï¼ˆå­—æ®µçº§ï¼‰

**æ’å…¥ `T_Case` ä¸€æ¡è®°å½•ï¼š**

*   `CaseID`ï¼šæ–°ç”Ÿæˆ
*   `CaseNo`ï¼šç”¨æˆ·è¾“å…¥æˆ–è§„åˆ™ç”Ÿæˆï¼ˆä¿è¯å”¯ä¸€ï¼‰
*   `CaseType`=NORMAL
*   `PatentCategory`=ç”¨æˆ·é€‰æ‹©
*   `FlowDir`=ç”¨æˆ·é€‰æ‹©
*   `FromCountry`ã€`ToCountry` æŒ‰è¾“å…¥
*   `Title_CN`ã€`Title_EN`
*   `Status`=NOT\_FILED
*   `RecvDate`=ç”¨æˆ·è¾“å…¥
*   `FilingDate`/`AppNo` ä¸ºç©ºï¼ˆå°šæœªé€’äº¤ï¼‰
*   æ§åˆ¶æ ‡è®°ï¼šApplicantKind/FeeReduction/IsFeeMonitor/NoPower/NoPrioText/HasExamRequest=false ç­‰
*   å…³è”æ–¹ï¼šClientIDã€ForeignAgentIDï¼ˆå¦‚æœ‰ï¼‰
*   å®¡è®¡ï¼šCreatedBy=å½“å‰ç”¨æˆ·ï¼ŒCreatedAt=å½“å‰æ—¶é—´ï¼ŒUpdatedBy/At åŒæ­¥

**æ’å…¥ `T_CaseApplicant` / `T_CaseInventor` / `T_Priority`ï¼š**

*   æŒ‰ UI å½•å…¥çš„åˆ—è¡¨åˆ›å»ºå¤šè¡Œè®°å½•ï¼›
*   è‹¥å½•å…¥äº†ä¼˜å…ˆæƒï¼Œåˆ™åœ¨ä¿å­˜åï¼š
    *   `T_Case.PrioDate = MIN(T_Priority.PrioDate)`ã€‚

### 10.3.3 æ ¡éªŒä¸é”™è¯¯å¤„ç†

*   CaseNo å”¯ä¸€æ€§æ ¡éªŒï¼ˆV-A-01ï¼‰ï¼›
*   CaseType/PatentCategory/FlowDir åˆæ³•ç»„åˆï¼ˆV-A-02/03ï¼‰ï¼›
*   è‡³å°‘ä¸€æ¡ç”³è¯·äººä¸”å”¯ä¸€ç¬¬ä¸€ç”³è¯·äººï¼ˆV-C-01/02ï¼‰ï¼›
*   ApplicantKind ä¸ç¬¬ä¸€ç”³è¯·äººç±»å‹ä¸€è‡´ï¼ˆV-C-03ï¼‰ï¼›
*   è‹¥æ¶‰å¤– FlowDir ä¸” ForeignAgentID ä¸ºç©ºï¼ŒæŠ¥é”™ï¼ˆV-B-01ï¼‰ï¼›
*   ä¼˜å…ˆæƒä¸ FilingDate çš„å…³ç³»æš‚æ—¶ä¸æ ¡éªŒï¼ˆå› ä¸º FilingDate è¿˜æœªå¡«ï¼‰ã€‚

**ç»“æœ**

*   æ•°æ®åº“ä¸­æ–°å¢ä¸€ä¸ªâ€œæœªé€’äº¤çš„æ–°æ¡ˆâ€ï¼›
*   è¿™ä¸ª CaseID æ˜¯æ•´ä¸ªåç»­æµç¨‹ç»‘å®šçš„æ ¸å¿ƒä¸»é”®ã€‚

***

## 10.4 Phase A2ï¼šæ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆä» NOT\_FILED â†’ WAITING\_RECEIPTï¼‰

**è§’è‰²**

*   Formalities

**ç›®æ ‡**

*   å¯¹ä¸€æ‰¹å·²å‡†å¤‡å®Œæ¯•çš„æ–°æ¡ˆè®¾ç½®â€œé€’äº¤æ—¥æœŸâ€ï¼Œå°†çŠ¶æ€ä» NOT\_FILED æ”¹ä¸º WAITING\_RECEIPTï¼Œå¹¶å¯åœ¨æ­¤é˜¶æ®µè§¦å‘ç”³è¯·è´¹æ—¶é™ä»»åŠ¡çš„ç”Ÿæˆã€‚

### 10.4.1 æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰

1.  æ‰“å¼€â€œæ¡ˆä»¶é€’äº¤â€é¡µé¢ï¼›
2.  åœ¨ç­›é€‰åŒºè¾“å…¥æ¡ä»¶ï¼š
    *   CaseType=NORMAL
    *   Status=NOT\_FILED
    *   RecvDate åœ¨æŸæ—¥æœŸåŒºé—´ï¼ˆä¾‹å¦‚æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼‰
    *   FlowDir/Client/Agent ä½œä¸ºè¾…åŠ©æ¡ä»¶
3.  ç‚¹å‡»â€œæŸ¥è¯¢â€ï¼Œç³»ç»Ÿåˆ—å‡ºæ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ¡ˆä»¶ï¼š
    *   åˆ—ï¼šCaseNo, Title\_CN, ClientName, CaseType, PatentCategory, FlowDir, RecvDate, Status, HasExamRequest ç­‰
4.  ç”¨æˆ·å‹¾é€‰å…¶ä¸­è‹¥å¹²æ¡å‡†å¤‡åœ¨æœ¬æ¬¡æ‰¹å¤„ç†é€’äº¤ï¼›
5.  åœ¨æ‰¹å¤„ç†å‚æ•°åŒºè®¾ç½®ï¼š
    *   `SubmittedDate` â€“ é€’äº¤æ—¥æœŸï¼ˆé»˜è®¤=ä»Šå¤©ï¼Œå¯è°ƒæ•´ï¼‰
    *   `ApplyExamNow` â€“ æ˜¯å¦åŒæ—¶æäº¤å®å®¡è¯·æ±‚ï¼ˆé€‚ç”¨äºå‘æ˜æ–°æ¡ˆï¼‰
    *   `GenerateList` â€“ æ˜¯å¦ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£
6.  ç‚¹å‡»â€œæ‰§è¡Œé€’äº¤â€ã€‚

### 10.4.2 æ•°æ®åº“æ›´æ–°

å¯¹æ¯ä¸€æ¡é€‰ä¸­çš„ `CaseID`ï¼š

1.  æ›´æ–° `T_Case`ï¼š
    *   `Status: NOT_FILED â†’ WAITING_RECEIPT`

*   è‹¥ `ApplyExamNow=true`ï¼š`HasExamRequest=true`
*   å¯é€‰è®°å½• `SubmittedDate`ï¼ˆå¯åœ¨ T\_Case.ExtraData æˆ–é¢å¤–å­—æ®µä¸­å­˜å‚¨ï¼‰
    2\.  å¦‚é…ç½®è‡ªåŠ¨ç”Ÿæˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼ˆéƒ¨åˆ†ç³»ç»Ÿåœ¨æ­¤é˜¶æ®µç”Ÿæˆï¼Œéƒ¨åˆ†åœ¨å—é€šåç”Ÿæˆï¼‰ï¼š
    *   è°ƒç”¨ `CreateTaskFromTemplate(CaseID, "APPLY_FEE_LIMIT", baseDateSource=FILING_DATE or CASE_EVENT)`
*   ç”Ÿæˆ `T_Task`ï¼ˆè¯¦è§ Phase A3ï¼‰
    3\.  è‹¥ `GenerateList=true`ï¼š
    *   è°ƒç”¨æ¨¡æ¿ç³»ç»Ÿç”Ÿæˆâ€œæ–°æ¡ˆé€’äº¤æ¸…å•â€ Word/Excelï¼›
*   å¯å°†ç”Ÿæˆçš„æ–‡ä»¶ä½œä¸º `T_Document`ï¼ˆDocType=OFFICIAL\_OUT or INTERNALï¼‰è®°å½• + `T_DocAttachment`ã€‚

### 10.4.3 æ ¡éªŒ

*   V-BF-01ï¼šè‡³å°‘æœ‰ä¸€æ¡å‹¾é€‰æ¡ˆä»¶ï¼›
*   V-BF-02ï¼šSubmittedDate ä¸å¾—æ—©äº RecvDateï¼Œä¸”ä¸å®œæ™šäºå½“å‰æ—¥æœŸå¤ªä¹…ã€‚

**ç»“æœ**

*   æ–°æ¡ˆçŠ¶æ€ä» NOT\_FILED å˜ä¸º WAITING\_RECEIPTï¼›
*   è‹¥ç³»ç»Ÿé€‰æ‹©æ­¤æ—¶ç”Ÿæˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼Œåˆ™è¿›å…¥ A3ï¼›
*   è‹¥ä¸åœ¨æ­¤æ—¶ç”Ÿæˆï¼Œåˆ™åœ¨å—é€š/å—ç†å®Œæˆåå†ç”Ÿæˆã€‚

***

## 10.5 Phase A3ï¼šç”³è¯·è´¹æ—¶é™ä»»åŠ¡ç”Ÿæˆï¼ˆT\_Taskï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   ä¸ºæ¯ä¸ªéœ€è¦ç¼´çº³ç”³è¯·è´¹çš„æ¡ˆä»¶åˆ›å»ºä¸€æ¡â€œç”³è¯·è´¹ç¼´çº³æ—¶é™â€çš„ T\_Taskï¼Œç”¨äºåç»­æé†’å’Œæ£€ç´¢ã€‚

### 10.5.1 æ—¶é™æ¨¡æ¿ï¼šT\_TaskTemplate(APPLY\_FEE\_LIMIT)

åœ¨æ¨¡å—ä¸‰ä¸­å·²ç»å®šä¹‰ï¼Œè¿™é‡Œå†ç®€è¦å›é¡¾å…³é”®å­—æ®µï¼š

*   `Code = "APPLY_FEE_LIMIT"`
*   `Name = "ç”³è¯·è´¹ç¼´çº³æ—¶é™"`
*   `DeadlineBase`ï¼šFILING\_DATE æˆ– CASE\_EVENTï¼ˆé€’äº¤æ—¥ï¼‰ï¼ŒæŒ‰å›½å®¶è§„åˆ™é…ç½®
*   `AddMonths`ï¼šä¾‹å¦‚ 2ï¼ˆè‡ªåŸºå‡†æ—¥èµ· 2 ä¸ªæœˆï¼‰
*   `InnerOffsetDays`ï¼šä¾‹å¦‚ 10ï¼ˆå†…éƒ¨é™æ¯”å®˜æ–¹ç»é™æå‰ 10 å¤©ï¼‰
*   `RemindBase`ï¼šDEADLINE
*   `R1_OffsetDays`ï¼šå¦‚ 30ï¼ˆæå‰ 30 å¤©æé†’ä¸€æ¬¡ï¼‰
*   `R2_OffsetDays`ã€`R3_OffsetDays` å¯æ ¹æ®å…·ä½“ç­–ç•¥å¡«å†™
*   `DailyRemind`ï¼šå¯è§†éœ€è¦è®¾ç½®

### 10.5.2 ç”Ÿæˆé€»è¾‘

å½“æ¡ˆä»¶è¿›å…¥ WAITING\_RECEIPT æˆ–åœ¨â€œå—é€šâ€ä¸­è¢«ç¡®è®¤å—ç†ï¼ˆè§†å®æ–½ç­–ç•¥ï¼‰ï¼Œç³»ç»Ÿæ‰§è¡Œï¼š

1.  ç¡®å®š `BaseDate`ï¼š
    *   è‹¥å·²æœ‰ FilingDateï¼š`BaseDate = FilingDate`ï¼›
    *   è‹¥æš‚æœªæœ‰ FilingDateï¼Œå¯ç”¨ SubmittedDate æˆ–å®˜æ–¹å—ç†æ—¥æœŸï¼›
2.  å–å‡º `T_TaskTemplate` where Code="APPLY\_FEE\_LIMIT" and IsActive=trueï¼›
3.  è®¡ç®—ï¼š
    *   `Deadline = BaseDate + AddYears/Months/Days`ï¼ˆä¾‹å¦‚ FilingDate + 2 ä¸ªæœˆï¼‰ï¼›

*   `InnerDeadline = Deadline - InnerOffsetDays`ï¼ˆä¾‹å¦‚ Deadline - 10 å¤©ï¼‰ï¼›
*   `Remind1` = Deadline - R1\_OffsetDaysï¼›
*   `Remind2/Remind3` å¦‚æœ‰è®¾ç½®ï¼›
*   `DailyRemindFrom` = InnerDeadlineï¼ˆæˆ– Deadlineï¼‰è§†æ¨¡æ¿è€Œå®šã€‚
    4\.  é€‰æ‹©è´£ä»»äººï¼š
    *   WorkerID = Case.PrimaryAgentID æˆ– DraftorID æˆ–å½“å‰ Formalitiesï¼›
*   SupervisorID = æ¨¡æ¿ DefaultSupervisorID æˆ–éƒ¨é–€è´Ÿè´£äººã€‚
    5\.  æ’å…¥ `T_Task`ï¼š
    *   `CaseID` = å½“å‰ CaseID
*   `DocID` = NULLï¼ˆå¦‚ä¸ç‰¹å®šä¸­é—´æ–‡ä»¶ä¸ç»‘å®šæ—¶ï¼‰
*   `TemplateCode`="APPLY\_FEE\_LIMIT"
*   `Type`="ç”³è¯·è´¹ç¼´çº³æ—¶é™"
*   `BaseDate`, `Deadline`, `InnerDeadline`, `Remind1/2/3`, `DailyRemindFrom`, `DailyRemind`
*   `WorkerID`, `SupervisorID`
*   `Status`=OPEN, `DoneDate`=NULL, `IsWrittenOff`=false
    6\.  å†™å…¥ `T_TaskLog`ï¼ˆAction=CREATEï¼‰ã€‚

**ç»“æœ**

*   åœ¨â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾ä¸­ï¼Œä¸»åŠä»£ç†äººä¼šçœ‹åˆ°æ–°æ¡ˆä»¶çš„ç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼›
*   æœªæ¥çš„ A4/A5/A6/A7 åŠ¨ä½œä¸æ­¤ Task ä¸ç›´æ¥è”åŠ¨ï¼ˆæ˜¯å¦è‡ªåŠ¨æ ¸é”€å¯ç”±å®æ–½å†³å®šï¼Œä¸€èˆ¬ä¸ä¼šè‡ªåŠ¨æ ¸é”€ç”³è¯·è´¹ä»»åŠ¡ï¼Œè€Œæ˜¯é€šè¿‡â€œç”³è¯·è´¹ç¼´è´¹å®Œæˆâ€åæ‰‹åŠ¨æ ¸é”€æˆ–å˜æ›´ä¸º DONEï¼‰ã€‚

***

## 10.6 Phase A4ï¼šç”Ÿæˆç”³è¯·è´¹è‰å•ï¼ˆT\_FeeDraft/T\_FeeItemï¼‰

**è§’è‰²**

*   Formalities / Finance

**ç›®æ ‡**

*   åœ¨åˆé€‚çš„æ—¶é—´ç‚¹ä¸ºæ¡ˆä»¶ç”Ÿæˆâ€œç”³è¯·è´¹è‰å•â€ï¼ŒåŒ…æ‹¬å®˜è´¹å’ŒæœåŠ¡è´¹éƒ¨åˆ†ï¼Œä¾›åç»­å®˜è´¹æ¸…å•å’Œè´¦å•ä½¿ç”¨ã€‚

### 10.6.1 è§¦å‘æ—¶æœº

*   ç›¸å¯¹ FilingDate/RecvDate/Deadline ä¸€æ®µæ—¶é—´å‰ï¼›
*   é€šè¿‡â€œç”³è¯·è´¹æ—¶é™æ£€ç´¢â€åˆ—è¡¨é€‰ä¸­çš„æ¡ˆä»¶ï¼ˆæ‰¹é‡ç”Ÿæˆï¼‰ï¼›
*   æˆ–åœ¨æ¡ˆå·è¯¦æƒ…çš„â€œè´¹ç”¨è‰å•â€æ ‡ç­¾ä¸­æ‰‹å·¥åˆ›å»ºã€‚

### 10.6.2 ä»æ ‡å‡†è´¹ç‡è¡¨è®¡ç®—æ˜ç»†

1.  ä» `T_FeeRate` ä¸­ç­›é€‰ Group=APPLY çš„è´¹ç‡è®°å½•ï¼ŒæŒ‰ï¼š
    *   CountryCode = Case.ToCountry
    *   CaseType=NORMAL
    *   PatentCategory=Case.PatentCategory
2.  å¸¸è§ç”³è¯·è´¹é¡¹ç›®ï¼š
    *   åŸºæœ¬ç”³è¯·è´¹ï¼ˆGOVï¼‰
    *   è¯´æ˜ä¹¦è¶…é¡µè´¹ï¼ˆGOVï¼‰
    *   æƒåˆ©è¦æ±‚è¶…é¡¹è´¹ï¼ˆGOVï¼‰
    *   ä»£ç†æœåŠ¡è´¹ï¼ˆSERVICEï¼‰
    *   å…¶ä»–è´¹ç”¨ï¼ˆMISCï¼‰
3.  å¯¹æ¯ä¸ªè´¹ç‡è®°å½•ï¼š
    *   æ ¹æ® CalcMode/CalcParams + æ¡ˆä»¶å­—æ®µï¼ˆClaimCount/SpecPages ç­‰ï¼‰è®¡ç®— UnitPrice & Amountï¼›

*   å¯¹å®˜è´¹é¡¹ç›®è‹¥ `AllowReduction=true` ä¸” Case.FeeReduction>0ï¼š
    *   `Amount = Amount Ã— (1 - FeeReduction)`ï¼›`IsReduced=true`
*   Currency åˆå€¼=FeeRate.DefaultCurrencyï¼ŒExchangeRate=ç³»ç»Ÿæ±‡ç‡è¡¨å¯¹è´¦å•å¸ç§çš„æ±‡ç‡ï¼›
*   LocalAmount = Amount Ã— ExchangeRateã€‚

### 10.6.3 ä¿å­˜è‰å•

**å¤´è®°å½•ï¼šT\_FeeDraft**

*   `CaseID` = å½“å‰ CaseID
*   `Type` = APPLY\_FEE
*   `Currency` = å®¢æˆ·å¸ç§ï¼ˆä¾‹å¦‚ RMB/USDï¼‰
*   `TotalGov` = Î£(LocalAmount where FeeType=GOV)
*   `TotalService` = Î£(LocalAmount where FeeType=SERVICE)
*   `TotalMisc` = Î£(LocalAmount where FeeType=MISC)
*   `TotalAmt = TotalGov + TotalService + TotalMisc`
*   `Status = OPEN`
*   å®¡è®¡å­—æ®µå¡«å……

**æ˜ç»†è®°å½•ï¼šT\_FeeItem**

*   å¯¹ä¸Šè¿°æ¯ä¸ªè´¹ç”¨é¡¹ç›®æ’å…¥ä¸€æ¡ï¼š
    *   DraftID=è‰å•å¤´ID
    *   RateID=å¯¹åº”è´¹ç‡ID
    *   FeeCode/FeeName/YearNo(ç©º)/FeeType
    *   Quantity/UnitPrice/Amount/Currency
    *   ExchangeRate/LocalAmount
    *   IsAuto=true, IsReduced/IsDiscounted æŒ‰é€»è¾‘è®¾ç½®
    *   Remark å¦‚æœ‰éœ€è¦

### 10.6.4 æ ¡éªŒ

*   V-FD-01ï¼šè‰å•ä¸­å¿…é¡»è‡³å°‘ä¸€æ¡æ˜ç»†ï¼›
*   V-FD-02ï¼šå¸ç§å¿…å¡«ï¼Œåœ¨æœ¬æ¡ˆä¸­é€šå¸¸ç­‰äºå®¢æˆ·å¸ç§ï¼›
*   V-FI-01\~05ï¼šæ˜ç»†çš„ FeeCode/FeeName/YearNo/FeeType/Amount ç­‰æ»¡è¶³å‰è¿°çº¦æŸã€‚

**ç»“æœ**

*   æ¯ä¸ªéœ€è¦å¤„ç†ç”³è¯·è´¹çš„æ¡ˆå·è·å¾—ä¸€ä»½ APPLY\_FEE è‰å•ï¼Œä¸‹ä¸€æ­¥å¯ç”¨äºå®˜è´¹æ¸…å•å’Œå®¢æˆ·è´¦å•ã€‚

***

## 10.7 Phase A5ï¼šå®˜è´¹æ¸…å•ç”Ÿæˆ & å®˜æ–¹ç¼´è´¹ï¼ˆT\_PayList/T\_GovPaymentï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å°†å¤šä¸ªæ¡ˆä»¶çš„ç”³è¯·è´¹å®˜è´¹é¡¹ç›®æ±‡æ€»æˆä¸€å¼ å®˜è´¹æ¸…å•ï¼Œå¯¼å‡ºç»™å®˜æ–¹ç³»ç»Ÿï¼Œç¼´è´¹åç™»è®°å®ç¼´ä¿¡æ¯ã€‚

### 10.7.1 å®˜è´¹æ¸…å•ç”Ÿæˆ

**æ­¥éª¤**

1.  åœ¨â€œå®˜è´¹æ¸…å•â€ç•Œé¢ï¼Œé€‰æ‹©æ¸…å•ç±»å‹=APPLYï¼Œç­›é€‰ï¼š
    *   è‰å•ç±»å‹=APPLY\_FEE
    *   FeeType=GOV
    *   Country/FlowDir/å¸ç§ ç­‰æ¡ä»¶
2.  ç³»ç»Ÿåˆ—å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ `T_FeeItem` æ˜ç»†ï¼ˆGOV éƒ¨åˆ†ï¼‰ï¼ŒåŒ…æ‹¬æ¡ˆå·å·/å®¢æˆ·/è´¹ç”¨åç§°/é‡‘é¢ç­‰ï¼›
3.  Finance å‹¾é€‰éœ€è¦çº³å…¥åŒä¸€æ¸…å•çš„é¡¹ç›® â†’ ç‚¹å‡»â€œç”Ÿæˆå®˜è´¹æ¸…å•â€ã€‚

**å†™å…¥ `T_PayList`**

*   `ListNo` è‡ªåŠ¨ç”Ÿæˆ
*   `Type=APPLY`
*   `FlowDir` å¯å¡«ï¼ˆå¦‚ IN\_INï¼‰
*   `PlannedPayDate` = Finance è¾“å…¥
*   `Currency` = ç»Ÿä¸€é€‰æ‹©çš„å®˜è´¹ç¼´è´¹å¸ç§ï¼ˆå¦‚ RMBï¼‰
*   `TotalAmt` = æ‰€æœ‰é€‰ä¸­é¡¹ç›®çš„ LocalAmount åˆè®¡
*   `Status=DRAFT`

**å†™å…¥ `T_GovPayment`**

*   å¯¹æ¯æ¡é€‰ä¸­çš„ `T_FeeItem`ï¼ˆå®˜è´¹ï¼‰ï¼Œæ’å…¥ä¸€æ¡ `T_GovPayment`ï¼š
    *   `PayListID`=æ–°å»ºçš„ PayListID
    *   `CaseID`=FeeDraft.CaseID
    *   `ItemID`=FeeItem.ItemID
    *   `FeeCode`/`YearNo`ï¼ˆç”³è¯·è´¹ä¸€èˆ¬ YearNo ä¸ºç©ºï¼‰
    *   `PlannedAmt`=FeeItem.LocalAmount
    *   `PlannedCurrency`=PayList.Currency
    *   `PlannedPayDate`=PayList.PlannedPayDate
    *   Paid\* å­—æ®µæš‚ä¸ºç©ºã€‚

### 10.7.2 å®˜æ–¹ç¼´è´¹ & ç™»è®°

**ç¼´è´¹**

*   Finance æŒ‰æ¸…å•å¯¼å‡ºé€‚é…å®˜æ–¹å®¢æˆ·ç«¯çš„æ–‡ä»¶ï¼ˆXML/Excel/æ–‡æœ¬ï¼‰ï¼Œåœ¨å®˜æ–¹ç³»ç»Ÿä¸­ç¼´è´¹ï¼›

**ç™»è®°**

*   ç¼´è´¹åå›åˆ° FPMS ä¸­ï¼Œåœ¨ `T_PayList` é¡µé¢æ‰§è¡Œâ€œç¼´è´¹ç™»è®°â€ï¼š
    *   å¡«å†™ `ActualPayDate`, `InvoiceNoFrom/To`, å°† `Status=PAID`ï¼›
*   æ›´æ–°æ¯æ¡ `T_GovPayment`ï¼š
    *   `PaidAmt`=å®é™…ç¼´è´¹é‡‘é¢ï¼ˆè‹¥æ— è°ƒæ•´ï¼Œåˆ™å¯æ‹·è´ PlannedAmtï¼‰
    *   `PaidCurrency`=æ¸…å•å¸ç§
    *   `PaidDate`=å®˜æ–¹æ”¶æ¬¾æ—¥æœŸ
    *   `VoucherNo` å’Œ `InvoiceNo`ï¼ˆå¦‚ä¸€å¯¹ä¸€è®°è´¦ï¼Œåˆ™æ¯æ¡ GovPayment æœ‰ç‹¬ç«‹ InvoiceNoï¼›å¦åˆ™ä½¿ç”¨æ¸…å•å‘ç¥¨å·èŒƒå›´ï¼‰

**ç»“æœ**

*   ç³»ç»ŸæŒæ¡äº†è¯¥æ¡ˆç”³è¯·è´¹å®˜è´¹å·²ä½•æ—¶ç¼´çº³ã€ç¼´å¤šå°‘ã€å‘ç¥¨å·åŠå‡­è¯å·ï¼›
*   åç»­çš„è´¹ç”¨æƒ…å†µä¸€è§ˆï¼ˆæ¨¡å—å›› 5.11ï¼‰ä¼šå±•ç¤ºè¿™äº›è®°å½•ã€‚

***

## 10.8 Phase A6ï¼šç»™å®¢æˆ·ç”Ÿæˆç”³è¯·è´¹è´¦å•ï¼ˆT\_Bill/T\_BillItemï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   åŸºäºç”³è¯·è´¹è‰å•ï¼ˆåŒ…æ‹¬å®˜è´¹+æœåŠ¡è´¹ï¼‰ä¸ºå®¢æˆ·ç”Ÿæˆåº”æ”¶è´¦å•ï¼Œä¾›å®¢æˆ·ä»˜æ¬¾ã€‚

### 10.8.1 ä» APPLY\_FEE è‰å•ç”Ÿæˆè´¦å•

**æ­¥éª¤**

1.  åœ¨â€œè´¹ç”¨è‰å•â€åˆ—è¡¨ä¸­ï¼š
    *   ç­›é€‰ Type=APPLY\_FEEï¼ŒStatus=OPENï¼ˆæˆ–â€œå·²ç”¨äºå®˜è´¹æ¸…å•â€ï¼‰ï¼›
    *   æŒ‰ ClientID è¿‡æ»¤ï¼ˆä¸€ä¸ªå®¢æˆ·ä¸€æ‰¹è‰å•ï¼‰ï¼›
2.  å‹¾é€‰å±äºåŒä¸€ ClientID çš„å¤šä¸ª `T_FeeDraft` â†’ â€œç”Ÿæˆè´¦å•â€ã€‚

**ç”Ÿæˆè´¦å•å¤´ `T_Bill`**

*   `ClientID` = è¯¥å®¢æˆ·
*   `Direction=AR`
*   `BillDate` = ä»Šæ—¥ï¼ˆé»˜è®¤ï¼‰
*   `DueDate` = BillDate + é»˜è®¤è´¦æœŸï¼ˆä¾‹å¦‚ 30 å¤©ï¼‰
*   `Currency` = å®¢æˆ·é»˜è®¤å¸ç§
*   `DiscountRate` = å¯è¾“å…¥æ•´ä½“æŠ˜æ‰£ç‡ï¼ˆåªèƒ½ä½œç”¨äº SERVICEï¼›å®˜è´¹ä¸€èˆ¬ä¸æ‰“æŠ˜ï¼‰
*   `Status=UNSETTLED`
*   `Balance=Amount`ï¼ˆç¨åè®¡ç®—ï¼‰

**ç”Ÿæˆè´¦å•æ˜ç»† `T_BillItem`**

*   å¯¹æ¯ä¸ªé€‰ä¸­è‰å•çš„æ‰€æœ‰ `T_FeeItem`ï¼ˆGOV+SERVICE+MISCï¼‰ï¼š
    *   æ–°å»ºä¸€æ¡ `T_BillItem`ï¼š
        *   BillID=æ–°è´¦å•ID
        *   CaseID = FeeDraft.CaseID
        *   DraftID = FeeDraft.DraftID
        *   FeeItemID = FeeItem.ItemID
        *   FeeCode/FeeName/YearNo/FeeType
        *   Quantity/UnitPrice
        *   Amountï¼šè½¬æ¢åˆ°è´¦å•å¸ç§åçš„é‡‘é¢ï¼ˆé€šå¸¸=FeeItem.LocalAmountï¼Œå¦‚æœè‰å•å¸ç§å°±æ˜¯è´¦å•å¸ç§ï¼‰
        *   Currencyï¼šè´¦å•å¸ç§
        *   LocalAmount = Amountï¼ˆå¦‚æœ¬å¸ï¼‰
*   ç´¯è®¡è´¦å•å¤´å­—æ®µï¼š
    *   TotalGov = Î£(LocalAmount where FeeType=GOV)
    *   TotalService = Î£(LocalAmount where FeeType=SERVICE)
    *   TotalMisc = Î£(LocalAmount where FeeType=MISC)
    *   Amount = TotalGov + TotalService + TotalMisc
    *   Balance = Amount

**è‰å•æ›´æ–°**

*   å¯é€‰ï¼šä¸ºè¿™äº›è‰å•åŠ ä¸Šæ ‡è®°â€œå·²ç”¨äºè´¦å•â€ï¼ˆä¾‹å¦‚çŠ¶æ€æ”¹ä¸º LOCKED æˆ–é¢å¤–å­—æ®µï¼‰ï¼Œé¿å…é‡å¤ç”Ÿæˆè´¦å•ï¼›
*   ä½†è‰å•ä¿ç•™ç”¨äºå†å²æŸ¥è¯¢ä¸å¯¹è´¦ã€‚

### 10.8.2 è´¦å•æ‰“å°ä¸å‘é€

*   Finance é€šè¿‡è´¦å•è¯¦æƒ…ä¸­çš„â€œæ‰“å°/å¯¼å‡ºâ€æŒ‰é’®ï¼Œè°ƒç”¨æ¨¡æ¿ç³»ç»Ÿç”Ÿæˆè´¦å•æ–‡ä¹¦ï¼š
    *   ä¸­æ–‡ç‰ˆï¼ˆRMB æˆ–æœ¬å¸ï¼‰
    *   è‹±æ–‡ç‰ˆï¼ˆä¾›å¤–å›½å®¢æˆ·æˆ–å¤–æ–¹ä»£ç†ä½¿ç”¨ï¼‰
*   é€šè¿‡é‚®ä»¶/çº¸è´¨å½¢å¼å‘é€ç»™å®¢æˆ·ã€‚

***

## 10.9 Phase A7ï¼šå®¢æˆ·ä»˜æ¬¾ â†’ æ”¶æ¬¾ç™»è®° â†’ è´¦å•å†²é”€ â†’ ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•

**è§’è‰²**

*   å®¢æˆ·
*   Finance

**ç›®æ ‡**

*   è®°å½•å®¢æˆ·å®é™…ä»˜æ¬¾ï¼ˆPaymentï¼‰ï¼Œé€šè¿‡å†²é”€ï¼ˆOffsetï¼‰ä½¿è´¦å•ä½™é¢å‡å°‘/æ¸…é›¶ï¼Œå¹¶é€šè¿‡æ‹†åˆ†æŠŠå®æ”¶é‡‘é¢å†™åˆ°ä¸ªæ¡ˆæ”¶æ¬¾è¡¨ï¼ˆCaseReceiptï¼‰ï¼Œç”¨äºè´¹ç”¨æƒ…å†µæŸ¥è¯¢å’Œåç»­ææˆåˆ¤æ–­ã€‚

### 10.9.1 å®¢æˆ·ä»˜æ¬¾ç™»è®°ï¼ˆT\_Payment/T\_PaymentLineï¼‰

**æƒ…å½¢**

*   å®¢æˆ·æ”¶åˆ°ç”³è¯·è´¹è´¦å•åï¼Œé€šè¿‡é“¶è¡Œ/æ”¯ç¥¨/ç°é‡‘ç­‰æ–¹å¼æ”¯ä»˜ä¸€å®šé‡‘é¢ï¼ˆå¯ä¸€æ¬¡ä»˜æ¸…ï¼Œä¹Ÿå¯å¤šæ¬¡ä»˜ï¼‰ã€‚

**æ“ä½œ**

1.  Finance åœ¨â€œæ”¶æ¬¾ç™»è®°â€ä¸­æ–°å¢ `T_Payment`ï¼š
    *   ClientID = å¯¹åº”å®¢æˆ·
    *   PayNo = è‡ªåŠ¨æˆ–æ‰‹å·¥ç¼–å·
    *   PayDate = å®é™…åˆ°è´¦æ—¥
    *   Currency = æ”¶æ¬¾å¸ç§ï¼ˆé€šå¸¸=è´¦å•å¸ç§ï¼‰
    *   Amount = æ”¶æ¬¾æ€»é‡‘é¢ï¼ˆå¦‚ä¸€æ¬¡ä»˜æ¸…=è´¦å•æ€»é¢ï¼Œå¦åˆ™ä¸ºéƒ¨åˆ†é‡‘é¢ï¼‰
    *   PayMethod/BankRefNo/Remark å¦‚å®å¡«å†™
2.  ä¿å­˜åï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆä¸€æ¡ `T_PaymentLine`ï¼š
    *   PaymentID=åˆšåˆ›å»ºçš„ PaymentID
    *   CaseID = NULLï¼ˆé€šç”¨æ”¶æ¬¾ï¼‰
    *   RawAmount = Amount
    *   AllocatedAmt = 0
    *   BalanceAmt = Amount
    *   Remark = å¯è®°å½•â€œç”¨äºç”³è¯·è´¹è´¦å• Ã—Ã—Ã—â€ã€‚

### 10.9.2 è´¦å•å†²é”€ï¼ˆT\_Offsetï¼‰

**æ“ä½œ**

1.  Finance è¿›å…¥â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼›
2.  å·¦ä¾§é€‰ä¸­è¯¥ `T_PaymentLine`ï¼ˆBalanceAmt>0ï¼‰ï¼›
3.  å³ä¾§åˆ—è¡¨æ˜¾ç¤ºè¯¥å®¢æˆ·æ‰€æœ‰æœªç»“/éƒ¨åˆ†ç»“è´¦å•ï¼ˆStatus=UNSETTLED/PARTIALLY\_SETTLEDï¼‰ï¼ŒåŒ…å«åˆšåˆšç”Ÿæˆçš„ç”³è¯·è´¹è´¦å•ï¼›
4.  ç”¨æˆ·åœ¨å³ä¾§ä¸ºæ¯ä¸ªéœ€è¦å†²é”€çš„è´¦å•å¡«å†™ OffsetAmtã€‚
    *   è‹¥ä¸€æ¬¡ä»˜æ¸…ç”³è¯·è´¹è´¦å•ï¼Œåˆ™å¯¹è¯¥è´¦å•çš„ OffsetAmt=è´¦å• Balanceï¼›
    *   è‹¥æ”¶æ¬¾é‡‘é¢ > æŸä¸€å¼ è´¦å•ï¼Œå¯èƒ½åŒæ—¶å†²é”€å¤šå¼ è´¦å•ã€‚
5.  ç³»ç»Ÿæ ¡éªŒ V-OF-01/02ï¼Œå¹¶åœ¨é€šè¿‡æ—¶ä¸ºæ¯ä¸ª `(PaymentLine,Bill)` ç»„åˆå†™å…¥ `T_Offset`ï¼Œå¹¶æ›´æ–° PaymentLine/Bill çš„ä½™é¢ä¸çŠ¶æ€ã€‚

**å¯¹ç”³è¯·è´¹è´¦å•çš„ç»“æœ**

*   è‹¥è¯¥è´¦å•çš„ Balance é¦–æ¬¡è¢«å†²é”€åˆ° 0ï¼š
    *   `T_Bill.Status` ä» UNSETTLED â†’ SETTLEDï¼›
*   è‹¥åªå†²é”€éƒ¨åˆ†ï¼š
    *   `T_Bill.Status` â†’ PARTIALLY\_SETTLEDï¼›Balance>0ã€‚

### 10.9.3 æ‹†åˆ†å†²é”€ â†’ å†™å…¥ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆT\_CaseReceiptï¼‰

ä¸ºäº†åœ¨â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢â€ä»¥åŠææˆ WaitPay åˆ¤æ–­ä¸­å‡†ç¡®åæ˜ â€œæ¯æ¡ˆæ”¶äº†å¤šå°‘é’±â€ï¼š

1.  å¯¹æŸä¸€å¼ è¢«å†²é”€çš„ `T_Bill`ï¼ŒçŸ¥é“ï¼š
    *   Bill.Amountï¼ˆæ€»é¢ï¼‰
    *   æœ¬æ¬¡å†²é”€é‡‘é¢ OffsetAmt
2.  å¯¹è¯¥ Bill çš„æ‰€æœ‰ `T_BillItem`ï¼ˆæ˜ç»†ï¼‰ï¼š
    *   æŒ‰å„ BillItem.LocalAmount åœ¨ Bill.Amount ä¸­çš„æ¯”ä¾‹ï¼Œå°† OffsetAmt æŒ‰æ¯”ä¾‹æ‹†åˆ†åˆ†é…åˆ°å„æ˜ç»†ï¼š
        *   å¯¹æ¯æ¡ BillItemï¼š
            *   åˆ†é…é‡‘é¢ = OffsetAmt \* (BillItem.LocalAmount / Bill.Amount)
3.  å°†è¿™äº›åˆ†é…é‡‘é¢æ˜ å°„åˆ° `T_CaseReceipt`ï¼š
    *   å¯¹ (CaseID, FeeCode, YearNo, FeeType) ç»„åˆï¼š
        *   è‹¥å·²å­˜åœ¨ T\_CaseReceipt è®°å½•ï¼š
            *   `ReceivedAmt += åˆ†é…é‡‘é¢`
            *   å¦‚ `ReceivableAmt` å°šæœªå†™å…¥ï¼Œå¯è§† BILL ä¸­çš„æ€»åº”æ”¶é‡‘é¢å†™å…¥ï¼›
            *   `IsArrears = (ReceivedAmt < ReceivableAmt)`
        *   è‹¥å°šä¸å­˜åœ¨è®°å½•ï¼š
            *   æ–°å»º `T_CaseReceipt`ï¼š
                *   `CaseID`, `FeeCode`, `FeeName`, `YearNo`, `FeeType`
                *   `ReceivableAmt` = BillItem.LocalAmountï¼ˆæˆ–åˆå¹¶æ‰€æœ‰å†å²è´¦å•é‡‘é¢ï¼‰
                *   `ReceivedAmt` = åˆ†é…é‡‘é¢
                *   `ReceiptDate` = Payment.PayDate
                *   `IsArrears` æŒ‰ä¸Šå¼åˆ¤æ–­
                *   `IsCommissionable` = æ ¹æ® FeeType=SERVICE ä¸€èˆ¬è®¾ trueï¼›å®˜è´¹éƒ¨åˆ†è§†ææˆè§„åˆ™è€Œå®š
4.  å¯¹å®˜æ–¹/æœåŠ¡è´¹çš„æ”¶æ¬¾æƒ…å†µä¸€è§ˆï¼ˆæ¨¡å—å›› 5.11ï¼‰å³å¯å‡†ç¡®å±•ç¤ºï¼š
    *   å®˜è´¹ï¼šç”± T\_GovPaymentï¼ˆå®˜æ–¹å®ç¼´ï¼‰
    *   å®¢æˆ·æ”¶æ¬¾ï¼šç”± T\_CaseReceiptï¼ˆæŒ‰è´¹é¡¹/YearNo ç»†åŒ–ï¼‰

**ç»“æœ**

*   è´¢åŠ¡ä»è´¦å•è§†è§’çœ‹åˆ°åº”æ”¶è´¦æ¬¾æŒ‰ç…§ä»˜æ¬¾è¢«å†²é”€ï¼›
*   æ³•åŠ¡/ç®¡ç†ä»æ¡ˆä»¶è§†è§’çœ‹åˆ°æœ¬æ¡ˆç”³è¯·è´¹ç›¸å…³æ”¶æ¬¾æƒ…å†µï¼›
*   ææˆæ¨¡å—å¯åŸºäºæœåŠ¡è´¹æ”¶æ¬¾æ¯”ä¾‹è®¡ç®— WaitPay çš„ PaidRatioã€‚

***

## 10.10 Phase A8ï¼šä¸€æ¬¡ææˆè®¡ç®—ä¸å¯ç»“ç®—ï¼ˆT\_Commissionï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Financeï¼ˆç»“ç®—æ—¶ï¼‰

**ç›®æ ‡**

*   åœ¨æ–°æ¡ˆç”³è¯·é˜¶æ®µï¼ŒåŸºäºæœåŠ¡è´¹éƒ¨åˆ†ç”Ÿæˆ/æ›´æ–°ä»£ç†äººçš„ææˆè®°å½•ï¼ˆä¸€æ¬¡ææˆï¼‰ï¼Œåç»­åœ¨å¯ç»“ç®—æ—¶çº³å…¥æ‰¹æ¬¡ã€‚

### 10.10.1 è§¦å‘ï¼šç”³è¯·è´¹è´¦å•ç”Ÿæˆæ—¶

å½“åœ¨ Phase A6 ç”Ÿæˆ `T_Bill` æ—¶ï¼Œå¯¹å…¶ä¸­ FeeType=SERVICE çš„æ˜ç»†è¿›è¡Œææˆè®¡ç®—ã€‚

**æ­¥éª¤**

1.  ä»å½“å‰ `T_Bill` çš„ `T_BillItem` ä¸­ç­›é€‰ `FeeType=SERVICE` ä¸” `CaseID` ä¸ä¸ºç©ºï¼›
2.  æŒ‰ CaseID åˆ†ç»„è®¡ç®—æœåŠ¡è´¹æ€»é¢ ServiceSum(case)ï¼š
    *   `ServiceSum(case) = Î£ LocalAmount (FeeType=SERVICE)`
3.  å¯¹æ¯ä¸ª case è°ƒç”¨ææˆç”Ÿæˆé€»è¾‘ï¼š

```text
GenerateOrUpdateCommissionForCase(caseId, serviceSum, billId)
```

### 10.10.2 åŒ¹é…ææˆè§„åˆ™ï¼ˆT\_CommissionRuleï¼‰

å¯¹å½“å‰ CaseIDï¼š

*   åœ¨ `T_CommissionRule` ä¸­æŒ‰ CaseType=NORMALï¼ŒFlowDirã€PatentCategoryã€ClientGroup ç­‰æ¡ä»¶åŒ¹é…è§„åˆ™ï¼›
*   é€‰ä¸­åŒ¹é…è§„åˆ™ï¼ˆå¦‚ Stage1Rate=0.3, Stage2Rate=0.2, BaseMode=BY\_SERVICE\_FEEï¼‰ã€‚

### 10.10.3 è®¡ç®— BaseFee & S1/S2 é‡‘é¢

**åœ¨æ¨¡å¼ Aï¼ˆç´¯åŠ ï¼‰ä¸‹ï¼š**

*   è‹¥è¯¥ CaseID + AgentID å°šæ—  `T_Commission`ï¼Œæ–°å»ºä¸€æ¡ï¼š
    *   è®¡ç®— BaseFee = ServiceSumï¼ˆæˆ– +æ—¢æœ‰ BaseFee è¦†ç›–è§„åˆ™ï¼‰ï¼›
    *   `S1_Rate = Rule.Stage1Rate`ï¼Œ`S1_Amt = BaseFee * S1_Rate`
    *   `S2_Rate = Rule.Stage2Rate`ï¼Œ`S2_Amt = BaseFee * S2_Rate`
    *   `WaitPay` æŒ‰è§„åˆ™ï¼ˆå¦‚å¯¹æ™®é€šæ–°æ¡ˆ S1 å¯ WaitPay=falseï¼ŒS2 WaitPay=trueï¼›æˆ–éƒ½ trueï¼‰
    *   `ForceSettle=false`ï¼ˆå¯æ‰‹å·¥è®¾ç½®ï¼‰
*   è‹¥å·²æœ‰ä¸€æ¡ `T_Commission` è®°å½•ï¼ˆç´¯åŠ æ¨¡å¼ï¼‰ï¼š
    *   `BaseFee_new = BaseFee_old + ServiceSum`
    *   é‡ç®— `S1_Amt/S2_Amt` æˆ–åœ¨ä¸šåŠ¡ä¸­æŒ‡å®šåªåœ¨åˆæ¬¡åˆ›å»ºæ—¶è®¡ç®—ä¸€æ¬¡ã€‚

**å¤šä»£ç†äººåˆ†æ‘Š**

*   åŸºäº Case.PrimaryAgent/SecondAgent å’Œè®¾å®šçš„æ¯”ä¾‹ï¼ˆå¦‚ 70/30ï¼‰ï¼š
    *   å¯¹æ¯ä¸ª Agent å»ºç«‹æˆ–æ›´æ–°ä¸€æ¡ T\_Commissionï¼ŒBaseFee ä¸ºåˆ†æ‘Šåçš„å€¼ï¼ŒS1/S2 ä¹Ÿç›¸åº”åˆ†æ‘Šã€‚

### 10.10.4 å¯ç»“ç®—åˆ¤æ–­ï¼ˆè¿™é‡Œåªå…ˆç‚¹åˆ°ï¼‰

*   S1 å¯ç»“ç®—æ¡ä»¶ï¼ˆç¤ºä¾‹ï¼‰ï¼š
    *   Case.Status å·²è¾¾åˆ°â€œå—ç†/è¿›å…¥å®å®¡â€æˆ–ç‰¹å®šé˜¶æ®µï¼›
    *   è‹¥ WaitPay=trueï¼Œåˆ™ `PaidRatio >= æŸé˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.5ï¼‰`ï¼›
    *   è‹¥ ForceSettle=trueï¼Œåˆ™å¿½ç•¥ PaidRatio æ¡ä»¶ã€‚
*   S2 å¯ç»“ç®—æ¡ä»¶ï¼ˆç¤ºä¾‹ï¼‰ï¼š
    *   Case.Status å·²è¾¾åˆ°â€œæˆæƒ/ç»“æ¡ˆâ€ç­‰ç»ˆå±€çŠ¶æ€ï¼›
    *   è‹¥ WaitPay=trueï¼Œåˆ™ `PaidRatio >= æŸé«˜é˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.9 æˆ– 1.0ï¼‰`ï¼›
    *   ForceSettle=true æ—¶å¯æå‰ã€‚

> ææˆç»“ç®—çš„å…·ä½“è¿‡ç¨‹ï¼ˆæ‰¹æ¬¡/æŠ¥è¡¨ï¼‰å·²ç»åœ¨æ¨¡å—å…­è¯¦ç»†å±•å¼€ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤ã€‚

***

## 10.11 åœºæ™¯ A â€“ æ€»ç»“ï¼šè¡¨/å­—æ®µå˜æ›´ä¸€è§ˆ

ä¸ºäº†ä¾¿äºä½ åšâ€œæ£€æŸ¥è¡¨â€ï¼Œè¿™é‡Œå¿«é€Ÿç½—åˆ—ä¸€ä¸‹åœºæ™¯ Aï¼Œæ¯ä¸ªé˜¶æ®µæ¶‰åŠçš„ä¸»è¦è¡¨å’Œå­—æ®µï¼ˆåªåˆ—å…³é”®å­—æ®µï¼Œè¯¦ç»†å®šä¹‰è§å‰é¢æ¨¡å—ï¼‰ï¼š

| Phase             | è¡¨                                               | å…³é”®å­—æ®µå˜æ›´                                                                                       |
| ----------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------- |
| A1 æ–°æ¡ˆç«‹æ¡ˆ           | T\_Case                                         | æ–°å¢ä¸€æ¡ï¼šCaseType=NORMAL, Status=NOT\_FILED, RecvDate, ApplicantKind/FeeReduction/IsFeeMonitor ç­‰ |
|                   | T\_CaseApplicant                                | æ’å…¥å¤šè¡Œï¼šApplicantID, SequenceNo, IsPrimary                                                      |
|                   | T\_CaseInventor                                 | æ’å…¥å¤šè¡Œå‘æ˜äºº                                                                                      |
|                   | T\_Priority                                     | å¦‚æœ‰ä¼˜å…ˆæƒï¼Œæ’å…¥å¹¶è®¾ç½® Case.PrioDate æœ€å°å€¼                                                                |
| A2 æ¡ˆä»¶é€’äº¤           | T\_Case                                         | Status: NOT\_FILEDâ†’WAITING\_RECEIPT, HasExamRequestï¼ˆè§† ApplyExamNowï¼‰                          |
|                   | T\_Taskï¼ˆå¯é€‰ï¼‰                                     | å¯èƒ½å¼€å§‹åˆ›å»º APPLY\_FEE\_LIMIT ä»»åŠ¡ï¼ˆåŸºäºé€’äº¤äº‹ä»¶ï¼‰                                                          |
|                   | T\_Document/T\_DocAttachmentï¼ˆå¯é€‰ï¼‰                | è‹¥ç”Ÿæˆé€’äº¤æ¸…å•æ–‡æ¡£                                                                                    |
| A3 ç”³è¯·è´¹æ—¶é™ä»»åŠ¡        | T\_TaskTemplate                                 | å­˜åœ¨æ¨¡æ¿ APPLY\_FEE\_LIMIT                                                                       |
|                   | T\_Task                                         | å¯¹ CaseID å†™å…¥ä¸€æ¡ç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼ˆBaseDate, Deadline, InnerDeadline, Remind\* ç­‰ï¼‰ï¼ŒStatus=OPEN              |
|                   | T\_TaskLog                                      | Action=CREATE                                                                                |
| A4 ç”³è¯·è´¹è‰å•          | T\_FeeRate                                      | æŸ¥ Group=APPLY çš„è´¹ç‡è®°å½•                                                                          |
|                   | T\_FeeDraft                                     | æ–°å»º Type=APPLY\_FEE è‰å•ï¼ŒTotalGov/Service/Misc/Amt                                              |
|                   | T\_FeeItem                                      | å¯¹æ¯é¡¹è´¹ç”¨ç”Ÿæˆæ˜ç»†ï¼Œè®¡ç®— UnitPrice/Amount/LocalAmountï¼Œæ ‡è®° IsAuto/IsReduced ç­‰                              |
| A5 å®˜è´¹æ¸…å• & ç¼´è´¹      | T\_PayList                                      | æ–°å»º Type=APPLY æ¸…å•ï¼ŒPlannedPayDate/TotalAmt/Status ç­‰                                            |
|                   | T\_GovPayment                                   | ä¸ºæ¯ä¸ªå®˜è´¹ FeeItem åˆ›å»ºæ˜ç»†ï¼Œç™»è®° PlannedAmt/PlannedPayDate                                              |
|                   | T\_PayList/T\_GovPayment                        | ç¼´è´¹åæ›´æ–° ActualPayDate, PaidAmt, PaidDate, InvoiceNo/VoucherNo, Status=PAID                     |
| A6 å®¢æˆ·è´¦å•           | T\_Bill                                         | æ–°å»º Direction=AR è´¦å•ï¼ŒBillDate/DueDate/Currency/Amount/Balance/Status=UNSETTLED                 |
|                   | T\_BillItem                                     | ä»è‰å•å¤åˆ¶ GOV/SERVICE/MISC æ˜ç»†ï¼ŒCaseID/DraftID/FeeItemID å¯¹åº”ä¸Šæ¸¸                                      |
| A7 æ”¶æ¬¾ & å†²é”€ & ä¸ªæ¡ˆæ”¶æ¬¾ | T\_Payment                                      | è®°å½•å®¢æˆ·ä»˜æ¬¾ï¼šClientID/PayDate/Currency/Amount                                                      |
|                   | T\_PaymentLine                                  | RawAmount/AllocatedAmt/BalanceAmt                                                            |
|                   | T\_Offset                                       | å¯¹æ¯ä¸ªè¢«å†²é”€è´¦å•å†™å…¥ Offset è®°å½•ï¼Œå¹¶æ›´æ–° Bill.Balance/Status & PaymentLine.AllocatedAmt/BalanceAmt           |
|                   | T\_CaseReceipt                                  | æŒ‰è´¦å•æ˜ç»†æ‹†åˆ† OffsetAmtï¼Œé€æ¡ˆé€è´¹ç”¨è®°å½• ReceivableAmt/ReceivedAmt/IsArrears/InvoiceNo ç­‰                    |
| A8 ä¸€æ¬¡ææˆ           | T\_CommissionRule                               | å®šä¹‰ CaseType=NORMAL çš„ææˆè§„åˆ™ï¼ˆStage1Rate/Stage2Rate/BaseModeï¼‰                                     |
|                   | T\_Commission                                   | å¯¹ Case+Agent ç”Ÿæˆ/ç´¯åŠ  BaseFee/S1/S2 ç­‰å­—æ®µï¼ŒWaitPay/ForceSettle æ ‡è®°                                  |
|                   | T\_CommissionSettlement/T\_CommissionSettleLine | åœ¨åç»­ç»“ç®—é˜¶æ®µä½¿ç”¨ï¼ˆåœºæ™¯ A ä¸­åªåˆ°â€œå¯ç»“ç®—â€çš„å…¥å£ï¼‰                                                                  |

***

âœ… åœºæ™¯ Aï¼ˆæ–°æ¡ˆç”³è¯·å…¨æµç¨‹ï¼‰çš„æ—¶é—´çº¿ + æ•°æ®æµè¯´æ˜å·²ç»å®Œæ•´å†™å…¥ï¼š

*   æ¯ä¸€æ­¥æ“ä½œ
*   å‚ä¸æ¨¡å—ä¸è¡¨
*   å­—æ®µçº§æ›´æ–°
*   ä¸æ—¶é™/è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆçš„è”åŠ¨

## 11. Part II â€“ E2E åœºæ™¯ Bï¼šå®¡æŸ¥æ„è§ / è¡¥æ­£ï¼ˆOAï¼‰å…¨æµç¨‹ â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯æè¿°ä¸€ä¸ªå…¸å‹çš„ â€œ**æ”¶åˆ°å®˜æ–¹ OA / è¡¥æ­£é€šçŸ¥ â†’ ç”Ÿæˆç­”å¤æ—¶é™ â†’ ä»£ç†äººæäº¤ç­”å¤ â†’ ä»»åŠ¡æ ¸é”€ â†’ OA è´¹ç”¨è‰å• â†’ OA è´¦å• â†’ å®¢æˆ·ä»˜æ¬¾ â†’ ææˆ**â€ çš„å…¨è¿‡ç¨‹ã€‚\
> ç›®æ ‡æ˜¯æŠŠæ¨¡å—äºŒ/ä¸‰/å››/äº”/å…­ä¸­å…³äº OA ç›¸å…³çš„æ‰€æœ‰å­—æ®µå’Œé€»è¾‘ä¸²èµ·æ¥ï¼Œåšåˆ°**å­—æ®µçº§ + æ—¶é—´çº¿çº§**æ— é—æ¼ã€‚

***

## 11.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> ä¸€ä¸ªå·²ç»è¿›å…¥å®å®¡é˜¶æ®µçš„æ¡ˆä»¶ï¼Œåœ¨æŸä¸ªæ—¶é—´æ”¶åˆ°å®˜æ–¹çš„å®¡æŸ¥æ„è§ï¼ˆOAï¼‰æˆ–è¡¥æ­£é€šçŸ¥ã€‚æµç¨‹å›¢é˜Ÿç™»è®°è¿™ä»½æ¥æ–‡ï¼Œç³»ç»Ÿè‡ªåŠ¨ä¸ºä»£ç†äººç”Ÿæˆ â€œOA ç­”å¤æ—¶é™ä»»åŠ¡â€ã€‚ä»£ç†äººæ ¹æ® OA å‡†å¤‡ç­”å¤æ„è§ï¼Œæœ€ç»ˆæäº¤ç­”å¤æ–‡ä¹¦ï¼Œç³»ç»Ÿç™»è®°è¿™ä»½å»æ–‡ï¼Œå¹¶è‡ªåŠ¨å°†å¯¹åº”çš„ OA ç­”å¤ä»»åŠ¡æ ‡è®°ä¸ºå·²å®Œæˆã€‚\
> åŒæ—¶ï¼Œæ ¹æ®æ¨¡æ¿é…ç½®ï¼Œç³»ç»Ÿä¸ºè¯¥æ¬¡ OA äº§ç”Ÿç›¸åº”çš„è´¹ç”¨è‰å•ï¼ˆæœåŠ¡è´¹ + å¯èƒ½å­˜åœ¨çš„å®˜æ–¹ç­”å¤è´¹ï¼‰ï¼Œè´¢åŠ¡å†ä»è‰å•ç”Ÿæˆ OA è´¦å•ï¼Œå®¢æˆ·ä»˜æ¬¾åç™»è®°æ”¶æ¬¾å¹¶å†²é”€è´¦å•ï¼Œæœ€åå°† OA æœåŠ¡è´¹éƒ¨åˆ†ç´¯åŠ æˆ–å•ç‹¬è®°å½•åˆ°ä»£ç†äººçš„ææˆè®°å½•ä¸­ã€‚

**æ¶‰åŠä¸»è¦æ¨¡å—ä¸è¡¨**

*   **æ¨¡å—ä¸€ â€“ æ¡ˆå·ç»´æŠ¤**
    *   `T_Case`ï¼ˆçŠ¶æ€ï¼šSUB\_EXAM / OA1 / OA2 ç­‰ï¼‰
*   **æ¨¡å—äºŒ â€“ ä¸­é—´æ–‡ä»¶ä¸å¾€æ¥ç®¡ç†**
    *   `T_DocTemplate`ï¼šOA\_NOTICEï¼ˆå®˜æ–¹æ¥æ–‡ï¼‰ã€OA\_REPLYï¼ˆå®˜æ–¹å»æ–‡ï¼‰
    *   `T_Document`ï¼šè®°å½• OA é€šçŸ¥ã€OA ç­”å¤
    *   `T_DocAttachment`ï¼šå­˜å‚¨ OA é€šçŸ¥ä¹¦æ‰«æä»¶ã€ç­”å¤ä»¶ Word/PDF
*   **æ¨¡å—ä¸‰ â€“ æ—¶é™ç®¡ç†**
    *   `T_TaskTemplate`ï¼šOA\_REPLY\_LIMIT
    *   `T_Task`ï¼šå…·ä½“çš„ OA ç­”å¤æ—¶é™ä»»åŠ¡
    *   `T_TaskLog`ï¼šè®°å½•ä»»åŠ¡åˆ›å»º/æ ¸é”€ç­‰æ“ä½œ
*   **æ¨¡å—å›› â€“ è´¹ç”¨ç®¡ç†**
    *   `T_FeeRate`ï¼šä¸ OA/ä¸­é—´è´¹ç›¸å…³çš„æ ‡å‡†è´¹ç‡
    *   `T_FeeDraft`ï¼šType=OA\_FEE æˆ– INTERMEDIATE\_FEE
    *   `T_FeeItem`ï¼šOA æœåŠ¡è´¹ä¸å¯èƒ½å­˜åœ¨çš„å®˜æ–¹ç­”å¤è´¹æ˜ç»†
    *   `T_PayList/T_GovPayment`ï¼šå¦‚è¯¥ OA æœ‰å®˜æ–¹è´¹ç”¨æ—¶ä½¿ç”¨
    *   `T_CaseReceipt`ï¼šè®°å½• OA ç›¸å…³æ”¶æ¬¾
*   **æ¨¡å—äº” â€“ è´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦**
    *   `T_Bill/T_BillItem`ï¼šOA è´¹ç”¨è´¦å•
    *   `T_Payment/T_PaymentLine`ï¼šå®¢æˆ·ä»˜æ¬¾
    *   `T_Offset`ï¼šä»˜æ¬¾å¯¹è´¦å•çš„å†²é”€è®°å½•
*   **æ¨¡å—å…­ â€“ ä»£ç†äººé…¬é‡‘**
    *   `T_CommissionRule`ï¼šå®šä¹‰ OA é˜¶æ®µçš„ææˆè§„åˆ™ï¼ˆå±äº CaseType=NORMAL çš„ä¸€éƒ¨åˆ†ï¼‰
    *   `T_Commission`ï¼šè®°å½• OA æœåŠ¡è´¹å¯¹åº”çš„ææˆåŸºæ•°å’Œé‡‘é¢
    *   åç»­ç»“ç®—æ‰¹æ¬¡åœ¨åœºæ™¯ A/G0/E ä¸­ç»Ÿä¸€å¤„ç†ï¼Œè¿™é‡Œåªåˆ°è®°å½•/å¯ç»“ç®—å…¥å£

***

## 11.2 Phase B0ï¼šå‰ç½®çŠ¶æ€ â€“ æ¡ˆå·å·²è¿›å…¥å®å®¡é˜¶æ®µ

**è§’è‰²**

*   Agent
*   Formalities

**æè¿°**

åœ¨æ”¶åˆ° OA ä¹‹å‰ï¼Œæ¡ˆä»¶é€šå¸¸å¤„äºâ€œå®å®¡ä¸­â€çŠ¶æ€ï¼Œå¯èƒ½å·²ç»ç»å†äº†æ–°æ¡ˆç”³è¯·ã€é€’äº¤å’Œå—é€šç­‰æµç¨‹ï¼ˆå¯¹åº”åœºæ™¯ Aï¼‰ã€‚

**å…³é”®æ¡ä»¶**

*   `T_Case`ï¼š
    *   CaseType=NORMAL æˆ– PCT\_NATIONAL
    *   PatentCategory å·²ç¡®å®šï¼ˆå‘æ˜/æ–°å‹/å¤–è§‚ï¼‰
    *   Status å¤„äº â€œ SUB\_EXAM / PUBLISHED / å®å®¡ä¸­æŸçŠ¶æ€â€ï¼š
        *   ä¾‹å¦‚ `Status = SUB_EXAM` æˆ– `Status = PRELIM_PASS`ï¼Œå°šæœªåˆ° GRANTED/REJECTED ç­‰ç»ˆæ€
    *   ç›¸å…³çš„ç”³è¯·è´¹å·²å¤„ç†å®Œæ¯•ï¼ˆåœºæ™¯ Aï¼‰ï¼Œä¸è¦æ±‚ä»£ç è”åŠ¨ï¼Œåªæ˜¯ä¸šåŠ¡å‰æ

**æŠ€æœ¯ä¸Šæ— å†™æ“ä½œ**ï¼Œä» FPMS è§†è§’çœ‹ï¼Œè¿™åªæ˜¯é€‰æ‹©ä¸€æ¡å·²æœ‰çš„ CaseID ä½œä¸ºæœ¬åœºæ™¯èµ·ç‚¹ã€‚

***

## 11.3 Phase B1ï¼šç™»è®° OA æ¥æ–‡ï¼ˆå®˜æ–¹é€šçŸ¥ â€“ OFFICIAL\_INï¼‰

**è§’è‰²**

*   Formalities

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­ç™»è®°å®˜æ–¹å‘å‡ºçš„ OA/è¡¥æ­£é€šçŸ¥ä¸­é—´æ–‡ä»¶ï¼Œæ›´æ–°æ¡ˆä»¶çŠ¶æ€ä¸º OA é˜¶æ®µã€‚

### 11.3.1 æ¨¡æ¿é…ç½® â€“ `T_DocTemplate` (OA\_NOTICE)

åœ¨æ¨¡å—äºŒä¸­é¢„å…ˆå­˜åœ¨å¦‚ä¸‹æ¨¡æ¿ï¼ˆç¤ºä¾‹ï¼‰ï¼š

*   `TemplateCode = "OA_NOTICE"`
*   `DocType = OFFICIAL_IN`
*   `Name = "å®¡æŸ¥æ„è§é€šçŸ¥" / "è¡¥æ­£é€šçŸ¥"`
*   `NeedNotifyAgent = true`
*   `CaseTypeFilter`ï¼šå¯ä¸ºç©ºï¼Œæˆ–æŒ‡å®š NORMAL/PCT\_NATIONAL ç­‰
*   `StatusEffect = "OA1"` æˆ–ç±»ä¼¼çš„ OA é˜¶æ®µçŠ¶æ€å€¼
*   `StatusRestore = NULL`ï¼ˆç”± OA\_REPLY å†³å®šï¼‰
*   `DeadlineTemplateCode = "OA_REPLY_LIMIT"` â€“ ç”¨äºç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡
*   `FeeDraftType`ï¼šå¯é€‰ `OA_FEE` æˆ– `INTERMEDIATE_FEE`ï¼ˆå¦‚æœå¸Œæœ›åœ¨â€œæ”¶åˆ°é€šçŸ¥æ—¶â€å°±ç”Ÿæˆ OA è´¹ç”¨è‰å•ï¼‰ï¼›
*   `InputFieldList`ï¼šå¦‚éœ€è¦è®°å½•å®˜æ–¹æŒ‡å®šçš„ç­”å¤ç»é™æ—¥æœŸï¼Œå¯ä»¥æ·»åŠ  `["OfficialDueDate"]` ç­‰å­—æ®µï¼›
*   `PlainTemplateID_CN/EN`ï¼šè‹¥éœ€æ‰“å° OA é€šçŸ¥çš„å†å‘å‡½ï¼Œåˆ™å¯é…ç½®å¯¹åº”æ¨¡æ¿ã€‚

### 11.3.2 æ“ä½œæ­¥éª¤ï¼ˆUI â€“ ä¸­é—´æ–‡ä»¶å‘å¯¼ Step1/2ï¼‰

1.  åœ¨â€œä¸­é—´æ–‡ä»¶å½•å…¥å‘å¯¼â€ Step1ï¼š
    *   åœ¨æ¡ˆä»¶è¾“å…¥åŒºè¾“å…¥ CaseNo æˆ– AppNo â†’ è§£æå‡º `CaseID`ï¼›
    *   é€‰æ‹© `DocType = OFFICIAL_IN`ï¼›
    *   é€‰æ‹©æ¨¡æ¿ `TemplateCode = OA_NOTICE`ï¼›
    *   å¡«å†™ `DispatchDate` = å®˜æ–¹ OA é€šçŸ¥ä¹¦çš„æ—¥æœŸã€‚
2.  ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œè¿›å…¥ Step2ï¼š
    *   ç³»ç»Ÿä¸ºé€‰å®šçš„ Case åˆ›å»ºä¸€æ¡è‰æ¡ˆè®°å½•ï¼š
        *   CaseID=è¯¥æ¡ˆ
        *   DocType=OFFICIAL\_IN
        *   TemplateCode=OA\_NOTICE
        *   DocName=â€œå®¡æŸ¥æ„è§é€šçŸ¥â€æˆ–æ¨¡æ¿å
        *   NotifyAgent=trueï¼ˆç”±æ¨¡æ¿é»˜è®¤ï¼‰
        *   NeedReply=trueï¼ˆå› ä¸ºæ¨¡æ¿æœ‰ DeadlineTemplateCodeï¼‰
3.  åœ¨ Step2 ç¼–è¾‘åŒºåŸŸï¼Œå½•å…¥è¯¥ OA é€šçŸ¥çš„è¯¦ç»†ä¿¡æ¯ï¼š
    *   `DocName`ï¼šå¯ä¿ç•™é»˜è®¤æˆ–åŠ å…¥æ‰¹æ¬¡ä¿¡æ¯ï¼ˆå¦‚ä¸€é€š/äºŒé€šï¼‰
    *   `DispatchDate`ï¼šå®˜æ–¹å‘æ–‡æ—¥ï¼ˆä¸å¯ç©ºï¼‰
    *   `IncomingRegNo`ï¼šæ”¶ä»¶æŒ‚å·å·ï¼ˆå¦‚æœ‰ï¼‰
    *   `ForwardDate`ï¼šå¦‚æœå·²ç»å°†é€šçŸ¥è½¬å¯„å®¢æˆ·ï¼Œå¯å¡«è½¬å¯„æ—¥æœŸ
    *   åœ¨â€œçŠ¶æ€ä¿¡æ¯å½•å…¥åŒºâ€ï¼ˆæ ¹æ® InputFieldListï¼‰ï¼Œå¦‚æ¨¡æ¿è¦æ±‚å½•å…¥å®˜æ–¹æ˜ç¡®çš„ç­”å¤ç»é™æ—¥ï¼š
        *   `ExtraData.OfficialDueDate` = OA é€šçŸ¥ä¹¦ä¸­æ˜ç¡®çš„ç­”å¤æˆªæ­¢æ—¥æœŸ
4.  å®Œæˆ Step2 æ ¡éªŒï¼š
    *   DocName éç©ºï¼ˆV-DOC-01ï¼‰
    *   DispatchDate åˆæ³•ï¼ˆV-DOC-02ï¼‰
    *   OfficialDueDate å¦‚æœæ˜¯å¿…å¡«ï¼ˆå–å†³äºè§„åˆ™ï¼‰ï¼Œåˆ™ä¸å¯ç©º

### 11.3.3 å†™å…¥æ•°æ®åº“ï¼ˆæœ€ç»ˆå®Œæˆå‘å¯¼æ—¶ï¼‰

åœ¨å‘å¯¼æœ€ç»ˆâ€œå®Œæˆâ€æ—¶ï¼ˆç»“åˆ Step3/4/5ï¼‰ï¼š

**æ’å…¥ `T_Document`**

*   CaseID, DocType=OFFICIAL\_IN, TemplateCode=OA\_NOTICE
*   DocName, DispatchDate, IncomingRegNo, ForwardDate, InputDate=å½“å‰æ—¶é—´
*   NeedReply=true, NotifyAgent=true
*   ExtraData ä¸­åŒ…å« `OfficialDueDate`ï¼ˆè‹¥å½•å…¥ï¼‰
*   StatusEffect="OA1"ï¼ˆè¡¨ç¤ºåˆ° OA ç¬¬ä¸€è½®é˜¶æ®µï¼‰
*   å†™å…¥å®¡è®¡å­—æ®µ

**æ›´æ–° `T_Case.Status`**

*   å°† `T_Case.Status` ä»æ­¤å‰çŠ¶æ€ï¼ˆå¦‚ SUB\_EXAMï¼‰å˜æ›´ä¸º `StatusEffect="OA1"`ï¼ˆæˆ–æŒ‡å®šæšä¸¾ï¼‰ï¼Œè¡¨ç¤ºè¿›å…¥ OA é˜¶æ®µã€‚

**ç»“æœ**

*   æ¡ˆå·ä¸Šå‡ºç°ä¸€æ¡ OA é€šçŸ¥ä¸­é—´æ–‡ä»¶ï¼›
*   æ¡ˆä»¶çŠ¶æ€æ›´æ–°ä¸º OA1ï¼›
*   ä¸‹ä¸€æ­¥ï¼ˆB2ï¼‰æ ¹æ® DeadlineTemplateCode ç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡ã€‚

***

## 11.4 Phase B2ï¼šç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡ï¼ˆT\_Task: OA\_REPLY\_LIMITï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   ä¸ºæ¯æ¡ OA é€šçŸ¥ç”Ÿæˆä¸€æ¡â€œå¿…é¡»åœ¨æŸæ—¥ä¹‹å‰æäº¤ OA ç­”å¤â€çš„æ—¶é™ä»»åŠ¡ã€‚

### 11.4.1 æ—¶é™æ¨¡æ¿ `T_TaskTemplate` (OA\_REPLY\_LIMIT)

åœ¨æ—¶é™æ¨¡å—é…ç½®ä¸­ï¼š

*   `Code = "OA_REPLY_LIMIT"`
*   `Name = "å®¡æŸ¥æ„è§ç­”å¤æ—¶é™"`
*   `DeadlineBase`ï¼š
    *   é€šå¸¸ = DISPATCH\_DATEï¼ˆè‡ªå®˜æ–¹å‘æ–‡æ—¥èµ·ï¼‰
    *   æˆ– CASE\_EVENT/ CUSTOM + ç»“åˆ OfficialDueDateï¼ˆå¦‚ OA é€šçŸ¥æ˜ç¡®ç»™å‡ºæ—¥æœŸï¼‰
*   `AddMonths`ï¼šå¦‚ 4ï¼ˆä» DispatchDate + 4 ä¸ªæœˆï¼‰
*   `InnerOffsetDays`ï¼šå¦‚ 10 -> å†…éƒ¨é™ = Deadline - 10 å¤©
*   `RemindBase`ï¼šDEADLINE
*   `R1_OffsetDays`ï¼šå¦‚ 30ï¼ˆæå‰30å¤©æé†’ï¼‰
*   `R2_OffsetDays`ï¼šå¦‚ 15
*   `R3_OffsetDays`ï¼šå¦‚ 5
*   `DailyRemind`ï¼šå¯æ ¹æ®å¾‹æ‰€ç­–ç•¥å†³å®šæ˜¯å¦ä½¿ç”¨
*   `DefaultWorkerRole`ï¼šAGENTï¼ˆæ´¾ç»™ä¸»åŠä»£ç†äººï¼‰
*   `DefaultSupervisorID`ï¼šéƒ¨é—¨è´Ÿè´£äºº/åˆä¼™äºº

### 11.4.2 ä»»åŠ¡åˆ›å»ºé€»è¾‘ï¼ˆåŠ¨æ€ï¼‰

å½“åœ¨ Phase B1 å®Œæˆ OA\_NOTICE çš„å†™å…¥æ—¶ï¼š

1.  ç³»ç»Ÿå– `DeadlineTemplateCode="OA_REPLY_LIMIT"`ï¼›
2.  é€šè¿‡ `T_TaskTemplate` å–å¾—è¯¥æ¨¡æ¿ï¼›
3.  ç¡®å®š BaseDate å’Œ Deadlineï¼š
    *   è‹¥ `ExtraData.OfficialDueDate` å­˜åœ¨ä¸”ä¸šåŠ¡è§„å®šç›´æ¥ä½¿ç”¨è¯¥æ—¥æœŸä½œä¸ºç»é™ï¼š
        *   `Deadline = OfficialDueDate`
        *   `BaseDate = DispatchDate`ï¼ˆä»…ç”¨äºè®¡ç®—å†…éƒ¨é™ä¸æé†’ï¼‰
    *   å¦åˆ™ï¼š
        *   `BaseDate` = `DispatchDate`ï¼ˆæˆ–æ ¹æ®æ¨¡æ¿ DeadlineBase å†³å®šï¼‰ï¼›
        *   `Deadline = BaseDate + AddYears/Months/Days`ï¼ˆå¦‚ +4 ä¸ªæœˆï¼‰
4.  è®¡ç®—ï¼š
    *   `InnerDeadline = Deadline - InnerOffsetDays`ï¼ˆå¦‚æå‰ 10 å¤©å†…éƒ¨é™ï¼‰
    *   `Remind1/2/3` æŒ‰ RemindBase=DEADLINE ä¸å„ OffsetDays è®¡ç®—ï¼›
    *   `DailyRemindFrom` = InnerDeadline æˆ– Deadlineï¼ˆè‹¥ DailyRemind=trueï¼‰ã€‚
5.  é€‰æ‹©è´£ä»»äººï¼š
    *   WorkerID = Case.PrimaryAgentIDï¼ˆå¦‚å­˜åœ¨ï¼‰ï¼Œå¦åˆ™ DraftorID/å½“å‰ç”¨æˆ·ï¼›
    *   SupervisorID = æ¨¡æ¿ DefaultSupervisorID æˆ–ç›¸å…³è´Ÿè´£äººã€‚
6.  æ’å…¥ `T_Task`ï¼š
    *   CaseID = æœ¬æ¡ˆ

*   DocID = åˆšæ’å…¥çš„ OA é€šçŸ¥ `DocID`
*   TemplateCode = "OA\_REPLY\_LIMIT"
*   Type = "å®¡æŸ¥æ„è§ç­”å¤æ—¶é™"
*   BaseDate, Deadline, InnerDeadline, Remind1/2/3, DailyRemindFrom, DailyRemind
*   WorkerID, SupervisorID
*   Status=OPEN, DoneDate=NULL, IsWrittenOff=false
*   Remark å¯é»˜è®¤=â€œå¯¹ OA é€šçŸ¥ \[DocNo] ç­”å¤â€
    7\.  å†™å…¥ `T_TaskLog`ï¼ˆAction=CREATEï¼‰ã€‚

**ç»“æœ**

*   åœ¨â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾ä¸­ï¼Œä»£ç†äººå¯ä»¥çœ‹åˆ°ä¸€æ¡ OA ç­”å¤ä»»åŠ¡ï¼›
*   åœ¨æœªæ¥æ¥è¿‘ Deadline æ—¶ï¼Œè¯¥ä»»åŠ¡ä¼šå‡ºç°åœ¨â€œä»Šæ—¥æé†’æ¸…å•â€ã€‚

***

## 11.5 Phase B3ï¼ˆå¯é€‰ï¼‰ï¼šå†…éƒ¨ä»»åŠ¡ & å‡†å¤‡é˜¶æ®µ

> æœ¬é˜¶æ®µä¸æ˜¯å¿…é¡»ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡ä¸­ç»å¸¸å­˜åœ¨ï¼š
>
> *   ä¸º OA ç­”å¤åˆ›å»ºå†…éƒ¨ä»»åŠ¡ï¼Œå¦‚â€œOA åˆ†æä¸è®¨è®ºâ€ã€â€œç­”å¤è‰æ‹Ÿâ€ã€â€œå†…éƒ¨è¯„å®¡â€ç­‰ã€‚
> *   è¿™äº›ä»»åŠ¡ä¸ `T_Task` æ¨¡å‹ä¸€è‡´ï¼Œåªæ˜¯ `TemplateCode` ä½¿ç”¨å†…éƒ¨ä»»åŠ¡ Code è€Œé OA\_REPLY\_LIMITã€‚

**æ•°æ®æµ**

*   åœ¨æ¡ˆå·çš„â€œä»»åŠ¡â€æ ‡ç­¾ä¸­ï¼Œåˆ›å»ºå†…éƒ¨ä»»åŠ¡ `T_Task`ï¼š
    *   Type = "OA åˆ†æ" / "ç­”å¤è‰æ‹Ÿ" / "å†…éƒ¨è¯„å®¡" ç­‰
    *   BaseDate/Deadline ä¾ç…§å†…éƒ¨æ’æœŸ
    *   WorkerID åˆ†é…ç»™å…·ä½“äººå‘˜
*   é€šè¿‡æ¨¡å—ä¸‰çš„é€šç”¨è§„åˆ™å¯¹è¿™äº›å†…éƒ¨ä»»åŠ¡è¿›è¡Œæ ¸é”€ï¼Œä¸å½±å“ OA\_REPLY\_LIMIT ä»»åŠ¡æœ¬èº«ã€‚

***

## 11.6 Phase B4ï¼šä»£ç†äººå‡†å¤‡å¹¶æäº¤ OA ç­”å¤ï¼ˆOFFICIAL\_OUT â€“ OA\_REPLYï¼‰

**è§’è‰²**

*   Agent
*   Formalities

**ç›®æ ‡**

*   ç™»è®°â€œOA ç­”å¤ / è¡¥æ­£è¯´æ˜â€çš„å»æ–‡ä¸­é—´æ–‡ä»¶ï¼Œå…³è”åˆ°å¯¹åº”çš„ OA é€šçŸ¥ï¼Œå¹¶è§¦å‘ä»»åŠ¡æ ¸é”€ã€‚

### 11.6.1 æ¨¡æ¿é…ç½® â€“ `T_DocTemplate` (OA\_REPLY)

*   `TemplateCode = "OA_REPLY"`
*   `DocType = OFFICIAL_OUT`
*   `Name = "å®¡æŸ¥æ„è§ç­”å¤" / "è¡¥æ­£è¯´æ˜"`
*   `NeedNotifyAgent = false`ï¼ˆä¸€èˆ¬ä¸éœ€è¦å†é€šçŸ¥ä»£ç†äººè‡ªå·±ï¼‰
*   `CaseTypeFilter`ï¼šNORMAL/PCT\_NATIONAL ç­‰
*   `StatusEffect`ï¼šä¸€èˆ¬ä¸ºç©ºï¼ˆç­”å¤åä»å¤„äºå®å®¡çŠ¶æ€ï¼Œç”± StatusRestore åœ¨ OA\_NOTICE æˆ–å…¶å®ƒæœºåˆ¶æ§åˆ¶ï¼‰
*   `StatusRestore = "SUB_EXAM"`ï¼ˆè‹¥ç³»ç»Ÿä»¥ OA1 è¡¨ç¤ºâ€œæœ‰ OAâ€ï¼ŒSUB\_EXAM è¡¨ç¤ºâ€œå·²ç­”å¤ï¼Œå›åˆ°å®å®¡ä¸­â€ï¼‰
*   `DeadlineTemplateCode = NULL`ï¼ˆç­”å¤æœ¬èº«é€šå¸¸ä¸ç”Ÿæˆæ–°çš„æ—¶é™ï¼‰
*   `ReplyToTemplateCode = "OA_NOTICE"` â€“ è¡¨æ˜æ­¤ç±»å»æ–‡æ˜¯å¯¹ OA\_NOTICE çš„å›å¤
*   `FeeDraftType`ï¼šå¯æŒ‡å®š `OA_FEE` æˆ– `INTERMEDIATE_FEE`ï¼ˆç³»ç»Ÿå¯ä»¥é€‰æ‹©åœ¨ç­”å¤æ—¶ç”Ÿæˆ OA è´¹ç”¨è‰å•ï¼‰

### 11.6.2 æ“ä½œæ­¥éª¤ï¼ˆä¸­é—´æ–‡ä»¶å‘å¯¼ï¼‰

1.  åœ¨å‘å¯¼ Step1ï¼š
    *   è¾“å…¥ CaseNo/AppNo â†’ é€‰æ‹© CaseIDï¼›
    *   é€‰æ‹© DocType=OFFICIAL\_OUTï¼›
    *   é€‰æ‹©æ¨¡æ¿ OA\_REPLYï¼›
    *   å¡«å†™ `DispatchDate` = å®é™…å‘å®˜æ–¹æäº¤ç­”å¤çš„æ—¥æœŸï¼ˆå¦‚é‚®å¯„/ç”µå­æäº¤æ—¥ï¼‰ã€‚
2.  åœ¨ Step2ï¼š
    *   `DocName` é»˜è®¤â€œå®¡æŸ¥æ„è§ç­”å¤â€ï¼Œå¯åŠ ç‰ˆæœ¬/è½®æ¬¡ä¿¡æ¯ï¼›
    *   `NeedReply=false`ï¼ˆé€šå¸¸å®˜æ–¹ä¸ä¼šå†è¦æ±‚ç­”å¤ï¼Œå¯¹åç»­ OA åˆ™ä¼šæœ‰æ–°çš„ OA\_NOTICEï¼‰
    *   `ReplyToID`ï¼šä»æœ¬æ¡ˆæ‰€æœ‰ OFFICIAL\_IN ä¸­é€‰æ‹©åº”ç­”çš„ OA\_NOTICEï¼Œå…¶åˆ—è¡¨ç”± TemplateCode=OA\_NOTICE ç­›é€‰ï¼›
    *   `ReplyDate` = ä¸ DispatchDate ç›¸åŒæˆ–ä¸ºâ€œå®˜æ–¹ç¡®è®¤å—ç†â€çš„æ—¥æœŸï¼ˆè§†å¾‹æ‰€ä¹ æƒ¯ï¼‰ï¼›
    *   `Summary` å¯å†™â€œå¯¹å®¡æŸ¥æ„è§ xx æ¡çš„ç­”å¤æ¦‚ç•¥â€ï¼›
    *   è‹¥ Template.InputFieldList æœ‰å®šä¹‰ï¼ˆä¾‹å¦‚éœ€è®°å½•ä¿®æ”¹è¦ç‚¹ï¼‰ï¼Œåˆ™åœ¨çŠ¶æ€ä¿¡æ¯åŒºå¡«å†™å¯¹åº”å­—æ®µã€‚
3.  å®Œæˆ Step2 æ ¡éªŒï¼š
    *   DocName/DispatchDate å¿…å¡«ï¼›
    *   ReplyToID å»ºè®®å¿…å¡«ï¼ˆå¦åˆ™ä»»åŠ¡æ— æ³•è‡ªåŠ¨æ ¸é”€ï¼‰ï¼›
    *   ReplyDate å¦‚ä¸ºç©ºï¼Œå¯ç”±ç³»ç»Ÿé»˜è®¤=DispatchDateã€‚
4.  Step3/Step4ï¼š
    *   é€šå¸¸ OA\_REPLY ä¸é…ç½® DeadlineTemplateCodeï¼ˆä¸ç”Ÿæˆæ–°çš„æ—¶é™ï¼‰
    *   FeeDraftType å¯æœ‰ä¹Ÿå¯æ— ï¼š
        *   è‹¥é…ç½®ï¼Œåˆ™åœ¨ Step4 è‡ªåŠ¨ç”Ÿæˆ OA è´¹ç”¨è‰å•ï¼›
        *   è‹¥ä¸é…ç½®ï¼Œåˆ™ OA è´¹ç”¨ç”±åç»­æ‰‹å·¥æˆ–å…¶ä»–æµç¨‹å¤„ç†ã€‚
5.  Step5ï¼š
    *   ä¸Šä¼ /ç”Ÿæˆ OA ç­”å¤ Word/PDF æ–‡æœ¬ä½œä¸ºé™„ä»¶ï¼ˆT\_DocAttachmentï¼‰ã€‚
6.  ç‚¹å‡»â€œå®Œæˆâ€ â†’ å†™å…¥æ•°æ®åº“ã€‚

### 11.6.3 å†™å…¥æ•°æ®åº“ä¸æ¡ˆä»¶çŠ¶æ€å˜æ›´

**æ’å…¥ `T_Document`**

*   CaseID=æœ¬æ¡ˆ
*   DocType=OFFICIAL\_OUT
*   TemplateCode=OA\_REPLY
*   DocName/DispatchDate/ReplyDate/ReplyToID ç­‰
*   ExtraData è§†å®é™… InputFieldList å†…å®¹
*   è‹¥éœ€ï¼šå¯ä»¥å°† OA ç­”å¤ Word/PDF å­˜å…¥ T\_DocAttachment

**æ¡ˆä»¶çŠ¶æ€æ›´æ–°**

*   æ¨¡æ¿ OA\_REPLY é€šå¸¸è®¾ç½® `StatusRestore = SUB_EXAM`ï¼›
*   ç³»ç»Ÿåœ¨å†™å…¥ OA\_REPLY åæ£€æŸ¥ï¼š
    *   è‹¥ OA\_REPLY.ReplyToID æŒ‡çš„æ˜¯ OA\_NOTICEï¼›
    *   ä¸” OA\_NOTICE çš„ StatusEffect ä¹‹å‰æŠŠ Case.Status å˜ä¸º OA1ï¼›
*   åˆ™ç°åœ¨å°† Case.Status æ¢å¤ä¸º `StatusRestore="SUB_EXAM"`ï¼Œè¡¨ç¤ºï¼š
    *   å·²å‘å®˜æ–¹æäº¤ç­”å¤ï¼Œæ¡ˆä»¶å›åˆ°å®å®¡ä¸­ã€‚

***

## 11.7 Phase B5ï¼šè‡ªåŠ¨æ ¸é”€ OA ç­”å¤æ—¶é™ä»»åŠ¡ï¼ˆT\_Taskï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   åœ¨ OA ç­”å¤ä¸­é—´æ–‡ä»¶è¢«å½•å…¥æ—¶ï¼Œè‡ªåŠ¨æ‰¾åˆ°å¯¹åº”çš„ OA\_REPLY\_LIMIT ä»»åŠ¡ï¼Œå°†å…¶æ ‡è®°ä¸º DONE å¹¶è®°å½•å®Œæˆæ—¥æœŸã€‚

### 11.7.1 ä»»åŠ¡å®šä½é€»è¾‘

åœ¨ä¿å­˜ `T_Document` (OA\_REPLY) ä¹‹åï¼š

1.  é€šè¿‡ `ReplyToID` æ‰¾åˆ°è¢«å›å¤çš„ OA\_NOTICE æ–‡ä»¶ï¼š
    *   `ReplyToID = OA_NOTICE.DocID`
2.  åˆ©ç”¨ DocID å’Œ TemplateCode æŸ¥æ‰¾å¯¹åº”ä»»åŠ¡ï¼š
    ```sql
    SELECT * FROM T_Task
    WHERE CaseID = OA_NOTICE.CaseID
      AND DocID = OA_NOTICE.DocID
      AND TemplateCode = 'OA_REPLY_LIMIT'
      AND Status = 'OPEN';
    ```
    *   å¦‚æœ DocID æœªè®°å½•åœ¨ Task ä¸­ï¼ˆæŸå®ç°ä¸‹åªæŒ‰ CaseID+TemplateCode å…³è”ï¼‰ï¼Œåˆ™å¯æŒ‰ CaseID+TemplateCode æœç´¢æœ€åä¸€æ¡ OPEN ä»»åŠ¡ã€‚
3.  æ‰¾åˆ°å¯¹åº” T\_Taskï¼Œå¦‚æœªæ‰¾åˆ°ï¼Œåˆ™ä¸è¿›è¡Œè‡ªåŠ¨æ ¸é”€ï¼Œå¯åœ¨é”™è¯¯æ—¥å¿—ä¸­è®°å½•ï¼ˆæé†’ç®¡ç†å‘˜æ£€æŸ¥æ¨¡æ¿é…ç½®/æ•°æ®ä¸€è‡´æ€§ï¼‰ã€‚

### 11.7.2 ä»»åŠ¡æ›´æ–°

å¯¹æ‰¾åˆ°çš„ OA\_REPLY\_LIMIT ä»»åŠ¡ï¼š

*   å°† `Status` ä» OPEN æ”¹ä¸º DONEï¼›
*   è®¾ç½® `DoneDate = OA_REPLY.ReplyDate`ï¼ˆå¦‚ ReplyDate ç©ºåˆ™ç”¨ DispatchDateï¼‰ï¼›
*   å¯é€‰å°† `IsWrittenOff=true`ï¼ˆè¡¨ç¤ºæ­¤æ—¶é™ä»»åŠ¡å·²ç»å®Œå…¨æ ¸é”€ï¼‰ï¼›
*   è‹¥ Remind\* çš„æ—¥æœŸ >= DoneDateï¼Œå¯¹æé†’é€»è¾‘è€Œè¨€è‡ªåŠ¨ä¸å†è§¦å‘ã€‚

æ’å…¥ä¸€æ¡ `T_TaskLog`ï¼š

*   `TaskID` = å¯¹åº”ä»»åŠ¡ ID
*   `Action` = MARK\_DONE
*   `ActionBy` = å½“å‰å½•å…¥ OA\_REPLY çš„ç”¨æˆ·
*   `ActionAt` = å½“å‰æ—¶é—´
*   `OldValue` = {Status: OPEN, DoneDate: null}
*   `NewValue` = {Status: DONE, DoneDate: ReplyDate}
*   `Comment` å¯ä¸º â€œå›  OA\_REPLY DocID=xxx è‡ªåŠ¨æ ¸é”€â€ã€‚

**ç»“æœ**

*   ä»£ç†äººâ€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€åˆ—è¡¨ä¸­ï¼Œè¯¥ OA ç­”å¤ä»»åŠ¡ä»æœªå®Œæˆè½¬ä¸ºå·²å®Œæˆï¼›
*   ç™»å½•é¦–é¡µâ€œä»Šæ—¥æé†’æ¸…å•â€ä¸å†åŒ…å«è¯¥ä»»åŠ¡ï¼›
*   ç³»ç»Ÿä¸­ä»»ä½•åŸºäºä»»åŠ¡çŠ¶æ€çš„ç»Ÿè®¡ï¼ˆæœªå®Œæˆ OA ç­”å¤ä»»åŠ¡ï¼‰ä¼šè‡ªåŠ¨å‡å°‘ã€‚

***

## 11.8 Phase B6ï¼šOA è´¹ç”¨è‰å•ï¼ˆæœåŠ¡è´¹ + å¯èƒ½çš„å®˜æ–¹è´¹ï¼‰

**è§’è‰²**

*   Formalities / Finance

**ç›®æ ‡**

*   ä¸º OA é˜¶æ®µäº§ç”Ÿç›¸åº”çš„è´¹ç”¨è‰å•ï¼ˆä¸»è¦æ˜¯æœåŠ¡è´¹ï¼Œäº¦å¯èƒ½åŒ…å«å®˜æ–¹ç­”å¤è´¹ï¼‰ï¼Œä¸ºåç»­è´¦å•å’Œææˆæ‰“åŸºç¡€ã€‚

### 11.8.1 è´¹ç”¨è§¦å‘ç‚¹ï¼šOA\_NOTICE æˆ– OA\_REPLYï¼Ÿ

ä¸¤ç§å¸¸è§æ¨¡å¼ï¼š

1.  **æ¨¡å¼ 1ï¼šæ”¶åˆ° OA é€šçŸ¥ï¼ˆOA\_NOTICEï¼‰æ—¶å³ç”Ÿæˆè´¹ç”¨è‰å•**
    *   é€‚ç”¨äºâ€œå›ºå®šæ”¶ä¸€æ¬¡ OA å¤„ç†è´¹ç”¨â€çš„äº‹åŠ¡æ‰€ï¼ˆä¸è®ºæ˜¯å¦ç­”å¤æˆ–ç­”å¤ç»“æœå¦‚ä½•ï¼Œæ”¶åˆ° OA å°±æ”¶æœåŠ¡è´¹ï¼‰ã€‚
    *   åœ¨ OA\_NOTICE æ¨¡æ¿ä¸­é…ç½® `FeeDraftType = OA_FEE` æˆ– `INTERMEDIATE_FEE`ã€‚
2.  **æ¨¡å¼ 2ï¼šåœ¨æäº¤ OA ç­”å¤ï¼ˆOA\_REPLYï¼‰æ—¶ç”Ÿæˆè´¹ç”¨è‰å•**
    *   é€‚ç”¨äºâ€œå®é™…æ‰§è¡Œäº†ç­”å¤æ‰è®¡è´¹â€çš„æƒ…å†µã€‚
    *   åœ¨ OA\_REPLY æ¨¡æ¿ä¸­é…ç½® FeeDraftTypeã€‚

æˆ‘ä»¬è®¾è®¡ä¸Šæ”¯æŒä¸¤ç§æ¨¡å¼ï¼Œå®é™…ä½¿ç”¨æ—¶å¯æ ¹æ®äº‹åŠ¡æ‰€ç­–ç•¥é€‰æ‹©ä¸€æ¡ä¸ºä¸»ã€‚

### 11.8.2 ä»æ¨¡æ¿åˆ°è‰å• â€“ T\_FeeDraft/T\_FeeItem

å½“åœ¨ä¸­é—´æ–‡ä»¶å‘å¯¼ Step 4 ä¸­æ£€æµ‹åˆ° Template.FeeDraftType éç©ºæ—¶ï¼š

1.  æ ¹æ® `FeeDraftType` æŸ¥æ˜¯å¦å·²å­˜åœ¨å¯¹åº”è‰å•ï¼š
    *   `SELECT * FROM T_FeeDraft WHERE CaseID=? AND Type=FeeDraftType AND Status IN (OPEN,LOCKED...)`
    *   è‹¥è¦æ±‚â€œä¸€æ¡ˆä¸€ OA è‰å•â€ï¼Œå¯åœ¨å­˜åœ¨æ—¶ä»…è¡¥å……/æ›´æ–°ï¼›
    *   è‹¥å…è®¸å¤šæ¬¡ OA è‰å•ï¼ˆå¤šè½® OAï¼‰ï¼Œå¯æ ¹æ® OA é€šçŸ¥è½®æ¬¡/æ—¥æœŸç”Ÿæˆå¤šä¸ªè‰å•ã€‚
2.  è‹¥éœ€æ–°å»ºè‰å•ï¼š
    *   æ–°å»º `T_FeeDraft`ï¼š
    *   `CaseID` = å½“å‰ CaseID
    *   `Type` = OA\_FEE æˆ– INTERMEDIATE\_FEE
    *   `Currency` = å®¢æˆ·å¸ç§
    *   `Status = OPEN`
        3\.  å¯¹ Template.FeeItemList åˆ—å‡ºçš„é¡¹ç›®ï¼š
    *   ä¾‹å¦‚ï¼š
    *   OA æœåŠ¡è´¹ï¼ˆSERVICEï¼‰
    *   OA å®˜æ–¹ç­”å¤è´¹ï¼ˆGOVï¼‰ â€“ å¦‚æœå›½å®¶æ”¶å–

*   å¯¹æ¯é¡¹è´¹ç”¨ï¼š
    *   æ ¹æ® FeeCode åœ¨ `T_FeeRate` ä¸­æŸ¥æ‰¾è´¹ç‡åŠ CalcMode ç­‰ï¼›
    *   ç»“åˆæ¡ˆä»¶å‚æ•°è®¡ç®— UnitPrice/Amountï¼›
    *   å¯¹å®˜è´¹æŒ‰ FeeReduction å‡å…ï¼ˆå¦‚æœ AllowReduction=trueï¼‰ï¼›
    *   æ’å…¥ `T_FeeItem`ï¼š
        *   FeeCode/FeeName/FeeType/Quantity/UnitPrice/Amount/Currency/LocalAmount/IsAuto=true ç­‰ã€‚
            4\.  æ±‡æ€»æ‰€æœ‰ FeeItem è®¡ç®—è‰å•å¤´çš„ TotalService/TotalGov/TotalMisc/TotalAmtã€‚

### 11.8.3 è‰å•ç¼–è¾‘

*   Finance/Agent å¯åœ¨è‰å•ä¸­è°ƒæ•´ï¼š
    *   å¢åŠ /åˆ é™¤æ˜ç»†ï¼ˆä¾‹å¦‚é¢å¤–çš„ç¿»è¯‘è´¹ã€å·®æ—…è´¹ç­‰ï¼‰
    *   å¾®è°ƒæœåŠ¡è´¹é‡‘é¢
    *   ä¸ºæŸäº›é¡¹ç›®æ ‡è®° Remarkï¼ˆå¦‚â€œç‰¹åˆ«å¤æ‚çš„æ„è§ç­”å¤â€ï¼‰

**ç»“æœ**

*   æ¯ä¸ªéœ€è¦è®¡è´¹çš„ OA è½®æ¬¡éƒ½ä¼šæœ‰å¯¹åº”çš„ OA\_FEE è‰å•ï¼›
*   åç»­è´¦å•ç”Ÿæˆæ—¶ï¼Œä¼šå°†è¿™äº›æ˜ç»†è½¬å…¥ T\_Bill/T\_BillItem ä¸­ï¼Œå¯¹åº”â€œOA é˜¶æ®µè´¹ç”¨â€ã€‚

***

## 11.9 Phase B7ï¼šå¦‚æœ‰å®˜æ–¹ OA è´¹ â†’ å®˜è´¹æ¸…å• & ç¼´è´¹ï¼ˆå¯é€‰ï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å¯¹äºæŸäº›å›½å®¶/å±€è¦æ±‚å¯¹ OA ç­”å¤å¦ä»˜å®˜è´¹ï¼ˆä¾‹å¦‚æŸäº›â€œè¯·æ±‚å®¡æŸ¥â€æˆ–â€œç­”å¤è´¹â€ï¼‰ï¼Œéœ€è¦èµ°å’Œç”³è¯·è´¹/å¹´è´¹ç±»ä¼¼çš„å®˜è´¹æ¸…å•æµç¨‹ã€‚

### 11.9.1 ä» OA è‰å•ä¸­çš„ GOV æ˜ç»†é€‰å–

*   åœ¨ OA\_FEE è‰å•ä¸­ï¼Œè‹¥å­˜åœ¨ FeeType=GOV çš„ FeeItemï¼ˆä¾‹å¦‚å®˜æ–¹ç­”å¤è´¹ï¼‰ï¼š
    *   è¿™äº›æ¡ç›®å¯åƒç”³è¯·è´¹/å¹´è´¹ä¸€æ ·è¢«é€‰ä¸­ç»„æˆä¸€ä¸ª `T_PayList(Type=INTERMEDIATE æˆ– â€œOAâ€è‡ªå®šä¹‰æšä¸¾)`ã€‚

### 11.9.2 æ¸…å•ç”Ÿæˆæµç¨‹

ç±»ä¼¼äºç”³è¯·è´¹ï¼ˆåœºæ™¯ Aï¼‰ï¼š

1.  åœ¨â€œå®˜è´¹æ¸…å•â€ç•Œé¢ä¸­é€‰æ‹© Type=INTERMEDIATE æˆ–è‡ªå®šä¹‰ OA ç±»å‹ï¼›
2.  ç­›é€‰è‰å• Type=OA\_FEEï¼ŒFeeType=GOV çš„æ˜ç»†ï¼›
3.  å‹¾é€‰éœ€è¦åˆå¹¶çš„ GOV é¡¹ â†’ â€œç”Ÿæˆå®˜è´¹æ¸…å•â€ï¼›
4.  æ–°å»º `T_PayList` å’Œ `T_GovPayment` è®°å½•ï¼Œå¦‚ 5.6 æ‰€è¿°ï¼›
5.  å¯¼å‡ºæ¸…å•ç»™å®˜æ–¹ç³»ç»Ÿ â†’ ç¼´è´¹ â†’ ç™»è®° PaidAmt/PaidDate/InvoiceNo ç­‰ã€‚

**ç»“æœ**

*   OA å®˜æ–¹è´¹ç”¨åƒå…¶ä»–å®˜è´¹ä¸€æ ·è¢«ç³»ç»Ÿè®°å½•å’Œè¿½è¸ªï¼›
*   è´¹ç”¨æƒ…å†µæŸ¥è¯¢ä¸­æ˜¾ç¤º OA å®˜æ–¹è´¹ç¼´è´¹æƒ…å†µã€‚

***

## 11.10 Phase B8ï¼šOA è´¦å•ç”Ÿæˆ & å®¢æˆ·æ”¶æ¬¾ï¼ˆæœåŠ¡è´¹ + å®˜æ–¹è´¹ï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å°† OA è‰å•ï¼ˆæœåŠ¡è´¹ + å¯èƒ½çš„å®˜è´¹ï¼‰è½¬æ¢ä¸ºè´¦å•ï¼Œç¡®è®¤å¯¹å®¢æˆ·çš„åº”æ”¶é‡‘é¢ï¼Œå¹¶é€šè¿‡æ”¶æ¬¾/å†²é”€å®Œæˆè´¢åŠ¡é—­ç¯ã€‚

### 11.10.1 ä» OA\_FEE è‰å•ç”Ÿæˆè´¦å•

æµç¨‹å’Œåœºæ™¯ A çš„ç”³è¯·è´¹è´¦å•ç”ŸæˆåŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œé’ˆå¯¹ OA å†å¼ºè°ƒï¼š

1.  åœ¨â€œè´¹ç”¨è‰å•â€åˆ—è¡¨ï¼š
    *   è¿‡æ»¤ Type=OA\_FEE æˆ– INTERMEDIATE\_FEEï¼›
    *   è¿‡æ»¤æŸ ClientIDï¼›
2.  å‹¾é€‰ç›¸å…³è‰å• â†’ â€œç”Ÿæˆè´¦å•â€ã€‚
3.  è´¦å•å¤´ï¼š
    *   `T_Bill`ï¼š
    *   ClientID = è¯¥å®¢æˆ·
    *   Direction=AR
    *   BillDate, DueDate, Currency
    *   DiscountRateï¼šå¦‚ OA æœåŠ¡è´¹å¯æ‰“æŠ˜ï¼Œè®¾ç½®è¯¥å€¼
        4\.  è´¦å•æ˜ç»†ï¼š
    *   å°† OA è‰å•ä¸­æ‰€æœ‰ FeeItemï¼ˆGOV/SERVICE/MISCï¼‰å¤åˆ¶ä¸º BillItemï¼š
    *   CaseID = OA æ‰€å±æ¡ˆä»¶
    *   FeeCode/Name/YearNo/FeeType/Amount ç­‰
    *   è‹¥è´¦å•å¸ç§ä¸åŒäºè‰å•åŸå¸ç§ï¼Œè¦è®¡ç®—æ±‡ç‡å¹¶å¾—å‡º LocalAmount
        5\.  æ±‡æ€»å¹¶è®¾ç½®ï¼š
    *   TotalGov/TotalService/TotalMisc/Amount/Balanceã€‚

### 11.10.2 å®¢æˆ·ä»˜æ¬¾ & å†²é”€ & ä¸ªæ¡ˆæ”¶æ¬¾

åŒåœºæ™¯ A çš„ Phase A7ï¼š

*   æ”¶æ¬¾ç™»è®°ï¼šT\_Payment/T\_PaymentLineï¼›
*   å†²é”€ï¼šT\_Offset æ›´æ–° Bill.Balance/Statusï¼›
*   æŒ‰ OA è´¦å•æ˜ç»†æ‹†åˆ† Offset â†’ å†™å…¥ `T_CaseReceipt`ï¼š
    *   æ ‡è®°è¯¥æ¡ˆçš„ OA æœåŠ¡è´¹/å®˜æ–¹è´¹çš„ ReceivableAmt/ReceivedAmt/IsArrears ç­‰ã€‚

**ç»“æœ**

*   OA é˜¶æ®µè´¹ç”¨åœ¨â€œè´¦å•/æ”¶æ¬¾/ä¸ªæ¡ˆæ”¶æ¬¾â€å±‚å…¨éƒ¨è¢«è®°å½•ï¼›
*   è¿™ä¸ºææˆå’Œç®¡ç†æŠ¥è¡¨æä¾›å‡†ç¡®çš„è´¢åŠ¡æ•°æ®ã€‚

***

## 11.11 Phase B9ï¼šOA æœåŠ¡è´¹å¯¹ä»£ç†äººææˆçš„è´¡çŒ®ï¼ˆT\_Commissionï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Financeï¼ˆé—´æ¥ä½¿ç”¨ï¼‰

**ç›®æ ‡**

*   å°† OA é˜¶æ®µçš„æœåŠ¡è´¹é‡‘é¢è®¡å…¥ä»£ç†äººçš„ææˆåŸºæ•°ï¼Œç”¨äºåç»­ææˆç»“ç®—ã€‚

### 11.11.1 è§¦å‘ï¼šOA è´¦å•ç”Ÿæˆæ—¶

ä¸åœºæ™¯ A çš„ä¸€æ¬¡ææˆé€»è¾‘ç›¸åŒï¼Œåªæ˜¯â€œæœåŠ¡è´¹æ¥æºâ€æ˜¯ OA é˜¶æ®µï¼š

1.  ä» OA è´¦å• `T_Bill` çš„ `T_BillItem` ä¸­å– `FeeType=SERVICE` çš„æ˜ç»†ï¼ŒæŒ‰ CaseID èšåˆ ServiceSum\_OA(case)ã€‚
2.  è°ƒç”¨ Commission ç”Ÿæˆ/ç´¯åŠ é€»è¾‘ï¼š

```text
GenerateOrUpdateCommissionForCase(caseId, serviceSum_OA, billId)
```

### 11.11.2 è§„åˆ™åŒ¹é…

*   ä½¿ç”¨ `T_CommissionRule` ä¸­ CaseType=NORMALï¼ˆæˆ–å…¶ä»–ï¼‰çš„å¯¹åº”è§„åˆ™ï¼š
    *   å¯èƒ½ä¸“é—¨ä¸º OA é˜¶æ®µé…ç½®æ›´é«˜çš„ Stage1Rate/Stage2Rate æˆ– BaseModeï¼›
    *   ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸æ–°æ¡ˆé˜¶æ®µç›¸åŒçš„è§„åˆ™ï¼ˆå³æ‰€æœ‰æœåŠ¡è´¹éƒ½è¿›å…¥åŒä¸€ BaseFeeï¼‰ã€‚

### 11.11.3 BaseFee ç´¯åŠ  / åˆ†é˜¶æ®µç­–ç•¥

å¦‚å‰è¿°æ¨¡å¼ A / Bï¼š

*   **æ¨¡å¼ Aï¼ˆæ¨èï¼‰**ï¼š
    *   å°† OA æœåŠ¡è´¹åŠ å…¥ç°æœ‰ `T_Commission.BaseFee`ï¼ˆä¸æ–°æ¡ˆé˜¶æ®µã€åç»­æˆæƒæˆ–å¹´è´¹é˜¶æ®µå…±äº«ï¼‰ï¼Œé‡æ–°è®¡ç®— S1/S2\_Amtï¼›
*   **æ¨¡å¼ Bï¼ˆç»†åˆ†é˜¶æ®µï¼‰**ï¼š
    *   ä¸º OA é˜¶æ®µå•ç‹¬åˆ›å»ºä¸€æ¡ `T_Commission` è®°å½•ï¼ˆCommID2ï¼‰ï¼ŒRemark ä¸­è®°â€œOA é˜¶æ®µâ€ï¼Œåç»­ç»“ç®—æ—¶ä¸æ–°æ¡ˆé˜¶æ®µè®°å½•ä¸€èµ·ç»Ÿè®¡ã€‚

å¤šä»£ç†äººåˆ†æ‘Šé€»è¾‘åŒåœºæ™¯ Aï¼š

*   PrimaryAgent/SecondAgent æ ¹æ®åˆ†æ‘Šè§„åˆ™æ‹† BaseFeeã€‚

### 11.11.4 å¯ç»“ç®—æ¡ä»¶ & åç»­å¤„ç†

*   é€šå¸¸ OA é˜¶æ®µçš„æœåŠ¡è´¹ä¸ä¼šå•ç‹¬è§¦å‘å¯ç»“ç®—æ¡ä»¶ï¼Œè€Œæ˜¯ä½œä¸ºæ•´ä¸ªæ¡ˆä»¶æ€» BaseFee çš„ä¸€éƒ¨åˆ†ï¼š
    *   S1ï¼šåœ¨æ¡ˆä»¶è¾¾åˆ°æŸä¸­é—´çŠ¶æ€ï¼ˆä¾‹å¦‚â€œç¬¬ä¸€æ¬¡ OA å·²ç­”å¤ + æ¡ˆä»¶ä»å‘å‰æ¨è¿›â€ï¼‰ä¸” WaitPay æ¡ä»¶æ»¡è¶³æ—¶å¯ç»“ç®—ã€‚
*   å®Œæ•´ç»“ç®—è¿‡ç¨‹ä¸æ¨¡å—å…­ä¸­æè¿°çš„é€šç”¨æµç¨‹ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†é‡å¤ã€‚

***

## 11.12 åœºæ™¯ B â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆ

| Phase            | è¡¨                                               | å…³é”®å­—æ®µå˜æ›´                                                                                                                                                            |
| ---------------- | ----------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| B0 å‰ç½®çŠ¶æ€          | T\_Case                                         | å·²å­˜åœ¨ CaseType=NORMAL/PCT\_NATIONAL çš„æ¡ˆå·ï¼ŒStatus=SUB\_EXAM ç­‰ï¼ˆä»…ä½œä¸ºå‰æï¼Œä¸æ–°å¢è®°å½•ï¼‰                                                                                             |
| B1 OA é€šçŸ¥ç™»è®°       | T\_DocTemplate                                  | å·²å­˜åœ¨ TemplateCode=OA\_NOTICEï¼ˆé…ç½® StatusEffect/OA\_REPLY\_LIMIT/å¯èƒ½çš„ FeeDraftType ç­‰ï¼‰                                                                                  |
|                  | T\_Document                                     | æ–°å¢ OA\_NOTICE è®°å½•ï¼šCaseID/DocType=OFFICIAL\_IN/TemplateCode=OA\_NOTICE/DispatchDate/IncomingRegNo/ExtraData.OfficialDueDate ç­‰                                       |
|                  | T\_Case                                         | Status ä» SUB\_EXAM â†’ OA1ï¼ˆæˆ–çº¦å®šçš„ OA é˜¶æ®µçŠ¶æ€ï¼‰                                                                                                                            |
| B2 ç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡  | T\_TaskTemplate                                 | å·²é…ç½® OA\_REPLY\_LIMIT æ¨¡æ¿ï¼ˆDeadlineBase/AddMonths/InnerOffsetDays/Remind\* ç­‰ï¼‰                                                                                        |
|                  | T\_Task                                         | æ–°å¢ä¸€æ¡ä»»åŠ¡ï¼šCaseID, DocID=OA\_NOTICE.DocID, TemplateCode=OA\_REPLY\_LIMIT, Type="å®¡æŸ¥æ„è§ç­”å¤æ—¶é™", BaseDate/Deadline/InnerDeadline/Remind\*ï¼ŒWorkerID/SupervisorIDï¼ŒStatus=OPEN |
|                  | T\_TaskLog                                      | Action=CREATEï¼Œå¯¹ä¸Šè¿°ä»»åŠ¡åšè®°å½•                                                                                                                                            |
| B3 å†…éƒ¨ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰      | T\_Task                                         | å¯é¢å¤–æ’å…¥è‹¥å¹²å†…éƒ¨ä»»åŠ¡ï¼ˆType="OA åˆ†æ"/"ç­”å¤è‰æ‹Ÿ"/...ï¼‰ï¼Œä¸å½±å“ OA\_REPLY\_LIMIT ä»»åŠ¡                                                                                                      |
| B4 OA ç­”å¤ç™»è®°       | T\_DocTemplate                                  | å·²å­˜åœ¨ TemplateCode=OA\_REPLYï¼ˆReplyToTemplateCode=OA\_NOTICEï¼ŒStatusRestore=SUB\_EXAMï¼ŒFeeDraftTypeå¯é€‰ï¼‰                                                                 |
|                  | T\_Document                                     | æ–°å¢ OA\_REPLYï¼šCaseID, DocType=OFFICIAL\_OUT, TemplateCode=OA\_REPLY, DispatchDate, ReplyDate, ReplyToID=OA\_NOTICE.DocID, Summary ç­‰                                |
|                  | T\_DocAttachment                                | ä¸Šä¼ /ç”Ÿæˆ OA ç­”å¤æ–‡ä¹¦ Word/PDF ç­‰æ–‡ä»¶                                                                                                                                        |
|                  | T\_Case                                         | å¦‚éœ€æ¢å¤çŠ¶æ€ï¼ŒStatus ä» OA1 â†’ SUB\_EXAMï¼ˆçŠ¶æ€æ¢å¤é€»è¾‘åŸºäº StatusRestoreï¼‰                                                                                                           |
| B5 æ ¸é”€ OA ç­”å¤æ—¶é™ä»»åŠ¡  | T\_Task                                         | æ‰¾åˆ° TemplateCode=OA\_REPLY\_LIMIT ä¸”ä¸ OA\_NOTICE å…³è”çš„ä»»åŠ¡ï¼ŒStatus: OPENâ†’DONE, DoneDate=ReplyDate                                                                        |
|                  | T\_TaskLog                                      | Action=MARK\_DONEï¼Œè®°å½•æ ¸é”€åŠ¨ä½œ                                                                                                                                          |
| B6 OA è´¹ç”¨è‰å•       | T\_FeeDraft                                     | æ–°å¢æˆ–æ›´æ–° Type=OA\_FEE/INTERMEDIATE\_FEE è‰å•ï¼ŒCaseID=æœ¬æ¡ˆï¼ŒCurrency=å®¢æˆ·å¸ç§ï¼ŒTotalGov/Service/Misc/Amt ç”±æ˜ç»†è®¡ç®—                                                                   |
|                  | T\_FeeItem                                      | æŒ‰æ¨¡æ¿ FeeItemList å’Œ T\_FeeRate ç”ŸæˆæœåŠ¡è´¹/å®˜æ–¹è´¹æ˜ç»†ï¼›åº”ç”¨è´¹å‡è§„åˆ™ç­‰                                                                                                                  |
| B7 å®˜æ–¹ OA è´¹æ¸…å•ï¼ˆå¯é€‰ï¼‰ | T\_PayList                                      | è‹¥å­˜åœ¨ OA å®˜æ–¹è´¹ï¼Œç”Ÿæˆ Type=INTERMEDIATE æˆ– OA ç±»å‹çš„å®˜è´¹æ¸…å•                                                                                                                      |
|                  | T\_GovPayment                                   | ä¸º OA è‰å•ä¸­ GOV é¡¹ç”Ÿæˆå®˜è´¹ç¼´è´¹æ˜ç»†ï¼›ç¼´è´¹åç™»è®° PaidAmt/PaidDate/InvoiceNo ç­‰                                                                                                         |
| B8 OA è´¦å• & æ”¶æ¬¾    | T\_Bill                                         | ä» OA\_FEE è‰å•ç”Ÿæˆ OA è´¦å•ï¼šDirection=ARï¼Œæ±‡æ€»æœåŠ¡è´¹/å®˜è´¹/æ‚è´¹ï¼ŒBalance=Amountï¼ŒStatus=UNSETTLED                                                                                     |
|                  | T\_BillItem                                     | å¯¹ OA\_FEE ä¸­çš„ FeeItem ç”Ÿæˆæ˜ç»†ï¼ŒCaseID/DraftID/FeeItemID å»ºç«‹è¿½è¸ª                                                                                                           |
|                  | T\_Payment                                      | è®°å½•å®¢æˆ·ä»˜æ¬¾                                                                                                                                                            |
|                  | T\_PaymentLine                                  | RawAmount/AllocatedAmt/BalanceAmt                                                                                                                                 |
|                  | T\_Offset                                       | å¯¹ OA è´¦å•è¿›è¡Œå†²é”€ï¼Œæ›´æ–° Bill.Balance/Status & PaymentLine.BalanceAmt                                                                                                       |
|                  | T\_CaseReceipt                                  | æŒ‰ BillItem æ‹†åˆ† OffsetAmtï¼Œå†™å…¥ OA ç›¸å…³æ”¶è´¹ï¼ˆæœåŠ¡è´¹/å®˜è´¹ï¼‰çš„ ReceivableAmt/ReceivedAmt/IsArrears ç­‰                                                                                 |
| B9 OA ææˆ         | T\_CommissionRule                               | CaseType=NORMAL çš„è§„åˆ™ä¸­å¯åŒ…å« OA é˜¶æ®µæœåŠ¡è´¹æ˜¯å¦è®¡å…¥ Stage1/Stage2                                                                                                                |
|                  | T\_Commission                                   | å¯¹è¯¥æ¡ˆåŠå…¶ä»£ç†äººï¼ŒBaseFee å¢åŠ  ServiceSum\_OAï¼ˆç´¯åŠ æ¨¡å¼ï¼‰ï¼Œæˆ–æ–°å¢ä¸€æ¡ Commission è®°å½•ï¼ˆé˜¶æ®µæ¨¡å¼ï¼‰ï¼Œæ›´æ–° S1/S2\_Amtç­‰                                                                                 |
|                  | T\_CommissionSettlement/T\_CommissionSettleLine | åç»­å¯ç»“ç®—æ—¶çº³å…¥æ‰¹æ¬¡ï¼ˆåœ¨ææˆæ¨¡å—ä¸­ç»Ÿä¸€å¤„ç†ï¼‰                                                                                                                                            |

***

âœ… ä»¥ä¸Šå°±æ˜¯ **E2E åœºæ™¯ Bï¼šå®¡æŸ¥æ„è§ / è¡¥æ­£ï¼ˆOAï¼‰** çš„å®Œæ•´æ—¶é—´çº¿ + æ•°æ®æµè¯´æ˜ï¼Œå·²ç»æŠŠä¹‹å‰æ‰€æœ‰å…³äº OA çš„ç»†èŠ‚ï¼ˆæ¨¡æ¿å®šä¹‰ã€æ—¶é™ä»»åŠ¡ã€æ¥æ–‡/å»æ–‡ã€è´¹ç”¨è‰å•ã€å®˜è´¹æ¸…å•ã€è´¦å•/æ”¶æ¬¾ã€ææˆç´¯åŠ ï¼‰å…¨éƒ¨ä¸²åˆ—åœ¨ä¸€ä¸ªç« èŠ‚ä¸­ï¼Œæ²¡æœ‰å‹ç¼©ã€‚

## 12. Part II â€“ E2E åœºæ™¯ Cï¼šPCT å›½é™… â†’ å›½å®¶é˜¶æ®µ â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯æè¿°ä¸€ä¸ªå®Œæ•´çš„ **PCT å›½é™…ç”³è¯·** åœ¨ FPMS ä¸­å¦‚ä½•è¢«å»ºæ¨¡ä¸ç®¡ç†ï¼Œå¹¶åœ¨ **å›½å®¶é˜¶æ®µè¿›å…¥æ—¶** æ´¾ç”Ÿå‡ºå¤šä¸ªå›½å®¶é˜¶æ®µæ¡ˆå·ï¼Œç„¶åæ¯ä¸ªå›½å®¶é˜¶æ®µæ¡ˆå†æŒ‰ç…§â€œæ–°æ¡ˆ â†’ ç”³è¯·è´¹ â†’ OA â†’ æˆæƒ â†’ å¹´è´¹â€ç­‰è·¯å¾„å‘å±•ã€‚\
> é‡ç‚¹åœ¨äºï¼š
>
> *   PCT\_INTL ä¸»æ¡ˆä¸Šå¦‚ä½•è®°å½•å›½é™…é˜¶æ®µä¿¡æ¯ï¼›
> *   å¦‚ä½•ç»´æŠ¤â€œå›½å®¶é˜¶æ®µè®¡åˆ’â€è¡¨ï¼ˆT\_PCTNationalPlanï¼‰ï¼›
> *   å¦‚ä½•åˆ©ç”¨æ—¶é™æ¨¡æ¿ç”Ÿæˆâ€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡â€ï¼›
> *   å½“å®¢æˆ·å†³å®šè¿›å…¥æŸå›½æ—¶ï¼Œå¦‚ä½•åˆ›å»º PCT\_NATIONAL å­æ¡ˆï¼›
> *   PCT\_NATIONAL å­æ¡ˆå¦‚ä½•æ¥å…¥åœºæ™¯ A/B/G0/D/E/F/G/H è¿™æ¡é€šç”¨æµæ°´çº¿ä¸­ã€‚

***

## 12.1 åœºæ™¯æ¦‚è¿°ä¸æ¨¡å—å…³ç³»

**ä¸šåŠ¡å™è¿°**

> å®¢æˆ·å…ˆæäº¤ä¸€ä»¶ PCT å›½é™…ç”³è¯·ï¼Œåœ¨å›½é™…é˜¶æ®µä¼šç»å†å—ç†ã€æ£€ç´¢ã€ä¹¦é¢æ„è§ã€å›½é™…åˆå®¡ç­‰æ­¥éª¤ã€‚äº‹åŠ¡æ‰€éœ€è¦åœ¨ç³»ç»Ÿä¸­å®Œæ•´è®°å½•è¿™äº›ä¿¡æ¯ã€‚\
> åŒæ—¶ï¼Œéœ€è¦æ ¹æ® PCT è§„åˆ™å’Œå®¢æˆ·æ„å‘ï¼Œä¸ºè¯¥å›½é™…æ¡ˆè§„åˆ’ä¸€ä¸ªâ€œå›½å®¶é˜¶æ®µè¿›å…¥è®¡åˆ’â€ï¼Œä¾‹å¦‚è®¡åˆ’åœ¨ USã€EPã€CNã€JPã€CA ç­‰å›½å®¶/åœ°åŒºè¿›å…¥å›½å®¶é˜¶æ®µã€‚ç³»ç»Ÿä¸ºæ¯ä¸ªç›®æ ‡å›½å®¶è®¡ç®—å¯¹åº”çš„â€œè¿›å…¥æ—¶é™â€ï¼Œå¹¶ç”Ÿæˆæ—¶é™ä»»åŠ¡æé†’ã€‚\
> éšç€æ—¶é—´æ¨è¿›ï¼Œå®¢æˆ·åœ¨æŸä¸ªæ—¶åˆ»å°±å“ªäº›å›½å®¶ç¡®è®¤â€œè¿›å…¥â€æˆ–â€œæ”¾å¼ƒâ€ï¼Œäº‹åŠ¡æ‰€éœ€è¦å°†â€œç¡®è®¤è¿›å…¥â€çš„å›½å®¶ä» PCT\_INTL ä¸»æ¡ˆä¸­â€œåˆ†è£‚â€å‡ºå¤šä¸ª PCT\_NATIONAL å­æ¡ˆï¼Œæ¯ä¸ªå›½å®¶é˜¶æ®µæ¡ˆå·ä»æ­¤æŒ‰ç…§æ™®é€šæ–°æ¡ˆæµç¨‹ï¼ˆåœºæ™¯ A/B/G0/D/E ç­‰ï¼‰ç»§ç»­å‘å±•ã€‚

**æ¶‰åŠæ¨¡å—å’Œè¡¨**

*   **æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤**
    *   `T_Case` â€“ PCT\_INTL ä¸»æ¡ˆ + PCT\_NATIONAL å­æ¡ˆ
    *   PCT æ‰©å±•å­—æ®µï¼šRO, ISA, IPEA, IntlAppNo/Date, IntlPubNo/Date, IntlPubLang, NeedIPER, IPERDate
*   **æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶**
    *   å›½é™…é˜¶æ®µæ¥æ–‡ï¼šå—ç†é€šçŸ¥ã€æ£€ç´¢æŠ¥å‘Šã€ä¹¦é¢æ„è§ã€IPER ç­‰ï¼ˆT\_Documentï¼‰
*   **æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†**
    *   `T_TaskTemplate(PCT_NATIONAL_ENTRY_LIMIT)` â€“ å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™æ¨¡æ¿
    *   `T_Task` â€“ é’ˆå¯¹æ¯ä¸ªç›®æ ‡å›½çš„â€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡â€
*   **æ¨¡å—å››/äº”/å…­/ä¸ƒ**
    *   åœ¨ **å›½å®¶é˜¶æ®µæ¡ˆ** ä¸Šï¼Œå…¨éƒ¨èµ°ä¸æ™®é€šæ–°æ¡ˆç›¸åŒçš„è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆç­‰æµæ°´çº¿ï¼ˆåœºæ™¯ A/B/G0/D/E/H/F/Gï¼‰ã€‚

**æ–°å¢çš„æ¡¥æ¥è¡¨**

*   `T_PCTNationalPlan` â€“ PCT å›½é™…æ¡ˆçš„â€œå›½å®¶é˜¶æ®µè®¡åˆ’è¡¨â€ï¼Œç”¨äºä» PCT\_INTL åˆ° PCT\_NATIONAL çš„æ¡¥æ¥ã€‚

***

## 12.2 Phase C0ï¼šPCT å›½é™…æ¡ˆç«‹æ¡ˆï¼ˆCaseType=PCT\_INTLï¼‰

**è§’è‰²**

*   Formalities / Agent

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­å»ºç«‹ PCT å›½é™…æ¡ˆçš„ `T_Case` è®°å½•ï¼Œå¹¶å¡«å……å›½é™…é˜¶æ®µç›¸å…³å­—æ®µï¼Œä¸ºåç»­å›½å®¶é˜¶æ®µè®¡åˆ’æä¾›åŸºç¡€æ•°æ®ã€‚

### 12.2.1 æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰

1.  åœ¨â€œæ¡ˆå·ç»´æŠ¤ â†’ æ–°å»ºæ¡ˆå·â€é¡µé¢ï¼š
    *   `CaseType = PCT_INTL`
    *   `PatentCategory`ï¼ˆå‘æ˜/æ–°å‹/å¤–è§‚ï¼‰
    *   `FlowDir`ï¼ˆä¸€èˆ¬ä¸º OUT\_OUT æˆ–æŒ‰äº‹åŠ¡æ‰€è§’è‰²é€‰æ‹©ï¼‰
    *   å…¶ä»–åŸºç¡€ä¿¡æ¯ï¼šCaseNo, ClientID, Title\_CN/EN, RecvDate ç­‰
2.  åˆ‡æ¢è‡³â€œPCT ä¿¡æ¯â€æ ‡ç­¾é¡µï¼Œå¡«å†™å›½é™…é˜¶æ®µä¿¡æ¯ï¼š
    *   `RO` â€“ å›½é™…å—ç†å±€
    *   `ISA` â€“ å›½é™…æ£€ç´¢å•ä½
    *   `IPEA` â€“ å›½é™…åˆå®¡å•ä½ï¼ˆå¦‚é€‚ç”¨ï¼‰
    *   `IntlAppNo`/`IntlAppDate` â€“ å›½é™…ç”³è¯·å·/æ—¥ï¼ˆå¦‚å½“å‰å·²çŸ¥ï¼‰
    *   `IntlPubNo`/`IntlPubDate` â€“ å›½é™…å…¬å¼€ä¿¡æ¯ï¼ˆå¯ç¨åé€šè¿‡ä¸­é—´æ–‡ä»¶æ›´æ–°ï¼‰
    *   `NeedIPER` / `IPERDate` â€“ æ˜¯å¦è¯·æ±‚å›½é™…åˆå®¡åŠåˆå®¡å®Œæˆæ—¥
3.  â€œç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒâ€éƒ¨åˆ†ä¸æ™®é€šæ–°æ¡ˆä¸€è‡´ï¼ˆå‚è§æ¨¡å—ä¸€ï¼‰ï¼›
4.  ä¿å­˜ã€‚

### 12.2.2 æ•°æ®åº“å†™å…¥ï¼ˆT\_Caseï¼‰

**æ’å…¥ `T_Case`**

*   CaseType=PCT\_INTL
*   PCT æ‰©å±•å­—æ®µï¼ˆRO/ISA/IPEA/IntlAppNo/IntlAppDate/â€¦ï¼‰æ ¹æ®è¾“å…¥ä¿å­˜ï¼›
*   Status å¯åˆå§‹åŒ–ä¸ºä¸€ç§â€œPCT\_INITâ€ï¼ˆæˆ– SUB\_EXAM ç±»ä¼¼ï¼‰ï¼Œç”±å®æ–½æ—¶å®šä¹‰ï¼›
*   å…¶å®ƒå­—æ®µåŒæ™®é€šæ–°æ¡ˆï¼ˆCaseNo/ClientID/Applicant/Inventor/RecvDate ç­‰ï¼‰ã€‚

**è¯´æ˜**

*   åç»­å›½é™…é˜¶æ®µæ¥æ–‡ï¼ˆå—ç†é€šçŸ¥/æ£€ç´¢æŠ¥å‘Š/ä¹¦é¢æ„è§/IPER ç­‰ï¼‰å°†ä½œä¸º `T_Document` è®°å½•æŒ‚åœ¨æ­¤ CaseID ä¸‹ï¼›
*   PCT\_INTL ä¸»æ¡ˆåæ¥ä¸ä¼šå˜æˆå›½å®¶é˜¶æ®µæ¡ˆï¼Œå®ƒåªä½œä¸ºâ€œæ¯æ¡ˆâ€ã€‚

***

## 12.3 Phase C1ï¼šPCT å›½é™…é˜¶æ®µæ¥æ–‡ï¼ˆå—ç†é€šçŸ¥/æ£€ç´¢æŠ¥å‘Š/ä¹¦é¢æ„è§/IPERï¼‰

**è§’è‰²**

*   Formalities / Agent

**ç›®æ ‡**

*   é€šè¿‡ `T_Document` è®°å½• PCT å›½é™…é˜¶æ®µå…³é”®é‡Œç¨‹ç¢‘ï¼ˆå—ç†é€šçŸ¥ã€æ£€ç´¢æŠ¥å‘Šã€ä¹¦é¢æ„è§ã€å›½é™…åˆå®¡æŠ¥å‘Šç­‰ï¼‰ã€‚

### 12.3.1 ç¤ºä¾‹ï¼šå—ç†é€šçŸ¥ï¼ˆROï¼‰

**æ¨¡æ¿é…ç½®**

*   `TemplateCode = "PCT_RO_NOTICE"`
*   `DocType = OFFICIAL_IN`
*   `Name = "PCT å—ç†é€šçŸ¥"`
*   `InputFieldList = ["IntlAppNo", "IntlAppDate"]`ï¼ˆç¤ºä¾‹ï¼‰
*   å…¶ä»–å­—æ®µï¼ˆStatusEffect/DeadlineTemplateCode ç­‰ï¼‰å¯è§†ä¸šåŠ¡å¦è¡Œé…ç½®ã€‚

**æ“ä½œæ­¥éª¤**

1.  åœ¨ä¸­é—´æ–‡ä»¶å‘å¯¼ Step1ï¼š
    *   è¾“å…¥ PCT\_INTL çš„ CaseNo/AppNo â†’ é€‰å®š CaseIDï¼›
    *   DocType=OFFICIAL\_INï¼›
    *   Template=PCT\_RO\_NOTICEï¼›
    *   DispatchDate=å—ç†é€šçŸ¥å‘æ–‡æ—¥ã€‚
2.  Step2 ä¸­å½•å…¥ï¼š
    *   DocName=â€œå—ç†é€šçŸ¥â€
    *   IncomingRegNo ç­‰æŒ‚å·å·ä¿¡æ¯ï¼›
    *   çŠ¶æ€ä¿¡æ¯å½•å…¥åŒºï¼š
        *   IntlAppNo, IntlAppDateï¼ˆå¦‚æœæ­¤å‰æœªå½•ï¼‰ã€‚
3.  å®Œæˆå‘å¯¼æ—¶å†™å…¥ï¼š
    *   `T_Document`ï¼šè®°å½• RO é€šçŸ¥
    *   æ›´æ–° `T_Case.IntlAppNo/IntlAppDate`

**å…¶ä»–å›½é™…é˜¶æ®µæ–‡ä¹¦**

*   ISRï¼ˆPCT æ£€ç´¢æŠ¥å‘Šï¼‰ã€WO/ISAï¼ˆä¹¦é¢æ„è§ï¼‰ã€IPERï¼ˆå›½é™…åˆå®¡æŠ¥å‘Šï¼‰ç­‰ï¼Œå‡é€šè¿‡ç±»ä¼¼æ–¹å¼å½•å…¥ï¼š
    *   ä½¿ç”¨å„è‡ªæ¨¡æ¿ï¼ˆPCT\_ISR\_NOTICE, PCT\_WO\_NOTICE, PCT\_IPER\_NOTICE ç­‰ï¼‰ï¼›
    *   åœ¨ ExtraData ä¸­è®°å½•å¯¹åº”å…³é”®å­—æ®µï¼›
    *   å¯ä»¥è§†éœ€è¦æ›´æ–° `T_Case.Status` ä¸æŸäº›è¾…åŠ©å­—æ®µã€‚

> è¿™äº›æ­¥éª¤å¯¹æœ¬åœºæ™¯ C çš„ä¸»è¦å½±å“æ˜¯ï¼š**ç»™åé¢çš„å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™è®¡ç®—æä¾›åŸºç¡€ï¼ˆä¼˜å…ˆæƒæ—¥/å›½é™…å…¬å¼€æ—¥/å›½é™…ç”³è¯·æ—¥ç­‰ï¼‰**ã€‚

***

## 12.4 Phase C2ï¼šå›½å®¶é˜¶æ®µè®¡åˆ’è¡¨ï¼ˆT\_PCTNationalPlanï¼‰åˆå§‹åŒ–

**è§’è‰²**

*   Formalities / Agent

**ç›®æ ‡**

*   ä¸ºæ¯ä¸ª PCT å›½é™…æ¡ˆå»ºç«‹ä¸€ä¸ªâ€œå›½å®¶é˜¶æ®µè¿›å…¥è®¡åˆ’è¡¨â€ï¼Œåˆ—å‡ºæ‰€æœ‰æ½œåœ¨ç›®æ ‡å›½ï¼Œè®°å½•æ¯ä¸ªç›®æ ‡å›½çš„è¿›å…¥æ—¶é™å’Œå½“å‰å®¢æˆ·æŒ‡ç¤ºï¼ˆENTER/ABANDON ç­‰ï¼‰ã€‚

### 12.4.1 æ•°æ®æ¨¡å‹ï¼š`T_PCTNationalPlan`ï¼ˆæˆ‘ä»¬åœ¨è®¾è®¡ä¸­å¼•å…¥çš„æ–°è¡¨ï¼‰

**å­—æ®µ**

*   `PlanID` PK
*   `IntlCaseID` FK â†’ `T_Case`ï¼ˆCaseType=PCT\_INTLï¼‰
*   `CountryCode` FK â†’ T\_Country â€“ ç›®æ ‡å›½å®¶/åœ°åŒº
*   `FlowDir` enum â€“ å›½å®¶é˜¶æ®µçš„ç”³è¯·æ–¹å‘ï¼ˆä¾‹å¦‚ OUT\_INï¼šå›½å¤–â†’æœ¬å›½ï¼›IN\_OUTï¼šæœ¬å›½â†’ä»–å›½ï¼‰
*   `Status` enumï¼š
    *   PLANNED â€“ è®¡åˆ’ä¸­ï¼ˆåˆå§‹ï¼‰
    *   DECIDED\_ENTER â€“ å®¢æˆ·å·²å†³å®šè¿›å…¥è¯¥å›½ï¼Œä½†å°šæœªåˆ›å»ºå›½å®¶æ¡ˆ
    *   DECIDED\_ABANDON â€“ å®¢æˆ·å·²å†³å®šæ”¾å¼ƒè¯¥å›½
    *   CASE\_CREATED â€“ å·²ä¸ºè¯¥å›½åˆ›å»º PCT\_NATIONAL æ¡ˆå·
    *   ENTERED\_FILED â€“ å·²å®Œæˆå›½å®¶é˜¶æ®µé€’äº¤ï¼ˆå¯é€‰æ›´ç»†çŠ¶æ€ï¼‰
*   `EntryDeadline` date â€“ å›½å®¶é˜¶æ®µè¿›å…¥ç»é™ï¼ˆåŸºäº PCT è§„åˆ™/ä¼˜å…ˆæƒæ—¥/å…¬å¼€æ—¥è®¡ç®—ï¼‰
*   `InnerDeadline` date â€“ å†…éƒ¨æå‰å¤„ç†æ—¥æœŸï¼ˆä¾‹å¦‚ EntryDeadline å‰ 1\~2 ä¸ªæœˆï¼‰
*   `ClientInstruction` enumï¼šNONE / ENTER / ABANDON
*   `NationalCaseID` FK â†’ T\_Caseï¼ˆCaseType=PCT\_NATIONALï¼‰ â€“ è‹¥å·²åˆ›å»ºå›½å®¶æ¡ˆï¼Œæ­¤å­—æ®µæŒ‡å‘å­æ¡ˆ
*   `Remark` nvarchar

**è¯´æ˜**

*   `EntryDeadline` çš„è®¡ç®—æ–¹å¼å¯ä»¥ç”±åå°æœåŠ¡æ ¹æ®å„å›½è§„åˆ™å’Œ `T_Case.PrioDate/IntlPubDate/IntlAppDate` ç­‰å†³å®šï¼›
*   `InnerDeadline` ä¸æ—¶é™æ¨¡æ¿ PCT\_NATIONAL\_ENTRY\_LIMIT å…³ç³»ç´§å¯†ï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰ã€‚

***

### 12.4.2 åˆå§‹åŒ–å›½å®¶é˜¶æ®µè®¡åˆ’

**æ“ä½œ**

1.  åœ¨ PCT\_INTL æ¡ˆè¯¦æƒ…é¡µä¸­ï¼Œè¿›å…¥â€œå›½å®¶é˜¶æ®µè®¡åˆ’â€æ ‡ç­¾ï¼›
2.  æ˜¾ç¤ºä¸€ä¸ªâ€œç›®æ ‡å›½åˆ—è¡¨â€ç¼–è¾‘ç•Œé¢ï¼š
    *   å¯ç”±ç”¨æˆ·æ‰‹å·¥é€‰æ‹©å¸¸è§ç›®æ ‡å›½ï¼ˆUS, EP, CN, JP, KR, CA ç­‰ï¼‰ï¼›
    *   æˆ–ä»æŸå¼•ç”¨ï¼ˆå¦‚å®¢æˆ·æä¾›çš„ç›®æ ‡å›½æ¸…å•ï¼‰å¯¼å…¥ï¼›
3.  å¯¹æ¯ä¸ªé€‰æ‹©çš„ CountryCode æ’å…¥ä¸€æ¡ `T_PCTNationalPlan`ï¼š
    *   IntlCaseID = å½“å‰ PCT\_INTL CaseID
    *   CountryCode = ç›®æ ‡å›½
    *   FlowDir = æ ¹æ®ä¸šåŠ¡é…ç½®ï¼ˆä¾‹å¦‚ï¼šIN\_OUT/OUT\_IN ç­‰ï¼‰
    *   Status=PLANNED
    *   ClientInstruction=NONE
4.  è®¡ç®—å›½å®¶é˜¶æ®µè¿›å…¥ç»é™ `EntryDeadline`ï¼š
    *   ä¸€èˆ¬ä¾æ®ï¼šä¼˜å…ˆæƒæ—¥ + 30 æˆ– 31 ä¸ªæœˆï¼ˆå„å›½ä¸åŒï¼‰ï¼Œä¹Ÿå¯èƒ½åŸºäºå…¶ä»–è§„åˆ™ï¼›
    *   ç³»ç»Ÿå¯ä»¥æœ‰ä¸€ä¸ªâ€œå›½å®¶é˜¶æ®µè§„åˆ™è¡¨â€ï¼ˆä¸åœ¨æ­¤è¯¦ç»†å±•å¼€ï¼‰ç”¨äºè®¡ç®—è¯¥æ—¥æœŸï¼›
5.  è®¡ç®— `InnerDeadline = EntryDeadline - X`ï¼ˆä¾‹å¦‚æå‰ 60 å¤©æˆ– 90 å¤©ï¼‰ï¼Œä¹Ÿå¯åŸºäºæ¨¡æ¿è®¾ç½®ã€‚

### 12.4.3 ä¸ T\_Taskï¼ˆPCT\_NATIONAL\_ENTRY\_LIMITï¼‰çš„å…³è”

åœ¨å›½å®¶é˜¶æ®µè®¡åˆ’åˆå§‹åŒ–åï¼Œç³»ç»Ÿå¯è‡ªåŠ¨ä¸ºæ¯è¡Œè®¡åˆ’ç”Ÿæˆä¸€æ¡æ—¶é™ä»»åŠ¡ï¼ˆè¯¦è§ä¸‹ä¸€èŠ‚ï¼‰ï¼š

*   CaseID=IntlCaseIDï¼ˆä»æŒ‚åœ¨ PCT\_INTL ä¸»æ¡ˆä¸‹ï¼‰
*   ä»»åŠ¡ç±»å‹ = â€œXX å›½å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™â€

***

## 12.5 Phase C3ï¼šå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡ç”Ÿæˆï¼ˆT\_Task: PCT\_NATIONAL\_ENTRY\_LIMITï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   ä¸º PCT å›½é™…æ¡ˆçš„æ¯ä¸ªç›®æ ‡å›½ç”Ÿæˆä¸€ä¸ªâ€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡â€ï¼Œæé†’åœ¨ EntryDeadline å‰åŠæ—¶ä¸å®¢æˆ·ç¡®è®¤å¹¶æ‰§è¡Œå›½å®¶é˜¶æ®µè¿›å…¥æ“ä½œã€‚

### 12.5.1 æ—¶é™æ¨¡æ¿ï¼š`T_TaskTemplate(PCT_NATIONAL_ENTRY_LIMIT)`

ç¤ºä¾‹é…ç½®ï¼š

*   `Code = "PCT_NATIONAL_ENTRY_LIMIT"`
*   `Name = "PCT å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™"`
*   `DeadlineBase = CUSTOM`ï¼ˆç”±è°ƒç”¨æ–¹ç›´æ¥ä¼ å…¥ EntryDeadlineï¼‰
*   `AddYears/AddMonths/AddDays = 0`ï¼ˆå› ä¸º EntryDeadline å·²é¢„å…ˆè®¡ç®—ï¼‰
*   `InnerOffsetDays` = 60ï¼ˆä¾‹å¦‚å†…éƒ¨æå‰ 60 å¤©å¼€å§‹å¤„ç†ï¼‰
*   `RemindBase = DEADLINE`
*   `R1_OffsetDays = 90` â€“ æå‰ 90 å¤©é¦–æ¬¡æé†’
*   `R2_OffsetDays = 60` â€“ æå‰ 60 å¤©ç¬¬äºŒæ¬¡æé†’ï¼ˆä¸å†…éƒ¨é™ä¸€è‡´ï¼‰
*   `R3_OffsetDays = 30` â€“ æå‰ 30 å¤©ç¬¬ä¸‰æ¬¡æé†’
*   `DailyRemind = false`ï¼ˆæˆ– trueï¼Œæ ¹æ®å¾‹æ‰€ç­–ç•¥ï¼‰
*   `DefaultWorkerRole = AGENT`ï¼ˆé€šå¸¸ä¸º PCT ä¸»åŠä»£ç†äººï¼‰
*   `DefaultSupervisorID` = PCT é¡¹ç›®è´Ÿè´£äºº/åˆä¼™äºº

### 12.5.2 ä»»åŠ¡ç”Ÿæˆé€»è¾‘

å¯¹äºæ¯æ¡ `T_PCTNationalPlan` è¡Œï¼š

1.  BaseDate & Deadlineï¼š
    *   ç”±äº DeadlineBase=CUSTOMï¼Œè°ƒç”¨æ–¹ç›´æ¥ä½¿ç”¨ `EntryDeadline` è®¾ç½® `Deadline`ï¼›
    *   `BaseDate` å¯è®¾ç½®ä¸º `EntryDeadline` æˆ– `IntlAppDate`/`PrioDate`ï¼Œè§†å…·ä½“å®ç°ï¼›
    *   å†…éƒ¨é™ï¼š`InnerDeadline = EntryDeadline - InnerOffsetDays`ã€‚
2.  Remind1/2/3ï¼š
    *   Remind1 = Deadline - R1\_OffsetDaysï¼ˆä¾‹å¦‚ EntryDeadline - 90 å¤©ï¼‰ã€‚
    *   Remind2 = Deadline - R2\_OffsetDaysï¼ˆä¾‹å¦‚ EntryDeadline - 60 å¤©ï¼‰ã€‚
    *   Remind3 = Deadline - R3\_OffsetDaysï¼ˆä¾‹å¦‚ EntryDeadline - 30 å¤©ï¼‰ã€‚
3.  è´£ä»»äººï¼š
    *   WorkerID = PCT\_INTL æ¡ˆçš„ PrimaryAgentIDï¼›
    *   SupervisorID = æ¨¡æ¿ DefaultSupervisorIDã€‚
4.  æ’å…¥ `T_Task`ï¼š
    *   CaseID = IntlCaseID

*   DocID = NULLï¼ˆå¯é€‰ï¼šè‹¥è¯¥ä»»åŠ¡ç”±æŸä¸­é—´æ–‡ä»¶è§¦å‘ï¼Œåˆ™å¯è®°å½•ï¼‰
*   TemplateCode="PCT\_NATIONAL\_ENTRY\_LIMIT"
*   Type="å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ â€“ \[CountryCode]"ï¼ˆå¯åœ¨ Type æˆ– Summary ä¸­æ‹¼æ¥å›½åˆ«ï¼‰
*   BaseDate/Deadline/InnerDeadline/Remind1/2/3
*   WorkerID/SupervisorID
*   Status=OPEN
    5\.  å†™å…¥ `T_TaskLog(Action=CREATE)`ã€‚

**ç»“æœ**

*   åœ¨ PCT\_INTL æ¡ˆä¸Šä¼šå‡ºç°å¤šæ¡â€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™â€ä»»åŠ¡ï¼Œæ¯æ¡å¯¹åº”ä¸€ä¸ªç›®æ ‡å›½ï¼›
*   Agent ç™»å½•æ—¶å¯ä»¥åœ¨â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€ä¸­çœ‹åˆ°è¿™äº›ä»»åŠ¡ã€‚

***

## 12.6 Phase C4ï¼šå®¢æˆ·æŒ‡ç¤º â€“ å¯¹å„å›½å®¶çš„ ENTER / ABANDON å†³ç­–

**è§’è‰²**

*   Agent
*   å®¢æˆ·
*   Formalities

**ç›®æ ‡**

*   è®°å½•å®¢æˆ·å¯¹æ¯ä¸ªç›®æ ‡å›½çš„æœ€ç»ˆå†³å®šï¼ˆè¿›å…¥æˆ–æ”¾å¼ƒï¼‰ï¼Œå¹¶ç›¸åº”æ›´æ–°è®¡åˆ’å’Œæ—¶é™ä»»åŠ¡çŠ¶æ€ã€‚

### 12.6.1 å®¢æˆ·æŒ‡ç¤ºå½•å…¥ï¼ˆClientInstructionï¼‰

åœ¨ PCT\_INTL æ¡ˆçš„â€œå›½å®¶é˜¶æ®µè®¡åˆ’â€ç•Œé¢ï¼š

1.  æ˜¾ç¤ºæ‰€æœ‰ `T_PCTNationalPlan` è¡Œï¼ˆç›®æ ‡å›½åˆ—è¡¨ï¼‰ï¼š
    *   CountryCode, EntryDeadline, InnerDeadline
    *   ClientInstructionï¼ˆå½“å‰å€¼ï¼‰ã€Statusã€NationalCaseIDï¼ˆè‹¥å·²å»ºç«‹ï¼‰
2.  ä»£ç†äººä¸å®¢æˆ·æ²Ÿé€šåï¼Œåœ¨ç•Œé¢ä¸Šæ›´æ–°æ¯ä¸€è¡Œï¼š
    *   `ClientInstruction = ENTER` â€“ å®¢æˆ·å†³å®šè¿›å…¥è¯¥ç›®æ ‡å›½ï¼›
    *   `ClientInstruction = ABANDON` â€“ å†³å®šæ”¾å¼ƒè¯¥ç›®æ ‡å›½ï¼›
    *   è‹¥æš‚æœªå†³å®šï¼Œåˆ™ä¿æŒ NONEã€‚
3.  åŒæ—¶æ›´æ–° `Status`ï¼š
    *   åŸæ¥ä¸º PLANNEDï¼›
    *   ENTER â†’ DECIDED\_ENTERï¼›
    *   ABANDON â†’ DECIDED\_ABANDONã€‚

### 12.6.2 æ—¶é™ä»»åŠ¡ä¸è®¡åˆ’çš„è”åŠ¨

**å¯¹ ABANDON çš„å›½å®¶**

*   ä¸šåŠ¡ä¸Šï¼Œè¯¥ç›®æ ‡å›½çš„â€œå›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡â€å·²æ— éœ€æ‰§è¡Œï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹ä¹‹ä¸€ï¼ˆè§†å¾‹æ‰€æ”¿ç­–ï¼‰ï¼š
    *   ç›´æ¥å°†ä»»åŠ¡ `Status= CANCELLED`ï¼Œ`Remark` è¯´æ˜â€œå®¢æˆ·æ”¾å¼ƒè¿›å…¥â€ï¼›
    *   æˆ–å°†ä»»åŠ¡ `Status=DONE`ï¼Œ`DoneDate`=å®¢æˆ·æ”¾å¼ƒç¡®è®¤æ—¥ï¼›

**å¯¹ ENTER çš„å›½å®¶**

*   ä»ä¿æŒä»»åŠ¡ `Status=OPEN`ï¼Œç›´åˆ°çœŸæ­£åˆ›å»ºå›½å®¶æ¡ˆæˆ–å®Œæˆâ€œå›½å®¶é˜¶æ®µè¿›å…¥â€åŠ¨ä½œï¼›
*   æ­¤ä»»åŠ¡å¯ç”¨äºæé†’â€œå°šéœ€ä¸ºè¯¥å›½åˆ›å»ºå›½å®¶æ¡ˆã€å‡†å¤‡é€’äº¤â€ã€‚

***

## 12.7 Phase C5ï¼šåˆ›å»º PCT å›½å®¶é˜¶æ®µæ¡ˆå·ï¼ˆCaseType=PCT\_NATIONALï¼‰

**è§’è‰²**

*   Formalities

**ç›®æ ‡**

*   å¯¹æ‰€æœ‰ ClientInstruction=ENTER çš„å›½å®¶ï¼Œä¸ºå…¶ä» PCT\_INTL ä¸»æ¡ˆâ€œæ´¾ç”Ÿâ€ä¸€ä¸ª PCT\_NATIONAL å­æ¡ˆï¼ˆæ–°çš„ T\_Case è®°å½•ï¼‰ï¼Œå¹¶ä¿æŒåŸæ¡ˆ/å­æ¡ˆé—´å…³è”ã€‚

### 12.7.1 æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰

1.  åœ¨â€œå›½å®¶é˜¶æ®µè®¡åˆ’â€åˆ—è¡¨ä¸­å¯¹ `ClientInstruction=ENTER` ä¸” `Status=DECIDED_ENTER` çš„è¡Œï¼Œé€‰ä¸­è‹¥å¹²ç›®æ ‡å›½ï¼›
2.  ç‚¹å‡»â€œåˆ›å»ºå›½å®¶é˜¶æ®µæ¡ˆå·â€ï¼›
3.  å¯¹æ¯ä¸ªé€‰ä¸­çš„è®¡åˆ’è¡Œï¼Œç³»ç»Ÿå¼¹å‡ºä¸€ä¸ªâ€œæ–°å»ºå›½å®¶é˜¶æ®µæ¡ˆå·â€è§†å›¾ï¼Œé¢„å¡«ä¸‹åˆ—å­—æ®µï¼š
    *   `CaseType = PCT_NATIONAL`

*   `ParentCaseID` æˆ– `PCTIntlCaseID` = IntlCaseIDï¼ˆåŸ PCTæ¡ˆï¼‰
*   `PatentCategory` = åŸæ¡ˆçš„ PatentCategory
*   `FlowDir` = Plan.FlowDirï¼ˆä¾‹å¦‚ OUT\_INï¼‰
*   `ToCountry` = Plan.CountryCode
*   `ClientID` =
    *   å¦‚æœäº‹åŠ¡æ‰€å¯¹è¯¥å›½æ¡ˆä»¶çš„å®¢æˆ·ä»ä¸ºåŸå§”æ‰˜æ–¹ï¼Œåˆ™ ClientID=åŸæ¡ˆ ClientIDï¼›
    *   è‹¥è¯¥å›½å¿…é¡»é€šè¿‡å½“åœ°ä»£ç†æ‰€ï¼Œåˆ™ ClientID=å¤–æ‰€ï¼ˆå¯æå‰åœ¨å®¢æˆ·ä¸»æ•°æ®ä¸­è®¾ç½®ï¼‰ï¼›
*   åç§°ä¸å‚ä¸äººï¼š
    *   Title\_CN/EN = ç»§æ‰¿è‡ª PCT\_INTL æ¡ˆ
    *   ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒï¼šä»åŸæ¡ˆçš„ T\_CaseApplicant/T\_CaseInventor/T\_Priority å¤åˆ¶
    *   PrimaryAgent/SecondAgent/Draftor å¯ç»§æ‰¿æˆ–è°ƒæ•´
        4\.  Formalities è¡¥å……æˆ–ç¡®è®¤ä¸Šè¿°ä¿¡æ¯ï¼Œç‚¹å‡»â€œä¿å­˜â€ â†’ ä¸ºæ¯ä¸ªå›½å®¶åˆ›å»ºç‹¬ç«‹ PCT\_NATIONAL Caseã€‚

### 12.7.2 æ•°æ®åº“æ›´æ–°ï¼ˆå­—æ®µçº§ï¼‰

**æ’å…¥æ–°çš„ `T_Case`ï¼šCaseType=PCT\_NATIONAL**

*   `CaseType = PCT_NATIONAL`
*   `ParentCaseID = IntlCaseID`ï¼ˆå»ºè®®æ–°å¢å­—æ®µï¼‰
*   `PatentCategory` = åŸæ¡ˆ PatentCategory
*   `FlowDir` = Plan.FlowDir
*   `FromCountry` = å¯ä¸ºåŸæ¡ˆæ‰€åœ¨å›½ï¼›
*   `ToCountry` = Plan.CountryCode
*   `Title_CN/EN` = ä»åŸæ¡ˆå¤åˆ¶
*   `ClientID` = æ ¹æ®ä¸šåŠ¡å†³å®šï¼ˆåŸå§”æ‰˜æ–¹/å¤–æ‰€ï¼‰
*   `Status` = NOT\_FILEDï¼ˆå›½å®¶é˜¶æ®µå°šæœªé€’äº¤ï¼‰
*   PCT ä¿¡æ¯ï¼š
    *   IntlAppNo/IntlAppDate/IntlPubNo/IntlPubDate ç­‰å¯ä»åŸæ¡ˆå¤åˆ¶æˆ–ä»…é€šè¿‡ ParentCaseID å…³è”æŸ¥è¯¢

**å¤åˆ¶ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒ**

*   å°† PCT\_INTL æ¡ˆä¸Šçš„ `T_CaseApplicant/T_CaseInventor/T_Priority` records å¤åˆ¶åˆ°æ–° CaseID ä¸‹ï¼›
*   è¿™æ ·å›½å®¶æ¡ˆå…·æœ‰å®Œæ•´çš„ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒä¿¡æ¯ï¼Œä¾¿äºæœ¬å›½å±€æ‰‹ç»­ã€‚

**æ›´æ–° T\_PCTNationalPlan**

*   å¯¹åº” PlanID è¡Œï¼š
    *   `Status = CASE_CREATED`
    *   `NationalCaseID = æ–°å»ºçš„ CaseID`

**æ›´æ–°æ—¶é™ä»»åŠ¡**

*   å¯¹è¯¥ Country å¯¹åº”çš„ `T_Task(PCT_NATIONAL_ENTRY_LIMIT)`ï¼š
    *   å¯ä»¥é€‰æ‹©ï¼š
        *   1ï¼‰å°†ä»»åŠ¡ `Status`=DONEï¼Œ`DoneDate`=åˆ›å»ºå›½å®¶æ¡ˆæ—¥æœŸï¼Œè¡¨ç¤ºâ€œå›½å®¶é˜¶æ®µè¿›å…¥æ“ä½œå·²å®Œæˆâ€ï¼›
        *   2ï¼‰æˆ–ä¿ç•™ä¸º OPEN ç›´åˆ°çœŸå®å‘è¯¥å›½å±€é€’äº¤æ—¶æ‰æ ¸é”€ï¼ˆå…·ä½“ä¸šåŠ¡è§„åˆ™å¯å®šï¼‰ã€‚

***

## 12.8 Phase C6ï¼šå›½å®¶é˜¶æ®µæ¡ˆçš„åç»­æµç¨‹ â€“ å¯¹æ¥åœºæ™¯ A/B/G0/D/E ç­‰

ä¸€æ—¦ PCT\_NATIONAL å­æ¡ˆå»ºç«‹ï¼Œ**åç»­æµç¨‹ä¸æ™®é€šæ–°æ¡ˆå®Œå…¨ç›¸åŒ**ï¼š

*   åœ¨ PCT\_NATIONAL æ¡ˆä¸Šï¼ŒFormalities/Agent å°†ï¼š
    1.  å½•å…¥å›½å®¶é˜¶æ®µèµ„æ–™ â†’ é€šè¿‡â€œæ¡ˆä»¶é€’äº¤â€æ‰¹å¤„ç†é€’äº¤ç»™è¯¥å›½ä¸“åˆ©å±€ï¼ˆåœºæ™¯ A çš„ Phase A2ï¼‰ï¼›
    2.  ç”Ÿæˆä¸è¯¥å›½åˆ¶åº¦ç›¸åº”çš„ç”³è¯·è´¹æ—¶é™ä»»åŠ¡ï¼ˆå¯å¤ç”¨ APPLY\_FEE\_LIMIT æˆ–ä¸ºå„å›½å®šä¹‰ä¸åŒæ¨¡æ¿ï¼‰ï¼›
    3.  ç”Ÿæˆè¯¥å›½ç”³è¯·è´¹è‰å•ï¼ˆAPPLY\_FEEï¼‰ â†’ å®˜è´¹æ¸…å• â†’ å®˜æ–¹ç¼´è´¹ â†’ ç»™å®¢æˆ·å¼€ç”³è¯·è´¹è´¦å• â†’ æ”¶æ¬¾ â†’ å¯¹åº”ææˆï¼ˆåœºæ™¯ Aï¼‰ï¼›
    4.  å¤„ç†å„å›½ OAï¼ˆB åœºæ™¯ï¼‰ï¼š
        *   OA\_NOTICE/OA\_REPLY + OA\_REPLY\_LIMITï¼›
        *   OA æœåŠ¡è´¹è‰å•/è´¦å•/æ”¶æ¬¾/ææˆï¼›
    5.  è¯¥å›½æˆæƒæ—¶ï¼ˆG0 åœºæ™¯ï¼‰ï¼š
        *   GRANT\_NOTICE â†’ å†™å…¥æˆæƒä¿¡æ¯ â†’ ç”Ÿæˆæˆæƒè´¹æ—¶é™ä»»åŠ¡/æˆæƒè´¹ä»»åŠ¡/æˆæƒè´¹è‰å•/å®˜è´¹æ¸…å•/æˆæƒè´¹è´¦å•/æ”¶æ¬¾/ææˆï¼›
    6.  è¯¥å›½å¹´è´¹ç®¡ç†ï¼ˆD åœºæ™¯ï¼‰ï¼š
        *   åˆå§‹åŒ–å¤šå¹´åº¦ T\_AnnuityTask â†’ å¹´è´¹æ‰¹é‡æå–/å®¢æˆ·æŒ‡ç¤º/é€šçŸ¥å‡½/å¹´è´¹è‰å•/å®˜è´¹æ¸…å•/è´¦å•/æ”¶æ¬¾/å¹´è´¹ææˆï¼›
    7.  æŸå›½å‘ç”Ÿæ— æ•ˆ/è¯‰è®¼ï¼ˆE åœºæ™¯ï¼‰ï¼š
        *   æ–°å»º `T_Case(CaseType=INVALIDATION/LITIGATION)`ï¼Œ`OriginalCaseID` æŒ‡å‘è¯¥å›½å®¶æ¡ˆï¼›
        *   æ— æ•ˆ/è¯‰è®¼é˜¶æ®µçš„æ–‡ä¹¦ã€æ—¶é™ã€è´¹ç”¨ã€è´¦å•ã€æ”¶æ¬¾ã€ææˆåŒåœºæ™¯ Eã€‚

**ä»æ¶æ„è§’åº¦è®²ï¼š**

*   PCT\_INTL Case ä½œä¸ºâ€œæ¯æ¡ˆâ€ä¸»è¦æ‰¿æ‹…ï¼š
    *   å›½é™…é˜¶æ®µä¿¡æ¯è®°å½•ï¼ˆRO/ISA/WO/IPER ç­‰ï¼‰
    *   å›½å®¶é˜¶æ®µè®¡åˆ’ï¼ˆT\_PCTNationalPlanï¼‰ä¸å›½å®¶é˜¶æ®µè¿›å…¥ä»»åŠ¡ï¼ˆT\_Taskï¼‰
*   æ¯ä¸ª PCT\_NATIONAL Case æ˜¯ä¸€ä¸ªâ€œå®Œå…¨ç‹¬ç«‹â€çš„æ¡ˆä»¶ï¼Œä»æ–°æ¡ˆåˆ°æˆæƒ/å¹´è´¹ï¼Œæ— éœ€å†ç‰¹åˆ«åŒºåˆ†â€œæ˜¯å¦æ¥è‡ª PCTâ€ã€‚

***

## 12.9 åœºæ™¯ C â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆ

| Phase                   | è¡¨                                                                                      | å…³é”®å­—æ®µå˜æ›´                                                                                                                                                                        |
| ----------------------- | -------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| C0 PCT å›½é™…æ¡ˆç«‹æ¡ˆ            | T\_Case                                                                                | æ–°å¢ CaseType=PCT\_INTL è®°å½•ï¼ŒPCT æ‰©å±•å­—æ®µï¼ˆRO/ISA/IPEA/IntlAppNo/IntlAppDate/IntlPubNo/IntlPubDate/IntlPubLang/NeedIPER/IPERDateï¼‰æ ¹æ®å½•å…¥æƒ…å†µä¿å­˜ï¼›Status åˆå§‹åŒ–ä¸º PCT\_INIT æˆ–ç±»ä¼¼ã€‚                   |
| C1 å›½é™…é˜¶æ®µæ¥æ–‡               | T\_DocTemplate                                                                         | å­˜åœ¨ PCT\_RO\_NOTICE/PCT\_ISR\_NOTICE/PCT\_WO\_NOTICE/PCT\_IPER\_NOTICE ç­‰æ¨¡æ¿ï¼Œå®šä¹‰ InputFieldList ä¸å¯èƒ½çš„ StatusEffectã€‚                                                                |
|                         | T\_Document                                                                            | å¯¹å—ç†é€šçŸ¥/æ£€ç´¢æŠ¥å‘Š/ä¹¦é¢æ„è§/IPER ç­‰ OFFICIAL\_IN æ–‡ä¹¦æ’å…¥è®°å½•ï¼ŒExtraData å­˜æ”¾å¯¹åº”ä¿¡æ¯ã€‚                                                                                                                  |
|                         | T\_Case                                                                                | æ ¹æ®ä¸åŒæ–‡ä¹¦æ›´æ–° IntlAppNo/IntlAppDate/å…¶ä»– PCT å­—æ®µæˆ–çŠ¶æ€ï¼ˆä¾‹å¦‚â€œPCT\_RO\_ACCEPTEDâ€ç­‰ï¼‰ã€‚                                                                                                          |
| C2 å›½å®¶é˜¶æ®µè®¡åˆ’åˆå§‹åŒ–            | T\_PCTNationalPlan                                                                     | å¯¹æ¯ä¸ªç›®æ ‡å›½æ–°å»ºä¸€è¡Œï¼šIntlCaseIDã€CountryCodeã€FlowDirã€Status=PLANNEDã€ClientInstruction=NONEã€EntryDeadline/InnerDeadlineï¼ˆæŒ‰ PCT è§„åˆ™è®¡ç®—ï¼‰ã€‚                                                      |
| C3 ç”Ÿæˆè¿›å…¥æ—¶é™ä»»åŠ¡             | T\_TaskTemplate                                                                        | é…ç½® Code="PCT\_NATIONAL\_ENTRY\_LIMIT" çš„æ¨¡æ¿ï¼šDeadlineBase=CUSTOMï¼ŒInnerOffsetDays/RemindOffset ç­‰ã€‚                                                                                 |
|                         | T\_Task                                                                                | å¯¹æ¯ä¸€è¡Œ Plan ç”Ÿæˆä¸€æ¡ä»»åŠ¡ï¼šCaseID=IntlCaseID, TemplateCode=PCT\_NATIONAL\_ENTRY\_LIMIT, Type="å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™-\[CountryCode]"ï¼ŒDeadline=EntryDeadline, InnerDeadline/Remind\* ç­‰ï¼›Status=OPENã€‚    |
| C4 å®¢æˆ·æŒ‡ç¤º ENTER/ABANDON   | T\_PCTNationalPlan                                                                     | æ›´æ–°å„å›½ ClientInstruction=ENTER/ABANDONï¼›Status ä» PLANNED â†’ DECIDED\_ENTER æˆ– DECIDED\_ABANDONã€‚                                                                                    |
|                         | T\_Task                                                                                | å¯¹ ABANDON çš„å›½å®¶ï¼Œå¯ä»¥å°†å¯¹åº”ä»»åŠ¡ Status=CANCELLED æˆ– DONEï¼›å¯¹ ENTER çš„å›½å®¶ä»»åŠ¡ä¿æŒ OPENã€‚                                                                                                           |
| C5 åˆ›å»º PCT\_NATIONAL å­æ¡ˆå· | T\_Case                                                                                | å¯¹æ¯ä¸ª DECIDED\_ENTER è¡Œï¼šæ’å…¥ CaseType=PCT\_NATIONAL è®°å½•ï¼Œç»§æ‰¿ PCT\_INTL çš„åç§°/ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒç­‰ï¼›è®¾ç½® ParentCaseID=IntlCaseIDï¼ŒToCountry=Plan.CountryCodeï¼ŒFlowDir=Plan.FlowDirï¼ŒStatus=NOT\_FILEDã€‚ |
|                         | T\_CaseApplicant/T\_CaseInventor/T\_Priority                                           | ä» PCT\_INTL å¤åˆ¶åˆ°æ–° CaseIDã€‚                                                                                                                                                      |
|                         | T\_PCTNationalPlan                                                                     | æ›´æ–°è¯¥è¡Œ Status=CASE\_CREATED, NationalCaseID=æ–°å»º CaseIDã€‚                                                                                                                          |
|                         | T\_Task                                                                                | å¯¹åº”çš„ PCT\_NATIONAL\_ENTRY\_LIMIT ä»»åŠ¡å¯æ ‡è®°ä¸º DONEï¼ˆDoneDate=å»ºæ¡ˆæ—¥æœŸï¼‰ï¼Œè§†ä¸šåŠ¡ç­–ç•¥ï¼›æˆ–è€…ç•™åˆ°å®é™…å›½å®¶é€’äº¤æ—¶å†æ ¸é”€ã€‚                                                                                              |
| C6 å›½å®¶æ¡ˆåç»­æµç¨‹              | T\_Case/T\_Task/T\_FeeDraft/T\_PayList/T\_Bill/T\_Payment/T\_CaseReceipt/T\_Commission | æ¯ä¸ª PCT\_NATIONAL å­æ¡ˆä»æ­¤å¯¹æ¥åœºæ™¯ A/B/G0/D/E/H/F/G çš„å…¨æµç¨‹ï¼Œå­—æ®µæ›´æ–°æ–¹å¼åŒè¿™äº›åœºæ™¯æè¿°ï¼Œæ— éœ€ç‰¹åˆ«åˆ†æ”¯ã€‚                                                                                                         |

***

âœ… è‡³æ­¤ï¼Œ**E2E åœºæ™¯ Cï¼šPCT å›½é™… â†’ å›½å®¶é˜¶æ®µ** çš„æ—¶é—´çº¿ä¸æ•°æ®æµå·²ç»å®Œæ•´å†™å…¥ï¼š

*   ä» PCT\_INTL å»ºæ¡ˆï¼Œåˆ°å›½é™…é˜¶æ®µä¸­é—´æ–‡ä»¶ï¼›
*   åˆ°å›½å®¶é˜¶æ®µè®¡åˆ’è¡¨ä¸è¿›å…¥æ—¶é™ä»»åŠ¡ï¼›
*   åˆ°å®¢æˆ·æŒ‡ç¤º ENTER/ABANDONï¼›
*   åˆ°åˆ›å»º PCT\_NATIONAL å­æ¡ˆå¹¶å°†å…¶æ¥åˆ°ç°æœ‰çš„ A/B/G0/D/E/H/F/G ä¸»æµæ°´çº¿ä¸Šã€‚

## 13. Part II â€“ E2E åœºæ™¯ Dï¼šå¹´è´¹å‘¨æœŸï¼ˆå¤šå¹´åº¦æ»šåŠ¨ï¼‰â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯æè¿°â€œ**ä¸€ä¸ªå·²æˆæƒå¹¶å¼€å¯å¹´è´¹ç›‘è§†çš„æ¡ˆå­ï¼Œåœ¨æ•´ä¸ªæœ‰æ•ˆæœŸå†…æŒ‰å¹´åº¦æ»šåŠ¨ç¼´çº³å¹´è´¹**â€çš„å…¨è¿‡ç¨‹ã€‚
>
> ä»æŠ€æœ¯è§’åº¦ï¼Œè¿™æ˜¯æ¨¡å—ä¸€ï¼ˆæ¡ˆå·ï¼‰ã€æ¨¡å—ä¸‰ï¼ˆæ—¶é™ï¼‰ã€æ¨¡å—å››ï¼ˆå¹´è´¹ä»»åŠ¡/è‰å•/æ¸…å•ï¼‰ã€æ¨¡å—äº”ï¼ˆè´¦å•/æ”¶æ¬¾ï¼‰ã€æ¨¡å—å…­ï¼ˆå¯é€‰å¹´è´¹ææˆï¼‰ä¹‹é—´ä¸€æ¬¡åˆä¸€æ¬¡çš„é…åˆã€‚
>
> æˆ‘ä¼šæŒ‰ Phase D0â€“D8 é€é˜¶æ®µå±•å¼€ï¼š
>
> *   æ¯ä¸ªé˜¶æ®µéƒ½è¯´æ˜ï¼š**å‚ä¸è§’è‰² â†’ æ“ä½œ â†’ æ›´æ–°å“ªäº›è¡¨/å­—æ®µ â†’ å¦‚ä½•è¡”æ¥å‰åé˜¶æ®µ**
> *   å°†æˆ‘ä»¬ä¹‹å‰å…³äºå¹´è´¹ï¼ˆæ¨¡å—å›› 5.8 + åœºæ™¯ D E2Eï¼‰çš„æ‰€æœ‰å†…å®¹æ•´åˆè¿›æ¥ï¼Œä¸åšçœç•¥ã€‚

***

## 13.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> æŸæ¡ˆæˆæƒåï¼Œäº‹åŠ¡æ‰€åœ¨ FPMS ä¸­æ ‡è®°å…¶éœ€è¦å¹´è´¹ç›‘è§†ï¼Œå¹¶è¾“å…¥é¦–å¹´å¹´è´¹å¹´å·å’Œæœ‰æ•ˆæœŸã€‚ç³»ç»Ÿæ®æ­¤ä¸ºæ¯ä¸ªå¹´åº¦ç”Ÿæˆå¹´è´¹ä»»åŠ¡ï¼ˆæˆ–æ»šåŠ¨ç”Ÿæˆï¼‰ï¼Œä¹‹åæ¯å¹´ï¼ˆæˆ–æ¯æœˆ/æ¯å­£ï¼‰æ‰¹é‡æå–æœªæ¥æŸæ—¶é—´çª—å£å†…è¦åˆ°æœŸçš„å¹´è´¹æ¡ˆä»¶ï¼Œå‘å®¢æˆ·å‘å‡ºå¹´è´¹é€šçŸ¥å‡½ï¼Œè®°å½•å®¢æˆ·æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ï¼Œä¸ºåŒæ„ç¼´çº³çš„æ¡ˆä»¶ç”Ÿæˆå¹´è´¹è‰å•ã€å®˜è´¹æ¸…å•å’Œå¹´è´¹è´¦å•ã€‚å®¢æˆ·ä»˜æ¬¾åï¼Œäº‹åŠ¡æ‰€åšæ”¶æ¬¾ç™»è®°ä¸è´¦å•å†²é”€ï¼Œå¹¶æŠŠè¿™äº›ç”Ÿæ„çš„æ•°æ®å†™å…¥ä¸ªæ¡ˆæ”¶æ¬¾ä¸ææˆæ¨¡å—ã€‚è¯¥è¿‡ç¨‹ä»æˆæƒåçš„é¦–å¹´å¼€å§‹ï¼ŒæŒç»­åˆ°ä¸“åˆ©æœ‰æ•ˆæœŸç»“æŸï¼ˆæˆ–å› æ”¾å¼ƒ/ç»ˆæ­¢è€Œæå‰ç»“æŸï¼‰ã€‚

**æ¶‰åŠæ¨¡å—/è¡¨**

*   **æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤**
    *   `T_Case`ï¼šIsFeeMonitor, FirstAnnuityYear, ValidUntil, Statusï¼ˆGRANTED/TERMINATED ç­‰ï¼‰
*   **æ¨¡å—ä¸‰ï¼ˆå¯é€‰ï¼‰ï¼šæ—¶é™ç®¡ç†**
    *   å¹´è´¹æé†’ä»»åŠ¡ `T_Task`ï¼ˆå¦‚æœä½¿ç”¨ä»»åŠ¡æ¨¡å‹æ¥æé†’ï¼‰
    *   å¹´è´¹ä»»åŠ¡æœ¬èº«æˆ‘ä»¬ç”¨çš„æ˜¯ `T_AnnuityTask`ï¼ˆåœ¨æ¨¡å—å››ä¸­å®šä¹‰ï¼‰
*   **æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†**
    *   `T_FeeRate`ï¼šGroup=ANNUITY çš„å¹´è´¹è´¹ç‡è¡¨
    *   `T_AnnuityTask`ï¼šå¹´è´¹ä»»åŠ¡ï¼ˆå¤šå¹´åº¦ï¼‰
    *   `T_FeeDraft`ï¼šType=ANNUITY\_FEE çš„å¹´è´¹è‰å•
    *   `T_FeeItem`ï¼šå¹´è´¹å®˜è´¹/æœåŠ¡è´¹æ˜ç»†
    *   `T_PayList`ï¼šType=ANNUITY çš„å®˜è´¹æ¸…å•
    *   `T_GovPayment`ï¼šå¹´è´¹ç¼´è´¹æ˜ç»†
    *   `T_CaseReceipt`ï¼šæ¡ˆä»¶å¹´è´¹æ”¶æ¬¾è®°å½•ï¼ˆå®¢æˆ·ç»´åº¦ï¼‰
*   **æ¨¡å—äº”ï¼šè´¦å•/æ”¶æ¬¾/å‚¬æ¬¾**
    *   `T_Bill/T_BillItem`ï¼šå¹´è´¹è´¦å•
    *   `T_Payment/T_PaymentLine`ï¼šå®¢æˆ·æ”¶æ¬¾
    *   `T_Offset`ï¼šæ”¶æ¬¾å†²é”€è‡³å¹´è´¹è´¦å•
*   **æ¨¡å—å…­ï¼ˆå¯é€‰ï¼‰ï¼šä»£ç†äººææˆ**
    *   `T_CommissionRule`ï¼šé’ˆå¯¹å¹´è´¹æœåŠ¡è´¹çš„ææˆè§„åˆ™
    *   `T_Commission`ï¼šå¹´è´¹éƒ¨åˆ†çš„ BaseFee/S1/S2
    *   `T_CommissionSettlement/T_CommissionSettleLine`ï¼šå¹´è´¹ææˆçš„ç»“ç®—æ‰¹æ¬¡

***

## 13.2 Phase D0ï¼šæˆæƒæ—¶çš„å¹´è´¹åˆå§‹è®¾ç½®ï¼ˆT\_Caseï¼‰

**è§’è‰²**

*   Formalitiesï¼ˆåœ¨å½•å…¥æˆæƒé€šçŸ¥æ—¶ï¼‰
*   Agentï¼ˆå¯èƒ½å‚ä¸ï¼‰

**ç›®æ ‡**

*   åœ¨æ¡ˆä»¶æˆæƒæ—¶ï¼Œç¡®è®¤æ˜¯å¦éœ€è¦å¹´è´¹ç›‘è§†ï¼Œå¹¶å†™å…¥é¦–å¹´å¹´è´¹å¹´å·ä¸ä¸“åˆ©æœ‰æ•ˆæœŸï¼Œä¸ºåç»­å¹´è´¹ç”Ÿå‘½å‘¨æœŸå¥ å®šåŸºç¡€ã€‚

### 13.2.1 æˆæƒé€šçŸ¥å½•å…¥å›é¡¾

åœ¨æˆæƒåœºæ™¯ï¼ˆG0ï¼‰ä¸­ï¼Œå½•å…¥ `GRANT_NOTICE` ä¸­é—´æ–‡ä»¶æ—¶ï¼š

*   æ¨¡æ¿ `GRANT_NOTICE` çš„ InputFieldList åŒ…å«ï¼š
    *   IssueDateï¼ˆæˆæƒå‘æ–‡æ—¥ï¼‰
    *   GrantDateï¼ˆæˆæƒå…¬å‘Šæ—¥ï¼‰
    *   GrantNoï¼ˆå…¬å‘Šå·ï¼‰
    *   FirstAnnuityYearï¼ˆé¦–å¹´å¹´è´¹å¹´å·ï¼‰
    *   ValidUntilï¼ˆæœ‰æ•ˆæœŸæˆªæ­¢æ—¥ï¼‰

Formalities åœ¨ Step2 ä¸­å½•å…¥ä¸Šè¿°å­—æ®µï¼Œå®Œæˆå‘å¯¼å¹¶ä¿å­˜åï¼š

**å†™å…¥ `T_Case`ï¼š**

*   `Status = GRANTED`
*   `IssueDate`, `GrantDate`, `GrantNo`, `FirstAnnuityYear`, `ValidUntil` å¡«å…¥
*   `IsFeeMonitor`ï¼šè‹¥æœ¬æ¡ˆéœ€ç›‘æ§å¹´è´¹ï¼Œå‹¾é€‰ä¸º true

> âš ï¸ é‡è¦ï¼š
>
> *   å¦‚æœ `IsFeeMonitor=false`ï¼Œåˆ™ç³»ç»Ÿåœ¨åç»­é˜¶æ®µå¯ä»¥å®Œå…¨ä¸å¯¹è¯¥æ¡ˆç”Ÿæˆå¹´è´¹ä»»åŠ¡/æé†’ï¼›
> *   å½“ IsFeeMonitor=true ä¸” FirstAnnuityYear/ValidUntil å·²çŸ¥æ—¶ï¼Œå³æ»¡è¶³ç”Ÿæˆå¤šå¹´åº¦å¹´è´¹ä»»åŠ¡çš„æ¡ä»¶ã€‚

***

## 13.3 Phase D1ï¼šå¹´è´¹ä»»åŠ¡åˆå§‹åŒ– â€“ `T_AnnuityTask` å¤šå¹´åº¦ç”Ÿæˆ

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   å¹´è´¹ç®¡ç†å‘˜ï¼ˆé…ç½®/ç›‘ç£ï¼‰

**ç›®æ ‡**

*   ä¸ºæˆæƒä¸” `IsFeeMonitor=true` çš„æ¡ˆä»¶ç”Ÿæˆå¤šå¹´åº¦ `T_AnnuityTask`ï¼Œæ¯ä¸ªå¹´åº¦ä¸€æ¡çºªå½•ï¼Œè®°å½•è¯¥å¹´åº¦å¹´è´¹åˆ°æœŸæ—¥åŠé‡‘é¢å­—æ®µï¼ˆå¯ä¸ºç©ºæˆ–é¢„ä¼°ï¼‰ã€‚

### 13.3.1 å¹´è´¹ä»»åŠ¡ç”Ÿæˆç­–ç•¥

**æ–¹æ¡ˆä¸€ï¼šä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰å¹´åº¦ä»»åŠ¡**

*   é’ˆå¯¹ `T_Case` ä¸­æ»¡è¶³ï¼š
    *   Status=GRANTED
    *   IsFeeMonitor=true
    *   FirstAnnuityYear, ValidUntil å‡å·²è®¾ç½®
*   è®¡ç®—ä¸“åˆ©æœ‰æ•ˆæœŸå¯¹åº”çš„å¹´è´¹å¹´åº¦èŒƒå›´ï¼š
    *   ä¾‹å¦‚ä¸“åˆ©æ€»å¹´é™ 20 å¹´ï¼Œä» FirstAnnuityYear åˆ° LastAnnuityYearï¼ˆå¯ç”± ValidUntil ä¸ FilingDate ç»“åˆè®¡ç®—ï¼‰
*   å¯¹æ¯ä¸ªå¹´åº¦ YearNo âˆˆ \[FirstAnnuityYear, LastAnnuityYear]ï¼š
    *   ç”Ÿæˆ `T_AnnuityTask` è®°å½•ã€‚

**æ–¹æ¡ˆäºŒï¼šæ»šåŠ¨ç”Ÿæˆæœªæ¥ X å¹´ä»»åŠ¡**

*   æ¯æ—¥/æ¯å‘¨å®šæ—¶ä»»åŠ¡ï¼š
    *   æ£€æŸ¥æ‰€æœ‰ GRANTED & IsFeeMonitor=true çš„æ¡ˆä»¶ï¼›
    *   å¯¹æœªæ¥ 3 å¹´å†…å°šæœªç”Ÿæˆä»»åŠ¡çš„å¹´åº¦ç”Ÿæˆ `T_AnnuityTask`ï¼›
*   è¿™æ ·å¯å‡å°‘ä¸€æ¬¡æ€§ç”Ÿæˆå¤§é‡æœªæ¥ä»»åŠ¡çš„â€œè§†è§‰è´Ÿæ‹…â€ï¼Œä½†é€»è¾‘ä¸Šç»“æœç›¸åŒã€‚

> ä¸¤ç§æ–¹æ¡ˆä¸äº’æ–¥ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿå‚æ•°ä¸­é…ç½®é‡‡ç”¨å“ªä¸€ç§ã€‚\
> æœ¬è§„æ ¼ä¹¦åŒæ—¶æ”¯æŒï¼Œæ•°æ®ç»“æ„ä¸å˜ã€‚

### 13.3.2 ç”Ÿæˆ `T_AnnuityTask` å­—æ®µ

å¯¹æŸä¸ªå¹´åº¦ YearNoï¼š

1.  è®¡ç®—è¯¥å¹´åº¦çš„å¹´è´¹æœ€æ–°ç¼´è´¹æœŸé™ `DueDate`ï¼š
    *   ä¸€èˆ¬è§„åˆ™ï¼ˆä»¥ CN ä¸ºä¾‹ï¼‰ï¼š
        *   å¹´è´¹æ”¯ä»˜åˆ°æœŸæ—¥ = ç”³è¯·æ—¥ + N å¹´ï¼ˆæˆ–å—ç†æ—¥/æˆæƒæ—¥ + N å¹´ï¼Œè§†å›½å®¶è§„åˆ™ï¼‰
    *   è¿™äº›è§„åˆ™å¯ä»¥é€šè¿‡ `T_FeeRate` æˆ–ä¸“é—¨çš„è§„åˆ™æœåŠ¡ç¼–ç å®ç°ã€‚
2.  é¢„ä¼°é‡‘é¢ï¼š
    *   å¯ä» `T_FeeRate(Group=ANNUITY, YearNo=...)` åˆæ­¥è®¡ç®—æ”¿åºœå¹´è´¹ `GovFeeAmt` å’ŒæœåŠ¡è´¹ `ServiceFeeAmt`ï¼›
    *   æˆ–åˆæ¬¡ç”Ÿæˆæ—¶è®¾ä¸º 0ï¼Œç­‰ä»¥åå®é™…ç”Ÿæˆå¹´è´¹è‰å•æ—¶å†è®¡ç®—ã€‚
3.  åˆ›å»º `T_AnnuityTask`ï¼š
    *   `TaskID` PK

*   `CaseID` = æœ¬æ¡ˆ CaseID
*   `Type` = ANNUITY
*   `YearNo` = å½“å‰å¹´å·
*   `DueDate` = è®¡ç®—å‡ºçš„å¹´è´¹å®˜æ–¹æˆªæ­¢æ—¥æœŸ
*   `GovFeeAmt`, `ServiceFeeAmt`, `Currency` = é¢„ä¼°å€¼æˆ– 0
*   `ClientInstruction = NONE`ï¼ˆå°šæœªæŒ‡ç¤ºï¼‰
*   `NotifyCount = 0`
*   `PayNextYear = false`
*   `DraftGenerated = false`
*   `NoticeSent = false`
*   `IsOverdue = false`
*   `Remark` = å¯ä¸ºç©º
*   å®¡è®¡ï¼šCreatedBy/At, UpdatedBy/At

**ç»“æœ**

*   æ¯ä¸ªéœ€è¦å¹´è´¹ç›‘è§†çš„æ¡ˆä»¶éƒ½ä¼šæ‹¥æœ‰è‹¥å¹²æ¡ `T_AnnuityTask`ï¼Œä»£è¡¨ä»é¦–å¹´åˆ°ç»ˆäº†å¹´çš„å¹´è´¹ä»»åŠ¡ï¼›
*   åç»­çš„ D2â€“D6 æµç¨‹æ¯å¹´/æ¯æœŸéƒ½å›´ç»•è¿™äº›ä»»åŠ¡è¿›è¡Œã€‚

***

## 13.4 Phase D2ï¼šå®šæœŸå¹´è´¹ä»»åŠ¡æå– â€“ æ‰¾å‡ºå³å°†åˆ°æœŸçš„å¹´è´¹ï¼ˆT\_AnnuityTask æŸ¥è¯¢ï¼‰

**è§’è‰²**

*   å¹´è´¹å‘˜ / Formalities

**ç›®æ ‡**

*   åœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼ˆä¾‹å¦‚æ¯æœˆ/æ¯å­£åº¦ï¼‰ï¼Œæå–æœªæ¥ä¸€æ®µæ—¶é—´å†…åˆ°æœŸçš„å¹´è´¹ä»»åŠ¡ï¼Œç”¨äºåç»­å®¢æˆ·é€šçŸ¥å’Œè‰å•ç”Ÿæˆã€‚

### 13.4.1 å¹´è´¹ç®¡ç†ç•Œé¢ â€“ æŸ¥è¯¢æ¡ä»¶

è¿›å…¥â€œå¹´è´¹ç®¡ç†â€æ¨¡å—ä¸­çš„â€œå¹´è´¹åˆ°æœŸæ£€ç´¢â€ç•Œé¢ï¼š

**æŸ¥è¯¢æ¡ä»¶**

*   åˆ°æœŸæ—¥èŒƒå›´ï¼ˆDueDateï¼‰ï¼š
    *   DateFrom / DateTo
    *   å¸¸è§å¿«æ·é€‰é¡¹ï¼š
        *   â€œæœªæ¥ 3 ä¸ªæœˆå†…åˆ°æœŸâ€
        *   â€œæœªæ¥ 6 ä¸ªæœˆå†…åˆ°æœŸâ€
        *   â€œæœ¬å¹´å†…åˆ°æœŸâ€
*   å®¢æˆ· / ç”³è¯·äººï¼š
    *   ClientID / ApplicantID
*   å›½å®¶/åœ°åŒºã€ä¸“åˆ©ç±»åˆ«ï¼š
    *   CountryCode, PatentCategory
*   ClientInstructionï¼š
    *   NONEï¼ˆæœªæŒ‡ç¤ºï¼‰
    *   PAYï¼ˆæŒ‡ç¤ºç¼´çº³ï¼‰
    *   ABANDONï¼ˆæ”¾å¼ƒï¼‰
*   Flagsï¼š
    *   DraftGeneratedï¼ˆæ˜¯/å¦ï¼‰
    *   NoticeSentï¼ˆæ˜¯/å¦ï¼‰
    *   IsOverdueï¼ˆæ˜¯/å¦ï¼‰

### 13.4.2 ç»“æœåˆ—è¡¨å­—æ®µ

åˆ—è¡¨æ¯è¡Œå¯¹åº”ä¸€æ¡ `T_AnnuityTask`ï¼š

*   æ¡ˆå·å· CaseNo
*   ç”³è¯·å·/ä¸“åˆ©å· AppNo/PatentNoï¼ˆå¦‚æœ‰ï¼‰
*   å®¢æˆ· ClientName
*   å›½åˆ« ToCountry
*   å¹´åº¦ YearNo
*   DueDateï¼ˆå¹´è´¹å®˜æ–¹æˆªæ­¢æ—¥ï¼‰
*   GovFeeAmt/ServiceFeeAmt/Currencyï¼ˆé¢„ä¼°é‡‘é¢ï¼‰
*   ClientInstructionï¼ˆNONE/PAY/ABANDONï¼‰
*   NotifyCount
*   DraftGenerated
*   NoticeSent
*   IsOverdue

### 13.4.3 é€¾æœŸæ›´æ–°

*   è‹¥å½“å‰æ—¥æœŸ > DueDate ä¸” ClientInstructionâ‰ PAY æˆ–æœªç¼´è´¹ï¼Œå¯é€šè¿‡åå°ä»»åŠ¡æˆ–è¿›å…¥åˆ—è¡¨æ—¶è‡ªåŠ¨æ›´æ–° `IsOverdue = true`ï¼›
*   æé†’å¹´è´¹å‘˜æ³¨æ„è¿™äº›é€¾æœŸä»»åŠ¡ã€‚

**ç»“æœ**

*   å¹´è´¹å‘˜è·å¾—ä¸€ä¸ªé›†ä¸­è§†å›¾ï¼Œæ¸…æ¥šçœ‹åˆ°æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´éœ€è¦å¤„ç†å“ªäº›å¹´è´¹ä»»åŠ¡ã€‚

***

## 13.5 Phase D3ï¼šå®¢æˆ·æŒ‡ç¤º & å¹´è´¹é€šçŸ¥å‡½ï¼ˆT\_AnnuityTask + T\_Documentï¼‰

**è§’è‰²**

*   Agent ä¸å®¢æˆ·æ²Ÿé€š
*   å¹´è´¹å‘˜ï¼ˆFormalitiesï¼‰å½•å…¥æŒ‡ç¤ºã€ç”Ÿæˆé€šçŸ¥å‡½

**ç›®æ ‡**

*   è®°å½•å®¢æˆ·å¯¹æ¯ä¸ªå¹´è´¹å¹´åº¦çš„æŒ‡ç¤ºï¼ˆç¼´çº³/æ”¾å¼ƒï¼‰ï¼Œå¹¶å¯¹æœªæŒ‡ç¤ºçš„æ¡ˆä»¶å‘é€šçŸ¥å‡½æé†’ã€‚

### 13.5.1 æ›´æ–° ClientInstructionï¼ˆå®¢æˆ·æŒ‡ç¤ºï¼‰

åœ¨å¹´è´¹ä»»åŠ¡åˆ—è¡¨ä¸­ï¼š

1.  å¹´è´¹å‘˜ä¸å®¢æˆ·æ²Ÿé€šï¼ˆé€šè¿‡ç”µè¯/é‚®ä»¶/ä¼šè®®ç­‰æ–¹å¼ï¼‰ï¼Œå¾—åˆ°å¯¹æŸäº›å¹´åº¦çš„å†³ç­–ï¼šPAY æˆ– ABANDONï¼›
2.  å¯¹å¯¹åº”çš„ `T_AnnuityTask` è¡Œï¼š
    *   å°† `ClientInstruction` ä» NONE æ›´æ–°ä¸ºï¼š
    *   PAY â€“ å®¢æˆ·æ˜ç¡®æŒ‡ç¤ºç¼´çº³è¯¥å¹´åº¦å¹´è´¹ï¼›
    *   ABANDON â€“ å®¢æˆ·æŒ‡ç¤ºæ”¾å¼ƒè¯¥å¹´åº¦å¹´è´¹ï¼ˆä¹Ÿå¯èƒ½æ„å‘³ç€æ”¾å¼ƒåç»­å¹´è´¹ï¼‰ï¼›

*   å¯åœ¨ `Remark` ä¸­è®°å½•æŒ‡ç¤ºç»†èŠ‚ï¼ˆå¦‚é‚®ä»¶æ—¥æœŸã€è”ç³»äººï¼‰ã€‚
    3\.  æ‰¹é‡æ“ä½œï¼š
    *   å¯ä»¥å¯¹åŒä¸€æ¡ˆå¤šå¹´åº¦è¿›è¡Œç»Ÿä¸€è®¾ç½®ï¼ˆä¾‹å¦‚è¿ç»­å‡ ä¸ªå¹´åº¦ PAY æˆ– ABANDONï¼‰ï¼›
    *   å¯¹ ABANDON çš„å¹´åº¦ï¼Œå¾‹æ‰€å¯é€‰æ‹©åŒæ—¶å°†è¯¥å¹´åº¦ä¹‹åæ‰€æœ‰æœªç”Ÿæˆè‰å•çš„å¹´åº¦ ClientInstruction ä¹Ÿè®¾ä¸º ABANDONï¼ˆè§†æ”¿ç­–è€Œå®šï¼‰ã€‚

### 13.5.2 ç”Ÿæˆå¹´è´¹é€šçŸ¥å‡½ï¼ˆT\_Documentï¼šANNUITY\_NOTICEï¼‰

**é€‚ç”¨**

*   å¯¹ä»ä¸º `ClientInstruction=NONE` çš„ä»»åŠ¡ï¼Œéœ€è¦å¯¹å®¢æˆ·å‘å‡ºâ€œå¹´è´¹å³å°†åˆ°æœŸï¼Œè¯·æŒ‡ç¤ºâ€é€šçŸ¥ã€‚

**æ­¥éª¤**

1.  å¹´è´¹å‘˜åœ¨åˆ—è¡¨ä¸­å‹¾é€‰ä¸€äº› `ClientInstruction=NONE` çš„è¡Œï¼›
2.  ç‚¹å‡»â€œç”Ÿæˆé€šçŸ¥å‡½â€ï¼š
    *   ç³»ç»Ÿä¸ºæ¯æ¡ˆæ„é€ æ•°æ®æºï¼š
        *   æ¡ˆå·åŸºæœ¬ä¿¡æ¯ T\_Case
        *   å¹´è´¹ä»»åŠ¡åˆ—è¡¨ï¼ˆå¯èƒ½å¤šå¹´åº¦ä¸€èµ·é€šçŸ¥ï¼‰
    *   è°ƒç”¨æ¨¡æ¿ç³»ç»Ÿï¼Œä½¿ç”¨ `ANNUITY_NOTICE` æ¨¡æ¿ç”Ÿæˆ Word æ–‡ä»¶ï¼ˆä¸­/è‹±æ–‡ç‰ˆè§†å®¢æˆ·éœ€æ±‚ï¼‰ï¼›
    *   æ’å…¥ `T_Document`ï¼š
        *   CaseID, DocType=CLIENT\_OUT, TemplateCode=ANNUITY\_NOTICE, DispatchDate=ä»Šæ—¥, DocName=â€œå¹´è´¹é€šçŸ¥å‡½â€ç­‰ï¼›
    *   ä¸ºæ¯ä»½é€šçŸ¥å‡½ä¸Šä¼ /ç”Ÿæˆ Word/PDF é™„ä»¶åˆ° `T_DocAttachment`ã€‚
3.  æ›´æ–° `T_AnnuityTask`ï¼š
    *   å¯¹å‚ä¸ç”Ÿæˆé€šçŸ¥å‡½çš„ä»»åŠ¡ï¼š
    *   `NoticeSent = true`
    *   `NotifyCount += 1`

**ç»“æœ**

*   å¹´è´¹é€šçŸ¥å‡½ä½œä¸ºç³»ç»Ÿä¸­é—´æ–‡ä»¶è¢«è®°å½•ä¸‹æ¥ï¼›
*   ä»»åŠ¡å­—æ®µä¸­ NoticeSent/NotifyCount æ›´æ–°ï¼Œç”¨äºåç»­è·Ÿè¸ªã€‚

***

## 13.6 Phase D4ï¼šå¯¹ PAY çš„å¹´åº¦ç”Ÿæˆå¹´è´¹è‰å•ï¼ˆT\_FeeDraft/T\_FeeItemï¼‰

**è§’è‰²**

*   å¹´è´¹å‘˜ / Finance

**ç›®æ ‡**

*   ä¸ºæ‰€æœ‰â€œå®¢æˆ·æŒ‡ç¤º PAY ä¸”å°šæœªç”Ÿæˆè‰å•â€çš„å¹´åº¦äº§ç”Ÿå¹´è´¹è‰å•ï¼Œä¸ºä¸‹ä¸€æ­¥å®˜è´¹æ¸…å•å’Œè´¦å•åšå‡†å¤‡ã€‚

### 13.6.1 é€‰æ‹© PAY ä¸” DraftGenerated=false çš„å¹´è´¹ä»»åŠ¡

åœ¨â€œå¹´è´¹ä»»åŠ¡åˆ—è¡¨â€ç•Œé¢ï¼š

*   ä½¿ç”¨ç­›é€‰æ¡ä»¶ï¼š
    *   ClientInstruction=PAY
    *   DraftGenerated=false
*   å¯æŒ‰å®¢æˆ·/å›½åˆ«/æ¡ˆå·ç­‰æ¡ä»¶ç¼©å°èŒƒå›´ï¼›
*   å¹´è´¹å‘˜å‹¾é€‰ç›¸åº”è¡Œã€‚

### 13.6.2 åŒæ—¶ç¼´å½“å¹´å’Œä¸‹ä¸€å¹´çš„æƒ…å½¢ï¼ˆPayNextYearï¼‰

æŸäº›å®¢æˆ·æŒ‡ç¤ºï¼šâ€œæœ¬æ¬¡åŒæ—¶ç¼´ä»Šå¹´å’Œä¸‹ä¸€å¹´åº¦çš„å¹´è´¹â€ï¼Œå¯é€šè¿‡ï¼š

*   å‹¾é€‰â€œåŒæ—¶ç¼´ä¸‹ä¸€å¹´åº¦ï¼ˆPayNextYearï¼‰â€é€‰é¡¹ï¼Œå¼•å¯¼ç³»ç»ŸåŒæ—¶ä¸º YearNo å’Œ YearNo+1 ç”Ÿæˆå¹´è´¹è‰å•æ˜ç»†ã€‚

### 13.6.3 è‰å•ç”Ÿæˆé€»è¾‘

å¯¹äºæ¯ä¸ªé€‰ä¸­çš„ `T_AnnuityTask` è¡Œï¼š

1.  è®¡ç®—å¹´è´¹é‡‘é¢ï¼ˆå®˜è´¹+æœåŠ¡è´¹ï¼‰ï¼š
    *   æŸ¥è¯¢ `T_FeeRate(Group=ANNUITY)` æŒ‰ CountryCode/CaseType/PatentCategory/YearNo åŒ¹é…è´¹ç‡ï¼›

*   è®¡ç®— `GovFeeAmt` å’Œ `ServiceFeeAmt`ï¼›
*   è€ƒè™‘ FeeReductionï¼ˆCase.FeeReductionï¼‰å¯¹å®˜è´¹å‡å…ï¼›
    2\.  åˆ›å»º/æ›´æ–° `T_FeeDraft`ï¼š
    *   å»ºè®®ç­–ç•¥ï¼š
    *   æ¯æ¡ˆä¸€ä»½ ANNUITY\_FEE è‰å•ï¼ŒåŒ…å«å¤šä¸ªå¹´åº¦æ˜ç»†ï¼›
*   è‹¥æœ¬æ¡ˆå·²æœ‰ `T_FeeDraft(Type=ANNUITY_FEE)` ä¸” Status=OPENï¼Œåˆ™åœ¨è¯¥è‰å•ä¸­è¿½åŠ è´¹ç”¨æ˜ç»†ï¼›
*   å¦åˆ™ï¼Œæ–°å»ºè‰å•ï¼š
    *   `CaseID`=æœ¬æ¡ˆ CaseID
    *   `Type=ANNUITY_FEE`
    *   `Currency`=å®¢æˆ·å¸ç§
    *   `Status=OPEN`
        3\.  ä¸ºæ¯ä¸ªå¹´åº¦ç”Ÿæˆä¸¤æ¡ `T_FeeItem`ï¼š
    *   GOVï¼š
    *   FeeType=GOV
    *   YearNo=å½“å‰å¹´åº¦
    *   Amount = è®¡ç®—å‡ºçš„ GovFeeAmt
    *   åº”ç”¨ FeeReductionï¼›
*   SERVICEï¼š
    *   FeeType=SERVICE
    *   YearNo=å½“å‰å¹´åº¦
    *   Amount = è®¡ç®—å‡ºçš„ ServiceFeeAmt
        4\.  æ›´æ–°è‰å•å¤´ `TotalGov/TotalService/TotalMisc/TotalAmt`ã€‚

1.  æ›´æ–°è¯¥å¹´åº¦ä»»åŠ¡ï¼š
    *   `DraftGenerated=true`

*   `GovFeeAmt/ServiceFeeAmt` å…è´¹é€‰é¡¹ï¼šå¯å›å†™ä¸ºå®é™…è®¡ç®—å€¼ï¼›
*   è‹¥ PayNextYear=trueï¼Œåˆ™å¯¹ä¸‹ä¸€å¹´åº¦çš„ T\_AnnuityTask ä¹Ÿè¿›è¡Œç›¸åŒå¤„ç†ã€‚

**ç»“æœ**

*   å¯¹å®¢æˆ·æŒ‡ç¤º PAY çš„å¹´åº¦ï¼Œå¹´è´¹è‰å•ç”Ÿæˆå®Œæˆï¼›
*   æ ‡è®° DraftGenerated=true é˜²æ­¢é‡å¤ç”Ÿæˆï¼›
*   é¡¶å±‚è‰å•è®°å½•å­˜å‚¨å…¨éƒ¨å¹´åº¦çš„æ˜ç»†ï¼Œå¹¶å¯ä¾›è´¦å•åŠå®˜è´¹æ¸…å•ä½¿ç”¨ã€‚

***

## 13.7 Phase D5ï¼šå¹´è´¹å®˜è´¹æ¸…å•ç”Ÿæˆ & å®˜æ–¹ç¼´è´¹ï¼ˆT\_PayList/T\_GovPaymentï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å°†å¤šå¹´çš„å¹´è´¹å®˜è´¹é›†ä¸­æˆä¸€æ‰¹å®˜è´¹æ¸…å•ï¼Œä»¥æ–¹ä¾¿ç»Ÿä¸€ç¼´è´¹å¹¶å°†ç¼´è´¹å‡­è¯è®°å½•åœ¨ç³»ç»Ÿä¸­ã€‚

### 13.7.1 ä»å¹´è´¹è‰å•ä¸­æå– GOV æ˜ç»†

åœ¨â€œå®˜è´¹æ¸…å•â€ç•Œé¢ï¼Œé€‰æ‹©ï¼š

*   Type=ANNUITY
*   æ ¹æ®éœ€è¦ç­›é€‰ Country/Client/YearNo ç­‰æ¡ä»¶ï¼›

ç³»ç»Ÿåˆ—å‡ºæ‰€æœ‰ `T_FeeItem` æ»¡è¶³ï¼š

*   è‰å• Type=ANNUITY\_FEE
*   FeeType=GOV
*   å°šæœªè¢«æŸä¸ªæ¸…å•ä½¿ç”¨ï¼ˆå¯ä»¥é€šè¿‡æŸå­—æ®µæ ‡æ³¨ï¼Œé¿å…ä¸€æ¡ GOV é¡¹åŒæ—¶å‡ºç°åœ¨å¤šä¸ª PayListï¼‰

### 13.7.2 ç”Ÿæˆæ¸…å•

1.  Finance å‹¾é€‰æƒ³è¦åˆå¹¶æˆä¸€ä¸ªæ¸…å•çš„ GOV æ˜ç»†ï¼›
2.  ç‚¹å‡»â€œç”Ÿæˆå¹´è´¹å®˜è´¹æ¸…å•â€ï¼š

**å†™å…¥ `T_PayList`**

*   ListNo è‡ªåŠ¨ç”Ÿæˆ
*   Type=ANNUITY
*   PlannedPayDate=Finance è¾“å…¥
*   Currency=ç»Ÿä¸€ç¼´è´¹å¸ç§ï¼ˆå¦‚ RMBï¼‰
*   TotalAmt=æ‰€æœ‰é€‰ä¸­ GovFee LocalAmount ä¹‹å’Œ
*   Status=DRAFT

**å†™å…¥ `T_GovPayment`**

å¯¹æ¯ä¸ªé€‰ä¸­ GOV æ˜ç»†ï¼ˆFeeItemï¼‰ï¼š

*   PayListID = æ–°å»ºçš„ PayListID
*   CaseID = FeeDraft.CaseID
*   ItemID = FeeItem.ItemID
*   FeeCode/YearNo å¤åˆ¶
*   PlannedAmt = FeeItem.LocalAmount
*   PlannedCurrency = PayList.Currency
*   PlannedPayDate = PayList.PlannedPayDate
*   Paid\* å­—æ®µåˆå§‹ä¸ºç©º

### 13.7.3 ç¼´è´¹ & ç™»è®°

1.  Finance ä½¿ç”¨æ¸…å•ç”Ÿæˆå®˜æ–¹é€‚é…æ–‡ä»¶å¹¶ç¼´è´¹ï¼›
2.  ç¼´è´¹åï¼Œåœ¨ `T_PayList` ç•Œé¢æ‰§è¡Œâ€œç¼´è´¹ç™»è®°â€ï¼š
    *   å¡«å†™ `ActualPayDate`, `InvoiceNoFrom`, `InvoiceNoTo`, Status=PAIDï¼›
3.  æ›´æ–°æ¯æ¡ `T_GovPayment`ï¼š
    *   `PaidAmt`, `PaidCurrency`, `PaidDate`, `VoucherNo`, `InvoiceNo`ã€‚
    1.  å¯åŒæ—¶æ›´æ–° `T_AnnuityTask.IsOverdue=false`ï¼ˆè‹¥åŸå…ˆä¸º trueï¼‰ä»¥åŠåœ¨å¹´è´¹æ¨¡å—è®°å½•â€œè¯¥å¹´å¹´è´¹å·²ç¼´â€çš„çŠ¶æ€ã€‚

**ç»“æœ**

*   å¹´è´¹å®˜è´¹çš„ç¼´çº³åœ¨ç³»ç»Ÿä¸­ä¸å„å¹´åº¦ä»»åŠ¡ã€è‰å•ã€è´¦å•ä¿æŒä¸€è‡´æ€§ï¼›
*   å®˜è´¹ç¼´è´¹æƒ…å†µåœ¨â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢ â€“ ä¸ŠåŠè¡¨â€ä¸­å¯è¢«æŸ¥çœ‹ã€‚

***

## 13.8 Phase D6ï¼šå¹´è´¹è´¦å• & å®¢æˆ·æ”¶æ¬¾ï¼ˆT\_Bill/T\_Payment/T\_Offset/T\_CaseReceiptï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å°†å¹´è´¹è‰å•ä¸­å®˜è´¹+æœåŠ¡è´¹éƒ¨åˆ†è½¬æ¢ä¸ºå¯¹å®¢æˆ·çš„åº”æ”¶è´¦å•ï¼Œå¹¶é€šè¿‡æ”¶æ¬¾ä¸å†²é”€å®Œæˆå…¨éƒ¨è´¢åŠ¡é—­ç¯ã€‚

### 13.8.1 ä» ANNUITY\_FEE è‰å•ç”Ÿæˆå¹´è´¹è´¦å•

**é€‰æ‹©è‰å•**

*   åœ¨â€œè´¹ç”¨è‰å•â€åˆ—è¡¨ç­›é€‰ï¼šType=ANNUITY\_FEEï¼ŒStatus=OPEN æˆ– LOCKEDï¼ˆè§†ç­–ç•¥ï¼‰ï¼›
*   æŒ‰ ClientID ç­›é€‰å®¢æˆ·ï¼›
*   å‹¾é€‰æŸå®¢æˆ·åœ¨æŸæœŸå†…ï¼ˆå¦‚æŸå¹´æˆ–æŸæ—¶é—´æ®µå†…ï¼‰çš„æ‰€æœ‰å¹´è´¹è‰å•ã€‚

**è´¦å•ç”Ÿæˆ**

*   åŒæ¨¡å—äº” 6.4.1ï¼š
    *   ç”Ÿæˆ `T_Bill`ï¼šDirection=AR, BillDate, DueDate, Currency, DiscountRateï¼ˆå¯¹æœåŠ¡è´¹éƒ¨åˆ†å¯åº”ç”¨ï¼‰
    *   ç”Ÿæˆ `T_BillItem`ï¼šå¤åˆ¶æ‰€æœ‰ FeeItemï¼ˆYearNo, FeeType, Amount ç­‰ï¼‰ï¼ŒCaseID=å„æ¡ˆ CaseID

**é‡‘é¢æ±‡æ€»**

*   `TotalGov` = æ‰€æœ‰å¹´è´¹å®˜è´¹ LocalAmount åˆè®¡
*   `TotalService` = æ‰€æœ‰å¹´è´¹æœåŠ¡è´¹ LocalAmount åˆè®¡
*   `TotalMisc` = å…¶ä»–æ‚è´¹
*   `Amount = TotalGov+TotalService+TotalMisc`
*   `Balance = Amount`
*   `Status = UNSETTLED`

### 13.8.2 å®¢æˆ·ä»˜æ¬¾ä¸è´¦å•å†²é”€

**æ”¶æ¬¾ç™»è®°**

*   å®¢æˆ·æ”¶åˆ°å¹´è´¹è´¦å•åï¼Œä¸€æ¬¡æˆ–å¤šæ¬¡ä»˜æ¬¾ï¼š
    *   æ¯æ¬¡ä»˜æ¬¾ `T_Payment/T_PaymentLine` å¦‚åœºæ™¯ A çš„ Phase A7ã€‚

**å†²é”€**

*   Finance åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ä¸­é€‰æ‹© PaymentLineï¼Œå°†å…¶åˆ†é…ç»™å„å¹´è´¹è´¦å•ï¼š
    *   å†™å…¥ `T_Offset`
    *   æ›´æ–° `T_Bill.Balance/Status` å’Œ `T_PaymentLine.BalanceAmt/AllocatedAmt`

### 13.8.3 å¹´è´¹ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ï¼ˆT\_CaseReceiptï¼‰

*   æŒ‰è´¦å•æ˜ç»† CaseID/FeeCode/YearNo/FeeType æ‹†åˆ† OffsetAmt â†’ æ›´æ–°/åˆ›å»º `T_CaseReceipt`ï¼›
*   å¯¹å¹´è´¹ç›¸å…³çš„è®°å½•ï¼š
    *   FeeCode = å¯¹åº”å¹´è´¹ä»£ç 
    *   YearNo = å¹´åº¦
    *   FeeType=GOV / SERVICE
    *   ReceivableAmt = å¯¹åº”è´¦å•æ˜ç»†é‡‘é¢ï¼ˆæˆ–ç´¯è®¡é‡‘é¢ï¼‰
    *   ReceivedAmt é€æ¬¡ç´¯ç§¯
    *   IsArrears = ReceivedAmt\<ReceivableAmt

**ç»“æœ**

*   æ¡ˆå·è§†è§’å¯ä»¥æ¸…æ¥šçœ‹åˆ°ï¼š
    *   æ¯å¹´å¹´è´¹åº”æ”¶/å®æ”¶/æ¬ æ¬¾
*   è´¢åŠ¡è§†è§’å¯ä»¥åœ¨â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢â€ä¸­çœ‹åˆ°æ‰€æœ‰å¹´è´¹ç¼´è´¹ä¸å®¢æˆ·æ”¶æ¬¾æƒ…å†µã€‚

***

## 13.9 Phase D7ï¼šå¤šå¹´åº¦æ»šåŠ¨ã€ç»ˆæ­¢ä¸æ¢å¤

**è§’è‰²**

*   å¹´è´¹å‘˜
*   Formalities / Agent
*   Finance

**ç›®æ ‡**

*   å°† D2â€“D6 è¿™ä¸ªâ€œå¹´åº¦å¾ªç¯â€é‡å¤åº”ç”¨äºåç»­å¹´ä»½ï¼Œç›´åˆ°ä¸“åˆ©æœ‰æ•ˆæœŸç»“æŸæˆ–æ¡ˆä»¶å› æ”¾å¼ƒ/ç»ˆæ­¢è€Œä¸­æ­¢å¹´è´¹ç›‘è§†ã€‚

### 13.9.1 å¹´åº¦æ»šåŠ¨

*   æ¯å¹´ï¼ˆæˆ–æ¯å­£åº¦ï¼‰é‡å¤æ‰§è¡Œï¼š
    *   D2ï¼šæå–æœªæ¥ X ä¸ªæœˆåˆ°æœŸçš„ T\_AnnuityTaskï¼›
    *   D3ï¼šæ›´æ–° ClientInstruction & å‘é€å¹´è´¹é€šçŸ¥å‡½ï¼›
    *   D4ï¼šç”Ÿæˆå¹´è´¹è‰å•ï¼›
    *   D5ï¼šç”Ÿæˆå®˜è´¹æ¸…å•å¹¶ç¼´è´¹ï¼›
    *   D6ï¼šç”Ÿæˆå¹´è´¹è´¦å• & æ”¶æ¬¾ï¼›

**å¹´è´¹ä»»åŠ¡çŠ¶æ€æ›´æ–°**

*   å¯¹æˆåŠŸç¼´è´¹ä¸”è´¦å•ä¹Ÿç»“æ¸…çš„å¹´åº¦ï¼š
    *   å¯åœ¨å¹´è´¹ä»»åŠ¡ä¸Šè®°å½•ï¼šä¾‹å¦‚ `Paid=true`ï¼ˆå¯å¢åŠ å­—æ®µï¼‰
    *   IsOverdue=false

### 13.9.2 ç»ˆæ­¢ï¼šæœªç¼´å¹´è´¹å¯¼è‡´ä¸“åˆ©å¤±æ•ˆ

æŸå¹´åº¦ï¼Œå®¢æˆ·æŒ‡ç¤º ABANDON æˆ–æœªåœ¨å®½é™æœŸå†…ç¼´è´¹ï¼š

1.  å¯¹å¯¹åº” `T_AnnuityTask`ï¼š
    *   `ClientInstruction = ABANDON`
    *   æˆ– `IsOverdue=true` ä¸”ç³»ç»Ÿåˆ¤æ–­å·²ç»è¶…å‡ºå®½é™æœŸä¸å†ç¼´è´¹
2.  æ›´æ–° `T_Case.Status`ï¼š
    *   æ ¹æ®æ³•å¾‹è§„åˆ™ï¼š
    *   ä» GRANTED â†’ TERMINATED æˆ– INVALIDATEDï¼ˆå¦‚æœå¹´è´¹ä¸ç¼´é€ æˆæƒåˆ©æ¶ˆç­ï¼‰
        3\.  ä¹‹åçš„å¹´åº¦ä»»åŠ¡ï¼š
    *   å¯¹å°šæœªç”Ÿæˆå¹´è´¹è‰å•ä¸” ClientInstruction=NONE çš„æœªæ¥å¹´è´¹ä»»åŠ¡ï¼Œå¯ç»Ÿä¸€æ ‡è®°ä¸º ABANDON å¹¶ä¸å†è¿›è¡Œé€šçŸ¥/è‰å•ç”Ÿæˆï¼›

*   æˆ–æ ‡è®° IsOverdue/ä¸å†æ˜¾ç¤ºï¼Œè§†ä¸šåŠ¡éœ€æ±‚ã€‚

### 13.9.3 æ¢å¤ï¼ˆæ¢å¤æƒåˆ©ï¼‰

å¯¹äºå…è®¸â€œæ¢å¤å¹´è´¹â€çš„å›½å®¶ï¼š

1.  åœ¨è¿‡æœŸåä½†ä»åœ¨æ¢å¤æœŸé™å†…ï¼Œå®¢æˆ·å¯èƒ½æŒ‡ç¤ºæ¢å¤ï¼š
    *   æ–°å»ºä¸€ç±»å¹´è´¹ä»»åŠ¡/æ¢å¤ä»»åŠ¡ï¼ˆå¯ç”¨ T\_AnnuityTask æˆ–å¦ç«‹è®°å½•ï¼‰ï¼Œå¹¶è®¾ç½® â€œæ¢å¤è´¹â€è‰å•ï¼›
    *   ä» T\_FeeRate ä¸­æŸ¥æ‰¾æ¢å¤è´¹è´¹ç‡ï¼Œç”Ÿè‰å• â†’ å®˜è´¹æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾ï¼›
2.  è‹¥æ¢å¤æˆåŠŸï¼š
    *   æ›´æ–° `T_Case.Status` ä» TERMINATED/INVALIDATED å›åˆ° GRANTEDï¼›

*   æ ¹æ®æœ‰æ•ˆæœŸé‡æ–°ç”Ÿæˆæˆ–å¯ç”¨åç»­å¹´åº¦ T\_AnnuityTaskï¼›
*   å¯¹åº”æ¢å¤è´¹ç”¨ä¹Ÿå¯è®¡å…¥ææˆã€‚

***

## 13.10 Phase D8ï¼šå¹´è´¹æœåŠ¡è´¹ä¸ææˆï¼ˆå¯é€‰ï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Financeï¼ˆé…ç½®/ä½¿ç”¨ï¼‰

**ç›®æ ‡**

*   å°†å¹´è´¹æœåŠ¡è´¹çº³å…¥ææˆæœºåˆ¶ï¼Œä»¥å¥–åŠ±é•¿æœŸç»´æŠ¤å·¥ä½œçš„ä»£ç†äººã€‚

### 13.10.1 å¹´è´¹ææˆè§„åˆ™ï¼ˆT\_CommissionRule ä¸­ CaseType=NORMAL æˆ–ä¸“é—¨ CaseType=ANNUITY\_SERVICEï¼‰

**é…ç½®**

*   å¯å®šä¹‰ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ï¼š
    *   CaseType å¯ä»ä¸º NORMAL æˆ–ä¸ºå•ç‹¬çš„ ANNUITY\_SERVICE ç±»å‹ï¼ˆè¿™å–å†³äºæ˜¯å¦ä¸ºå¹´è´¹ä¸“é—¨æ‹†ä¸€ä¸ª CaseTypeï¼‰ã€‚
    *   Stage1Rate/Stage2Rateï¼š
        *   ä¾‹å¦‚ S1=0ï¼ˆä¸åœ¨å¹´è´¹é˜¶æ®µç»“ç®—ä¸€æ¬¡ææˆï¼Œè€Œåªåœ¨æ–°æ¡ˆ/æˆæƒé˜¶æ®µï¼‰ï¼ŒS2=0.1ï¼ˆå¹´è´¹ä»£ç¼´å¯¹æˆæƒé˜¶æ®µäºŒæ¬¡ææˆæœ‰è´¡çŒ®ï¼‰ï¼›
        *   æˆ– S1=0.1ã€S2=0ï¼ˆå¹´è´¹åªåœ¨é¦–æ¬¡æ”¶å–æ—¶ç»™ä¸€æ¬¡ææˆï¼‰ã€‚
*   BaseModeï¼š
    *   å¤šæ•°æƒ…å†µä¸‹ BY\_SERVICE\_FEEï¼šå¹´è´¹æœåŠ¡è´¹ç›´æ¥ä¹˜ä»¥ä¸€å®šæ¯”ä¾‹è®¡å…¥ BaseFeeï¼›
    *   å¯é€‰æ‹© FIXED\_PER\_CASEï¼Œåœ¨å¹´è´¹é¡¹ç›®ä¸­ç»™å›ºå®šé…¬é‡‘åŸºæ•°ã€‚

### 13.10.2 å¹´è´¹è´¦å•ç”Ÿæˆæ—¶æ›´æ–° `T_Commission`

*   åœ¨ä»å¹´è´¹è‰å•ç”Ÿæˆå¹´è´¹è´¦å•æ—¶ï¼Œä¸åœºæ™¯ A å’Œ B ç›¸åŒï¼š
    *   ä»è¯¥è´¦å•ä¸­ç­›é€‰ `FeeType=SERVICE` çš„ BillItemï¼ŒæŒ‰ CaseID è®¡ç®— `ServiceSum_Annuity(case)`ï¼›
    *   è°ƒç”¨ Commission ç”Ÿæˆ/ç´¯åŠ é€»è¾‘ï¼š
        *   æ¨¡å¼ Aï¼šå°† ServiceSum\_Annuity ç´¯ç§¯åˆ°è¯¥æ¡ˆçš„ `T_Commission.BaseFee` ä¸­ï¼›
        *   æ¨¡å¼ Bï¼šä¸ºæ¯å¹´åº¦å¹´è´¹åˆ›å»ºå•ç‹¬ Commission è®°å½•ã€‚
*   è¿™æ ·åœ¨ä¸€ä¸ªé•¿æœŸç»´ç³»çš„æ¡ˆä»¶ä¸Šï¼Œä»£ç†äººä¸ä»…ä»æ–°æ¡ˆ/æˆæƒé˜¶æ®µææˆï¼Œè¿˜é€å¹´ä»å¹´è´¹æœåŠ¡è´¹ä¸­è·å¾—ä¸€å®šæ¯”ä¾‹çš„é…¬åŠ³ã€‚

### 13.10.3 ç»“ç®—é˜¶æ®µ

*   å¯åœ¨æŸç»“ç®—æœŸé—´ï¼ˆæ¯”å¦‚æ¯å¹´/æ¯å­£åº¦ï¼‰å°†æ‰€æœ‰å¯ç»“ç®—çš„å¹´è´¹æœåŠ¡è´¹ææˆè®°å½•çº³å…¥ `T_CommissionSettlement`ï¼›
*   S1/S2 é˜¶æ®µåˆ’åˆ†å’Œ WaitPay/ForceSettle é€»è¾‘ä¸æ¨¡å—å…­ä¸­ä¸€è‡´ã€‚

***

## 13.11 åœºæ™¯ D â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆè¡¨

| Phase         | è¡¨                                               | å…³é”®å­—æ®µå˜æ›´                                                                                                                                                                           |
| ------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| D0 æˆæƒä¸åˆå§‹è®¾ç½®    | T\_Case                                         | åœ¨ GRANT\_NOTICE å½•å…¥æ—¶ï¼Œå°† Status=GRANTEDï¼Œå†™å…¥ IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntilï¼›è‹¥è¯¥æ¡ˆéœ€å¹´è´¹ç›‘è§†ï¼Œåˆ™ IsFeeMonitor=trueã€‚                                                    |
| D1 å¹´è´¹ä»»åŠ¡åˆå§‹åŒ–    | T\_AnnuityTask                                  | å¯¹ CaseID åŠå…¶å¹´åº¦èŒƒå›´ç”Ÿæˆå¤šæ¡è®°å½•ï¼šYearNo, DueDate, GovFeeAmt/ServiceFeeAmt(å¯åˆå§‹ä¸º0), Currency, ClientInstruction=NONE, NotifyCount=0, DraftGenerated=false, NoticeSent=false, IsOverdue=falseã€‚ |
| D2 å¹´è´¹ä»»åŠ¡æå–     | T\_AnnuityTask                                  | æ— ç»“æ„å˜æ›´ï¼ŒæŒ‰æ¡ä»¶ï¼ˆDueDateèŒƒå›´/ClientInstruction/DraftGenerated/NoticeSent/IsOverdueï¼‰æŸ¥è¯¢å‡ºâ€œæœªæ¥ X ä¸ªæœˆåˆ°æœŸâ€çš„ä»»åŠ¡é›†åˆï¼›å¦‚å½“å‰æ—¥æœŸè¶… DueDateï¼Œå¯æ›´æ–° IsOverdue=trueã€‚                                                 |
| D3 å®¢æˆ·æŒ‡ç¤º & é€šçŸ¥å‡½ | T\_AnnuityTask                                  | å°† ClientInstruction ä» NONE æ›´æ–°ä¸º PAY/ABANDONï¼›å¯¹å‘é€é€šçŸ¥å‡½çš„ä»»åŠ¡å°† NoticeSent=true, NotifyCount++ã€‚                                                                                            |
|               | T\_Document                                     | å¯¹ç”Ÿæˆé€šçŸ¥å‡½çš„æ¡ˆä»¶æ’å…¥ `DocType=CLIENT_OUT, Template=ANNUITY_NOTICE` çš„è®°å½•ï¼Œå¹¶å­˜å…¥é™„ä»¶ã€‚                                                                                                             |
| D4 å¹´è´¹è‰å•ç”Ÿæˆ     | T\_FeeRate                                      | æŒ‰ Group=ANNUITY/YearNo/Country/CaseType/Category åŒ¹é…è´¹ç‡ï¼Œè®¡ç®—å®˜è´¹/æœåŠ¡è´¹é‡‘é¢ã€‚                                                                                                                |
|               | T\_FeeDraft                                     | ä¸ºæ¯æ¡ˆåˆ›å»ºæˆ–æ›´æ–° Type=ANNUITY\_FEE çš„è‰å•ï¼ŒCaseID/ Currency/Status=OPENã€‚                                                                                                                     |
|               | T\_FeeItem                                      | å¯¹æ¯ä¸€å¹´åº¦ç”Ÿæˆä¸¤æ¡æ˜ç»†ï¼šFeeType=GOV å’Œ FeeType=SERVICEï¼ŒYearNo=å¹´å·ï¼ŒAmount/LocalAmount æŒ‰è´¹ç‡å’Œè´¹å‡è§„åˆ™è®¡ç®—ï¼›æ›´æ–°è‰å• TotalGov/TotalService/TotalMisc/TotalAmtï¼›å¯¹åº” T\_AnnuityTask.DraftGenerated=trueã€‚           |
| D5 å®˜è´¹æ¸…å• & ç¼´è´¹  | T\_PayList                                      | ä»å¹´è´¹è‰å•ä¸­ GOV æ˜ç»†ç”Ÿæˆ Type=ANNUITY çš„å®˜è´¹æ¸…å•ï¼šListNo, PlannedPayDate, Currency, TotalAmt, Status=DRAFT/PAIDã€‚                                                                                |
|               | T\_GovPayment                                   | ä¸ºæ¯ä¸ª GOV FeeItem æ’å…¥è®°å½•ï¼šPayListID/CaseID/ItemID/FeeCode/YearNo/PlannedAmt/PlannedCurrency/PlannedPayDateï¼Œä»¥åŠç¼´è´¹å PaidAmt/PaidDate/InvoiceNo/VoucherNoã€‚                                |
| D6 å¹´è´¹è´¦å• & æ”¶æ¬¾  | T\_Bill                                         | ä» ANNUITY\_FEE è‰å•ç”Ÿæˆå¹´è´¹è´¦å•ï¼šDirection=AR, BillDate, DueDate, Currency, TotalGov/TotalService/TotalMisc/Amount/Balance, Status=UNSETTLEDã€‚                                             |
|               | T\_BillItem                                     | å¯¹æ¯ä¸ª FeeItem ç”Ÿæˆè´¦å•æ˜ç»†ï¼šCaseID/DraftID/FeeItemID/FeeCode/FeeName/YearNo/FeeType/Amount/Currency/LocalAmountã€‚                                                                          |
|               | T\_Payment/T\_PaymentLine                       | è®°å½•å®¢æˆ·çš„å¹´è´¹è´¦å•ä»˜æ¬¾ã€‚                                                                                                                                                                     |
|               | T\_Offset                                       | å¯¹è´¦å•è¿›è¡Œå†²é”€ï¼›å‡å°‘ `T_Bill.Balance`ï¼Œå¹¶è°ƒæ•´ `T_PaymentLine.AllocatedAmt/BalanceAmt`ï¼›æ ¹æ® OffsetAmt åˆ†é…åˆ°å„æ˜ç»†ã€‚                                                                                     |
|               | T\_CaseReceipt                                  | æ‹†åˆ† OffsetAmt åˆ° (CaseID, FeeCode, YearNo, FeeType)ï¼Œè®°å½•å¹´è´¹ ReceivableAmt/ReceivedAmt/IsArrears/ReceiptDate/InvoiceNo ç­‰ã€‚                                                              |
| D7 å¹´åº¦æ»šåŠ¨/ç»ˆæ­¢/æ¢å¤ | T\_AnnuityTask                                  | æ¯å¹´/æ¯å­£éƒ½ç»§ç»­ä½¿ç”¨ï¼›å¯¹é€¾æœŸä»»åŠ¡è®¾ç½® IsOverdue=trueï¼›å¯¹ ABANDON ä»»åŠ¡ä¿ç•™è®°å½•ï¼›æ¢å¤æ—¶å¯èƒ½æ–°å»ºâ€œå¹´è´¹æ¢å¤â€ä»»åŠ¡æˆ–æ›´æ–°çŠ¶æ€ã€‚                                                                                                         |
|               | T\_Case                                         | è‹¥æŸå¹´åº¦å¹´è´¹æœªç¼´æˆ–å®¢æˆ· ABANDONï¼ŒæŒ‰æ³•å¾‹è§„åˆ™å°† Status ä¿®æ”¹ä¸º TERMINATED/INVALIDATEDï¼›æ¢å¤æƒåˆ©æˆåŠŸæ—¶å°† Status æ¢å¤ä¸º GRANTEDï¼Œå¹¶é‡å¯åç»­å¹´è´¹ç®¡ç†ã€‚                                                                              |
| D8 å¹´è´¹ææˆï¼ˆå¯é€‰ï¼‰   | T\_CommissionRule                               | ä¸ºå¹´è´¹æœåŠ¡è´¹å®šä¹‰ææˆè§„åˆ™ï¼ˆBaseMode=BY\_SERVICE\_FEEï¼ŒStage1Rate/Stage2Rate è§†ç­–ç•¥ï¼‰ã€‚                                                                                                               |
|               | T\_Commission                                   | åœ¨å¹´è´¹è´¦å•ç”Ÿæˆæ—¶ï¼Œå°†å¹´è´¹æœåŠ¡è´¹é‡‘é¢ç´¯åŠ æˆ–å•ç‹¬è®¡å…¥ Commission.BaseFeeï¼Œå¹¶è®¡ç®— S1/S2\_Amtï¼›WaitPay/ForceSettle æŒ‰ç­–ç•¥è®¾ç½®ã€‚                                                                                            |
|               | T\_CommissionSettlement/T\_CommissionSettleLine | åœ¨ææˆç»“ç®—æœŸé—´ï¼Œå°†å¹´è´¹æœåŠ¡è´¹ææˆçº³å…¥ç»“ç®—æ‰¹æ¬¡ï¼Œä¸å…¶ä»–é˜¶æ®µææˆä¸€å¹¶å¤„ç†ã€‚                                                                                                                                              |

***

âœ… åˆ°è¿™é‡Œï¼Œ**E2E åœºæ™¯ Dï¼šå¹´è´¹å‘¨æœŸï¼ˆå¤šå¹´åº¦æ»šåŠ¨ï¼‰** å·²ç»æŒ‰æ—¶é—´çº¿ + å­—æ®µçº§æ•°æ®æµå®Œæ•´å†™å…¥ï¼Œæ²¡æœ‰é—æ¼æˆ‘ä»¬ä¹‹å‰èŠè¿‡çš„ä»»ä½•ç»†èŠ‚ï¼ˆIsFeeMonitor/FirstAnnuityYear/ValidUntil/T\_AnnuityTask çš„åˆå§‹åŒ–ä¸æ»šåŠ¨/T\_FeeRate/T\_FeeDraft/T\_FeeItem/T\_PayList/T\_GovPayment/T\_Bill/T\_Payment/T\_Offset/T\_CaseReceipt/T\_Commission ç­‰éƒ½åœ¨é‡Œå¤´ï¼‰ã€‚

å¦‚æœä½ è§‰å¾—åœºæ™¯ D OKï¼Œä¸‹ä¸€æ­¥å¯ä»¥è¯´ï¼š

## 14. Part II â€“ E2E åœºæ™¯ Eï¼šæ— æ•ˆ / è¯‰è®¼æ¡ˆä»¶å…¨æµç¨‹ â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯æè¿°ä¸€ä¸ª**å·²æˆæƒæˆ–æ¥è¿‘æˆæƒé˜¶æ®µçš„ä¸“åˆ©æ¡ˆ**ï¼Œå¦‚ä½•è¿›å…¥â€œæ— æ•ˆ / è¯‰è®¼â€æµç¨‹ï¼Œå¹¶åœ¨ç³»ç»Ÿä¸­è´¯ç©¿ï¼š
>
> *   åŸæ¡ˆ â†’ æ— æ•ˆ/è¯‰è®¼æ¡ˆå· â†’ æ¥æ–‡/å»æ–‡ â†’ æ—¶é™ â†’ è´¹ç”¨ â†’ è´¦å• â†’ æ”¶æ¬¾ â†’ ææˆ â†’ åå‘å½±å“åŸæ¡ˆçŠ¶æ€ã€‚
>
> æˆ‘ä¼šæŒ‰ Phase E0â€“E7 å±•å¼€ï¼š
>
> *   æ¯ä¸ªé˜¶æ®µè¯´æ˜ï¼š**å‚ä¸è§’è‰² â†’ æ“ä½œæ­¥éª¤ â†’ æ›´æ–°å“ªäº›è¡¨ / å­—æ®µ â†’ å¦‚ä½•æ¥å…¥å‰åæ¨¡å—**ã€‚
> *   å®Œæ•´åˆå¹¶æˆ‘ä»¬ä¹‹å‰å…³äºåœºæ™¯ E çš„æ‰€æœ‰æè¿°ï¼ˆåŒ…æ‹¬ Status/å­—æ®µå/è§„åˆ™ï¼‰ï¼Œä¸åšçœç•¥ã€‚

***

## 14.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> æŸä»¶å·²æˆæƒçš„ä¸“åˆ©ï¼Œå¯èƒ½ä¼šè¢«ç¬¬ä¸‰æ–¹æèµ·æ— æ•ˆå®£å‘Šï¼›æˆ–è€…ä¸“åˆ©æƒäºº/ç¬¬ä¸‰æ–¹å›´ç»•è¯¥ä¸“åˆ©å‘èµ·ä¾µæƒæˆ–è¡Œæ”¿è¯‰è®¼ã€‚\
> å¾‹æ‰€éœ€è¦åœ¨ç³»ç»Ÿä¸­ï¼š
>
> 1.  ä¸ºæ¯ä¸€ä»¶â€œæ— æ•ˆ/è¯‰è®¼æ¡ˆä»¶â€æ–°å»ºç‹¬ç«‹æ¡ˆå·ï¼Œä¸è¢«æ”»å‡»çš„åŸæ¡ˆå…³è”ï¼›
> 2.  è®°å½•æ•´ä¸ªæ— æ•ˆ/è¯‰è®¼è¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ¥æ–‡/å»æ–‡ï¼›
> 3.  ä¸ºç­”è¾©ã€ä¸¾è¯ã€å¼€åº­ç­‰èŠ‚ç‚¹ç”Ÿæˆæ—¶é™ä»»åŠ¡ï¼›
> 4.  è®°å½•æ— æ•ˆ/è¯‰è®¼è¿‡ç¨‹ä¸­çš„è´¹ç”¨è‰å•ã€è´¦å•ã€æ”¶æ¬¾å’Œæ”¯å‡ºï¼›
> 5.  ä¾æ®è§„åˆ™ä¸ºä»£ç†å¾‹å¸ˆè®¡ç®—ææˆï¼›
> 6.  åœ¨æ— æ•ˆè£å†³æˆ–åˆ¤å†³ç”Ÿæ•ˆååå‘æ›´æ–°è¢«æ”»å‡»çš„â€œåŸæ¡ˆâ€çš„æ³•å¾‹çŠ¶æ€ï¼ˆç»´æŒ/éƒ¨åˆ†æ— æ•ˆ/å…¨éƒ¨æ— æ•ˆ/ç»ˆæ­¢ç­‰ï¼‰ã€‚

**æ¶‰åŠä¸»è¦æ¨¡å—ä¸è¡¨**

*   **æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤**
    *   `T_Case` â€“ åŸæ¡ˆï¼ˆCaseType=NORMAL/PCT\_NATIONALï¼‰
    *   `T_Case` â€“ æ— æ•ˆæ¡ˆï¼ˆCaseType=INVALIDATIONï¼‰
    *   `T_Case` â€“ è¯‰è®¼æ¡ˆï¼ˆCaseType=LITIGATIONï¼‰
    *   `OriginalCaseID` è¿æ¥åŸæ¡ˆå’Œæ— æ•ˆ/è¯‰è®¼æ¡ˆå…³ç³»
    *   æ— æ•ˆæ‰©å±•å­—æ®µï¼šInvalidClientID/InvalidPatentee/InvalidRequester/InvalidRole
    *   è¯‰è®¼æ‰©å±•å­—æ®µï¼šLitigationType/CourtName/Plaintiff/Defendant/LitigationRole
*   **æ¨¡å—äºŒï¼šä¸­é—´æ–‡ä»¶ä¸å¾€æ¥**
    *   `T_DocTemplate`ï¼šINVALID\_REQUEST, INVALID\_ACCEPT\_NOTICE, INVALID\_DEFENSE\_NOTICE, INVALID\_EVIDENCE\_NOTICE, INVALID\_HEARING\_NOTICE, INVALID\_DECISION, ä»¥åŠå¯¹åº”çš„è¯‰è®¼æ¨¡æ¿
    *   `T_Document`ï¼šæ— æ•ˆ/è¯‰è®¼æµç¨‹ä¸­æ‰€æœ‰æ¥æ–‡/å»æ–‡
    *   `T_DocAttachment`ï¼šåˆ¤å†³ä¹¦/è£å†³ä¹¦æ‰«æä»¶ã€è¯‰çŠ¶/ç­”è¾©çŠ¶/PDF ç­‰
*   **æ¨¡å—ä¸‰ï¼šæ—¶é™ç®¡ç†**
    *   `T_TaskTemplate`ï¼šINVALID\_DEFENSE\_LIMIT/INVALID\_EVIDENCE\_LIMIT/INVALID\_HEARING\_PREP\_LIMIT ç­‰
    *   `T_Task`ï¼šç­”è¾©æœŸé™ã€ä¸¾è¯æœŸé™ã€å¼€åº­å‡†å¤‡æœŸé™ç­‰
    *   `T_TaskLog`ï¼šè®°å½•åˆ›å»ºã€ä¿®æ”¹ã€æ ¸é”€ã€å–æ¶ˆç­‰
*   **æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†**
    *   `T_FeeRate`ï¼šGroup=INVALID æˆ– LITIGATION çš„æ ‡å‡†è´¹ç‡ï¼ˆæ— æ•ˆè¯·æ±‚è´¹ã€è¯‰è®¼è´¹ã€æœåŠ¡è´¹ç­‰ï¼‰
    *   `T_FeeDraft`ï¼šType=INVALID\_FEE/LITIGATION\_FEE çš„è‰å•
    *   `T_FeeItem`ï¼šæ— æ•ˆ/è¯‰è®¼é˜¶æ®µçš„è´¹ç”¨æ˜ç»†ï¼ˆå®˜è´¹ + æœåŠ¡è´¹ + æ‚è´¹ï¼‰
    *   `T_PayList/T_GovPayment`ï¼šæ— æ•ˆ/è¯‰è®¼å®˜æ–¹è´¹ç”¨ï¼ˆå¦‚æœ‰ï¼‰
    *   `T_Expense`ï¼šå·®æ—…ã€è°ƒæŸ¥è´¹ã€ç¿»è¯‘è´¹ç­‰ç¬¬ä¸‰æ–¹æ”¯å‡º
    *   `T_CaseReceipt`ï¼šæ— æ•ˆ/è¯‰è®¼æ¡ˆä»¶çš„å®¢æˆ·æ”¶æ¬¾æƒ…å†µ
*   **æ¨¡å—äº”ï¼šè´¦å•ä¸æ”¶æ¬¾**
    *   `T_Bill/T_BillItem`ï¼šæ— æ•ˆ/è¯‰è®¼é˜¶æ®µè´¦å•
    *   `T_Payment/T_PaymentLine`ï¼šå®¢æˆ·æ”¶æ¬¾
    *   `T_Offset`ï¼šæ”¶æ¬¾å†²é”€è‡³æ— æ•ˆ/è¯‰è®¼è´¦å•
*   **æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘**
    *   `T_CommissionRule`ï¼šCaseType=INVALIDATION/LITIGATION çš„è§„åˆ™
    *   `T_Commission`ï¼šæ— æ•ˆ/è¯‰è®¼é˜¶æ®µçš„ææˆè®°å½•
    *   `T_CommissionSettlement/T_CommissionSettleLine`ï¼šç»“ç®—æ‰¹æ¬¡

***

## 14.2 Phase E0ï¼šåŸæ¡ˆå‰ç½®çŠ¶æ€ â€“ å·²æˆæƒæˆ–æ»¡è¶³èµ·è¯‰/æ— æ•ˆçš„æ¡ä»¶

**è§’è‰²**

*   Agent
*   Formalities

**æè¿°**

*   åŸæ¡ˆï¼ˆè¢«æ”»å‡»çš„é‚£ä¸ªä¸“åˆ©ï¼‰å·²ç»åœ¨ç³»ç»Ÿä¸­å­˜åœ¨ï¼Œé€šå¸¸å¤„äºæˆæƒçŠ¶æ€æˆ–æ¥è¿‘æˆæƒçŠ¶æ€ã€‚
*   æ— æ•ˆ/è¯‰è®¼å¯ä»¥é’ˆå¯¹ï¼š
    *   å·²æˆæƒä¸“åˆ©ï¼ˆæœ€å…¸å‹ï¼‰
    *   æŸäº›å›½å®¶ä¸­ï¼Œäº¦å¯å¯¹å¤„äºç‰¹å®šå®¡æŸ¥é˜¶æ®µçš„æ¡ˆå­é‡‡ç”¨è¡Œæ”¿è¯‰è®¼/è¡Œæ”¿å¤å®¡æ–¹å¼ã€‚

**å…³é”®æ•°æ®**

åœ¨ `T_Case` ä¸­åŸæ¡ˆè®°å½•å¤§è‡´å¦‚ä¸‹ï¼š

*   CaseType=NORMAL æˆ– PCT\_NATIONAL
*   PatentCategoryï¼šINVENTION/UTILITY/DESIGN
*   Statusï¼šé€šå¸¸ä¸º GRANTEDï¼Œä¹Ÿå¯èƒ½æ˜¯ REJECTED/INVALIDATED/ LITIGATION\_IN\_PROGRESS ç­‰
*   æˆæƒç›¸å…³å­—æ®µï¼šGrantNo/GrantDate/IssueDate ç­‰å·²å¡«ï¼›
*   å¹´è´¹ç›¸å…³å­—æ®µï¼šIsFeeMonitor/FirstAnnuityYear/ValidUntil ç­‰æŒ‰éœ€è¦å­˜åœ¨ï¼›

**æœ¬é˜¶æ®µæ— æ–°å†™æ“ä½œ**ï¼Œåªæ˜¯é€‰ä¸­ â€œOriginalCaseIDâ€ ä½œä¸ºæ— æ•ˆ/è¯‰è®¼æ¡ˆå·è¦å…³è”çš„åŸæ¡ˆã€‚

***

## 14.3 Phase E1ï¼šæ–°å»ºæ— æ•ˆ/è¯‰è®¼æ¡ˆå·ï¼ˆCaseType=INVALIDATION/LITIGATIONï¼‰

### 14.3.1 æ— æ•ˆæ¡ˆä»¶æ¡ˆå· â€“ `T_Case`ï¼ˆCaseType=INVALIDATIONï¼‰

**è§’è‰²**

*   Formalities / è¯‰è®¼å›¢é˜Ÿ

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­æŠŠâ€œæŸæŸå¯¹æŸä¸“åˆ©å‘èµ·æ— æ•ˆå®£å‘Šâ€çš„æ¡ˆä»¶å»ºç«‹ä¸ºä¸€æ¡ç‹¬ç«‹æ¡ˆå·ï¼Œå¹¶ä¸è¢«æ— æ•ˆä¸“åˆ©ï¼ˆåŸæ¡ˆï¼‰å…³è”ã€‚

**æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰**

1.  åœ¨â€œæ¡ˆå·ç»´æŠ¤ â†’ æ–°å»ºæ¡ˆå·â€ä¸­é€‰æ‹©ï¼š
    *   `CaseType = INVALIDATION`
    *   `PatentCategory` ä¸åŸæ¡ˆä¸€è‡´ï¼ˆæˆ–æŒ‰ä¸šåŠ¡é€‰æ‹©ï¼‰
    *   `FlowDir`ï¼šä¸€èˆ¬ä¸º IN\_INï¼ˆå›½å†…æ— æ•ˆï¼‰æˆ–æŒ‰æ¡ˆä»¶æ€§è´¨è®¾å®š
2.  å¡«å†™â€œæ— æ•ˆæ¡ˆä»¶åŸºæœ¬ä¿¡æ¯â€ï¼š
    *   `CaseNo` â€“ æ— æ•ˆæ¡ˆå†…éƒ¨æ¡ˆå·å·
    *   `ClientID` â€“ å§”æ‰˜æ–¹ï¼ˆå¯èƒ½æ˜¯æƒåˆ©äººæˆ–è¯·æ±‚äººï¼‰
3.  åœ¨â€œæ— æ•ˆæ¡ˆæ‰©å±•ä¿¡æ¯â€æ ‡ç­¾é¡µå¡«å†™ï¼š
    *   `OriginalCaseID` â€“ å¼•ç”¨è¯¥æ— æ•ˆæ¡ˆä»¶æ‰€é’ˆå¯¹çš„ä¸“åˆ©åŸæ¡ˆ CaseIDï¼ˆå‰ç½® Phase E0ï¼‰
    *   `InvalidClientID` â€“ æ— æ•ˆæ¡ˆä»¶å§”æ‰˜æ–¹ï¼ˆé€šå¸¸=ClientIDï¼‰
    *   `InvalidPatentee` â€“ ä¸“åˆ©æƒäººåç§°
    *   `InvalidRequester` â€“ è¯·æ±‚äººåç§°ï¼ˆè‹¥å§”æ‰˜äººä¸è¯·æ±‚äººä¸åŒï¼‰
    *   `InvalidRole` â€“ PATENTEE/REQUESTER/BOTHï¼ˆè¡¨ç¤ºæœ¬æ‰€ä»£è¡¨å“ªä¸€æ–¹ï¼‰
4.  ä¿å­˜ã€‚

**æ•°æ®åº“å†™å…¥**

*   `T_Case` æ–°å¢ä¸€æ¡ï¼š
    *   `CaseType=INVALIDATION`
    *   `OriginalCaseID`=åŸæ¡ˆCaseID
    *   `InvalidClientID`/`InvalidPatentee`/`InvalidRequester`/`InvalidRole` æŒ‰ UI å€¼å†™å…¥
    *   `Status` åˆå§‹ä¸º `INVALID_INIT` æˆ–ç±»ä¼¼ï¼ˆå¯åœ¨ Status æšä¸¾ä¸­ä¸ºæ— æ•ˆæ¡ˆå®šä¹‰ï¼šâ€œæœªé€’äº¤/å·²é€’äº¤/å·²å—ç†/å®¡ç†ä¸­/å·²è£å†³â€ç­‰ï¼‰
    *   å…¶ä»–å­—æ®µï¼šClientID/Title/RecvDate/PrimaryAgent ç­‰æŒ‰è¾“å…¥å­˜å‚¨
*   å¦‚éœ€è¦ï¼Œè¿˜å¯å¤åˆ¶åŸæ¡ˆçš„ç”³è¯·äºº/å‘æ˜äºº/æƒåˆ©è¦æ±‚ä¿¡æ¯åˆ°æ— æ•ˆæ¡ˆï¼ˆä»…ç”¨äºå†…éƒ¨å‚è€ƒï¼‰ï¼Œè¿™ä¸ªå…·ä½“æ˜¯å¦å¤åˆ¶ç”±å®æ–½ç­–ç•¥å†³å®šã€‚

***

### 14.3.2 è¯‰è®¼æ¡ˆä»¶æ¡ˆå· â€“ `T_Case`ï¼ˆCaseType=LITIGATIONï¼‰

**è§’è‰²**

*   Formalities / è¯‰è®¼å›¢é˜Ÿ

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­ä¸ºæ¯ä¸€ä»¶â€œä¾µæƒè¯‰è®¼/è¡Œæ”¿è¯‰è®¼â€ç­‰å»ºç«‹ç‹¬ç«‹ LITIGATION æ¡ˆå·ï¼Œå¹¶ä¸åŸæ¡ˆ CaseID å…³è”ã€‚

**æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰**

1.  æ–°å»ºæ¡ˆå·ï¼š`CaseType = LITIGATION`ï¼›
2.  å¡«å†™è¯‰è®¼æ‰©å±•ä¿¡æ¯ï¼ˆå»ºè®®åœ¨æ¡ˆå·æ‰©å±•æ ‡ç­¾ä¸­å‘ˆç°ï¼‰ï¼š
    *   `OriginalCaseID` â€“ é’ˆå¯¹å“ªä¸€ä¸“åˆ©
    *   `LitigationType` â€“ INFRINGMENTï¼ˆä¾µæƒï¼‰/ADMINISTRATIVEï¼ˆè¡Œæ”¿ï¼‰/OTHER
    *   `CourtName` â€“ æ³•é™¢æˆ–ä»²è£æœºæ„åç§°
    *   `Plaintiff` â€“ åŸå‘Š
    *   `Defendant` â€“ è¢«å‘Š
    *   `LitigationRole` â€“ PLAINTIFF/DEFENDANT/THIRD\_PARTYï¼ˆè¡¨ç¤ºæœ¬æ‰€æ‰€ä»£è¡¨çš„å½“äº‹æ–¹ï¼‰
3.  ä¿å­˜ï¼š
    *   `T_Case` æ–°å¢ä¸€æ¡ LITIGATION è®°å½•ï¼›

*   Status åˆå§‹ä¸º `LIT_INIT` æˆ–ç±»ä¼¼ã€‚

***

## 14.4 Phase E2ï¼šæ— æ•ˆ/è¯‰è®¼è¯·æ±‚ä¹¦ï¼ˆOFFICIAL\_OUTï¼‰ä¸åˆå§‹è´¹ç”¨è‰å•

### 14.4.1 æ— æ•ˆè¯·æ±‚ä¹¦ â€“ `INVALID_REQUEST` å»æ–‡æ–‡ä¹¦

**è§’è‰²**

*   è¯‰è®¼/æ— æ•ˆä»£ç†äºº
*   Formalities

**ç›®æ ‡**

*   å½•å…¥â€œæ— æ•ˆå®£å‘Šè¯·æ±‚ä¹¦â€ä½œä¸ºå®˜æ–¹å»æ–‡ä¸­é—´æ–‡ä»¶ï¼Œå¹¶å¯åŠ¨æ— æ•ˆ/è¯‰è®¼è´¹ç”¨è‰å•çš„è‡ªåŠ¨ç”Ÿæˆã€‚

**æ¨¡æ¿é…ç½® â€“ `T_DocTemplate`**

*   `TemplateCode = "INVALID_REQUEST"`
*   `DocType = OFFICIAL_OUT`
*   `Name = "æ— æ•ˆå®£å‘Šè¯·æ±‚ä¹¦"`
*   `NeedNotifyAgent = false`
*   `CaseTypeFilter` = INVALIDATION
*   `StatusEffect`ï¼šå¯é€‰ â€“ ä¾‹å¦‚å°†æ— æ•ˆæ¡ˆ Status ä» `INVALID_INIT` â†’ `INVALID_FILED`ï¼ˆå·²é€’äº¤ï¼‰
*   `DeadlineTemplateCode`ï¼šä¸€èˆ¬ä¸ºç©ºï¼ˆæ— æ­¤å³æ—¶æ—¶é™ï¼‰
*   `FeeDraftType` = `INVALID_FEE` â€“ ä»¥ä¾¿è‡ªåŠ¨ç”Ÿæˆæ— æ•ˆè´¹ç”¨è‰å•
*   `InputFieldList`ï¼šå¯åŒ…å«è¯·æ±‚èŒƒå›´ã€æ¡ˆå·ç­‰ä¿¡æ¯ï¼ˆå†™å…¥ ExtraDataï¼‰

**æ“ä½œæ­¥éª¤ â€“ ä¸­é—´æ–‡ä»¶å‘å¯¼**

1.  Step1ï¼š
    *   è¾“å…¥æ— æ•ˆæ¡ˆ CaseNo â†’ ç¡®è®¤ `CaseID`
    *   DocType=OFFICIAL\_OUT, Template=INVALID\_REQUEST
    *   DispatchDate=æäº¤æ— æ•ˆè¯·æ±‚ä¹¦æ—¥æœŸ
2.  Step2ï¼š
    *   DocName=â€œæ— æ•ˆå®£å‘Šè¯·æ±‚ä¹¦â€
    *   OutgoingRegNoï¼ˆå¯„å‡ºæŒ‚å·ï¼‰ã€ForwardDateï¼ˆå¦‚æœ‰ä¸­è½¬ï¼‰
    *   NeedReply=false
    *   åœ¨çŠ¶æ€ä¿¡æ¯åŒºå½•å…¥è¯·æ±‚èŒƒå›´/æƒåˆ©è¦æ±‚å·ï¼ˆå¯å†™å…¥ ExtraDataï¼‰
3.  Step3ï¼š
    *   æ—  DeadlineTemplateCode â†’ æ— è‡ªåŠ¨æ—¶é™ç”Ÿæˆ
4.  Step4ï¼š
    *   FeeDraftType=INVALID\_FEE â†’ è¿›å…¥è´¹ç”¨ç”Ÿæˆé€»è¾‘ï¼ˆè§ 14.4.2ï¼‰
5.  Step5ï¼š
    *   ä¸Šä¼ /ç”Ÿæˆè¯·æ±‚ä¹¦çš„ Word/PDF é™„ä»¶ â†’ `T_DocAttachment`
6.  å®Œæˆå‘å¯¼ï¼š
    *   æ’å…¥ `T_Document(INVALID_REQUEST)`ï¼›

*   æ›´æ–°æ— æ•ˆæ¡ˆ `T_Case.Status` ä¸º `INVALID_FILED`ï¼ˆå¦‚æœ StatusEffect è®¾ç½®ä¸ºè¯¥çŠ¶æ€ï¼‰ï¼›
*   æ’å…¥ç›¸å…³è´¹ç”¨è‰å•ã€‚

***

### 14.4.2 åˆå§‹æ— æ•ˆè´¹ç”¨è‰å• â€“ `T_FeeDraft/T_FeeItem` (Type=INVALID\_FEE)

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Financeï¼ˆåç»­è°ƒæ•´ï¼‰

**ç›®æ ‡**

*   åœ¨æäº¤æ— æ•ˆè¯·æ±‚æ—¶ï¼Œå¯¹åº”ç”Ÿæˆä¸€ä»½æ— æ•ˆè´¹ç”¨è‰å•ï¼ŒåŒ…æ‹¬å®˜æ–¹æ— æ•ˆè¯·æ±‚è´¹+æ— æ•ˆä»£ç†æœåŠ¡è´¹ç­‰ã€‚

**æµç¨‹**

1.  æ ¹æ® Template.FeeItemList ä¸­åˆ—å‡ºçš„è´¹ç”¨é¡¹ï¼ˆå¦‚ `CN_INVALID_REQUEST_FEE` å’Œ `CN_INVALID_SERVICE_FEE` ç­‰ï¼‰ï¼Œä» `T_FeeRate(Group=INVALID)` ä¸­æŸ¥æ‰¾è´¹ç‡è®°å½•ï¼›
2.  å¯¹æ¯æ¡è´¹ç‡è®°å½•ï¼š
    *   è‹¥ FeeType=GOV ä¸” AllowReduction=trueï¼Œæ ¹æ® Case.FeeReduction è®¡ç®—å‡å…ï¼›
    *   è®¡ç®— UnitPrice/Amount/Currency/LocalAmountï¼ˆè¯¦è§æ¨¡å—å›› 5.4ï¼‰ï¼›
3.  åˆ›å»ºæˆ–ä½¿ç”¨ç°æœ‰ `T_FeeDraft(Type=INVALID_FEE, CaseID=æ— æ•ˆæ¡ˆ)`ï¼š
    *   è‹¥å°šæ— ï¼Œåˆ™æ–°å»ºè‰å•å¤´ï¼›
    *   å°†è´¹ç”¨æ˜ç»† `T_FeeItem` æ’å…¥è¯¥è‰å•ï¼›
4.  æ›´æ–°è‰å•å¤´ TotalGov/TotalService/TotalMisc/TotalAmtã€‚

**ç»“æœ**

*   æ— æ•ˆæ¡ˆä»¶åœ¨ä¸€å¼€å§‹å°±æ‹¥æœ‰ä¸€ä»½åˆå§‹æ— æ•ˆè´¹ç”¨è‰å•ï¼ˆåŒ…å«å®˜æ–¹è´¹ + æœåŠ¡è´¹ï¼‰ï¼›
*   åç»­è¿˜å¯åœ¨åˆ¤å†³åæˆ–ä¸­é—´é˜¶æ®µè¿½åŠ æ›´å¤šè´¹ç”¨é¡¹ç›®ï¼ˆå¦‚è¿½åŠ å‡ºåº­è´¹ç­‰ï¼‰ã€‚

***

## 14.5 Phase E3ï¼šå—ç†é€šçŸ¥ã€ç­”è¾©/ä¸¾è¯é€šçŸ¥ã€å¼€åº­é€šçŸ¥ â€“ æ¥æ–‡ + æ—¶é™ä»»åŠ¡

**è§’è‰²**

*   Formalities / è¯‰è®¼å›¢é˜Ÿ
*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   è®°å½•æ— æ•ˆ/è¯‰è®¼æµç¨‹ä¸­çš„å…³é”®é€šçŸ¥ï¼ˆå—ç†ã€ç­”è¾©/ä¸¾è¯ã€å¼€åº­ï¼‰ï¼Œå¹¶ä¸ºæ¯ä¸ªéœ€è¦è¡ŒåŠ¨çš„é€šçŸ¥ç”Ÿæˆå¯¹åº”çš„æ—¶é™ä»»åŠ¡ï¼ˆä¾‹å¦‚ç­”è¾©æœŸé™/ä¸¾è¯æœŸé™/å¼€åº­å‡†å¤‡ä»»åŠ¡ï¼‰ã€‚

### 14.5.1 å—ç†é€šçŸ¥ â€“ `INVALID_ACCEPT_NOTICE`

**æ¨¡æ¿ç¤ºä¾‹**

*   `TemplateCode = "INVALID_ACCEPT_NOTICE"`
*   `DocType = OFFICIAL_IN`
*   `Name = "æ— æ•ˆå—ç†é€šçŸ¥"`
*   `CaseTypeFilter = INVALIDATION`
*   `StatusEffect = "INVALID_ACCEPTED"`ï¼ˆè¡¨ç¤ºæ¡ˆä»¶å·²è¢«å—ç†ï¼‰
*   `DeadlineTemplateCode = NULL`ï¼ˆå—ç†é€šçŸ¥æœ¬èº«é€šå¸¸ä¸éœ€è¦å›å¤æ—¶é™ï¼‰
*   `InputFieldList`ï¼šä¾‹å¦‚æ— æ•ˆå—ç†å·ã€å—ç†æ—¥æœŸç­‰

**æ•°æ®æµ**

*   å½•å…¥æ—¶åˆ›å»º `T_Document`ï¼›
*   æ›´æ–°æ— æ•ˆæ¡ˆ `T_Case.Status` ä» `INVALID_FILED` â†’ `INVALID_ACCEPTED`ï¼›
*   å¯åœ¨ ExtraData è®°å½•â€œå—ç†å·â€ç­‰ã€‚

***

### 14.5.2 ç­”è¾©é€šçŸ¥ â€“ `INVALID_DEFENSE_NOTICE` + `T_TaskTemplate(INVALID_DEFENSE_LIMIT)`

**æ¨¡æ¿é…ç½®**

*   `TemplateCode = "INVALID_DEFENSE_NOTICE"`
*   `DocType = OFFICIAL_IN`
*   `Name = "æ— æ•ˆç­”è¾©é€šçŸ¥"`
*   `CaseTypeFilter = INVALIDATION`
*   `NeedNotifyAgent = true`
*   `DeadlineTemplateCode = "INVALID_DEFENSE_LIMIT"`
*   `InputFieldList`ï¼šå¯åŒ…å«å®˜æ–¹ç»™å‡ºçš„ç­”è¾©ç»é™æˆ–å…¶ä»–æ ‡è¯†ã€‚

**æ—¶é™æ¨¡æ¿**

*   `T_TaskTemplate` for `INVALID_DEFENSE_LIMIT`ï¼š
    *   DeadlineBase=DISPATCH\_DATE æˆ– CUSTOMï¼ˆåŸºäºå®˜æ–¹ç»é™ï¼‰ï¼›
    *   AddMonths/AddDays è¡¨ç¤ºå®˜æ–¹ç»™å‡ºæœŸé™ï¼ˆä¾‹å¦‚å‘æ–‡æ—¥èµ· 1 ä¸ªæœˆï¼‰ï¼›
    *   InnerOffsetDays è¡¨ç¤ºå†…éƒ¨æå‰æ—¶é—´ï¼›
    *   RemindBase/RemindOffsetDays å®šä¹‰æé†’ç­–ç•¥ï¼›
    *   DefaultWorkerRole=AGENT ç­‰ã€‚

**æ“ä½œæ­¥éª¤**

*   åœ¨ä¸­é—´æ–‡ä»¶å½•å…¥å‘å¯¼ä¸­åˆ›å»º OFFICIAL\_IN æ–‡ä¹¦ï¼ˆåŒ OA\_NOTICE æµç¨‹ï¼‰ï¼›
*   å®Œæˆåè‡ªåŠ¨ç”Ÿæˆ `T_Task`ï¼š
    *   CaseID=æ— æ•ˆæ¡ˆ CaseIDï¼ŒDocID=è¯¥é€šçŸ¥ DocID
    *   TemplateCode=INVALID\_DEFENSE\_LIMIT
    *   Type="æ— æ•ˆç­”è¾©æœŸé™"
    *   BaseDate/Deadline/InnerDeadline/Remind ç­‰
    *   WorkerID=è¯‰è®¼ä¸»åŠä»£ç†äººï¼ŒSupervisorID=åˆä¼™äºº/å›¢é˜Ÿè´Ÿè´£ã€‚

***

### 14.5.3 ä¸¾è¯é€šçŸ¥ & å¼€åº­é€šçŸ¥

åŒç†ï¼Œé…ç½®ï¼š

*   `INVALID_EVIDENCE_NOTICE` + `INVALID_EVIDENCE_LIMIT`
*   `INVALID_HEARING_NOTICE` + `INVALID_HEARING_PREP_LIMIT`

**æµç¨‹**

*   æ¯å½“å½•å…¥ç›¸åº” OFFICIAL\_IN æ–‡ä¹¦æ—¶ï¼Œæ ¹æ® DeadlineTemplateCode ç”Ÿæˆ `T_Task`ï¼š
    *   ä¸¾è¯æœŸé™ä»»åŠ¡
    *   åº­å®¡å‡†å¤‡ä»»åŠ¡

è¿™æ ·æ— æ•ˆ/è¯‰è®¼çš„å…³é”®æ—¶é™å…¨éƒ¨åœ¨ `T_Task` ä¸­ç»Ÿä¸€ç®¡ç†ï¼Œâ€œæˆ‘çš„ä»»åŠ¡/ç›‘ç£ä»»åŠ¡/æé†’/æ£€ç´¢â€è§†å›¾å¯¹å®ƒä»¬ä¸€è§†åŒä»ã€‚

***

## 14.6 Phase E4ï¼šç­”è¾©çŠ¶ã€è¯æ®ã€æ„è§é™ˆè¿° â€“ å»æ–‡ + æ—¶é™æ ¸é”€

**è§’è‰²**

*   Agentï¼ˆæ— æ•ˆ/è¯‰è®¼ä»£ç†äººï¼‰
*   Formalities
*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰

**ç›®æ ‡**

*   å¯¹ç­”è¾©çŠ¶ã€è¯æ®æäº¤ã€æ„è§é™ˆè¿°ç­‰å»æ–‡è¿›è¡Œå½•å…¥ï¼Œå…³è”åˆ°å¯¹åº”é€šçŸ¥ï¼›
*   è‡ªåŠ¨æ ¸é”€ç›¸å…³æ—¶é™ä»»åŠ¡ï¼ˆç­”è¾©æœŸé™ã€ä¸¾è¯æœŸé™ç­‰ï¼‰ã€‚

### 14.6.1 ç­”è¾©çŠ¶ â€“ `INVALID_DEFENSE_BRIEF`ï¼ˆOFFICIAL\_OUTï¼‰

**æ¨¡æ¿é…ç½®**

*   `TemplateCode = "INVALID_DEFENSE_BRIEF"`
*   `DocType = OFFICIAL_OUT`
*   `Name = "æ— æ•ˆç­”è¾©çŠ¶"`
*   `ReplyToTemplateCode = "INVALID_DEFENSE_NOTICE"`
*   `NeedNotifyAgent = false`
*   `FeeDraftType = INVALID_FEE`ï¼ˆå¦‚éœ€è¦ä¸ºç­”è¾©é˜¶æ®µå¢åŠ æœåŠ¡è´¹ï¼‰
*   `StatusEffect` å¯ä¸ºç©ºï¼ˆæ— æ•ˆæ¡ˆä»ä¸º â€œå®¡ç†ä¸­â€ï¼‰

**æ“ä½œæ­¥éª¤**

1.  Step1ï¼š
    *   CaseID=æ— æ•ˆæ¡ˆ
    *   DocType=OFFICIAL\_OUT, Template=INVALID\_DEFENSE\_BRIEF
    *   DispatchDate=ç­”è¾©çŠ¶æäº¤æ—¥æœŸ
2.  Step2ï¼š
    *   DocName=â€œæ— æ•ˆç­”è¾©çŠ¶â€
    *   ReplyToID=é€‰æ‹©å¯¹åº” `INVALID_DEFENSE_NOTICE` ä¸­é—´æ–‡ä»¶ DocIDï¼›
    *   ReplyDate=å®é™…æäº¤/å¯„å‡ºæ—¥ï¼›
    *   Summary=ç®€è¦è¯´æ˜
3.  Step3/4ï¼š
    *   æ ¹æ® FeeDraftType=INVALID\_FEEï¼Œå¯èƒ½ç”Ÿæˆ/æ›´æ–°æ— æ•ˆè´¹ç”¨è‰å•ï¼ˆåŒ 14.4.2 çš„é€»è¾‘ï¼‰ã€‚
4.  Step5ï¼š
    *   ä¸Šä¼ /ç”Ÿæˆç­”è¾©çŠ¶ Word/PDF é™„ä»¶ã€‚
5.  å®Œæˆå‘å¯¼ï¼šå†™å…¥ `T_Document` + `T_DocAttachment` + å¯¹åº”è‰å•æ›´æ–°ã€‚

### 14.6.2 è‡ªåŠ¨æ ¸é”€ç­”è¾©æ—¶é™ä»»åŠ¡

**é€»è¾‘**

*   å½“ `T_Document`(INVALID\_DEFENSE\_BRIEF) å­˜åœ¨ï¼Œä¸” `ReplyToID` æŒ‡å‘å¯¹åº” `INVALID_DEFENSE_NOTICE` æ—¶ï¼š
    *   åœ¨ `T_Task` ä¸­æŸ¥æ‰¾ï¼š
        *   `CaseID=æ— æ•ˆæ¡ˆ CaseID`
        *   `DocID=è¯¥ INVALID_DEFENSE_NOTICE.DocID`
        *   `TemplateCode="INVALID_DEFENSE_LIMIT"`
        *   `Status=OPEN`
*   è‹¥æ‰¾åˆ°ä»»åŠ¡ï¼š
    *   å°† `Status`=DONE
    *   å°† `DoneDate`=ReplyDate æˆ– DispatchDate
    *   å¯è®¾ç½® `IsWrittenOff=true`
*   å†™å…¥ `T_TaskLog(Action=MARK_DONE)`ï¼Œè®°å½•æ ¸é”€æ“ä½œã€‚

**åŒç†ï¼Œä¸¾è¯/å¼€åº­å‡†å¤‡ä»»åŠ¡ä¹Ÿé€šè¿‡å¯¹åº”çš„å»æ–‡ï¼ˆè¯æ®æäº¤ã€åº­å®¡å‡†å¤‡æ–‡ä¹¦ï¼‰è‡ªåŠ¨æ ¸é”€ã€‚**

***

## 14.7 Phase E5ï¼šè£å†³/åˆ¤å†³ â€“ æ— æ•ˆæ¡ˆ & åŸæ¡ˆçŠ¶æ€æ›´æ–°

**è§’è‰²**

*   Formalities
*   Agent
*   ç³»ç»Ÿ

**ç›®æ ‡**

*   ç™»è®°æ— æ•ˆè£å†³æˆ–è¯‰è®¼åˆ¤å†³ä¸­é—´æ–‡ä»¶ï¼›
*   æ›´æ–°æ— æ•ˆæ¡ˆ/è¯‰è®¼æ¡ˆè‡ªèº«çŠ¶æ€ï¼›
*   æŒ‰ç»“æœæ›´æ–°åŸæ¡ˆçš„æ³•å¾‹çŠ¶æ€ï¼ˆç»´æŒ/éƒ¨åˆ†æ— æ•ˆ/å…¨éƒ¨æ— æ•ˆ/ç»ˆæ­¢ç­‰ï¼‰ã€‚

### 14.7.1 æ— æ•ˆè£å†³ â€“ `INVALID_DECISION`ï¼ˆOFFICIAL\_INï¼‰

**æ¨¡æ¿é…ç½®**

*   `TemplateCode = "INVALID_DECISION"`
*   `DocType = OFFICIAL_IN`
*   `Name = "æ— æ•ˆå®£å‘Šå†³å®šä¹¦"`
*   `CaseTypeFilter = INVALIDATION`
*   `InputFieldList` å¯åŒ…å«ï¼š
    *   DecisionResultï¼ˆç»“æœï¼šç»´æŒ/å…¨éƒ¨æ— æ•ˆ/éƒ¨åˆ†æ— æ•ˆï¼‰
    *   EffectiveDateï¼ˆç”Ÿæ•ˆæ—¥æœŸï¼‰
    *   AffectedClaimsï¼ˆè‹¥éƒ¨åˆ†æ— æ•ˆï¼Œå—å½±å“æƒåˆ©è¦æ±‚å·èŒƒå›´ï¼‰
*   `StatusEffect`ï¼šå¯è®¾ç½®ä¸º `INVALID_WON`/`INVALID_LOST`/`INVALID_PARTIAL`ï¼Œå…·ä½“å–å†³äºæœ¬æ‰€ç«‹åœºæˆ– DecisionResultï¼›ä¹Ÿå¯ä»¥ç”± UI åœ¨ä¿å­˜æ—¶å†³å®šæœ€ç»ˆçŠ¶æ€ã€‚

**æ“ä½œæ­¥éª¤**

1.  åœ¨ä¸­é—´æ–‡ä»¶å‘å¯¼ Step1/2 å½•å…¥ OFFICIAL\_IN æ–‡ä¹¦ï¼š
    *   CaseID=æ— æ•ˆæ¡ˆ
    *   DispatchDate=å†³å®šä¹¦æ—¥æœŸ
    *   DocName=â€œæ— æ•ˆå®£å‘Šå†³å®šä¹¦â€
    *   åœ¨çŠ¶æ€ä¿¡æ¯åŒºå½•å…¥ï¼š
        *   DecisionResultï¼ˆå¦‚â€œå…¨éƒ¨æ— æ•ˆâ€/â€œéƒ¨åˆ†æ— æ•ˆâ€/â€œç»´æŒæœ‰æ•ˆâ€ï¼‰
        *   EffectiveDate
        *   AffectedClaimsï¼ˆå¦‚ â€œ1-3, 5â€ï¼‰
2.  å®Œæˆå‘å¯¼ï¼Œå†™å…¥ `T_Document` + `T_DocAttachment`ï¼ˆæ‰«æä»¶/ç”µå­ç‰ˆï¼‰ã€‚

### 14.7.2 æ— æ•ˆæ¡ˆ `T_Case.Status` æ›´æ–°

æ ¹æ® DecisionResult å’Œæœ¬æ‰€ç«‹åœºï¼ˆInvalidRoleï¼‰ï¼š

*   å¦‚æœæˆ‘ä»¬ä»£è¡¨è¯·æ±‚äººï¼ˆInvalidRole=REQUESTERï¼‰ï¼š
    *   DecisionResult=å…¨éƒ¨æ— æ•ˆ â†’ Status=INVALID\_WON
    *   DecisionResult=ç»´æŒæœ‰æ•ˆ â†’ Status=INVALID\_LOST
    *   DecisionResult=éƒ¨åˆ†æ— æ•ˆ â†’ Status=INVALID\_PARTIAL
*   å¦‚æœæˆ‘ä»¬ä»£è¡¨æƒåˆ©äººï¼ˆInvalidRole=PATENTEEï¼‰ï¼Œåˆ™ç›¸åï¼ˆWIN/LOST çš„è¯­ä¹‰ç›¸åï¼‰ï¼›
*   æˆ–ç®€åŒ–ï¼šæ— è®ºç«‹åœºï¼Œç›´æ¥ç”¨ DecisionResult è¡¨ç¤ºâ€œæ¡ˆä»¶ç»“æœâ€ï¼Œä»£ç†äººå¯åœ¨æŠ¥è¡¨ä¸­è§£é‡Šâ€œæœ¬æ‰€æ˜¯å¦è·èƒœâ€ã€‚

å†™å…¥ `T_Case`ï¼ˆæ— æ•ˆæ¡ˆï¼‰ï¼š

*   `Status`=ä¸Šè¿°å€¼
*   å¯åœ¨ ExtraData ä¸­è®°å½• DecisionResult/EffectiveDate/AffectedClaimsï¼Œä»¥ä¾¿ç»Ÿè®¡ã€‚

***

### 14.7.3 åŸæ¡ˆçŠ¶æ€æ›´æ–°ï¼ˆT\_Case for OriginalCaseIDï¼‰

**é€»è¾‘**

*   å¯¹äºæ— æ•ˆæ¡ˆä¸­ `T_Case.OriginalCaseID = åŸæ¡ˆ CaseID`ï¼Œå½“å‡ºç° INVALID\_DECISION æ—¶ï¼Œåº”å†³å®šæ˜¯å¦ä¸åŸæ¡ˆåŒæ­¥ï¼š
    1.  è‹¥ DecisionResult = â€œå…¨éƒ¨æ— æ•ˆâ€ï¼š
    *   å°†åŸæ¡ˆ `T_Case.Status` æ›´æ–°ä¸º `INVALIDATED` æˆ– `TERMINATED`ï¼ˆè§†ç³»ç»Ÿå®šä¹‰ï¼‰ï¼›
*   å¯åœ¨ ExtraData æˆ–ä¸“é—¨å­—æ®µä¸­è®°å½•â€œç»ˆæ­¢åŸå› =æ— æ•ˆå®£å‘Šâ€ã€‚
    2\.  è‹¥ DecisionResult = â€œéƒ¨åˆ†æ— æ•ˆâ€ï¼š
    *   ä¿æŒåŸæ¡ˆ Status=GRANTEDï¼Œä½†åœ¨æ‰©å±•å­—æ®µä¸­è®°å½• `InvalidatedClaims = AffectedClaims`ï¼›
*   åœ¨åç»­å¹´è´¹/è®¸å¯/è¯‰è®¼å¤„ç†æ—¶å¯å‚è€ƒã€‚
    3\.  è‹¥ DecisionResult = â€œç»´æŒæœ‰æ•ˆâ€ï¼š
    *   åŸæ¡ˆ Status ä¸å˜ï¼ˆä»ä¸º GRANTEDï¼‰ã€‚

> æ­¤å¤„ Status æ›´æ–°é€»è¾‘åŒåœ¨æ¨¡å—ä¸€ä¸­å¯¹ Status çš„æšä¸¾è®¾è®¡ç›¸å‘¼åº”ã€‚\
> å¯æ ¹æ®å…·ä½“å›½å®¶è§„åˆ™ç»†åŒ–ï¼ˆä¾‹å¦‚â€œæ— æ•ˆåçŠ¶æ€ä¸º â€˜ç»ˆæ­¢â€™/â€˜å¤±æ•ˆâ€™â€ ç­‰ï¼‰ã€‚

***

### 14.7.4 è¯‰è®¼æ¡ˆä»¶è£å†³ â€“ `LITIGATION_JUDGMENT`

å¯¹è¯‰è®¼æ¡ˆï¼ˆCaseType=LITIGATIONï¼‰æœ‰ç±»ä¼¼æ¨¡å¼ï¼š

*   æ¨¡æ¿ `LITIGATION_JUDGMENT`ï¼š
    *   è®°å½•åˆ¤å†³ç»“æœï¼ˆå•æ–¹èƒœè¯‰/è´¥è¯‰/è°ƒè§£/é©³å›ç­‰ï¼‰ã€èµ”å¿é‡‘é¢ã€åˆ¤å†³ç”Ÿæ•ˆæ—¥ç­‰ã€‚
*   æ›´æ–°è¯‰è®¼æ¡ˆ `T_Case.Status`ï¼š
    *   ä¾‹å¦‚ï¼šLITIGATION\_WON / LITIGATION\_LOST / LITIGATION\_SETTLED ç­‰ã€‚
*   æ˜¯å¦ä¸åŸæ¡ˆçŠ¶æ€æŒ‚é’©ï¼š
    *   ä¸€èˆ¬ä¾µæƒè¯‰è®¼ä¸ä¼šæ”¹å˜ä¸“åˆ©æœ¬èº«æˆæƒçŠ¶æ€ï¼›
    *   å¦‚æ¶‰åŠè¡Œæ”¿è¯‰è®¼æ¨ç¿»æˆæƒï¼Œä¹Ÿå¯é€šè¿‡é€»è¾‘å°†åŸæ¡ˆ Status æ”¹ä¸º REJECTED/INVALIDATED ç­‰ã€‚

***

## 14.8 Phase E6ï¼šæ— æ•ˆ / è¯‰è®¼è´¹ç”¨ â†’ è‰å• â†’ æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾

**è§’è‰²**

*   Formalities / Agentï¼ˆå‘èµ·è´¹ç”¨è‰å•ï¼‰
*   Financeï¼ˆç¡®è®¤è´¹ç”¨æ˜ç»†ã€ç”Ÿæˆè´¦å•ã€ç™»è®°æ”¶æ¬¾ï¼‰

**ç›®æ ‡**

*   æŠŠæ— æ•ˆ/è¯‰è®¼è¿‡ç¨‹ä¸­çš„å„ç±»è´¹ç”¨ï¼ˆå®˜æ–¹è´¹ã€æœåŠ¡è´¹ã€æ‚è´¹ï¼‰çº³å…¥è‰å•/è´¦å•/æ”¶æ¬¾ç³»ç»Ÿï¼Œä¸æ™®é€šæ¡ˆä»¶å®Œå…¨å…¼å®¹ã€‚

### 14.8.1 æ— æ•ˆ/è¯‰è®¼è´¹ç”¨è‰å•ï¼ˆT\_FeeDraft/T\_FeeItem, Type=INVALID\_FEE/LITIGATION\_FEEï¼‰

**æ¥æº**

*   åˆå§‹æ— æ•ˆè¯·æ±‚è´¹ç”¨ï¼Œåœ¨ Phase E2 å·²é€šè¿‡ INVALID\_REQUEST è§¦å‘
*   åç»­é˜¶æ®µï¼ˆç­”è¾©/ä¸¾è¯/å¼€åº­/äºŒå®¡/å†å®¡ç­‰ï¼‰ä¹Ÿå¯é€šè¿‡å¯¹åº”ä¸­é—´æ–‡ä»¶æ¨¡æ¿ï¼ˆå¦‚ INVALID\_DEFENSE\_BRIEF, LITIGATION\_COMPLAINT, LITIGATION\_APPEAL ç­‰ï¼‰è§¦å‘ FeeDraft çš„æ›´æ–°

**è´¹ç”¨é¡¹ç¤ºä¾‹**

*   å®˜æ–¹è´¹ï¼ˆGOVï¼‰ï¼š
    *   æ— æ•ˆè¯·æ±‚è´¹ï¼ˆAdministrative feeï¼‰
    *   ä¸Šè¯‰è´¹/æ³•é™¢è´¹ç”¨ç­‰
*   æœåŠ¡è´¹ï¼ˆSERVICEï¼‰ï¼š
    *   æ— æ•ˆç¨‹åºä»£ç†è´¹ï¼ˆæŒ‰ç¨‹åºé˜¶æ®µè®¡è´¹ï¼šä¸€å®¡/äºŒå®¡/å†å®¡ï¼‰
    *   è¯‰è®¼ä»£ç†è´¹ï¼ˆæŒ‰é˜¶æ®µ/æ¡ˆä»¶ä»·å€¼è®¡è´¹ï¼‰
*   æ‚è´¹ï¼ˆMISCï¼‰ï¼š
    *   ç¬¬ä¸‰æ–¹æ£€ç´¢è´¹/ç¿»è¯‘è´¹è‹¥ä¸å•ç‹¬ç”¨ T\_Expense è½¬å«ç»™å®¢æˆ·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ”¾å…¥ FeeItem ä¸­

**æµç¨‹**

åŒæ¨¡å—å›› 5.5ï¼š

*   ä» `T_FeeRate(Group=INVALID/LITIGATION)` ä¸­æ‰¾è´¹ç‡ï¼›
*   ä¾æ®æ¡ˆä»¶å±æ€§å’Œé˜¶æ®µè®¡ç®—é‡‘é¢ï¼›
*   æ’å…¥/æ›´æ–° `T_FeeDraft` å’Œ `T_FeeItem`ï¼ˆType=INVALID\_FEE/LITIGATION\_FEEï¼‰ï¼›
*   å…è®¸æ‰‹å·¥è°ƒæ•´è‰å•æ˜ç»†ã€‚

### 14.8.2 å®˜è´¹æ¸…å•ï¼ˆè‹¥æœ‰æ— æ•ˆ/è¯‰è®¼å®˜è´¹ï¼‰

æŸäº›æ— æ•ˆ/è¯‰è®¼ç¨‹åºä¼šæ”¶å–å®˜æ–¹è´¹ç”¨ï¼š

*   å¯¹ FeeType=GOV ä¸”è‰å• Type=INVALID\_FEE/LITIGATION\_FEE çš„ `T_FeeItem`ï¼Œ
*   Finance å¯åƒå¤„ç†ç”³è¯·è´¹/å¹´è´¹é‚£æ ·å°†å…¶åˆå¹¶æˆ `T_PayList(Type=INVALID or LITIGATION)` + `T_GovPayment`ï¼Œ
*   ç¼´è´¹å¹¶ç™»è®° `PaidAmt/PaidDate/InvoiceNo/VoucherNo` ç­‰ã€‚

### 14.8.3 è´¦å• & æ”¶æ¬¾ & CaseReceipt

å¯¹æ— æ•ˆ/è¯‰è®¼è‰å•ï¼Œè´¦å•æµç¨‹åŒæ¨¡å—äº”ï¼š

1.  Finance ä» INVALID\_FEE/LITIGATION\_FEE è‰å•ç”Ÿæˆ `T_Bill/T_BillItem`ï¼š
    *   Direction=AR
    *   æ¯æ¡ FeeItem â†’ ä¸€æ¡ BillItemï¼ˆCaseID=æ— æ•ˆ/è¯‰è®¼æ¡ˆ CaseIDï¼‰
2.  å®¢æˆ·ä»˜æ¬¾ â†’ `T_Payment/T_PaymentLine`ï¼›
3.  å†²é”€ â†’ `T_Offset`ï¼Œæ›´æ–° Bill.Balance/Status & PaymentLine.BalanceAmtï¼›
4.  æ‹†åˆ† OffsetAmt â†’ å†™å…¥ `T_CaseReceipt`ï¼š
    *   CaseID=æ— æ•ˆ/è¯‰è®¼æ¡ˆ CaseID
    *   FeeCode/FeeName/FeeType/YearNoï¼ˆå¤šä¸ºç©ºï¼‰
    *   ReceivableAmt/ReceivedAmt/IsArrears ç­‰ã€‚

**è¯´æ˜**

*   è‹¥æƒ³åœ¨åŸæ¡ˆçš„è´¹ç”¨è§†å›¾ä¸­çœ‹åˆ°ä¸ºç»´æƒä»˜å‡ºçš„æ— æ•ˆ/è¯‰è®¼æœåŠ¡è´¹ï¼Œå¯é€šè¿‡ OriginalCaseID å¯¹ T\_CaseReceipt å’Œ T\_Expense åšäº¤å‰ç»Ÿè®¡ï¼›
*   åœ¨æœ¬ E2E åœºæ™¯ E ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹æ˜¯æ— æ•ˆ/è¯‰è®¼æ¡ˆè‡ªèº«çš„è´¹ç”¨é—­ç¯ã€‚

***

## 14.9 Phase E7ï¼šæ— æ•ˆ / è¯‰è®¼ææˆï¼ˆCommissionï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Financeï¼ˆé…ç½®/ç»“ç®—ï¼‰

**ç›®æ ‡**

*   ä¸ºæ— æ•ˆ/è¯‰è®¼è¿‡ç¨‹ä¸­çš„æœåŠ¡è´¹éƒ¨åˆ†è®¡æä»£ç†äººé…¬é‡‘ï¼Œä½“ç°è¯¥ç±»æ¡ˆä»¶é€šå¸¸æ›´é«˜çš„ä¸šåŠ¡ä»·å€¼ä¸å·¥ä½œå¼ºåº¦ã€‚

### 14.9.1 æ— æ•ˆ/è¯‰è®¼ææˆè§„åˆ™ â€“ `T_CommissionRule`

**é…ç½®**

*   RuleIDï¼ˆä¾‹å¦‚ Rule: CaseType=INVALIDATIONï¼‰
*   `CaseType = INVALIDATION` æˆ– `LITIGATION`ï¼ˆå¯åˆ†åˆ«é…ç½®ï¼‰
*   `Stage1Rate`, `Stage2Rate`ï¼š
    *   ä¾‹å¦‚æ— æ•ˆæ¡ˆ S1=0.4, S2=0.2ï¼ˆæ€»ææˆç‡è¾ƒé«˜ï¼‰ï¼›
*   `BaseMode`ï¼š
    *   BY\_SERVICE\_FEE â€“ ä»¥æ— æ•ˆ/è¯‰è®¼æœåŠ¡è´¹é‡‘é¢ä½œä¸ºåŸºç¡€ï¼›
    *   æˆ– MIXEDï¼šåŸºç¡€å›ºå®šé‡‘é¢ + æœåŠ¡è´¹æ¯”ä¾‹ï¼›
*   `ClientGroup` å¯ç”¨äºå¤§å®¢æˆ·å•ç‹¬è§„åˆ™ï¼›
*   `WaitPay` é€šå¸¸éœ€è®¾ä¸º trueï¼ˆæ¬¾åˆ°åç»“ç®—ï¼‰ï¼Œä½†åœ¨ CommissionRule ä¸­æ²¡æœ‰è¯¥å­—æ®µï¼Œå®é™…æ˜¯å†™å…¥ T\_Commission æ—¶ï¼Œä»è§„åˆ™é™„å¸¦å‚æ•°å†³å®šã€‚

### 14.9.2 ææˆè®°å½•ç”Ÿæˆæ—¶æœº

**æ¨èç­–ç•¥**

*   åœ¨æ— æ•ˆ/è¯‰è®¼è´¦å•ç”Ÿæˆæ—¶ï¼ˆT\_Bill created for INVALID\_FEE/LITIGATION\_FEEï¼‰ï¼Œå¯¹æœåŠ¡è´¹ BillItem è¿›è¡Œææˆè®¡ç®—ã€‚

**æ­¥éª¤**

1.  ä»è¯¥è´¦å•çš„ `T_BillItem` ä¸­ç­›é€‰ `FeeType=SERVICE` ä¸” `CaseID=æ— æ•ˆ/è¯‰è®¼æ¡ˆ CaseID`ï¼›
2.  å¯¹è¯¥æ¡ˆçš„æœåŠ¡è´¹åˆè®¡ `ServiceSum_invalid(case)`ï¼›
3.  æ ¹æ® CommissionRule åŒ¹é… CaseType=INVALIDATION æˆ– LITIGATION çš„è§„åˆ™ï¼›
4.  æŒ‰è§„åˆ™çš„ BaseMode è®¡ç®— BaseFeeï¼ˆå¯èƒ½æ˜¯ ServiceSum æˆ–å›ºå®š/MIXEDï¼‰ï¼›
5.  æŒ‰å¤šä»£ç†äººåˆ†æ‘Šæ¯”ä¾‹ï¼ˆä¸»åŠ/ååŠ/å›¢é˜Ÿæˆå‘˜ï¼‰æ‹†åˆ† BaseFeeï¼›
6.  å¯¹ (CaseID, AgentID) ç»„åˆï¼š
    *   åœ¨ `T_Commission` ä¸­æ–°å¢æˆ–ç´¯åŠ  BaseFeeï¼›

*   è®¡ç®— S1\_Amt=BaseFeeÃ—S1\_Rateï¼ŒS2\_Amt=BaseFeeÃ—S2\_Rateï¼›
*   `WaitPay` = trueï¼ˆç»å¤§éƒ¨åˆ†è¯‰è®¼/æ— æ•ˆæ¡ˆå»ºè®®åœ¨æ¬¾åˆ°åç»“ç®—ï¼‰ï¼›
*   `ForceSettle=false`ï¼Œå¦‚éœ€ç‰¹åˆ«å¥–åŠ±å¯æ‰‹å·¥å°†å…¶è®¾ä¸º trueã€‚

### 14.9.3 å¯ç»“ç®—æ¡ä»¶ï¼ˆç¤ºä¾‹ï¼‰

**æ— æ•ˆæ¡ˆ â€“ Stage1**

*   ç”¨äºåœ¨æ¡ˆä»¶è¿›å…¥â€œå®¡ç†ä¸­â€ä¸€æ®µæ—¶é—´åï¼Œå…ˆç»™ä¸€éƒ¨åˆ†ææˆï¼›
*   å¯ç»“ç®—æ¡ä»¶ç¤ºä¾‹ï¼š
    *   æ— æ•ˆæ¡ˆ Status âˆˆ {INVALID\_ACCEPTED, INVALID\_IN\_HEARING}ï¼›
    *   WaitPay=true â‡’ å¯¹åº”æœåŠ¡è´¹æ”¶æ¬¾æ¯”ä¾‹ PaidRatioâ‰¥0.5ï¼›
    *   ForceSettle=true â‡’ å¿½ç•¥ PaidRatio æ¡ä»¶ã€‚

**æ— æ•ˆæ¡ˆ â€“ Stage2**

*   ç”¨äºåœ¨è£å†³ç”Ÿæ•ˆåç»“ç®—å‰©ä½™ææˆï¼š
*   å¯ç»“ç®—æ¡ä»¶ç¤ºä¾‹ï¼š
    *   æ— æ•ˆæ¡ˆ Status âˆˆ {INVALID\_WON, INVALID\_LOST, INVALID\_PARTIAL}ï¼›
    *   WaitPay=true â‡’ PaidRatioâ‰¥0.9ï¼›
    *   ForceSettle=true â‡’ å¯å¿½ç•¥ PaidRatioã€‚

**è¯‰è®¼æ¡ˆ**

*   ç±»ä¼¼é€»è¾‘ï¼Œé˜¶æ®µå¯ä»¥å®šä¹‰ä¸ºï¼š
    *   S1ï¼šæ¡ˆä»¶å—ç† + å®Œæˆè¯æ®äº¤æ¢/ç¬¬ä¸€æ¬¡å¼€åº­å
    *   S2ï¼šä¸€å®¡åˆ¤å†³/ç»ˆå®¡åˆ¤å†³å

ç»“ç®—æ‰¹æ¬¡åˆ›å»ºä¸æŠ¥è¡¨è¾“å‡ºå®Œå…¨å¤ç”¨æ¨¡å—å…­çš„æµç¨‹ï¼Œåœ¨æ­¤ä¸å†é‡å¤ã€‚

***

## 14.10 åœºæ™¯ E â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆ

| Phase              | è¡¨                                   | å…³é”®å­—æ®µå˜æ›´                                                                                                                                            |
| ------------------ | ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| E0 åŸæ¡ˆå‰ç½®            | T\_Case                             | åŸæ¡ˆ CaseType=NORMAL/PCT\_NATIONALï¼ŒStatus=GRANTED æˆ–åœ¨å®¡ä¸­ï¼›æœ¬åœºæ™¯ä»…å¼•ç”¨å…¶ CaseID ä½œä¸º OriginalCaseIDã€‚                                                            |
| E1 æ–°å»ºæ— æ•ˆæ¡ˆå·          | T\_Case (INVALIDATION)              | æ–°å¢ä¸€æ¡ CaseType=INVALIDATIONï¼ŒOriginalCaseID æŒ‡å‘åŸæ¡ˆï¼ŒInvalidClientID/InvalidPatentee/InvalidRequester/InvalidRole ç­‰æ— æ•ˆæ‰©å±•å­—æ®µå¡«å…¥ï¼›Status=INVALID\_INITã€‚       |
|                    | T\_Case (LITIGATIONï¼Œå¯é€‰)             | è‹¥æ¶‰åŠè¯‰è®¼ï¼Œç±»ä¼¼åˆ›å»º CaseType=LITIGATIONï¼ŒLitigationType/CourtName/Plaintiff/Defendant/LitigationRole å¡«å…¥ï¼›Status=LIT\_INITã€‚                                   |
| E2 è¯·æ±‚ä¹¦ & åˆå§‹è‰å•      | T\_DocTemplate                      | TemplateCode=INVALID\_REQUESTï¼ŒDocType=OFFICIAL\_OUT, FeeDraftType=INVALID\_FEE ç­‰é…ç½®ã€‚                                                               |
|                    | T\_Document                         | å½•å…¥ INVALID\_REQUEST å»æ–‡ï¼šCaseID=æ— æ•ˆæ¡ˆï¼ŒDocType=OFFICIAL\_OUTï¼ŒTemplateCode=INVALID\_REQUESTï¼ŒDispatchDate/ReplyDate/ReplyToID ç­‰ã€‚                         |
|                    | T\_Case(INVALIDATION)               | Status ä» INVALID\_INIT â†’ INVALID\_FILEDï¼ˆç”± StatusEffect å†³å®šï¼‰ã€‚                                                                                       |
|                    | T\_FeeDraft/T\_FeeItem              | æ ¹æ®è´¹ç‡ç”Ÿæˆ Type=INVALID\_FEE è‰å•å’Œæ˜ç»†ï¼šæ— æ•ˆè¯·æ±‚å®˜è´¹+æ— æ•ˆä»£ç†æœåŠ¡è´¹ç­‰ã€‚                                                                                                   |
| E3 é€šçŸ¥ & æ—¶é™ä»»åŠ¡       | T\_DocTemplate                      | é…ç½® INVALID\_ACCEPT\_NOTICE/INVALID\_DEFENSE\_NOTICE/INVALID\_EVIDENCE\_NOTICE/INVALID\_HEARING\_NOTICE ç­‰æ¨¡æ¿ï¼Œä¸å¯¹åº”æ—¶é™æ¨¡æ¿å…³è”ã€‚                             |
|                    | T\_Document                         | æ’å…¥ OFFICIAL\_IN æ–‡ä¹¦ï¼šå—ç†é€šçŸ¥ã€ç­”è¾©é€šçŸ¥ã€ä¸¾è¯é€šçŸ¥ã€å¼€åº­é€šçŸ¥ã€‚                                                                                                           |
|                    | T\_Case(INVALIDATION)               | å¯¹å—ç†é€šçŸ¥ï¼Œå¯å°† Status ä» INVALID\_FILED â†’ INVALID\_ACCEPTEDã€‚                                                                                             |
|                    | T\_TaskTemplate                     | å®šä¹‰ INVALID\_DEFENSE\_LIMIT/INVALID\_EVIDENCE\_LIMIT/INVALID\_HEARING\_PREP\_LIMITã€‚                                                                |
|                    | T\_Task                             | å¯¹æ¯ä¸ªéœ€è¦è¡ŒåŠ¨çš„é€šçŸ¥ç”Ÿæˆå¯¹åº”æ—¶é™ä»»åŠ¡ï¼ˆç­”è¾©æœŸé™/ä¸¾è¯æœŸé™/å¼€åº­å‡†å¤‡ç­‰ï¼‰ï¼ŒStatus=OPENã€‚                                                                                                  |
| E4 ç­”è¾©/ä¸¾è¯/æ„è§ & æ ¸é”€ä»»åŠ¡ | T\_DocTemplate                      | é…ç½® INVALID\_DEFENSE\_BRIEF/INVALID\_EVIDENCE\_SUBMISSION/INVALID\_WRITTEN\_OPINION ç­‰ OFFICIAL\_OUT æ¨¡æ¿ï¼Œå¹¶è®¾ç½® ReplyToTemplateCode å’Œ FeeDraftTypeï¼ˆå¦‚æœ‰ï¼‰ã€‚ |
|                    | T\_Document                         | å½•å…¥ç­”è¾©çŠ¶/è¯æ®/æ„è§æ–‡ä¹¦ï¼šCaseID=æ— æ•ˆæ¡ˆï¼ŒDocType=OFFICIAL\_OUTï¼ŒReplyToID æŒ‡å‘å¯¹åº”é€šçŸ¥ï¼ŒReplyDate è®°å½•æäº¤æ—¥ã€‚                                                                  |
|                    | T\_FeeDraft/T\_FeeItem              | å¯æ›´æ–° INVALID\_FEE è‰å•ï¼Œå¢åŠ ç­”è¾©/ä¸¾è¯é˜¶æ®µæœåŠ¡è´¹ç­‰ã€‚                                                                                                                |
|                    | T\_Task                             | æ ¹æ® ReplyToID æ‰¾åˆ°å¯¹åº”ä»»åŠ¡ï¼ˆINVALID\_DEFENSE\_LIMIT ç­‰ï¼‰ï¼ŒStatus=OPENâ†’DONE, DoneDate=ReplyDateï¼›å†™ TaskLog(Action=MARK\_DONE)ã€‚                                 |
| E5 è£å†³ & åŸæ¡ˆçŠ¶æ€æ›´æ–°     | T\_DocTemplate                      | TemplateCode=INVALID\_DECISION/LITIGATION\_JUDGMENTï¼Œå®šä¹‰ InputFieldList=DecisionResult/EffectiveDate/AffectedClaims ç­‰ã€‚                              |
|                    | T\_Document                         | å½•å…¥ OFFICIAL\_INï¼šæ— æ•ˆå®£å‘Šå†³å®šä¹¦/åˆ¤å†³ä¹¦ï¼Œå­˜å…¥ ExtraData ç»“æœä¿¡æ¯ã€‚                                                                                                    |
|                    | T\_Case(INVALIDATION/LITIGATION)    | Status æ›´æ–°ä¸º INVALID\_WON/INVALID\_LOST/INVALID\_PARTIAL æˆ– LITIGATION\_WON/LOST/SETTLED ç­‰ã€‚                                                          |
|                    | T\_Case(OriginalCaseID)             | æ ¹æ® DecisionResult å°†åŸæ¡ˆ Status=INVALIDATED/INVALIDATED\_PARTIAL/TERMINATED/ä¿æŒ GRANTEDï¼Œè®°å½•å—å½±å“æƒåˆ©è¦æ±‚ç­‰ã€‚                                                   |
| E6 è´¹ç”¨é—­ç¯            | T\_FeeDraft/T\_FeeItem              | æ— æ•ˆ/è¯‰è®¼æœŸé—´å„é˜¶æ®µç”Ÿæˆ/è¡¥å…… INVALID\_FEE/LITIGATION\_FEE è‰å•ï¼›ä»è´¹ç‡è¡¨æˆ–æ‰‹å·¥æŒ‡å®šè´¹ç”¨ã€‚                                                                                      |
|                    | T\_PayList/T\_GovPayment            | è‹¥æœ‰æ— æ•ˆ/è¯‰è®¼å®˜æ–¹è´¹ç”¨ï¼Œå°† GOV é¡¹æ±‡æ€»åˆ°å®˜è´¹æ¸…å•å¹¶è®°å½•ç¼´è´¹ã€‚                                                                                                                  |
|                    | T\_Bill/T\_BillItem                 | ä»ä¸Šè¿°è‰å•ç”Ÿæˆæ— æ•ˆ/è¯‰è®¼è´¦å•ï¼ŒDirection=ARï¼Œæ˜ç»†å« CaseID å’Œè´¹ç”¨é¡¹ç›®ã€‚                                                                                                     |
|                    | T\_Payment/T\_PaymentLine/T\_Offset | ç™»è®°å®¢æˆ·ä»˜æ¬¾å¹¶å†²é”€è´¦å•ï¼›æ›´æ–° `T_Bill.Balance/Status` å’Œ `T_PaymentLine.BalanceAmt`ã€‚                                                                              |
|                    | T\_CaseReceipt                      | æ‹†åˆ† OffsetAmt åˆ°æ— æ•ˆ/è¯‰è®¼æ¡ˆçš„ (CaseID, FeeCode, FeeType) ç»„åˆä¸­ï¼Œè®°å½• ReceivableAmt/ReceivedAmt/IsArrears ç­‰ã€‚                                                    |
| E7 ææˆ              | T\_CommissionRule                   | ä¸º CaseType=INVALIDATION/LITIGATION å®šä¹‰æ›´é«˜æ¯”ä¾‹æˆ–ç‰¹æ®Š BaseMode çš„ææˆè§„åˆ™ã€‚                                                                                      |
|                    | T\_Commission                       | åœ¨æ— æ•ˆ/è¯‰è®¼è´¦å•ç”Ÿæˆæ—¶ï¼Œæ ¹æ®æœåŠ¡è´¹éƒ¨åˆ†è®¡ç®— BaseFeeï¼ŒæŒ‰ä»£ç†äººåˆ†æ‘Šï¼Œè®°å½• S1/S2\_Rate/Amtï¼Œè®¾ç½® WaitPay å’Œ ForceSettleã€‚                                                                 |
|                    | T\_CommissionSettlement/SettleLine  | åç»­ç»“ç®—æ—¶æŒ‰å¯ç»“ç®—æ¡ä»¶ï¼ˆStatus+PaidRatio+WaitPay/ForceSettleï¼‰å°†æ— æ•ˆ/è¯‰è®¼ææˆçº³å…¥ç»“ç®—æ‰¹æ¬¡ï¼Œç”ŸæˆæŠ¥è¡¨ã€‚                                                                             |

***

âœ… ä»¥ä¸Šå³ä¸º **E2E åœºæ™¯ Eï¼šæ— æ•ˆ / è¯‰è®¼æ¡ˆä»¶å…¨æµç¨‹** çš„å®Œæ•´æ—¶é—´çº¿ & æ•°æ®æµè¯´æ˜ï¼Œå·²æŠŠæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„æ‰€æœ‰å†…å®¹ï¼ˆCaseType=INVALIDATION/LITIGATION çš„æ¡ˆå·ã€OriginalCaseIDã€æ— æ•ˆ/è¯‰è®¼æ‰©å±•å­—æ®µã€å„ç§é€šçŸ¥/ç­”è¾©/ä¸¾è¯/å¼€åº­/è£å†³æ–‡ä¹¦ã€ä¸­é—´æ–‡ä»¶æ¨¡æ¿ã€æ—¶é™æ¨¡æ¿ã€Task åˆ›å»º/æ ¸é”€ã€æ— æ•ˆ/è¯‰è®¼è´¹ç”¨è‰å•ã€è´¦å•ã€æ”¶æ¬¾ã€CaseReceiptã€Commission è§„åˆ™ä¸è®°å½•ã€åŸæ¡ˆçŠ¶æ€æ›´æ–°ï¼‰å…¨éƒ¨ä¸²è”åˆ°ä¸€ä¸ªç« èŠ‚ä¸­ã€‚

## 15. Part II â€“ E2E åœºæ™¯ Fï¼šå®¢æˆ·é¢„æ”¶æ¬¾ & è´¦å•è°ƒæ•´ â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯ä¸“é—¨æè¿°ï¼š\
> **â€œå®¢æˆ·å…ˆæ‰“äº†ä¸€ç¬”é’±è¿‡æ¥ï¼ˆé¢„ä»˜æ¬¾ï¼‰ï¼Œç„¶åå†é™†ç»­å¼€è´¦å•ï¼Œç”¨è¿™ç¬”é¢„ä»˜æ¬¾æŠµæ‰£ä¸åŒæ¡ˆä»¶çš„è´¹ç”¨ï¼›å¦‚æœé¢„ä»˜æ¬¾è¶…å‡ºå…¨éƒ¨è´¦å•ï¼Œåˆ™å¦‚ä½•ç•™å­˜/é€€æ¬¾/è°ƒæ•´ã€‚â€**
>
> å®ƒè´¯ç©¿çš„æ ¸å¿ƒè¡¨æ˜¯ï¼š
>
> *   `T_Payment` / `T_PaymentLine`ï¼šé¢„æ”¶æ¬¾çš„å…¥å£ä¸ä½™é¢
> *   `T_Bill` / `T_BillItem`ï¼šåç»­ç”Ÿæˆçš„å„ç±»è´¦å•ï¼ˆç”³è¯·è´¹/å¹´è´¹/é¡¾é—®/æ— æ•ˆç­‰ï¼‰
> *   `T_Offset`ï¼šé¢„æ”¶æ¬¾ä¸è´¦å•çš„é…å¯¹è®°å½•ï¼ˆå†²é”€ï¼‰
> *   `T_CaseReceipt`ï¼šå°†é¢„æ”¶æ¬¾æœ€ç»ˆâ€œè½¬åŒ–â€ä¸ºå…·ä½“æ¡ˆä»¶å’Œè´¹ç”¨é¡¹çš„å®æ”¶è®°å½•
> *   ï¼ˆå¯é€‰ï¼‰`T_Commission`ï¼šWaitPay åˆ¤æ–­ä¾èµ–â€œæ”¶æ¬¾æ˜¯å¦å·²ç»‘å®šåˆ°å…·ä½“æ¡ˆå·å’ŒæœåŠ¡è´¹ä¸Šâ€

***

## 15.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> æœ‰çš„å¾‹æ‰€ä¸å¤§å®¢æˆ·æœ‰é•¿æœŸåˆä½œå…³ç³»ï¼Œå®¢æˆ·ä¼šâ€œå…ˆæ‰“ä¸€ç¬”é¢„ä»˜æ¬¾â€ï¼Œä¾‹å¦‚ 10 ä¸‡å…ƒï¼Œè®©å¾‹æ‰€å°†æ¥ä¸ºå…¶å¤„ç†ä¸€æ‰¹æ¡ˆä»¶ï¼ˆæ–°æ¡ˆç”³è¯·ã€å¹´è´¹ã€é¡¾é—®é¡¹ç›®ç­‰ï¼‰ã€‚\
> ä¸€æ®µæ—¶é—´åï¼Œå¾‹æ‰€æŒ‰å·¥ä½œè¿›åº¦é™†ç»­å¼€è´¦å•ï¼›è¿™äº›è´¦å•ä¸ä¸€å®šæ¯æ¬¡éƒ½è¦æ±‚å®¢æˆ·å¦è¡Œè½¬è´¦ï¼Œè€Œæ˜¯ä¼˜å…ˆä½¿ç”¨è¿™ç¬”â€œé¢„æ”¶æ¬¾â€æŠµæ‰£ã€‚\
> ç›´åˆ°æŸä¸€åˆ»ï¼š
>
> *   è¦ä¹ˆé¢„æ”¶æ¬¾è¢«å®Œå…¨æ¶ˆè€—ï¼›
>
> *   è¦ä¹ˆå…¨éƒ¨æ¡ˆä»¶éƒ½ç»“æ¸…ä½†ä»å­˜åœ¨é¢„æ”¶æ¬¾ä½™é¢ï¼Œåˆ™éœ€è¦ä¿ç•™ä½™é¢æˆ–å®‰æ’é€€æ¬¾/è´¦åŠ¡è°ƒæ•´ã€‚
>
> ç³»ç»Ÿéœ€è¦åšåˆ°ï¼š
>
> *   æ¸…æ™°è®°å½•é¢„æ”¶æ¬¾çš„æ¥æºä¸ä½™é¢ï¼›
> *   æ¸…æ™°è®°å½•é¢„æ”¶æ¬¾æ˜¯å¦‚ä½•è¢«ä½¿ç”¨åˆ°å“ªäº›è´¦å•/æ¡ˆä»¶ä¸Šçš„ï¼›
> *   æ¯ä¸ªæ¡ˆä»¶çš„è´¹ç”¨/æ”¶æ¬¾æƒ…å†µï¼ˆT\_CaseReceiptï¼‰èƒ½åæ˜ â€œå®æ”¶æ¬¾å·²è¦†ç›–çš„éƒ¨åˆ†â€ï¼Œä¸ºææˆ WaitPay æä¾›ä¾æ®ã€‚

**æ¶‰åŠæ¨¡å—ä¸è¡¨**

*   **æ¨¡å—äº”ï¼šè´¦å•ã€æ”¶æ¬¾ã€å‚¬æ¬¾ä¸åè´¦**
    *   `T_Payment` â€“ æ”¶æ¬¾å•å¤´ï¼ˆåŒ…æ‹¬é¢„æ”¶æ¬¾ï¼‰
    *   `T_PaymentLine` â€“ æ”¶æ¬¾æ‹†åˆ†è¡Œï¼ˆæ¯è¡Œå¯ä»£è¡¨ä¸€ä¸ªâ€œé¢„æ”¶æ¬¾æ± â€æˆ–æ¡ˆåˆ«æ”¶æ¬¾ï¼‰
    *   `T_Bill` / `T_BillItem` â€“ åç»­ç”Ÿæˆçš„å„ç±»è´¦å•
    *   `T_Offset` â€“ æ”¶æ¬¾å¯¹è´¦å•çš„å†²é”€è®°å½•
*   **æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†**
    *   `T_CaseReceipt` â€“ ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ï¼ˆåº”æ”¶/å®æ”¶/æ¬ æ¬¾/é¢„æ”¶ï¼‰
*   **æ¨¡å—å…­ï¼šä»£ç†äººé…¬é‡‘ï¼ˆé—´æ¥ï¼‰**
    *   `T_Commission` â€“ ææˆå¯å¦ç»“ç®—ä¾èµ–â€œæœåŠ¡è´¹çš„æ”¶æ¬¾æ¯”ä¾‹â€ï¼Œè€Œæ”¶æ¬¾æ¯”ä¾‹åˆå–å†³äºé¢„æ”¶æ¬¾æ˜¯å¦å·²ç»é€šè¿‡ Offset ç»‘å®šåˆ°è´¦å•/æ¡ˆå·

***

## 15.2 Phase F0ï¼šåˆå§‹çŠ¶æ€ â€“ å°šæœªäº§ç”Ÿä»»ä½•è´¦å•ï¼Œå®¢æˆ·æå‡ºé¢„ä»˜æ„å‘

**è§’è‰²**

*   å®¢æˆ·
*   Finance

**æè¿°**

*   å®¢æˆ·å‘ŠçŸ¥å¾‹æ‰€ï¼šâ€œå…ˆæŠŠ 100,000 å…ƒæ‰“ç»™ä½ ä»¬ä½œä¸ºé¢„ä»˜æ¬¾ï¼Œä»¥åä»è¿™ç¬”é’±é‡Œæ‰£ç¼´å„ç±»è´¹ç”¨ã€‚â€
*   æ­¤æ—¶å¯¹ç³»ç»Ÿæ¥è¯´ï¼š
    *   æ²¡æœ‰ä»»ä½•å¯¹åº”è´¦å•ï¼›
    *   ä¹Ÿä¸ä¸€å®šçŸ¥é“å°†æ¥è¦ä½¿ç”¨è¿™ç¬”é’±çš„å…·ä½“æ¡ˆä»¶åˆ—è¡¨ã€‚

**æŠ€æœ¯å±‚é¢**

*   æ— æ•°æ®åº“æ“ä½œï¼Œç›´åˆ° Finance å®é™…çœ‹åˆ°è¿™ç¬”é’±åˆ°è´¦ã€‚

***

## 15.3 Phase F1ï¼šå½•å…¥é¢„æ”¶æ¬¾ â€“ `T_Payment` + `T_PaymentLine`ï¼ˆBalanceAmt>0ï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­ç™»è®°å®¢æˆ·é¢„ä»˜æ¬¾ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªâ€œé¢„æ”¶æ¬¾æ± â€ï¼ˆPaymentLine.BalanceAmtï¼‰ï¼Œä¾›æœªæ¥è´¦å•å†²é”€ä½¿ç”¨ã€‚

### 15.3.1 æ”¶æ¬¾å•å¤´ â€“ `T_Payment`

åœ¨â€œæ”¶æ¬¾ç™»è®°â€ç•Œé¢ï¼š

1.  åˆ›å»ºä¸€æ¡ `T_Payment`ï¼š
    *   `ClientID` = è¯¥å®¢æˆ·
    *   `PayNo` = è‡ªåŠ¨ç¼–å·ï¼ˆå¯ä¿®æ­£ä¸ºâ€œPR-YYYYMM-xxxâ€æ ¼å¼ï¼‰
    *   `PayDate` = é¢„æ”¶æ¬¾å®é™…åˆ°è´¦æ—¥ï¼ˆé“¶è¡Œå¯¹è´¦å•æ—¥æœŸï¼‰
    *   `Currency` = æ”¶æ¬¾å¸ç§ï¼ˆå¦‚ CNYï¼‰
    *   `Amount` = 100000ï¼ˆä¸¾ä¾‹ï¼‰
    *   `PayMethod` = â€œè½¬è´¦/ç”µæ±‡â€ç­‰
    *   `BankRefNo` = é“¶è¡Œæµæ°´å·
    *   `Remark` = â€œé¢„æ”¶æ¬¾â€ æˆ– â€œå®¢æˆ·é¢„ä»˜æœªæ¥æœåŠ¡è´¹â€ç­‰è¯´æ˜
2.  æ ¡éªŒï¼ˆæ¨¡å—äº” V-PM-01\~03ï¼‰é€šè¿‡åä¿å­˜ã€‚

**å†™å…¥ `T_Payment` æ•°æ®**

*   PaymentID generated
*   Rawæ•°æ®å¦‚ä¸Šä¿å­˜ã€‚

***

### 15.3.2 æ”¶æ¬¾è¡Œ â€“ `T_PaymentLine`ï¼ˆé¢„æ”¶æ¬¾æ± çš„è½½ä½“ï¼‰

ç³»ç»Ÿåœ¨ä¿å­˜ `T_Payment` æ—¶è‡ªåŠ¨åˆ›å»ºä¸€æ¡ `T_PaymentLine`ï¼š

*   `PaymentLineID` = æ–°ç”Ÿæˆ
*   `PaymentID` = ä¸Šè¿° PaymentID
*   `CaseID` = **NULL**ï¼ˆè¡¨ç¤ºæ­¤è¡Œå°šæœªç»‘å®šå…·ä½“æ¡ˆä»¶ï¼Œæ˜¯â€œé€šç”¨é¢„æ”¶æ¬¾â€ï¼‰
*   `RawAmount` = 100000
*   `AllocatedAmt` = 0
*   `BalanceAmt` = 100000ï¼ˆå…¨éƒ¨æœªç”¨ï¼Œæ„æˆâ€œé¢„æ”¶æ¬¾æ± â€ï¼‰
*   `Remark` = â€œé¢„æ”¶æ¬¾ â€“ æœªåˆ†é…â€

**ç»“æœ**

*   åœ¨ç³»ç»Ÿåº”æ”¶è§†è§’ä¸­ï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½• `T_Bill` å˜åŒ–ï¼›
*   ä½†åœ¨â€œæ”¶æ¬¾â€è§†è§’ä¸­ï¼Œå·²è®°å½•æœ‰ 100,000 é¢„æ”¶æ¬¾ä½™é¢ï¼Œå°šæœªåˆ†é…ç»™ä»»ä½•è´¦å•ã€‚
*   â€œå®¢æˆ·é¢„æ”¶æ¬¾æŠ¥è¡¨â€ä¸­å¯é€šè¿‡ `PaymentLine.BalanceAmt>0` æŸ¥åˆ°è¿™æ¡è®°å½•ã€‚

***

## 15.4 Phase F2ï¼šé¢„æ”¶æ¬¾æ±  â€“ æŸ¥è¯¢ä¸å±•ç¤º

**è§’è‰²**

*   Finance
*   Manager

**ç›®æ ‡**

*   èƒ½éšæ—¶çœ‹åˆ°æŸå®¢æˆ·å½“å‰æœ‰å¤šå°‘â€œæœªä½¿ç”¨é¢„æ”¶æ¬¾â€ã€‚

### 15.4.1 å®¢æˆ·é¢„æ”¶æ¬¾æŠ¥è¡¨

æŠ¥è¡¨é€»è¾‘ï¼š

*   æŸ¥è¯¢ `T_PaymentLine` WHERE `ClientID`ï¼ˆé€šè¿‡å…³è” Paymentï¼‰ = æŸå®¢æˆ· AND `BalanceAmt > 0`ï¼›
*   æ˜¾ç¤ºå­—æ®µï¼š
    *   PayNo, PayDate, RawAmount, AllocatedAmt, BalanceAmt, Remark
*   æ±‡æ€»å­—æ®µï¼š
    *   `PrepaymentTotal = Î£ BalanceAmt`ï¼ˆå®¢æˆ·çº§é¢„æ”¶æ€»ä½™é¢ï¼‰

**ç»“æœ**

*   ç®¡ç†å±‚èƒ½å¤Ÿçœ‹åˆ°â€œå®¢æˆ·é¢„æ”¶ä½™é¢â€ï¼Œé¿å…å‡ºç°è´¦åŠ¡è¯¯è§£ã€‚

> æ³¨æ„ï¼šæ­¤æ—¶ `T_CaseReceipt` é€šå¸¸ **ä¸** å†™å…¥ï¼ˆé™¤éé¢„æ”¶æ¬¾é¢„å…ˆæŒ‡å®šæŸä¸€æ¡ˆä»¶ï¼Œä¸‹é¢ä¼šå•ç‹¬è¯´ï¼‰ã€‚

***

## 15.5 Phase F3ï¼šé¢„ä»˜æ¬¾ç»‘å®šåˆ°å…·ä½“æ¡ˆä»¶ï¼ˆå¯é€‰çš„æ¡ˆå·çº§é¢„æŒ‚ï¼‰

æœ‰ä¸¤ç§ä¸šåŠ¡æƒ…å†µï¼š

1.  **é¢„æ”¶æ¬¾ä»…ä½œä¸ºå®¢æˆ·å±‚çº§çš„â€œé€šç”¨ä½™é¢â€**ï¼ˆä¸å…ˆæŒ‚åˆ°æ¡ˆä»¶ï¼‰
2.  **é¢„æ”¶æ¬¾ä¸€å¼€å§‹å°±ä¸æŸä¸ªæˆ–å¤šä¸ªæ¡ˆä»¶å…³è”**ï¼ˆä¾‹å¦‚æŒ‡å®šâ€œè¿™ 10 ä¸‡åªç”¨äºæ¡ˆ X çš„è´¹ç”¨â€ï¼‰

### 15.5.1 æƒ…å†µ 1ï¼šä¸é¢„æŒ‚åˆ°å…·ä½“æ¡ˆä»¶ï¼ˆæ¨èåšæ³•ï¼‰

*   æ­¤æ—¶ä»…æœ‰ `T_PaymentLine`ï¼ŒCaseID=NULLï¼›
*   `T_CaseReceipt` æš‚ä¸å†™å…¥ä»»ä½•è®°å½•ï¼Œç›´åˆ°åç»­æœ‰è´¦å•å¹¶å†²é”€ï¼Œè¿™ä¸€ç¬”é¢„æ”¶æ¬¾æ‰â€œè¢«æ˜ å°„â€åˆ°å…·ä½“æ¡ˆä»¶ä¸è´¹ç”¨ä¸Šã€‚
*   WaitPay å’Œ Commission çš„æ”¶æ¬¾æ¯”ä¾‹è®¡ç®—äº¦ä¼šåœ¨â€œå†²é”€åˆ°å…·ä½“è´¦å•ä¹‹åâ€æ‰è§†ä½œæœ‰æ•ˆã€‚

### 15.5.2 æƒ…å†µ 2ï¼šé¢„æŒ‚åˆ°æŸä¸ªæ¡ˆä»¶ï¼ˆå¯é€‰ï¼‰

å¦‚æœä¸šåŠ¡æ˜ç¡®æŒ‡å‡ºï¼šâ€œè¿™ 100,000 æ˜¯ä¸ºæ¡ˆ X çš„å…¨é¢é¢„ä»˜æ¬¾â€ï¼Œåˆ™å¯ä»¥åœ¨å½•å…¥æ—¶ï¼š

1.  å°† `T_PaymentLine.CaseID = X çš„ CaseID`ï¼ˆè¡¨ç¤ºè¿™æ¡ä»˜æ¬¾è¡Œä¸»ç”¨äºæ¡ˆ Xï¼‰ï¼Œå¹¶é€æ¡ˆæ‹†åˆ†ï¼›
2.  åœ¨ `T_CaseReceipt` ä¸­æ’å…¥ä¸€æ¡é¢„æ”¶è®°å½•ï¼š
    *   `CaseID` = X
    *   `FeeCode/FeeName` = å¦‚â€œé¢„æ”¶æ¬¾ï¼ˆç”³è¯·é˜¶æ®µï¼‰â€
    *   `YearNo` = NULL
    *   `FeeType` = SERVICE æˆ– MISCï¼ˆè§†å†…éƒ¨è®°è´¦ä¹ æƒ¯ï¼‰
    *   `ReceivableAmt = 0`ï¼ˆè¿˜æ²¡äº§ç”Ÿè´¹ç”¨ï¼‰
    *   `ReceivedAmt = 100000`
    *   `IsPrepayment = true`
    *   `IsArrears = false`
    *   `IsCommissionable = false`ï¼ˆæ­¤æ—¶è¿˜ä¸è®¡ææˆï¼‰
    *   `ReceiptDate` = PayDate
    *   `DueDate` å¯ç©º
    *   `InvoiceNo` å¦‚æš‚ä¸å¼€å‘ç¥¨åˆ™ä¸ºç©º
    *   `Remark` = é¢„æ”¶æ¬¾è¯´æ˜ï¼ˆåˆåŒå·/é¡¹ç›®å·ç­‰ï¼‰

åœ¨åç»­å¼€è´¦å•æ—¶ï¼Œå¯ä»¥æŠŠè¿™æ¡é¢„æ”¶è®°å½•è½¬æ¢ä¸ºâ€œå®æ”¶ + å¯¹åº”åº”æ”¶â€ï¼Œè§åç»­ Phase F6ã€‚

***

## 15.6 Phase F4ï¼šåç»­å¼€è´¦å• â€“ ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€ï¼ˆT\_Bill/T\_Offsetï¼‰

æŸæ®µæ—¶é—´ä¹‹åï¼Œå¾‹æ‰€å¼€å§‹ä¸ºè¯¥å®¢æˆ·å¤„ç†ä¸€æ‰¹å…·ä½“ä¸šåŠ¡ï¼ˆæ–°æ¡ˆ/å¹´è´¹/é¡¾é—®é¡¹ç›®ç­‰ï¼‰ï¼Œä»è€Œç”Ÿæˆå„ç§è´¦å•ã€‚

**è§’è‰²**

*   Formalitiesï¼ˆå‘èµ·è´¦å•ç”Ÿæˆï¼‰
*   Financeï¼ˆç¡®è®¤è´¦å•ã€ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€ï¼‰

**ç›®æ ‡**

*   å¯¹æ–°ç”Ÿæˆçš„è´¦å•ï¼Œä¸æ˜¯è¦æ±‚å®¢æˆ·å†æ¬¡ä»˜æ¬¾ï¼Œè€Œæ˜¯ **ç›´æ¥ç”¨é¢„æ”¶æ¬¾å†²é”€è´¦å•ä½™é¢**ã€‚

### 15.6.1 è´¦å•ç”Ÿæˆï¼ˆæ™®é€šåœºæ™¯ï¼Œå¤ç”¨åœºæ™¯ A/D/Hï¼‰

å¯¹æŸä¸ªå…·ä½“æ¡ˆä»¶ CaseIDï¼Œç³»ç»Ÿå·²æ ¹æ®è‰å•ç”Ÿæˆäº†æ–°çš„ `T_Bill`ï¼š

*   Direction=AR
*   Amount=å¦‚ 30,000ï¼ˆæœåŠ¡è´¹+ä»£å«è´¹ï¼‰
*   Balance=30,000
*   Status=UNSETTLED
*   T\_BillItem ä¸­è®°å½•æ˜ç»†ï¼ˆCaseID/FeeCode/YearNo/FeeType/Amount ç­‰ï¼‰ã€‚

æ­¤æ—¶æˆ‘ä»¬æœ‰ä¸¤ä¸ªâ€œåº“â€ï¼š

*   é¢„æ”¶æ¬¾æ± ï¼š`T_PaymentLine.BalanceAmt=100,000`ï¼ˆPhase F1ï¼‰
*   åº”æ”¶è´¦å•ï¼š`T_Bill.Balance=30,000`ï¼ˆæ–°ç”Ÿæˆï¼‰

### 15.6.2 æ”¶æ¬¾ä¸å†²é”€ç•Œé¢ä¸­çš„æ“ä½œ

**å…³é”®ç‚¹**ï¼šè¿™é‡Œä¸å†è®°å½•æ–°çš„ `T_Payment`ï¼Œè€Œæ˜¯ç›´æ¥åˆ©ç”¨ä¹‹å‰çš„ PaymentLine è¿›è¡Œå†²é”€ã€‚

1.  Finance æ‰“å¼€â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼›
2.  å·¦ä¾§é€‰ä¸­é¢„æ”¶æ¬¾å¯¹åº”çš„ `T_PaymentLine`ï¼ˆBalanceAmt=100,000ï¼‰ï¼›
3.  å³ä¾§æ˜¾ç¤ºè¯¥å®¢æˆ·æ‰€æœ‰æœªç»“è´¦å•ï¼ŒåŒ…æ‹¬åˆšç”Ÿæˆçš„ `T_Bill`ï¼ˆBalance=30,000ï¼‰å’Œä¹‹å‰å¯èƒ½å­˜åœ¨çš„å…¶ä»–è´¦å•ï¼›
4.  Finance åœ¨æ–°è´¦å•è¿™ä¸€è¡Œè¾“å…¥ `OffsetAmt=30,000`ï¼›
5.  ç‚¹å‡»â€œä¿å­˜å†²é”€â€ã€‚

### 15.6.3 æ•°æ®åº“æ›´æ–° â€“ å†²é”€è®°å½• & ä½™é¢

**å†™å…¥ `T_Offset`**

*   æ–°å¢ä¸€æ¡è®°å½•ï¼š
    *   PaymentLineID = é¢„æ”¶æ¬¾ line çš„ ID
    *   BillID = æ–°è´¦å• BillID
    *   OffsetAmt = 30,000
    *   OffsetDate = å½“å‰æ—¥æœŸ
    *   CreatedBy/At = å½“å‰ç”¨æˆ·/æ—¶é—´

**æ›´æ–° `T_PaymentLine`ï¼ˆé¢„æ”¶æ¬¾ï¼‰**

*   `AllocatedAmt += 30,000` â†’ from 0 â†’ 30,000
*   `BalanceAmt -= 30,000` â†’ from 100,000 â†’ 70,000

**æ›´æ–° `T_Bill`ï¼ˆæ–°è´¦å•ï¼‰**

*   `Balance -= 30,000` â†’ from 30,000 â†’ 0
*   `Status = SETTLED`ï¼ˆå…¨éƒ¨ç»“æ¸…ï¼‰

**ç»“æœ**

*   ä»åº”æ”¶è´¦æ¬¾è§†è§’çœ‹ï¼šè¯¥è´¦å•å·²ç»å®Œå…¨ç»“æ¸…ï¼Œå®¢æˆ·æ— éœ€è¿½åŠ ä»˜æ¬¾ï¼›
*   ä»é¢„æ”¶æ¬¾è§†è§’çœ‹ï¼šé¢„æ”¶æ¬¾æ± å‡å°‘äº† 30,000ï¼Œå‰©ä½™ 70,000 å¯ç”¨äºæœªæ¥è´¦å•ï¼›
*   ä½†ä»æ¡ˆä»¶æ”¶æ¬¾å’Œææˆè§†è§’çœ‹ï¼Œè¿˜éœ€è¦æŠŠè¿™ 30,000 æ˜ å°„åˆ°å…·ä½“æ¡ˆä»¶/è´¹ç”¨ï¼Œè¿™ç”±ä¸‹ä¸€æ­¥ T\_CaseReceipt å®Œæˆã€‚

***

## 15.7 Phase F5ï¼šé¢„æ”¶æ¬¾è½¬åŒ–ä¸ºâ€œæ¡ˆå·å®æ”¶â€ â€“ æ›´æ–° T\_CaseReceipt

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Financeï¼ˆå¯æŸ¥çœ‹/æ ¡æ­£ï¼‰

**ç›®æ ‡**

*   å°†ä»é¢„æ”¶æ¬¾å†²é”€è´¦å•çš„ 30,000 å…ƒï¼ŒæŒ‰è´¦å•æ˜ç»†æ‹†åˆ†æ˜ å°„åˆ° `T_CaseReceipt`ï¼Œä½¿æ¡ˆä»¶å±‚é¢èƒ½å¤Ÿçœ‹åˆ°â€œè¿™ 30,000 å·²ç»å¯¹æŸäº›è´¹ç”¨é¡¹å®æ”¶â€ã€‚

### 15.7.1 æŒ‰ BillItem æ‹†åˆ† OffsetAmt

å¯¹åˆšåˆšç»“æ¸…çš„é‚£å¼ è´¦å•ï¼š

*   `Bill.Amount` = 30,000
*   å‡è®¾è¯¥ Bill æœ‰ä¸¤ä¸ª BillItemï¼š
    1.  æœåŠ¡è´¹ï¼š20,000ï¼ˆFeeType=SERVICEï¼‰
    2.  ä»£å«å®˜è´¹ï¼š10,000ï¼ˆFeeType=GOVï¼‰

å½“æˆ‘ä»¬ç”¨ OffsetAmt=30,000 æŠµæ¶ˆæ•´å¼ è´¦å•æ—¶ï¼š

*   B1:æœåŠ¡è´¹éƒ¨åˆ†è·å¾—å®æ”¶= 30,000 Ã— (20,000 / 30,000) = 20,000
*   B2:å®˜è´¹éƒ¨åˆ†è·å¾—å®æ”¶= 30,000 Ã— (10,000 / 30,000) = 10,000

ç³»ç»Ÿå¯ä»¥è¿™ä¹ˆåšï¼š

1.  å¯¹æ¯æ¡ `T_BillItem` è®¡ç®—æƒé‡ `w_i = LocalAmount_i / Bill.Amount`ï¼›
2.  å¯¹æœ¬æ¬¡å†²é”€é‡‘é¢ `OffsetAmt` å¯¹å„æ˜ç»†åˆ†é…ï¼š`allocated_i = OffsetAmt Ã— w_i`ï¼›
3.  å¯ä»¥ç´¯åŠ å¤šä¸ª Offset çš„åˆ†é…ï¼ˆä¾‹å¦‚å¯¹åŒä¸€è´¦å•å¤šæ¬¡å†²é”€ï¼‰ã€‚

### 15.7.2 æ›´æ–°/åˆ›å»º `T_CaseReceipt`

**å¯¹æ¯ä¸ªæ˜ç»†** `(CaseID, FeeCode, YearNo, FeeType)`ï¼š

1.  åœ¨ `T_CaseReceipt` ä¸­æŸ¥æ‰¾æ˜¯å¦å·²æœ‰å¯¹åº”è®°å½•ï¼š
    *   `CaseID` = BillItem.CaseID
    *   `FeeCode` = BillItem.FeeCode
    *   `YearNo` = BillItem.YearNoï¼ˆå¦‚æœ‰ï¼‰
    *   `FeeType` = BillItem.FeeType
2.  è‹¥å­˜åœ¨è®°å½•ï¼š
    *   `ReceivableAmt`ï¼š
    *   è‹¥ 0ï¼Œåˆ™å°†å…¶è®¾ä¸º BillItem.LocalAmount çš„æ€»å’Œï¼ˆå¦‚ä¹‹å‰æ²¡å†™å…¥ï¼‰ï¼›
    *   è‹¥ >0ï¼Œåˆ™ä¿æŒä¸å˜æˆ–æŒ‰ç´¯è®¡ç­–ç•¥æ›´æ–°ï¼ˆå¯¹äºå¤šå¼ è´¦å•çš„ç›¸åŒè´¹ç”¨é¡¹ï¼‰ã€‚

*   `ReceivedAmt += allocated_i`ï¼ˆæœ¬æ¬¡åˆ†é…é‡‘é¢ï¼‰ï¼›
*   `IsArrears = (ReceivedAmt < ReceivableAmt)`
    3\.  è‹¥ä¸å­˜åœ¨è®°å½•ï¼Œåˆ™æ–°å»º `T_CaseReceipt`ï¼š
    *   `CaseID`, `FeeCode`, `FeeName` = BillItem.FeeName, `YearNo`, `FeeType`
*   `ReceivableAmt` = BillItem.LocalAmountï¼ˆæˆ–æ›´å¤æ‚çš„åˆè®¡ï¼Œä½†é»˜è®¤æ¯æ¡è´¦å•ä¸€æ¬¡ï¼‰
*   `ReceivedAmt` = allocated\_i
*   `Currency` = è´¦å•å¸ç§
*   `ReceiptDate` = Payment.PayDate
*   `DueDate` = Bill.DueDateï¼ˆæˆ–è€…å¯ä¸å¡«ï¼‰
*   `IsArrears` = ReceivedAmt < ReceivableAmtï¼Ÿ
*   `IsPrepayment` = falseï¼ˆå› ä¸ºæ­¤åˆ»å·²ç»ä¸å…·ä½“è´¦å•ç›¸åŒ¹é…ï¼Œä¸å†æ˜¯â€œæ— å¯¹è´¦å•é¢„æ”¶â€ï¼‰
*   `IsCommissionable` = (FeeType=SERVICE) é€šå¸¸è®¾ä¸º trueï¼›å®˜è´¹å¯è§†ææˆè§„åˆ™å†³å®šï¼›
*   `InvoiceNo` = è‹¥å·²å¼€ç¥¨ï¼Œåˆ™å¡«å¯¹åº”å‘ç¥¨å·ï¼›å¦åˆ™ä¸ºç©ºã€‚
*   `Remark` = â€œç”±é¢„æ”¶æ¬¾å†²é”€è´¦å• XXX è½¬æ¢è€Œæ¥â€ç­‰è¯´æ˜ã€‚

**ç»“æœ**

*   åœ¨æ¡ˆä»¶å±‚é¢ `T_CaseReceipt` ä¸­ï¼š
    *   å¯¹æœåŠ¡è´¹é¡¹ç›®ï¼š
        *   ReceivableAmt=20,000ï¼ŒReceivedAmt=20,000ï¼ŒIsArrears=false
    *   å¯¹å®˜è´¹é¡¹ç›®ï¼š
        *   ReceivableAmt=10,000ï¼ŒReceivedAmt=10,000ï¼ŒIsArrears=false
*   è´¹ç”¨æƒ…å†µæŸ¥è¯¢ä¸­å¯ä»¥çœ‹åˆ°ï¼š
    *   å®˜è´¹ä»˜æ¬¾æƒ…å†µï¼ˆå®˜æ–¹å±‚ï¼‰ç”± T\_GovPayment æä¾›ï¼›
    *   å®¢æˆ·ä»˜æ¬¾æƒ…å†µï¼ˆé’ˆå¯¹è¯¥æ¡ˆï¼‰ç”± T\_CaseReceipt æä¾›ï¼Œå³ä½¿è¿™äº›é’±æ¥è‡ªé¢„æ”¶æ¬¾ã€‚

***

## 15.8 Phase F6ï¼šå¤šæ¡ˆå¤šè´¦å• â€“ é¢„æ”¶æ¬¾è¢«å¤šæ¬¡ & å¤šé¡¹ç›®æ¶ˆè€—

**è§’è‰²**

*   Finance
*   ç³»ç»Ÿ

**ç›®æ ‡**

*   è¯´æ˜â€œè¿™ç¬” 100,000 é¢„æ”¶æ¬¾å¯ä»¥åœ¨ä¸åŒæ—¶é—´å’Œä¸åŒæ¡ˆä»¶çš„å¤šä¸ªè´¦å•ä¸­è¢«åˆ†é…â€çš„æ•°æ®æµã€‚

### 15.8.1 ç¤ºä¾‹æ—¶é—´çº¿

1.  é¦–æ¬¡å†²é”€ï¼š
    *   Bill #1ï¼šç”³è¯·è´¹è´¦å•ï¼ˆCaseAï¼‰ï¼Œ30,000 â†’ ç”¨é¢„æ”¶æ¬¾å†²é”€ â†’ PaymentLine.BalanceAmt ä» 100,000 â†’ 70,000
2.  ç¬¬äºŒæ¬¡å†²é”€ï¼ˆä¸€ä¸ªæœˆåï¼‰ï¼š
    *   Bill #2ï¼šå¹´è´¹è´¦å•ï¼ˆCaseBï¼‰ï¼Œ20,000 â†’ å†²é”€ â†’ BalanceAmt: 70,000 â†’ 50,000
3.  ç¬¬ä¸‰æ¬¡å†²é”€ï¼ˆå†è¿‡ä¸€æ®µæ—¶é—´ï¼‰ï¼š
    *   Bill #3ï¼šé¡¾é—®é¡¹ç›®è´¦å•ï¼ˆCaseCï¼‰ï¼Œ40,000 â†’ å†²é”€ â†’ BalanceAmt: 50,000 â†’ 10,000

**æ¯æ¬¡å†²é”€å¤„ç†**

*   æ¯æ¬¡éƒ½æ–°å¢è‹¥å¹²æ¡ `T_Offset`ï¼š
    *   Offset 1ï¼šPaymentLineID=é¢„æ”¶æ¬¾è¡Œï¼ŒBillID=Bill #1ï¼ŒOffsetAmt=30,000
    *   Offset 2ï¼šPaymentLineID=é¢„æ”¶æ¬¾è¡Œï¼ŒBillID=Bill #2ï¼ŒOffsetAmt=20,000
    *   Offset 3ï¼šPaymentLineID=é¢„æ”¶æ¬¾è¡Œï¼ŒBillID=Bill #3ï¼ŒOffsetAmt=40,000
*   `T_PaymentLine`ï¼š
    *   AllocatedAmt = 30,000 + 20,000 + 40,000 = 90,000
    *   BalanceAmt = 100,000 - 90,000 = 10,000
*   æ¯ä¸€å¼  Bill çš„ Balance å’Œ Status ä¹ŸæŒ‰å„è‡ªå†²é”€æƒ…å†µæ›´æ–°ï¼›
*   `T_CaseReceipt` å¯¹ CaseA/CaseB/CaseC çš„ç›¸å…³ Fee é¡¹è¿›è¡Œæ‹†åˆ†å’Œæ›´æ–°ï¼ˆæ¯æ¬¡åˆ†é…å¯¹åº”çš„æœåŠ¡è´¹/å®˜è´¹é‡‘é¢ï¼‰ã€‚

**ç»“æœ**

*   é¢„æ”¶æ¬¾ PaymentLine ä¸€æ¡è®°å½•ï¼Œé€šè¿‡å¤šæ¡ Offset ä¸å¤šä¸ª Bill äº§ç”Ÿè”ç³»ï¼›
*   æ¯ä¸ªæ¡ˆä¾‹çš„ `T_CaseReceipt` éƒ½ä½“ç°è‡ªå·±å·²å®æ”¶å¤šå°‘ã€æ˜¯å¦å°šæœ‰æ¬ æ¬¾ï¼›
*   `T_PaymentLine.BalanceAmt` æ—¶åˆ»å±•ç¤ºå‰©ä½™é¢„æ”¶æ¬¾ä½™é¢ã€‚

***

## 15.9 Phase F7ï¼šé¢„æ”¶æ¬¾ä½™é¢ > æ‰€æœ‰è´¦å•æ€»é¢ â€“ ç•™å­˜ / é€€æ¬¾ / è´Ÿè´¦å•è°ƒæ•´

**è§’è‰²**

*   Finance
*   Manager

**ç›®æ ‡**

*   è§£å†³ä¸€ä¸ªç°å®é—®é¢˜ï¼šæ‰€æœ‰ç›¸å…³è´¦å•éƒ½å·²ç»è¢«é¢„æ”¶æ¬¾æŠµæ‰£å®Œï¼Œä»æœ‰é¢„æ”¶æ¬¾ä½™é¢ï¼Œè¯¥æ€ä¹ˆåŠã€‚

### 15.9.1 æƒ…å½¢ï¼šç•™å­˜ä¸ºæœªæ¥ä½¿ç”¨ï¼ˆç»§ç»­å½“é¢„æ”¶æ¬¾ï¼‰

*   è‹¥å®¢æˆ·çº¦å®šâ€œé¢„æ”¶æ¬¾å¯é•¿æœŸç•™å­˜ç”¨äºæœªæ¥æ¡ˆä»¶â€ï¼Œåˆ™å¯ä»¥ï¼š
    *   ä¿æŒ `T_PaymentLine.BalanceAmt > 0`ï¼Œä¸åšå¤„ç†ï¼›
    *   åœ¨é¢„æ”¶æ¬¾æŠ¥è¡¨ä¸­ç»§ç»­æ˜¾ç¤ºè¿™éƒ¨åˆ†ä½™é¢ï¼›
    *   åœ¨æœªæ¥æœ‰æ–°è´¦å•æ—¶ç»§ç»­ç”¨è¯¥ PaymentLine åš Offsetã€‚

**æ³¨æ„**

*   ä»è´¢åŠ¡è§†è§’ï¼Œè¿™ä¾ç„¶æ˜¯äº‹åŠ¡æ‰€çš„è´Ÿå€ºï¼ˆé¢„æ”¶æ”¶å…¥ï¼‰ï¼Œä½†ç³»ç»Ÿä¸»è¦å…³æ³¨â€œè¿™ç¬”é’±è¿˜æœ‰å¤šå°‘æ²¡ç”¨â€ã€â€œæœªæ¥è´¦å•å¯ä»¥ç”¨å®ƒæŠµå¤šå°‘â€ï¼Œè¿™æ˜¯åˆç†çš„ã€‚

***

### 15.9.2 æƒ…å½¢ï¼šå®¢æˆ·è¦æ±‚é€€æ¬¾

è‹¥æŸæ—¶åˆ»å®¢æˆ·æå‡ºï¼š

> â€œæœªæ¥æ²¡æœ‰æ–°çš„ä¸šåŠ¡äº†ï¼Œè¯·æŠŠå‰©ä½™çš„é¢„ä»˜æ¬¾é€€ç»™æˆ‘ä»¬ã€‚â€

**æ¨èåšæ³•ï¼ˆè´¦åŠ¡æ¸…æ™°ï¼‰ï¼š**

1.  ç”±è´¢åŠ¡åœ¨å¤–éƒ¨ä¼šè®¡ç³»ç»Ÿä¸­æ‰§è¡Œé€€æ¬¾æ“ä½œï¼›
2.  åœ¨ FPMS ä¸­åšä¸€ç¬”â€œé€€æ¬¾çš„é•œåƒåŠ¨ä½œâ€ï¼Œæœ‰ä¸¤ç§å¸¸è§å®ç°æ–¹å¼ï¼š

#### æ–¹æ³• Aï¼šè´Ÿè´¦å• + å†²é”€

1.  ä¸ºå®¢æˆ·æ–°å»ºä¸€å¼  `Direction=AP` æˆ– `Direction=AR, Amount<0` çš„â€œé€€æ¬¾è´¦å•â€ï¼š
    *   ä¾‹å¦‚åˆ›å»ºä¸€å¼  AP è´¦å•ï¼Œè¡¨ç¤ºäº‹åŠ¡æ‰€æ¬ å®¢æˆ· X å…ƒï¼›
    *   `Amount = é¢„æ”¶æ¬¾ä½™é¢`ã€‚
2.  ä½¿ç”¨åŸé¢„æ”¶æ¬¾ `T_PaymentLine` å¯¹è¿™å¼ â€œé€€æ¬¾è´¦å•â€æ‰§è¡Œ `T_Offset`ï¼š
    *   OffsetAmt=é¢„æ”¶æ¬¾ä½™é¢ï¼›
    *   ç»“æœæ˜¯ï¼š
        *   PaymentLine.BalanceAmt â†’ 0ï¼ˆé¢„æ”¶æ¬¾æ± å½’é›¶ï¼‰ï¼›
        *   é€€æ¬¾è´¦å•çš„ Balance â†’ 0ï¼ˆä»£è¡¨â€œå·²å±¥è¡Œé€€æ¬¾ä¹‰åŠ¡â€ï¼‰ã€‚
3.  å¤–éƒ¨å®é™…æ‰“ç»™å®¢æˆ·çš„é’±ï¼Œåœ¨è´¢åŠ¡ç³»ç»Ÿä¸­è®°ä½œâ€œé¢„æ”¶æ¬¾å‡å°‘ + é“¶è¡Œç°é‡‘å‡å°‘â€ã€‚

**ä¼˜ç‚¹**

*   æ‰€æœ‰é‡‘é¢å˜æ›´åœ¨ FPMS ä¸­é€šè¿‡ Bill/Offset ä½“ç°ï¼Œè´¦åŠ¡ç—•è¿¹æ¸…æ™°ï¼›
*   CaseReceipt çš„å®æ”¶ä¸å—å½±å“ï¼ˆåªè¦ä¸æŠŠè´Ÿè´¦å•çš„é‡‘é¢æ‹†å…¥æŸæ¡ˆä»¶å³å¯ï¼‰ã€‚

#### æ–¹æ³• Bï¼šç›´æ¥ä¿®æ”¹ PaymentLineï¼ˆä¸æ¨èï¼‰

*   ç›´æ¥æŠŠ `T_PaymentLine.RawAmount`/`BalanceAmt` å‡å°‘ï¼ˆé€€å›ä½™é¢éƒ¨åˆ†ï¼‰ï¼š
    *   è¿™ç§æ–¹å¼ä¼šæ”¹å˜å†å²æ•°æ®ï¼Œä½¿â€œåˆå§‹æ”¶æ¬¾é‡‘é¢â€ä¸é“¶è¡Œè®°å½•ä¸ä¸€è‡´ï¼Œä¸åˆ©äºå®¡è®¡ï¼›
*   ä¸€èˆ¬ä¸æ¨èåœ¨ FPMS ä¸­ç›´æ¥æ”¹æ—§è¡Œï¼Œè€Œæ˜¯é€šè¿‡â€œè´Ÿè´¦å•+Offsetâ€æ–¹å¼å®ç°ã€‚

***

### 15.9.3 æƒ…å½¢ï¼šå› ä¸ºè´¦å•é”™è¯¯å¼•èµ·çš„è°ƒæ•´

è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯è´¦å•é”™è¯¯ï¼Œæœ¬ä¸è¯¥æ”¶é‚£ä¹ˆå¤šï¼š

*   æƒ…å†µï¼šå·²ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€æŸè´¦å•ï¼Œä½†åæ¥å‘ç°è´¦å•é‡‘é¢å¡«é«˜äº†æˆ–è´¹ç”¨é¡¹å¤šç®—äº†ï¼›å®¢æˆ·è¦æ±‚å†²å‡ã€‚

**æ ‡å‡†åšæ³•ï¼š**

1.  å¼€å…·ä¸€å¼ â€œè°ƒæ•´è´¦å•â€æˆ– â€œCredit Noteâ€ï¼ˆæ–¹å‘å¯ä¸º AR æˆ– APï¼ŒAmount ä¸ºè´Ÿï¼‰ï¼›
2.  ä½¿ç”¨åŒä¸€ PaymentLine æˆ–æ–° PaymentLine å¯¹æ—§è´¦å•å’Œè°ƒæ•´è´¦å•è¿›è¡Œ Offsetï¼š
    *   é€šè¿‡æ­£è´Ÿè´¦å•ç›¸æŠµï¼Œç”¨è´¦åŠ¡æ–¹å¼è¿˜åŸçœŸå®åº”æ”¶é‡‘é¢ï¼›
3.  å†æŒ‰è°ƒæ•´åçš„é‡‘é¢ç»§ç»­ä½¿ç”¨é¢„æ”¶æ¬¾æˆ–è¦æ±‚é¢å¤–æ”¶æ¬¾ã€‚

**æ•°æ®å±‚é¢**

*   ä¼šäº§ç”Ÿæ–°çš„ `T_Bill/T_BillItem` å’Œ `T_Offset`ï¼Œä»¥åæ˜ â€œå†²å‡â€çš„åŠ¨ä½œï¼›
*   æ ¹æ®è´¦å•è°ƒæ•´æ‹†åˆ†æ›´æ–° `T_CaseReceipt`ï¼ˆå‡å°‘ç›¸åº”è´¹é¡¹çš„ ReceivableAmt/ReceivedAmtï¼‰ã€‚

***

## 15.10 Phase F8ï¼šé¢„æ”¶æ¬¾ä¸ææˆçš„å…³ç³»ï¼ˆWaitPay / Commissionï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Finance

**ç›®æ ‡**

*   å¯¹ WaitPay=true çš„ææˆè§„åˆ™æ¥è¯´ï¼Œåªæœ‰â€œå·²å®æ”¶çš„æœåŠ¡è´¹â€æ‰ç®—å…¥å¯ç»“ç®—æ”¶æ¬¾æ¯”ä¾‹ï¼›é¢„æ”¶æ¬¾åªæœ‰åœ¨é€šè¿‡ Offset ä¸å…·ä½“è´¦å•/æ¡ˆä»¶ç»‘å®šåï¼Œæ‰è¢«è§†ä¸ºå®æ”¶ã€‚

### 15.10.1 ææˆå¯ç»“ç®—æ‰€ç”¨çš„æ”¶æ¬¾æ¯”ä¾‹ â€“ PaidRatio

åœ¨æ¨¡å—å…­ææˆè§„åˆ™ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ï¼š

*   `PaidRatio = æœåŠ¡è´¹å®æ”¶æ€»é¢ / æœåŠ¡è´¹åº”æ”¶æ€»é¢`

**æœåŠ¡è´¹å®æ”¶æ€»é¢**

*   æ¥è‡ª `T_CaseReceipt` ä¸­ FeeType=SERVICE ä¸” IsPrepayment=false çš„ ReceivedAmt åˆè®¡ï¼›
*   æ¢å¥è¯è¯´ï¼š
    *   å¦‚æœé¢„æ”¶æ¬¾ä»åœç•™åœ¨ PaymentLine.BalanceAmt æˆ– T\_CaseReceipt.IsPrepayment=true çš„çŠ¶æ€ï¼Œ
    *   å°± **ä¸** è¢«è®°å…¥ PaidRatioã€‚

**æœåŠ¡è´¹åº”æ”¶æ€»é¢**

*   æ¥è‡ª `T_BillItem` ä¸­ FeeType=SERVICE çš„ Amount æˆ–ä» `T_CaseReceipt.ReceivableAmt` ä¸­èšåˆå¾—åˆ°ã€‚

### 15.10.2 é¢„æ”¶æ¬¾å¯¹ WaitPay çš„å½±å“

**é‡è¦é€»è¾‘**

*   åªæœ‰å½“é¢„æ”¶æ¬¾é€šè¿‡ `T_Offset` åˆ†é…åˆ°æŸå¼ æœåŠ¡è´¹è´¦å•ï¼Œå¹¶é€šè¿‡æ‹†åˆ†å†™å…¥ `T_CaseReceipt`ï¼ˆIsPrepayment=falseï¼‰ï¼Œæ‰è¢«è§†ä¸ºâ€œå·²å®æ”¶çš„æœåŠ¡è´¹â€ï¼›
*   ä¹Ÿå°±æ˜¯è¯´ï¼Œ**é¢„æ”¶æ¬¾çš„å­˜åœ¨æœ¬èº«ä¸ä¼šæå‡ PaidRatio**ï¼Œç›´åˆ°å®ƒè¢«ç»‘å®šåˆ°å…·ä½“è´¦å•/æ¡ˆä»¶çš„æœåŠ¡è´¹æ˜ç»†ä¸Šã€‚

**ç¤ºä¾‹**

*   å®¢æˆ·é¢„æ”¶ 100,000 å…ƒï¼Œå°šæœªæœ‰ä»»ä½•æœåŠ¡è´¹è´¦å• â†’ PaidRatio = 0ï¼ˆæ— åº”æ”¶æœåŠ¡è´¹ï¼‰
*   åæ¥å¼€å‡º 50,000 å…ƒæœåŠ¡è´¹è´¦å•å¹¶å…¨éƒ¨ç”¨é¢„æ”¶æ¬¾å†²é”€ï¼š
    *   åº”æ”¶æœåŠ¡è´¹=50,000
    *   TT\_CaseReceipt ä¸­ ReceivedAmt=50,000
    *   PaidRatio=1.0

â†’ æ­¤æ—¶å¯ä»¥è®¤ä¸ºè¯¥éƒ¨åˆ†æœåŠ¡è´¹å·²ç»â€œæ¬¾åˆ°â€ï¼Œå¯¹ WaitPay=true çš„ææˆè§„åˆ™æ¥è¯´ï¼Œå¯ä»¥è€ƒè™‘ç»“ç®— Stage1/Stage2 ä¸­ä¸æ­¤é˜¶æ®µæœåŠ¡è´¹ç›¸å…³çš„ä¸€éƒ¨åˆ†ã€‚

***

## 15.11 åœºæ™¯ F â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆè¡¨

| Phase            | è¡¨                                | å…³é”®å­—æ®µå˜æ›´                                                                                                                                                                |
| ---------------- | -------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| F0 åˆå§‹            | â€“                                | ä»…ä¸šåŠ¡æ„å‘ï¼Œæ— æ•°æ®åº“å†™å…¥ã€‚                                                                                                                                                         |
| F1 é¢„æ”¶æ¬¾ç™»è®°         | T\_Payment                       | æ–°å¢ä¸€æ¡æ”¶æ¬¾è®°å½•ï¼šClientID/PayNo/PayDate/Currency/Amount/PayMethod/BankRefNo/Remark="é¢„æ”¶æ¬¾"ã€‚                                                                                     |
|                  | T\_PaymentLine                   | ä¸º Payment ç”Ÿæˆä¸€æ¡è¡Œï¼šCaseID=NULL, RawAmount=100000, AllocatedAmt=0, BalanceAmt=100000, Remark="é¢„æ”¶æ¬¾-æœªåˆ†é…"ã€‚                                                                   |
| F2 é¢„æ”¶æ¬¾æŠ¥è¡¨         | T\_PaymentLine                   | æ— å­—æ®µä¿®æ”¹ï¼Œé€šè¿‡ BalanceAmt>0 æä¾›å®¢æˆ·é¢„æ”¶æ¬¾æŠ¥è¡¨ï¼›å¯æŒ‰ ClientID æ±‡æ€» PrepaymentTotalã€‚                                                                                                       |
| F3 å¯é€‰é¢„æŒ‚åˆ°æ¡ˆä»¶       | T\_PaymentLine                   | å¦‚éœ€ï¼Œå°† CaseID=æŸæ¡ˆ CaseIDï¼Œè¡¨ç¤ºè¯¥è¡Œé¢„æ”¶æ¬¾ä»…ç”¨äºè¯¥æ¡ˆã€‚                                                                                                                                   |
|                  | T\_CaseReceiptï¼ˆå¯é€‰ï¼‰               | æ’å…¥ä¸€æ¡é¢„æ”¶è®°å½•ï¼šCaseID=æŸæ¡ˆï¼ŒFeeCode="PREPAY\_xx"ï¼ŒReceivableAmt=0, ReceivedAmt=é¢„æ”¶é‡‘é¢, IsPrepayment=true, IsArrears=false, IsCommissionable=falseã€‚                                |
| F4 æ–°è´¦å•ç”Ÿæˆ         | T\_Bill/T\_BillItem              | å¯¹æŸæ¡ˆç”Ÿæˆæ­£å¸¸è´¦å•ï¼ˆç”³è¯·è´¹/å¹´è´¹/é¡¾é—®ç­‰ï¼‰ï¼ŒBalance=Amountï¼ŒStatus=UNSETTLEDã€‚                                                                                                                |
| F5 ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€è´¦å•     | T\_Offset                        | æ–°å¢ä¸€æ¡ Offsetï¼šPaymentLineID=é¢„æ”¶æ¬¾è¡Œï¼ŒBillID=æ–°è´¦å•ï¼ŒOffsetAmt=è´¦å• Balanceï¼ˆä¾‹å¦‚ 30,000ï¼‰ï¼ŒOffsetDate=å½“å‰æ—¥æœŸã€‚                                                                            |
|                  | T\_PaymentLine                   | AllocatedAmt += OffsetAmt (e.g. 0â†’30kâ†’50kâ†’90k...), BalanceAmt -= OffsetAmtã€‚                                                                                           |
|                  | T\_Bill                          | Balance -= OffsetAmtï¼›è‹¥ç»“æœ=0ï¼Œåˆ™ Status=SETTLEDï¼›è‹¥ >0ï¼Œåˆ™ Status=PARTIALLY\_SETTLEDã€‚                                                                                         |
| F6 é¢„æ”¶æ¬¾è½¬åŒ–æ¡ˆå·å®æ”¶     | T\_CaseReceipt                   | æŒ‰ BillItem é‡‘é¢æ¯”ä¾‹æ‹†åˆ† OffsetAmtï¼Œå°†é¢„æ”¶æ¬¾â€œå¯¹åº”åˆ°è´¦å•çš„æœåŠ¡è´¹/å®˜è´¹æ˜ç»†â€ï¼Œä¸ºå„æ¡ˆå„è´¹é¡¹æ–°å¢/æ›´æ–° CaseReceiptï¼šReceivableAmtã€ReceivedAmtã€IsArrearsã€IsPrepayment=falseã€ReceiptDateã€InvoiceNo ç­‰ã€‚              |
| F7 å¤šæ¡ˆå¤šè´¦å•æ¶ˆè€—é¢„æ”¶æ¬¾    | T\_PaymentLine                   | åœ¨å¤šæ¬¡ Offset ä¸­ï¼Œé¢„æ”¶æ¬¾è¡Œçš„ AllocatedAmt ç´¯ç§¯å¢åŠ ï¼ŒBalanceAmt å‡å°‘ï¼Œç›´åˆ° 0 æˆ–ä»æœ‰ä½™é¢ã€‚                                                                                                        |
|                  | T\_Offset/T\_Bill/T\_CaseReceipt | é’ˆå¯¹æ¯ä¸ªä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€çš„è´¦å•ï¼Œéƒ½æœ‰å¯¹åº” Offset è®°å½•å’Œå¯¹æœ¬æ¡ˆçš„ CaseReceipt æ›´æ–°ã€‚                                                                                                                    |
| F8 é¢„æ”¶ä½™é¢å¤„ç† â€“ ç•™å­˜   | T\_PaymentLine                   | ä¿æŒ BalanceAmt>0ï¼›åœ¨é¢„æ”¶æ¬¾æŠ¥è¡¨ä¸­æ˜¾ç¤ºâ€œå°šæœªä½¿ç”¨é¢„æ”¶æ¬¾â€ï¼Œæœªæ¥è´¦å•å¯ç»§ç»­ä½¿ç”¨è¯¥ PaymentLineã€‚                                                                                                            |
| F8 é¢„æ”¶ä½™é¢å¤„ç† â€“ é€€æ¬¾   | T\_Bill/T\_BillItem              | ç”Ÿæˆè´Ÿè´¦å•æˆ– AP è´¦å•è¡¨ç¤ºé€€æ¬¾ä¹‰åŠ¡ï¼›Direction=AP æˆ– Amount<0ã€‚                                                                                                                           |
|                  | T\_Offset                        | ä½¿ç”¨é¢„æ”¶æ¬¾ PaymentLine å¯¹é€€æ¬¾è´¦å•æ‰§è¡Œ Offsetï¼Œä½¿ BalanceAmt å›åˆ° 0ï¼Œé€€æ¬¾è´¦å•çš„ Balance ä¹Ÿæ¸…ç©ºï¼›å¤–éƒ¨è´¢åŠ¡ç³»ç»Ÿå®é™…æ‰“æ¬¾ç»™å®¢æˆ·ã€‚                                                                                   |
| F8 é¢„æ”¶ä½™é¢å¤„ç† â€“ è´¦å•è°ƒæ•´ | T\_Bill/T\_BillItem              | æ–°å»ºè°ƒæ•´è´¦å•ï¼ˆè´Ÿè´¦å•ï¼‰ï¼Œå†²å‡å¤šæ”¶éƒ¨åˆ†ï¼›                                                                                                                                                   |
|                  | T\_Offset/T\_CaseReceipt         | æŒ‰è°ƒæ•´è´¦å•ä¸åŸè´¦å•ç›¸æŠµï¼Œæ›´æ–° CaseReceipt çš„ ReceivableAmt/ReceivedAmtï¼Œè®©æœ€ç»ˆå„æ¡ˆæ¬ æ¬¾/å®æ”¶æƒ…å†µæ­£ç¡®ã€‚                                                                                                |
| F9 ä¸ææˆå…³ç³»         | T\_CaseReceipt                   | å½“é¢„æ”¶æ¬¾è¿˜åœç•™ä¸º PaymentLine.BalanceAmt æˆ– T\_CaseReceipt.IsPrepayment=true æ—¶ï¼Œä¸çº³å…¥ææˆ PaidRatioï¼›åªæœ‰ç» Offset ä¸è´¦å•å…³è”å¹¶å†™å…¥ CaseReceipt ä¸” IsPrepayment=false çš„ ReceivedAmt æ‰è§†ä¸ºâ€œæŸæ¡ˆæœåŠ¡è´¹å®æ”¶â€ã€‚ |
|                  | T\_Commission                    | ææˆæ¨¡å—ä½¿ç”¨ CaseReceipt ä¸­ FeeType=SERVICE çš„ ReceivableAmt/ReceivedAmt è®¡ç®— PaidRatioï¼Œä»è€Œå†³å®š WaitPay=true çš„ææˆè®°å½•ä½•æ—¶å¯ç»“ç®—ã€‚                                                           |

***

âœ… ä»¥ä¸Šæ˜¯ **E2E åœºæ™¯ Fï¼šå®¢æˆ·é¢„æ”¶æ¬¾ & è´¦å•è°ƒæ•´** çš„å®Œæ•´æ—¶é—´çº¿+æ•°æ®æµè¯´æ˜ï¼Œæ¶µç›–ï¼š

*   ä» `T_Payment/T_PaymentLine` ç™»è®°é¢„æ”¶æ¬¾ï¼Œ
*   åˆ°å¤šé˜¶æ®µã€å¤šè´¦å•çš„ Offsetï¼Œ
*   åˆ° `T_CaseReceipt` ä¸­æ¡ˆå·çº§å®æ”¶çš„åæ˜ ï¼Œ
*   åˆ°é¢„æ”¶ä½™é¢çš„ç•™å­˜/é€€æ¬¾/è°ƒæ•´ï¼Œ
*   å†åˆ°ä¸ WaitPay/Commission çš„å…³ç³»ã€‚

## 16. Part II â€“ E2E åœºæ™¯ Gï¼šå‚¬æ¬¾ & åè´¦ç”Ÿå‘½å‘¨æœŸ â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯ä¸“é—¨æè¿°ï¼š\
> **è´¦å•ä»å¼€å‡º â†’ åˆ°æœŸæœªæ”¶ â†’ é€¾æœŸ â†’ å‚¬æ¬¾ â†’ éƒ¨åˆ†/å…¨éƒ¨æ”¶å› â†’ å¯èƒ½æ ‡è®°åè´¦ â†’ åè´¦åä»æœ‰éƒ¨åˆ†æ”¶å› â†’ ï¼ˆå¯é€‰ï¼‰åè´¦æ¢å¤**\
> çš„å…¨è¿‡ç¨‹ã€‚
>
> å®ƒä¸²è”èµ·æ¨¡å—äº”çš„æ‰€æœ‰åº”æ”¶ç®¡ç†èƒ½åŠ›ï¼Œå¹¶ä¸æ¨¡å—å››çš„ä¸ªæ¡ˆæ”¶æ¬¾ã€æ¨¡å—å…­çš„ææˆæœ‰é—´æ¥å…³ç³»ã€‚
>
> æˆ‘ä¼šæŒ‰ Phase G0â€“G8 é€æ­¥å±•å¼€ï¼Œç¡®ä¿æˆ‘ä»¬ä¹‹å‰å…³äºâ€œå‚¬æ¬¾ + åè´¦â€çš„æ‰€æœ‰ç»†èŠ‚éƒ½è¢«çº³å…¥è¿™ä¸ªç« èŠ‚ã€‚

***

## 16.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> äº‹åŠ¡æ‰€åœ¨å‰æœŸæ–°æ¡ˆ/å¹´è´¹/é¡¾é—®/æ— æ•ˆç­‰å„é˜¶æ®µé™†ç»­å¯¹å®¢æˆ·å¼€å…·è´¦å•ï¼ˆåº”æ”¶ï¼‰ã€‚\
> å¦‚æœå®¢æˆ·åœ¨è´¦å•åˆ°æœŸæ—¥å‰æœªä»˜æ¬¾æˆ–åªä»˜äº†éƒ¨åˆ†ï¼Œåˆ™è´¦å•ä¼šå½¢æˆâ€œé€¾æœŸåº”æ”¶â€ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œäº‹åŠ¡æ‰€ä¼šæ ¹æ®é€¾æœŸç¨‹åº¦å¯¹å®¢æˆ·è¿›è¡Œå‚¬æ¬¾ï¼Œå¹¶ç»Ÿè®¡å‚¬æ¬¾ç›¸å…³æ•ˆæœã€‚
>
> å¯¹ä¸€äº›é•¿æœŸæœªæ”¶ä¸”ç»å¤šæ¬¡å‚¬æ¬¾æ— æœçš„è´¦å•ï¼Œäº‹åŠ¡æ‰€å¯èƒ½éœ€è¦åšâ€œåè´¦å¤„ç†â€ï¼ˆä¼šè®¡ä¸Šçš„æŸå¤±ç¡®è®¤ï¼‰ã€‚ä½†å³ä¾¿å·²ç»åšäº†åè´¦å¤„ç†ï¼Œæœ‰æ—¶ä¹‹åå®¢æˆ·ä»ä¼šæ”¯ä»˜ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨æ¬ æ¬¾ï¼Œè¿™æ—¶éœ€è¦å°†è¿™ç¬”é’±è®°å½•ä¸‹æ¥ï¼Œå¹¶å†³å®šæ˜¯å¦â€œå–æ¶ˆåè´¦æ ‡è®°â€æˆ–å°†å…¶è§†ä¸ºåè´¦è½¬å›æ”¶ç›Šã€‚
>
> åŒæ—¶ï¼Œéœ€è¦ä¿è¯ï¼š
>
> *   **è´¦å•å±‚é¢çš„çŠ¶æ€ï¼ˆæœªç»“/éƒ¨åˆ†ç»“æ¸…/å·²ç»“æ¸…/åè´¦ï¼‰æ¸…æ™°**ï¼›
> *   **æ”¶æ¬¾å’Œå†²é”€è®°å½•å®Œæ•´**ï¼ˆä¸ºå¯¹è´¦å’Œå®¡è®¡æœåŠ¡ï¼‰ï¼›
> *   **ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆT\_CaseReceiptï¼‰èƒ½åæ˜ å„æ¡ˆçš„æ¬ æ¬¾/å®æ”¶æƒ…å†µ**ï¼›
> *   **ææˆæ¨¡å—åœ¨åˆ¤æ–­ WaitPay/å¯ç»“ç®—æ—¶æ‹¿åˆ°å‡†ç¡®çš„æ”¶æ¬¾æ¯”ä¾‹**ã€‚

**æ¶‰åŠè¡¨**

*   **æ¨¡å—äº” â€“ è´¦å•/æ”¶æ¬¾/å‚¬æ¬¾/åè´¦**
    *   `T_Bill` â€“ è´¦å•å¤´ï¼ˆåº”æ”¶/åº”ä»˜/çŠ¶æ€/åè´¦æ ‡è®°ï¼‰
    *   `T_BillItem` â€“ è´¦å•æ˜ç»†ï¼ˆCaseID/FeeType/YearNo/Amountï¼‰
    *   `T_Payment` â€“ æ”¶æ¬¾å•å¤´
    *   `T_PaymentLine` â€“ æ”¶æ¬¾è¡Œï¼ˆå¯ä»£è¡¨é¢„æ”¶æ¬¾æ± æˆ–æŸæ¡ˆæ”¶æ¬¾ï¼‰
    *   `T_Offset` â€“ å†²é”€è®°å½•ï¼ˆPaymentLine å¯¹ Bill çš„é…å¯¹ï¼‰
    *   `T_Dunning` â€“ å‚¬æ¬¾å•å¤´
    *   `T_DunningLine` â€“ å‚¬æ¬¾æ˜ç»†ï¼ˆæŸå®¢æˆ·åœ¨æŸæ—¶ç‚¹çš„é€¾æœŸè´¦å•å¿«ç…§ï¼‰
*   **æ¨¡å—å›› â€“ è´¹ç”¨ç®¡ç†**
    *   `T_CaseReceipt` â€“ ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ï¼ˆåº”æ”¶/å®æ”¶/æ¬ æ¬¾/é¢„æ”¶/å¯ææˆï¼‰
*   **æ¨¡å—å…­ â€“ ææˆï¼ˆé—´æ¥ï¼‰**
    *   `T_Commission` â€“ ææˆè®°å½•ä½¿ç”¨ CaseReceipt ä¸­çš„æœåŠ¡è´¹å®æ”¶é‡‘é¢æ¥åˆ¤æ–­ PaidRatioï¼Œç”¨äº WaitPay é€»è¾‘

***

## 16.2 Phase G0ï¼šè´¦å•ç”Ÿæˆï¼ˆèµ·ç‚¹ï¼‰

**è§’è‰²**

*   Formalitiesï¼ˆå‘èµ·è‰å•åˆ°è´¦å•ï¼‰
*   Financeï¼ˆå®Œæˆè´¦å•ç”Ÿæˆï¼‰

**èƒŒæ™¯**

å‚¬æ¬¾/åè´¦åœºæ™¯çš„å‰ææ˜¯ï¼šå·²ç»å­˜åœ¨â€œåº”æ”¶è´¦å•â€ã€‚è´¦å•ç”Ÿæˆè¿‡ç¨‹å·²åœ¨æ¨¡å—äº”å’Œåœºæ™¯ A/D/E/H ä¸­è¯¦ç»†æè¿°ï¼Œè¿™é‡Œç®€è¦å›é¡¾å…¶è¾“å‡ºçŠ¶æ€ã€‚

### 16.2.1 è´¦å•ç”Ÿæˆç®€è¿°

**æ¥æº**

*   è´¹ç”¨è‰å•ï¼ˆAPPLY\_FEE/GRANT\_FEE/ANNUITY\_FEE/OA\_FEE/INVALID\_FEE/CONSULT\_FEE/SEARCH\_FEE ç­‰ï¼‰
*   æ‰‹å·¥è´¦å•ï¼ˆè°ƒæ•´ã€AP ç­‰ï¼‰

**è´¦å•å¤´ `T_Bill` å…¸å‹å­—æ®µ**

*   `Direction = AR` â€“ å®¢æˆ·åº”ä»˜ç»™æœ¬æ‰€
*   `BillDate`
*   `DueDate` â€“ åˆ°æœŸæ—¥ï¼ˆè´¦æœŸ+BillDateï¼‰
*   `Currency`
*   `Amount` â€“ è´¦å•æ€»é¢
*   `Balance = Amount` â€“ åˆå§‹
*   `Status = UNSETTLED`
*   `IsBadDebt = false`

**è´¦å•æ˜ç»† `T_BillItem`**

*   æ¯æ¡è®°å½•ä¸€ä¸ªè´¹ç”¨é¡¹ç›®ï¼šCaseID/FeeCode/FeeType/YearNo/Amount ç­‰ã€‚

**æ•ˆæœ**

*   ä»åº”æ”¶å±‚é¢çœ‹ï¼Œè¿™å¼ è´¦å•å·²äº§ç”Ÿä¸€ç¬”æ–°çš„ ARï¼ˆåº”æ”¶è´¦æ¬¾ï¼‰ï¼›
*   è¿˜æœªæ¶‰åŠå‚¬æ¬¾/åè´¦ï¼Œä½†è¿™ä¸€æ­¥æ˜¯æ‰€æœ‰åç»­è¿‡ç¨‹çš„åŸºç¡€ã€‚

***

## 16.3 Phase G1ï¼šåˆ°æœŸæœªæ”¶ â€“ é€¾æœŸ & è´¦é¾„ï¼ˆè´¦å•å°šæœªå˜åŒ–ï¼‰

**æ—¶é—´ç‚¹**

*   å½“ `Today > T_Bill.DueDate`ï¼Œè€Œè¯¥è´¦å• `Balance > 0` æ—¶ã€‚

**é€»è¾‘**

1.  è´¦å•åœ¨æ•°æ®åº“ä¸­å­—æ®µä¸å˜ï¼š
    *   `Balance` ä»æ˜¯æœªæ”¶é‡‘é¢ï¼ˆå¯èƒ½æ˜¯å…¨é¢æˆ–éƒ¨åˆ†ï¼‰ï¼›
    *   `Status` ä¾ç„¶å¯èƒ½æ˜¯ UNSETTLED æˆ– PARTIALLY\_SETTLEDï¼›
    *   `IsBadDebt` ä»ä¸º falseã€‚
2.  â€œé€¾æœŸâ€çš„åˆ¤å®šåœ¨æŠ¥è¡¨/åº”ç”¨é€»è¾‘ä¸­è¿›è¡Œï¼š
    *   é€¾æœŸå¤©æ•° `DaysPastDue = Today - DueDate`ï¼›

*   è´¦é¾„åŒºé—´ï¼š
    *   0â€“30 å¤©
    *   31â€“60 å¤©
    *   61â€“90 å¤©
    *
        > 90 å¤©

**æŠ¥è¡¨è§†è§’**

*   åœ¨â€œåº”æ”¶è´¦æ¬¾æŠ¥è¡¨â€æˆ–â€œé€¾æœŸè´¦æ¬¾æŠ¥è¡¨â€ä¸­ï¼š
    *   æŸ¥è¯¢æ¡ä»¶ï¼šDirection=AR, Balance>0, IsBadDebt=falseï¼›
    *   æ ¹æ® DueDateã€BillDate å’Œ Today è®¡ç®— DaysPastDue å’Œè´¦é¾„ã€‚

**ç³»ç»Ÿä¸è‡ªåŠ¨æ”¹åŠ¨è´¦å•å­—æ®µ**ï¼Œåªæ˜¯å°†è¿™äº›ä¿¡æ¯ç”¨äºæŸ¥è¯¢å’Œå‚¬æ¬¾åˆ†æã€‚

***

## 16.4 Phase G2ï¼šç”Ÿæˆå‚¬æ¬¾å• â€“ `T_Dunning/T_DunningLine`ï¼ˆå¿«ç…§ï¼‰

**è§’è‰²**

*   Finance

**ç›®æ ‡**

*   å¯¹æŸå®¢æˆ·åœ¨æŸæ¬¡å‚¬æ¬¾æ—¶ç‚¹çš„æ‰€æœ‰é€¾æœŸè´¦å•ç”Ÿæˆä¸€ä¸ªâ€œå‚¬æ¬¾æ‰¹æ¬¡/å‚¬æ¬¾å•â€ï¼Œç”¨äºå½¢æˆå‚¬æ¬¾å‡½åŠåç»­æ•ˆæœåˆ†æã€‚

### 16.4.1 é€¾æœŸè´¦å•ç­›é€‰

åœ¨â€œå‚¬æ¬¾ç®¡ç†â€ç•Œé¢ï¼ŒFinanceï¼š

1.  æŒ‡å®šå®¢æˆ· `ClientID`ï¼›
2.  æŒ‡å®šæˆªæ­¢æ—¥æœŸ `ToDate`ï¼ˆä¾‹å¦‚ 2025-11-30ï¼‰ï¼›
3.  ç³»ç»ŸæŒ‰ä»¥ä¸‹æ¡ä»¶æ£€ç´¢ `T_Bill`ï¼š
    *   Direction=AR
    *   Status âˆˆ {UNSETTLED, PARTIALLY\_SETTLED}
    *   IsBadDebt=false
    *   DueDate <= ToDate
    *   Balance > 0

å½¢æˆè¯¥å®¢æˆ·åœ¨æŒ‡å®šæ—¥æœŸä¹‹å‰æ‰€æœ‰**é€¾æœŸæœªç»“**è´¦å•åˆ—è¡¨ã€‚

### 16.4.2 ç”Ÿæˆ `T_Dunning`ï¼ˆå‚¬æ¬¾å¤´ï¼‰

å½“ç”¨æˆ·ç¡®è®¤è¦ä¸ºè¯¥å®¢æˆ·ç”Ÿæˆä¸€æ¬¡å‚¬æ¬¾æ‰¹æ¬¡æ—¶ï¼š

1.  ç³»ç»Ÿåˆ›å»º `T_Dunning` ä¸€æ¡è®°å½•ï¼š
    *   `DunningID` PK

*   `DunningNo` â€“ è‡ªåŠ¨ç”Ÿæˆï¼ˆå¦‚ â€œDN-20251130-0001â€ï¼‰
*   `ClientID` = è¯¥å®¢æˆ·
*   `ToDate` = æŒ‡å®šæˆªæ­¢æ—¥æœŸ
*   `Currency` = å®¢æˆ·å¸ç§ï¼ˆæˆ–ç”¨æˆ·é€‰æ‹©çš„æ˜¾ç¤ºå¸ç§ï¼‰
*   `TotalAmt` = Î£(æ‰€æœ‰é€¾æœŸè´¦å•çš„ Balance)
*   `Status = OPEN`
*   `SentDate = NULL`
*   `Remark` = ç”¨æˆ·å¯å¡«å†™â€œ2025å¹´11æœˆæœˆæœ«ç¬¬ä¸€æ¬¡å‚¬æ¬¾â€ç­‰
*   `CreatedBy/At` = ç”¨æˆ·/æ—¶é—´
    2\.  ç³»ç»Ÿä¸ºæ¯ä¸ªé€¾æœŸè´¦å•ç”Ÿæˆä¸€æ¡ `T_DunningLine`ï¼š
    *   `DunningLineID` PK
*   `DunningID` = æ–°å»º DunningID
*   `BillID` = é€¾æœŸè´¦å• ID
*   `BillNo`
*   `BillDate`
*   `DueDate`
*   `OutstandingAmt = T_Bill.Balance`ï¼ˆæ­¤æ—¶çš„æœªç»“ä½™é¢ï¼Œä½œä¸ºå¿«ç…§å€¼ï¼‰
*   `Remark` å¯ä¸ºç©ºæˆ–ç”±ç”¨æˆ·å¡«å†™ï¼ˆä¾‹å¦‚â€œå·²ç»å£å¤´æé†’â€ï¼‰

**ç»“æœ**

*   ä¸€æ¬¡å‚¬æ¬¾è¡Œä¸ºï¼ˆæŸå®¢æˆ·+æŸæ—¥æœŸï¼‰è¢«è®°å½•ä¸ºä¸€ä¸ª `T_Dunning`ï¼›
*   DunningLine åˆ—å‡ºæ‰€æœ‰ç›¸å…³çš„è´¦å•åŠå…¶â€œå½“æ—¶çš„æœªç»“ä½™é¢â€ã€‚

***

## 16.5 Phase G3ï¼šç”Ÿæˆå‚¬æ¬¾å‡½ â€“ Word/Email è¾“å‡º & å‘é€æ ‡è®°

**è§’è‰²**

*   Finance / ä¸šåŠ¡ç®¡ç†å‘˜

**ç›®æ ‡**

*   åŸºäº `T_Dunning/T_DunningLine` ç”Ÿæˆæ­£å¼çš„å‚¬æ¬¾å‡½æ–‡ä¹¦ï¼ˆä¸­/è‹±æ–‡ï¼‰ï¼Œå¹¶è®¾ç½®å‚¬æ¬¾å•çŠ¶æ€ä¸º SENTã€‚

### 16.5.1 å‚¬æ¬¾å‡½æ¨¡æ¿ï¼ˆT\_Template + T\_DocTemplateï¼‰

**æ–‡æ¡£æ¨¡æ¿**

*   ä¾‹å¦‚ TemplateCode = "DUNNING\_LETTER" å¯¹åº”æŸ Word æ¨¡æ¿ï¼š
    *   å¤´éƒ¨ä½¿ç”¨ä¿¡å¤´ï¼ˆT\_LetterHeadï¼‰
    *   æ­£æ–‡åŒ…æ‹¬å®¢æˆ·åç§°/åœ°å€/æ•¬è¯­/å‚¬æ¬¾è¯´æ˜/ä»˜æ¬¾è¦æ±‚ç­‰
    *   ä¸­é—´éƒ¨åˆ†æ’å…¥ä¸€å¼ è¡¨æ ¼ï¼Œåˆ—å‡ºå…¨éƒ¨ DunningLine ä¸­çš„ BillNo/BillDate/DueDate/OutstandingAmt
    *   ç»“å°¾æœ‰äº‹åŠ¡æ‰€ç­¾å/è”ç³»æ–¹å¼

**ä¸­é—´æ–‡ä»¶æ¨¡æ¿**

*   å¯é€‰æ‹©æ˜¯å¦æŠŠå‚¬æ¬¾å‡½ä½œä¸º T\_Document è®°å½•ï¼š
    *   `DocType=CLIENT_OUT`
    *   `TemplateCode="DUNNING_LETTER"`
    *   è¿™æ ·å¯ä»¥åœ¨æ¡ˆä»¶/å®¢æˆ·çš„ä¸­é—´æ–‡ä»¶åˆ—è¡¨ä¸­çœ‹åˆ°æ‰€æœ‰å†å²å‚¬æ¬¾å‡½ã€‚

### 16.5.2 æ“ä½œæ­¥éª¤

1.  åœ¨â€œå‚¬æ¬¾å•è¯¦æƒ…â€ç•Œé¢æ‰“å¼€æŸä¸ª Dunningï¼›
2.  ç‚¹å‡»â€œç”Ÿæˆå‚¬æ¬¾å‡½â€ï¼›
3.  ç³»ç»Ÿæ„é€ æ¨¡æ¿ contextï¼š
    *   `client`ï¼šT\_Client ä¿¡æ¯ï¼ˆåç§°/åœ°å€/è”ç³»äººï¼‰

*   `dunning`ï¼šToDate/TotalAmt/Remark/â€¦
*   `lines`ï¼šä» T\_DunningLine è”æ¥ T\_Bill å¾—åˆ° BillNo/BillDate/DueDate/OutstandingAmt åˆ—è¡¨
    4\.  ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼ˆdocxtplï¼‰ç”Ÿæˆ Word æ–‡æ¡£ï¼ˆä¸­/è‹±ç‰ˆè§†éœ€æ±‚ï¼‰ï¼›

1.  ç”¨æˆ·ä¸‹è½½ Word æ–‡æ¡£æ‰“å°/ç­¾å­—/é‚®å¯„ï¼Œæˆ–è½¬æ¢ä¸º PDF é™„åŠ åˆ°é‚®ä»¶ï¼›

**å¯é€‰ï¼šç™»è®°ä¸ºä¸­é—´æ–‡ä»¶**

*   æ’å…¥ T\_Documentï¼šCaseID å¯ä¸º NULL æˆ–ä¸ºç‰¹å®šèšåˆæ¡ˆï¼ŒDocType=CLIENT\_OUT, TemplateCode=DUNNING\_LETTER, DispatchDate=å‚¬æ¬¾å‡½å‘é€æ—¥ï¼›
*   ä¸Šä¼  Word/PDF åˆ° T\_DocAttachmentã€‚

### 16.5.3 æ›´æ–°å‚¬æ¬¾å•çŠ¶æ€

*   å°† `T_Dunning.Status = SENT`
*   `T_Dunning.SentDate = ä»Šæ—¥`

**ç»“æœ**

*   åœ¨å‚¬æ¬¾ç»´åº¦ä¸Šï¼Œå·²æ˜ç¡®è®°å½•ä½•æ—¶å‘å®¢æˆ·å‘é€äº†å“ªä¸€æ‰¹å‚¬æ¬¾å‡½ï¼Œé‡‘é¢åˆè®¡å¤šå°‘ã€‚

***

## 16.6 Phase G4ï¼šå‚¬æ¬¾åå®¢æˆ·éƒ¨åˆ†/å…¨éƒ¨ä»˜æ¬¾ â€“ æ”¶æ¬¾ + å†²é”€ + CaseReceipt æ›´æ–°

**è§’è‰²**

*   å®¢æˆ·
*   Finance
*   ç³»ç»Ÿ

**ç›®æ ‡**

*   è®°å½•å‚¬æ¬¾åçš„å›æ¬¾æƒ…å†µï¼šå®¢æˆ·å¯èƒ½ä¸€æ¬¡æ€§æ”¯ä»˜æ‰€æœ‰æ¬ æ¬¾ï¼Œä¹Ÿå¯èƒ½åˆ†å¤šæ¬¡æ”¯ä»˜ï¼Œéƒ¨åˆ†å†²é”€è´¦å•ã€‚

### 16.6.1 æ”¶æ¬¾ç™»è®°ï¼ˆT\_Payment/T\_PaymentLineï¼‰

ä¸åœºæ™¯ A/D/F ä¸€è‡´ï¼š

1.  åœ¨â€œæ”¶æ¬¾ç™»è®°â€ç•Œé¢æ–°å»º `T_Payment`ï¼š
    *   ClientID=å®¢æˆ·
    *   PayNo=è‡ªåŠ¨ç¼–å·
    *   PayDate=å®é™…æ”¶æ¬¾æ—¥æœŸ
    *   Currency=æ”¶æ¬¾å¸ç§
    *   Amount=æœ¬æ¬¡æ€»æ”¶æ¬¾é‡‘é¢
    *   å…¶ä»–å­—æ®µç•¥
2.  è‡ªåŠ¨åˆ›ä¸€æ¡ `T_PaymentLine`ï¼š
    *   PaymentLineID, PaymentID
    *   CaseID å¯ç©º
    *   RawAmount=Amount
    *   AllocatedAmt=0
    *   BalanceAmt=Amount

### 16.6.2 æ”¶æ¬¾å†²é”€åˆ°è´¦å•ï¼ˆT\_Offsetï¼‰

**æ­¥éª¤**

1.  Finance åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼Œé€‰æ‹©æ­¤æ¬¡æ”¶æ¬¾çš„ PaymentLineï¼›
2.  ç³»ç»Ÿåˆ—å‡ºè¯¥å®¢æˆ·æ‰€æœ‰ `T_Bill`ï¼ŒStatusâˆˆ{UNSETTLED, PARTIALLY\_SETTLED}ï¼›å…¶ä¸­åŒ…æ‹¬åœ¨ä¹‹å‰ DunningLine ä¸­å‡ºç°çš„é€¾æœŸè´¦å•ï¼›
3.  Finance æŒ‰ä¼˜å…ˆçº§ï¼ˆä¾‹å¦‚è´¦é¾„ä»é•¿åˆ°çŸ­ã€é‡‘é¢å¤§å°ç­‰ï¼‰è¾“å…¥å„ Bill çš„ OffsetAmtï¼›
4.  ä¿å­˜æ—¶ï¼Œç³»ç»Ÿæ‰§è¡Œ V-OF-01/02 æ ¡éªŒï¼š
    *   Î£OffsetAmt(å¯¹åŒä¸€ PaymentLine) â‰¤ PaymentLine.BalanceAmtï¼›
    *   Î£OffsetAmt(å¯¹æŸ Bill) â‰¤ Bill.Balanceï¼›
5.  å†™å…¥ `T_Offset`ï¼Œæ›´æ–° PaymentLine å’Œ Bill çš„ä½™é¢ä¸çŠ¶æ€ã€‚

**æ•°æ®å±‚é¢**

*   æŸäº› Bill å®Œå…¨ç»“æ¸…ï¼ˆBalanceâ†’0, Status=SETTLEDï¼‰ï¼›
*   æŸäº› Bill éƒ¨åˆ†ç»“æ¸…ï¼ˆBalance>0, Status=PARTIALLY\_SETTLEDï¼‰ï¼›
*   PaymentLine.BalanceAmt å‡å°‘ï¼Œè¡¨ç¤ºæ”¶æ¬¾æ± è¢«ä½¿ç”¨ã€‚

### 16.6.3 æ‹†åˆ† OffsetAmt â†’ æ›´æ–° T\_CaseReceipt

å¦‚åœºæ™¯ A/D/F æ‰€è¿°ï¼Œå¯¹äºè´¦å•ä¸­åŒ…å«å¤šä¸ªæ˜ç»†ï¼ˆè·¨å¤šä¸ªæ¡ˆä»¶å’Œè´¹ç”¨ç±»å‹ï¼‰çš„æƒ…å½¢ï¼š

1.  å¯¹æ¯ä¸ª Billï¼ŒæŒ‰ BillItem.LocalAmount å æ¯”æ‹†åˆ† OffsetAmtï¼›
2.  æ›´æ–°/åˆ›å»º `T_CaseReceipt`ï¼Œå°†â€œå‚¬æ¬¾åæ”¶å›çš„é’±â€åˆ†é…åˆ°å„æ¡ˆå„è´¹ç”¨é¡¹ä¸Šï¼š
    *   CaseID, FeeCode, FeeType, YearNo, ReceivableAmt, ReceivedAmt, IsArrears ç­‰ã€‚

**ç»“æœ**

*   ç³»ç»Ÿå¯ä»¥å¯¹æ¯” DunningLine.OutstandingAmtï¼ˆå‚¬æ¬¾æ—¶çš„æœªç»“é‡‘é¢ï¼‰å’Œå‚¬æ¬¾åçš„ CaseReceipt/Balance å˜åŠ¨ï¼Œåˆ†æè¿™æ¬¡å‚¬æ¬¾çš„å›æ¬¾æ•ˆç‡ã€‚

***

## 16.7 Phase G5ï¼šå¤šè½®å‚¬æ¬¾ â€“ ç¬¬äºŒè½®/ç¬¬ä¸‰è½®ç­‰

**è§’è‰²**

*   Finance
*   Manager

**ç›®æ ‡**

*   è¯´æ˜â€œä¸€ä¸ªè´¦å•å¯ä»¥åœ¨å¤šä¸ªå‚¬æ¬¾æ‰¹æ¬¡ä¸­å‡ºç°â€çš„æƒ…å†µä»¥åŠæ•°æ®ç»“æ„çš„æ”¯æŒæ–¹å¼ã€‚

### 16.7.1 ç¬¬äºŒè½®/ç¬¬ä¸‰è½®å‚¬æ¬¾ç”Ÿæˆé€»è¾‘

æŸæ¬¡å‚¬æ¬¾åä»æœ‰éƒ¨åˆ†è´¦å•æœªæ”¶æˆ–åªæ”¶éƒ¨åˆ†ï¼š

1.  ä¸€æ®µæ—¶é—´ä¹‹åï¼ˆå¦‚ 30 æˆ– 60 å¤©ï¼‰ï¼š
    *   Finance å†æ¬¡åœ¨â€œå‚¬æ¬¾ç®¡ç†â€ä¸­ï¼Œä»¥æ–°çš„ ToDate åšé€¾æœŸæ£€ç´¢ï¼š
        *   Direction=AR
        *   Status=UNSETTLED/PARTIALLY\_SETTLED
        *   IsBadDebt=false
        *   DueDate â‰¤ æ–° ToDate
        *   Balance > 0
2.  ç³»ç»Ÿç”Ÿæˆæ–°çš„ Dunningï¼ˆç¬¬äºŒè½®/ç¬¬ä¸‰è½®ï¼‰ï¼š
    *   ä¸å‰é¢çš„ Dunning æ“ä½œå®Œå…¨ç›¸åŒï¼Œåªæ˜¯ ToDate ä¸åŒï¼›
    *   å¯¹ä»æœªç»“æ¸…çš„ Billï¼Œä¼šå†æ¬¡ç”Ÿæˆ DunningLineï¼ŒOutstandingAmt=å½“å‰æœªç»“ä½™é¢ï¼ˆå¯èƒ½å·²å°‘äºç¬¬ä¸€æ¬¡å‚¬æ¬¾æ—¶çš„é‡‘é¢ï¼‰ã€‚
3.  æ–°çš„ Dunning å¯ä»¥å†æ¬¡ç”Ÿæˆå‚¬æ¬¾å‡½ï¼Œè®°å½•ç¬¬äºŒè½®/ç¬¬ä¸‰è½®å‚¬æ¬¾ã€‚

**æ•°æ®ç‰¹æ€§**

*   ä¸€å¼  Bill å¯ä»¥å‡ºç°åœ¨å¤šä¸ª `T_DunningLine` ä¸­ï¼Œæ¯ä¸€ä¸ª Dunning è¡¨ç¤ºä¸€æ¬¡ä¸åŒæ—¶é—´ç‚¹çš„å‚¬æ¬¾å¿«ç…§ï¼›
*   DunningLine ä¸­çš„ OutstandingAmt åæ˜ å¯¹åº”æ—¶ç‚¹çš„â€œè´¦å•æœªç»“é‡‘é¢â€ï¼Œä¸ä¼šéšåç»­æ”¶æ¬¾è€Œè‡ªåŠ¨æ›´æ–°ï¼Œè¿™æœ‰åŠ©äºåæœŸâ€œå‚¬æ¬¾æ•ˆæœâ€åˆ†æã€‚

***

## 16.8 Phase G6ï¼šåè´¦æ ‡è®° â€“ å°†æŸäº›é•¿æœŸæœªæ”¶è´¦å•æ ‡è®°ä¸º BAD\_DEBT

**è§’è‰²**

*   Finance
*   Manager

**ç›®æ ‡**

*   å¯¹é•¿æœŸæ— æ³•è¿½å›çš„è´¦æ¬¾è¿›è¡Œåè´¦å¤„ç†ï¼Œåœ¨ç³»ç»Ÿä¸­å°†å…¶ä»â€œæ­£å¸¸åº”æ”¶â€ä¸­å½’ç±»åˆ°â€œåè´¦â€ï¼Œä¾¿äºæŠ¥è¡¨å’Œä¼šè®¡å¤„ç†ã€‚

### 16.8.1 é€‰æ‹©åè´¦å€™é€‰è´¦å•

åœ¨â€œåº”æ”¶è´¦æ¬¾/é€¾æœŸè´¦æ¬¾/å‚¬æ¬¾æ•ˆæœâ€æŠ¥è¡¨ä¸­ç­›é€‰ï¼š

*   Direction=AR
*   Balance>0
*   IsBadDebt=false
*   DaysPastDue â‰¥ æŸé˜ˆå€¼ï¼ˆä¾‹å¦‚ >365 å¤©ï¼‰
*   DunningHistory å·²æ˜¾ç¤ºå¤šè½®å‚¬æ¬¾ä¸”æ— æœ‰æ•ˆå›æ”¶ï¼ˆå¯é€‰ï¼‰

### 16.8.2 æ ‡è®°ä¸ºåè´¦ â€“ æ›´æ–° `T_Bill`

åœ¨è´¦å•è¯¦æƒ…é¡µæˆ–æŠ¥è¡¨ä¸­å‹¾é€‰ç‰¹å®šè´¦å•ï¼š

1.  ç‚¹å‡»â€œæ ‡è®°ä¸ºåè´¦â€ï¼›
2.  å¡«å†™ï¼š
    *   `BadDebtDate` â€“ /é€‰æ‹©å½“å‰æˆ–ç‰¹å®šæ—¥æœŸ
    *   `BadDebtReason` â€“ æ–‡æœ¬è¯´æ˜ï¼ˆå¦‚â€œå®¢æˆ·ç ´äº§â€ã€â€œé•¿å¹´æ‹’ä»˜â€ã€â€œå†…éƒ¨å†³è®®æ ¸é”€â€ç­‰ï¼‰
3.  ç³»ç»Ÿæ›´æ–° `T_Bill`ï¼š
    *   `IsBadDebt = true`

*   `Status = BAD_DEBT`
*   `BadDebtDate` / `BadDebtReason` å¡«å…¥

**ç»“æœ**

*   åœ¨â€œåº”æ”¶/é€¾æœŸè´¦æ¬¾æŠ¥è¡¨â€ä¸­é»˜è®¤ä¸å†ç»Ÿè®¡æ­¤è´¦å•çš„ Balance ä¸ºâ€œå°šéœ€å‚¬æ”¶â€ï¼Œè€Œæ˜¯åœ¨â€œåè´¦æŠ¥è¡¨â€ä¸­å•ç‹¬å±•ç¤ºï¼›
*   ç„¶è€Œè¯¥è´¦å•çš„ Balance å­—æ®µé€šå¸¸ä»ä¿ç•™æœªæ”¶ä½™é¢ï¼Œç”¨äºç»Ÿè®¡â€œåè´¦æ€»é¢â€ã€‚

***

## 16.9 Phase G7ï¼šåè´¦åçš„æ”¶å› â€“ åæ”¶æ¬¾ & æ˜¯å¦å–æ¶ˆåè´¦æ ‡è®°

**è§’è‰²**

*   å®¢æˆ·
*   Finance
*   Manager

**ç›®æ ‡**

*   æè¿°è¿™ç§æƒ…å†µï¼šå·²ç»æ ‡è®°ä¸ºåè´¦çš„è´¦å•åœ¨æŸå¤©å®¢æˆ·åˆæ”¯ä»˜äº†éƒ¨åˆ†/å…¨éƒ¨æ¬ æ¬¾æ—¶ï¼Œç³»ç»Ÿå¦‚ä½•è®°å½•æ”¶æ¬¾ã€æ›´æ–°ä½™é¢ï¼Œä»¥åŠå¦‚ä½•å¤„ç†åè´¦æ ‡è®°ã€‚

### 16.9.1 åè´¦è´¦å•åä»å¯æ”¶æ¬¾ä¸å†²é”€

**åŸåˆ™**

*   å³ä½¿ Bill.Status=BAD\_DEBT & IsBadDebt=trueï¼Œç³»ç»Ÿä»å…è®¸å¯¹å…¶è¿›è¡Œå†²é”€ï¼ˆOffsetï¼‰ï¼š
    1.  Finance åœ¨â€œæ”¶æ¬¾ç™»è®°â€ä¸­å½•å…¥æ–°çš„ `T_Payment/T_PaymentLine`ï¼›

1.  åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ä¸­ï¼Œé€‰æ‹©æ­¤ PaymentLine å·¦ä¾§ï¼Œå³ä¾§å¯ä»¥é€‰æ‹©åŒ…æ‹¬ BAD\_DEBT çŠ¶æ€çš„è´¦å•ï¼ˆå¯ä»¥é€šè¿‡é…ç½®å†³å®šæ˜¯å¦é»˜è®¤éšè—ï¼Œéœ€è¦è‡ªé€‰â€œåŒ…å«åè´¦è´¦å•â€æ‰æ˜¾ç¤ºï¼‰ï¼›
2.  Finance è¾“å…¥ OffsetAmtï¼ˆå¯èƒ½æ˜¯å…¨éƒ¨ Balance æˆ–éƒ¨åˆ†ï¼‰ï¼›
3.  ç³»ç»Ÿç…§å¸¸å†™å…¥ `T_Offset`ï¼Œæ›´æ–° PaymentLine å’Œ Bill çš„ Balance/Statusï¼ˆå³ä½¿ Status=BAD\_DEBTï¼ŒBalance ä»ä¼šå‡å°‘ï¼‰ï¼›
4.  æ­¤è¿‡ç¨‹åŒæ™®é€šè´¦å•å†²é”€ï¼Œåªæ˜¯ Bill.Status æ²¡æœ‰è‡ªåŠ¨ä» BAD\_DEBT æ”¹ä¸º SETTLED/PARTIALLY\_SETTLEDï¼ˆå®ç°æ—¶å¯ä»¥å†³å®šæ˜¯å¦è‡ªåŠ¨æ”¹ï¼‰ã€‚

### 16.9.2 åè´¦åæ˜¯å¦â€œå–æ¶ˆåè´¦æ ‡è®°â€

**ç­–ç•¥ Aï¼šåè´¦ä¸å–æ¶ˆï¼Œä¿ç•™å†å²**

*   åè´¦æ˜¯ä¸€ç§ä¼šè®¡ç¡®è®¤ï¼Œä¸å› ä¸ºåç»­å›æ¬¾è€Œâ€œæŠ¹æ‰å†å²â€ï¼›
*   åœ¨è¿™ç§ç­–ç•¥ä¸‹ï¼š
    *   å³ä½¿ Bill.Balance æœ€ç»ˆå˜ä¸º 0ï¼Œä¹Ÿä¿æŒ `Status=BAD_DEBT, IsBadDebt=true`ï¼›
    *   å¯¹äºâ€œåè´¦è½¬å›â€çš„é‡‘é¢ï¼Œå¯ä»¥åœ¨è´¢åŠ¡ç³»ç»Ÿä¸­å•ç‹¬ç»Ÿè®¡ï¼Œè€Œ FPMS ä¸­åªéœ€è®°å½• Offset å’Œ CaseReceiptã€‚

**ç­–ç•¥ Bï¼šå¯å–æ¶ˆåè´¦æ ‡è®°ï¼ˆæ¢å¤æ™®é€šè´¦å•ï¼‰**

*   åœ¨æŸäº›å¾‹æ‰€çš„ç®¡ç†å®è·µä¸­ï¼Œå½“åè´¦å¤§éƒ¨åˆ†/å…¨éƒ¨è¢«æ”¶å›æ—¶ï¼Œå¸Œæœ›åœ¨ç³»ç»Ÿä¸­å–æ¶ˆåè´¦æ ‡è®°ï¼Œæ–¹ä¾¿ä¹‹åç»Ÿè®¡â€œå½“å‰åè´¦ä½™é¢â€ï¼›

**å®ç°**

*   åœ¨è´¦å•è¯¦æƒ…é¡µæä¾›â€œå–æ¶ˆåè´¦â€æ“ä½œï¼ˆä»…é™é«˜æƒé™ç”¨æˆ·ï¼‰ï¼š
    *   å°† `IsBadDebt=false`ï¼›
    *   `Status` æ ¹æ®å½“å‰ `Balance` è‡ªåŠ¨é‡ç®—ï¼š
        *   Balance=0 â†’ Status=SETTLED
        *   Balance>0 â†’ Status=PARTIALLY\_SETTLED/UNSETTLED
    *   å¯å°† `BadDebtDate/BadDebtReason` ä¿ç•™åœ¨æ‰©å±•æ—¥å¿—æˆ–å®¡è®¡è¡¨ï¼Œä»¥å…å†å²è®°è½½ä¸¢å¤±ã€‚

**ç»“æœ**

*   åœ¨ç­–ç•¥ A ä¸­ï¼Œâ€œåè´¦â€ä¸åç»­å›æ¬¾çš„å…³è”éœ€è¦ä¾èµ–å¤–éƒ¨è´¢åŠ¡ç³»ç»Ÿå¤„ç†ï¼›
*   åœ¨ç­–ç•¥ B ä¸­ï¼ŒFPMS æœ¬èº«å³å¯åæ˜ â€œåè´¦åæ”¶å›â€çš„å®æ—¶çŠ¶æ€ã€‚

***

## 16.10 Phase G8ï¼šå‚¬æ¬¾/åè´¦å¯¹ææˆ WaitPay/ForceSettle çš„å½±å“ï¼ˆé—´æ¥ï¼‰

**è§’è‰²**

*   ç³»ç»Ÿ
*   Manager/Finance

**ç›®æ ‡**

*   å°†å‚¬æ¬¾/åè´¦é˜¶æ®µä¸ææˆå¯ç»“ç®—é€»è¾‘è¿æ¥èµ·æ¥ï¼Œè¯´æ˜ä¸ºä½•è¦ç¡®ä¿æ”¶æ¬¾æ•°æ®è¢«æ‹†åˆ†åˆ° CaseReceiptï¼Œè€Œä¸”åœ¨åè´¦é˜¶æ®µå¤„ç†è°¨æ…ã€‚

### 16.10.1 ææˆå¯ç»“ç®—ä¸æ”¶æ¬¾æ¯”ä¾‹ï¼ˆPaidRatioï¼‰

å¦‚æ¨¡å—å…­æ‰€è¿°ï¼š

*   PaidRatio = å·²æ”¶æœåŠ¡è´¹ / åº”æ”¶æœåŠ¡è´¹

**å·²æ”¶æœåŠ¡è´¹**

*   æ¥è‡ª `T_CaseReceipt` ä¸­ FeeType=SERVICE ä¸” `IsPrepayment=false` çš„ `ReceivedAmt`ï¼›
*   å³ä¸ç®¡æ”¶æ¬¾æ¥è‡ªæ­£å¸¸ä»˜æ¬¾è¿˜æ˜¯åè´¦åå›æ¬¾ï¼Œåªè¦å®ƒé€šè¿‡ Offset â†’ BillItem â†’ CaseReceipt è·¯å¾„ç»‘å®šåˆ°å…·ä½“æ¡ˆä»¶/æœåŠ¡è´¹é¡¹ç›®ä¸Šï¼Œå°±ä¼šè¢«çº³å…¥ PaidRatioã€‚

**åè´¦æ ‡è®°å¯¹ PaidRatio çš„å½±å“**

*   åè´¦æ ‡è®°ä¸ä¼šç›´æ¥æ”¹å˜ CaseReceipt çš„ ReceivedAmtï¼›
*   å¦‚æœåè´¦è´¦å•åæ¥ä»æœ‰ Offsetï¼Œåˆ™ CaseReceipt ReceivedAmt ä¼šå¢åŠ ï¼›
*   æ‰€ä»¥ï¼Œå³ä½¿è´¦å• Status=BAD\_DEBTï¼Œä¹Ÿä¸é˜»ç¢ææˆæ¨¡å—æ„ŸçŸ¥â€œæ¬¾åæ¥æ”¶å›äº†â€ã€‚

### 16.10.2 WaitPay/ForceSettle ä¸ å‚¬æ¬¾/åè´¦åœºæ™¯çš„äº¤äº’

**WaitPay=true çš„ææˆè®°å½•**

*   å½“ Case çš„æœåŠ¡è´¹è´¦å•é•¿æœŸæœªæ”¶æ¬¾ã€ç”šè‡³è¢«æ ‡è®°ä¸ºåè´¦æ—¶ï¼š
    *   PaidRatio ä¸€ç›´åä½ï¼ˆç”šè‡³ 0ï¼‰ï¼Œ
    *   å¯¹åº”çš„ Commission è®°å½•ä¸€ç›´æ— æ³•è¿›å…¥å¯ç»“ç®—é›†åˆï¼ˆå› ä¸º WaitPay æ¡ä»¶ä¸æ»¡è¶³ï¼‰ã€‚
*   å¦‚æœå®¢æˆ·åæ¥å› å‚¬æ¬¾æˆ–å…¶ä»–åŸå› ä»˜æ¬¾ï¼š
    *   è¿™é‡Œå¿…é¡»é€šè¿‡ Offset â†’ CaseReceipt è·¯å¾„æŠŠå›æ¬¾ä¸å…·ä½“ BillItem/CaseID å¯¹ä¸Šï¼Œ
    *   PaidRatio å‡é«˜ï¼ˆä¾‹å¦‚ä» 0 åˆ° 0.5ï¼Œæˆ–ä» 0.5 åˆ° 1ï¼‰ï¼Œ
    *   ç›¸å…³ Commission è®°å½•å°±å¯ä»¥é€æ­¥è¿›å…¥ S1/S2 å¯ç»“ç®—èŒƒå›´ã€‚

**ForceSettle=true çš„è®°å½•**

*   å³ä½¿è´¦å•å°šæœªå®Œå…¨æ”¶æ¬¾ï¼ŒManager å¯èƒ½ä½¿ç”¨ `ForceSettle=true` ç»™æŸ Commission è®°å½•â€œæ”¾è¡Œâ€ï¼š
    *   ä¾‹å¦‚ï¼ŒæŸåœºæ™¯ä¸‹ kasus çš„é€¾æœŸè´¦æ¬¾å·²ç»è¢«è®¤ä¸ºâ€œåæ‹¿ä¹ç¨³â€ï¼Œåªæ˜¯åœ¨è´¢åŠ¡ä¸Šç¨æœ‰å»¶è¿Ÿï¼›
    *   æˆ–è¯¥æ¡ˆåœ¨ä¸šåŠ¡ä¸Šéå¸¸é‡è¦ï¼Œå¸Œæœ›å¯¹ä»£ç†äººæå‰ç»“ç®—ã€‚

**åè´¦åœºæ™¯ä¸‹çš„ç‰¹æ®Šè°¨æ…**

*   å¦‚æœä¸€ä¸ªæ¡ˆä»¶çš„æœåŠ¡è´¹è´¦å•å·²è¢«æ ‡è®°åè´¦ï¼ˆBAD\_DEBTï¼‰ï¼Œä½† `ForceSettle=true`ï¼Œç†è®ºä¸Šå¯ä»¥å¯¹è¯¥æ¡ˆææˆå®æ–½ç»“ç®—ï¼›
*   ä½†åœ¨å®é™…ç®¡ç†ä¸­ï¼Œé€šå¸¸å¯¹ BAD\_DEBT çŠ¶æ€çš„æ¡ˆä»¶ä¼šæ›´åŠ è°¨æ…ï¼ˆä¹Ÿè®¸éœ€è¦é¢å¤–å®¡æ‰¹æµç¨‹ï¼‰ï¼›
*   FPMS å¯ä»¥åœ¨ææˆå¯ç»“ç®—åˆ—è¡¨ä¸­åŒ…å« Bill.Status/IsBadDebt ä¿¡æ¯ï¼Œä»¥ä¾¿ç®¡ç†å±‚å†³ç­–ã€‚

***

## 16.11 åœºæ™¯ G â€“ é˜¶æ®µ / è¡¨ / å­—æ®µæ›´æ–°ä¸€è§ˆè¡¨

| Phase          | è¡¨                         | å…³é”®å­—æ®µå˜æ›´                                                                                                             |
| -------------- | ------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| G0 è´¦å•ç”Ÿæˆ        | T\_Bill                   | æ–°å¢ AR è´¦å•ï¼šBillNo, ClientID, BillDate, DueDate, Currency, Amount, Balance=Amount, Status=UNSETTLED, IsBadDebt=falseã€‚ |
|                | T\_BillItem               | æ’å…¥æ˜ç»†è¡Œï¼šCaseID, FeeCode, FeeType(GOV/SERVICE/MISC), YearNo, Amount, LocalAmount ç­‰ã€‚                                   |
| G1 åˆ°æœŸæœªæ”¶        | â€“                         | ä¸æ”¹è¡¨ï¼›åœ¨æŠ¥è¡¨å±‚æ ¹æ® DueDate/Today è®¡ç®— DaysPastDue å’Œè´¦é¾„ï¼›ä½œä¸ºåç»­å‚¬æ¬¾/åè´¦åŸºç¡€ã€‚                                                           |
| G2 ç”Ÿæˆå‚¬æ¬¾å•       | T\_Dunning                | æ–°å¢è®°å½•ï¼šDunningNo, ClientID, ToDate, Currency, TotalAmt=Î£é€¾æœŸè´¦å•Balance, Status=OPEN, SentDate=NULLã€‚                     |
|                | T\_DunningLine            | å¯¹æ¯ä¸ªé€¾æœŸè´¦å•æ’å…¥ä¸€æ¡ï¼šBillID/BillNo/BillDate/DueDate/OutstandingAmt=å½“å‰Bill.Balance/Remarkã€‚                                   |
| G3 å‚¬æ¬¾å‡½ç”Ÿæˆ       | T\_Documentï¼ˆå¯é€‰ï¼‰           | ç”Ÿæˆ `DocType=CLIENT_OUT, TemplateCode=DUNNING_LETTER` çš„ä¸­é—´æ–‡ä»¶ï¼Œè®°å½•å‚¬æ¬¾å‡½ï¼›é™„ä»¶å­˜å‚¨ Word/PDF æ–‡æ¡£ã€‚                                 |
|                | T\_Dunning                | æ›´æ–° Status=OPENâ†’SENTï¼ŒSentDate=ç”Ÿæˆ/å‘é€æ—¥æœŸã€‚                                                                              |
| G4 å‚¬æ¬¾åæ”¶æ¬¾ & å†²é”€  | T\_Payment/T\_PaymentLine | ç™»è®°æ–°çš„æ”¶æ¬¾ï¼šPayment.Amount=æœ¬æ¬¡å®¢æˆ·å®ä»˜é‡‘é¢ï¼›PaymentLine.RawAmount=Amount, BalanceAmt=Amountã€‚                                    |
|                | T\_Offset                 | å¯¹æ¯ä¸ªè¢«éƒ¨åˆ†/å…¨éƒ¨å†²é”€çš„è´¦å•æ’å…¥ Offset è®°å½•ï¼Œå¹¶æ®æ­¤æ›´æ–° PaymentLine.AllocatedAmt/BalanceAmt ä¸ T\_Bill.Balance/Statusã€‚                     |
|                | T\_CaseReceipt            | æŒ‰è´¦å•æ˜ç»†æ‹†åˆ† OffsetAmtï¼Œå°†å›æ¬¾æ˜ å°„åˆ°å„æ¡ˆä»¶ï¼ˆCaseIDï¼‰çš„ FeeCode/FeeType/YearNo ä¸Šï¼Œæ›´æ–° ReceivableAmt/ReceivedAmt/IsArrearsã€‚              |
| G5 å¤šè½®å‚¬æ¬¾        | T\_Dunning/T\_DunningLine | å†æ¬¡å¯¹é€¾æœŸè´¦å•ç”Ÿæˆæ–°çš„ Dunning è®°å½•å’Œ DunningLine å¿«ç…§ï¼Œè®°å½•æ¯è½®å‚¬æ¬¾æ—¶ç‚¹çš„ OutstandingAmtï¼ˆä¸æ›´æ–°æ—§ DunningLineï¼‰ã€‚                                 |
| G6 æ ‡è®°åè´¦        | T\_Bill                   | å¯¹é•¿æœŸé€¾æœŸä¸”æ— æ”¶å›å¸Œæœ›çš„è´¦å•ï¼Œå°† IsBadDebt=falseâ†’trueï¼ŒStatus=BAD\_DEBTï¼Œå¡«å…¥ BadDebtDate/BadDebtReasonã€‚                               |
| G7 åè´¦åæ”¶å›       | T\_Payment/T\_PaymentLine | å³ä½¿ Bill.Status=BAD\_DEBTï¼Œä»å¯ä»¥ç™»è®°å®¢æˆ·ä»˜æ¬¾ã€‚                                                                                |
|                | T\_Offset                 | å°†è¯¥ä»˜æ¬¾ç­‰é¢æˆ–éƒ¨åˆ†å†²é”€åˆ°åè´¦è´¦å•ï¼ˆOffset è®°å½•ï¼‰ï¼Œæ›´æ–° PaymentLine.BalanceAmt å’Œ Bill.Balanceï¼›Bill.Status å¯ä¿æŒ BAD\_DEBT æˆ–è§†ç­–ç•¥è°ƒæ•´ã€‚             |
|                | T\_CaseReceipt            | åŒæ ·æ‹†åˆ† OffsetAmtï¼Œæ›´æ–°æ¡ˆä»¶çš„ ReceivedAmt/IsArrearsï¼Œè®°å½•å³ä½¿æ˜¯åè´¦åæ”¶å›çš„é‡‘é¢ä¹Ÿè®¡å…¥â€œå·²æ”¶æœåŠ¡è´¹â€ã€‚                                                |
| G8 é¢„æ”¶ & ææˆé€»è¾‘å…³ç³» | T\_CaseReceipt            | æ€»æ˜¯é€šè¿‡ CaseReceipt è®°å½•â€œæ¬¾é¡¹å·²ç»æ˜ç¡®å½’å±å“ªä¸€æ¡ˆ/å“ªä¸€è´¹ç”¨é¡¹â€ï¼Œä»è€Œä¸º Commission æ¨¡å—è®¡ç®— PaidRatio æä¾›ä¾æ®ï¼Œä¸è´¦å•æ˜¯å¦ BAD\_DEBT/æ˜¯å¦å‚¬æ¬¾æ— ç›´æ¥å†²çªã€‚               |
|                | T\_Commission             | å¯¹ WaitPay=true çš„ Commission è®°å½•ï¼ŒPaidRatio è¶Šé«˜ï¼Œå¯ç»“ç®—æ€§è¶Šé«˜ï¼›ä¸€æ—¦é€šè¿‡å‚¬æ¬¾/åè´¦åå›æ¬¾ä½¿ PaidRatio è¾¾åˆ°è§„åˆ™é˜ˆå€¼ï¼Œè¯¥ Commission è®°å½•å°±å¯è¿›å…¥ç»“ç®—æ‰¹æ¬¡ã€‚         |

***

âœ… ä»¥ä¸Šæ˜¯ **E2E åœºæ™¯ Gï¼šå‚¬æ¬¾ & åè´¦** çš„å…¨ç»†èŠ‚æ—¶é—´çº¿å’Œæ•°æ®æµè¯´æ˜ï¼š

*   ä»é€¾æœŸè¯†åˆ« â†’ å‚¬æ¬¾å•/å‚¬æ¬¾å‡½ç”Ÿæˆ â†’ æ”¶æ¬¾å†²é”€ â†’ å¤šè½®å‚¬æ¬¾ â†’ åè´¦æ ‡è®° â†’ åè´¦åæ”¶å› â†’ ä¸ææˆçš„äº¤äº’å…³ç³»ï¼Œå…¨éƒ¨æŒ‰ç…§ä½ ä¹‹å‰è¦æ±‚çš„ç²’åº¦å†™æ¸…æ¥šã€‚

## 17. Part II â€“ E2E åœºæ™¯ Hï¼šé¡¾é—® / æ£€ç´¢é¡¹ç›® â€“ æ—¶é—´çº¿ & æ•°æ®æµï¼ˆå…¨ç»†èŠ‚ï¼‰

> æœ¬åœºæ™¯ä¸“é—¨æè¿° **éä¸“åˆ©æµç¨‹å‹é¡¹ç›®**ï¼ˆé¡¾é—® / æ£€ç´¢ / åŸ¹è®­ / DD ç­‰ï¼‰çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼š\
> ç«‹é¡¹ â†’ å†…éƒ¨ä»»åŠ¡ â†’ æ”¯å‡ºè®°å½• â†’ æœåŠ¡è´¹è‰å• â†’ è´¦å• â†’ æ”¶æ¬¾/å†²é”€ â†’ ä¸ªæ¡ˆæ”¶æ¬¾ â†’ ææˆã€‚
>
> å®ƒä¸æ–°æ¡ˆ/å¹´è´¹/æ— æ•ˆç­‰æœ€å¤§çš„ä¸åŒæ˜¯ï¼š
>
> *   **æ²¡æœ‰å®˜æ–¹æ¥æ–‡/å»æ–‡ã€æ²¡æœ‰å®˜è´¹/å¹´è´¹/æˆæƒ**
>
> *   ä½† **å®Œæ•´å¤ç”¨æ¨¡å—å››/äº”/å…­çš„è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆé€šé“**ã€‚
>
> æˆ‘ä¼šæŒ‰ Phase H0â€“H7 å±•å¼€ï¼Œæ¯ä¸ªé˜¶æ®µè¯´æ˜ï¼š
>
> *   å‚ä¸è§’è‰²
> *   æ“ä½œæ­¥éª¤
> *   æ›´æ–°å“ªäº›è¡¨/å“ªäº›å­—æ®µ\
>     å¹¶æŠŠæˆ‘ä»¬ä¹‹å‰å…³äºåœºæ™¯ H å’Œæ¨¡å—ä¸ƒé‡Œæ‰€æœ‰ç›¸å…³ç‚¹ä¸²èµ·æ¥ã€‚

***

## 17.1 åœºæ™¯æ¦‚è¿°ä¸æ¶‰åŠæ¨¡å—

**ä¸šåŠ¡å™è¿°**

> å®¢æˆ·å§”æ‰˜å¾‹æ‰€åšä¸€é¡¹å’¨è¯¢/æ£€ç´¢ç±»é¡¹ç›®ï¼Œä¾‹å¦‚â€œä¸“åˆ©å¸ƒå±€å’¨è¯¢â€ã€â€œFTO æ£€ç´¢â€ã€â€œä¿¡æ¯å®‰å…¨åŸ¹è®­â€ã€â€œIP å°½èŒè°ƒæŸ¥â€ã€‚\
> å¾‹æ‰€åœ¨ç³»ç»Ÿä¸­ä¸ºè¯¥é¡¹ç›®å»ºç«‹ä¸€ä¸ªæ¡ˆå·ï¼ˆCaseType=CONSULTING æˆ– SEARCHï¼‰ï¼Œç”±é¡¹ç›®è´Ÿè´£äººï¼ˆä»£ç†äºº/é¡¾é—®ï¼‰å¸¦é˜Ÿå®Œæˆé¡¹ç›®ï¼›åœ¨è¿‡ç¨‹ä¸­å¯èƒ½å½•å…¥å¤šæ¡å†…éƒ¨ä»»åŠ¡å’Œæ”¯å‡ºè®°å½•ã€‚\
> é¡¹ç›®å®Œæˆæˆ–è¾¾åˆ°æŸä¸ªé‡Œç¨‹ç¢‘æ—¶ï¼ŒæŒ‰å›ºå®šæŠ¥ä»·æˆ–æŒ‰å·¥æ—¶è®¡è´¹ç”ŸæˆæœåŠ¡è´¹è‰å•ï¼Œå†ç”Ÿæˆé¡¾é—®/æ£€ç´¢è´¦å•ï¼Œå®¢æˆ·ä»˜æ¬¾åç™»è®°æ”¶æ¬¾å’Œå†²é”€ï¼Œæœ€ç»ˆè¿™äº›æœåŠ¡è´¹è®¡å…¥ä»£ç†äºº/é¡¾é—®çš„ææˆè®°å½•ï¼Œå¹¶åœ¨ç»“ç®—æ‰¹æ¬¡ä¸­å‘æ”¾ã€‚

**æ¶‰åŠæ¨¡å—ä¸è¡¨**

*   **æ¨¡å—ä¸€ï¼šæ¡ˆå·ç»´æŠ¤**
    *   `T_Case`ï¼ˆCaseType=CONSULTING/SEARCHï¼Œæ‰©å±•é¡¹ç›®å­—æ®µï¼‰
*   **æ¨¡å—ä¸‰ï¼šæ—¶é™/ä»»åŠ¡ç®¡ç†ï¼ˆå†…éƒ¨ä»»åŠ¡ï¼‰**
    *   `T_Task` â€“ ç”¨äºé¡¹ç›®å†…éƒ¨å·¥ä½œåŒ…ï¼ˆéå®˜æ–¹æ—¶é™ï¼‰
*   **æ¨¡å—å››ï¼šè´¹ç”¨ç®¡ç†**
    *   `T_Expense` â€“ é¡¹ç›®æ”¯å‡ºï¼ˆç¿»è¯‘ã€æ£€ç´¢æ•°æ®åº“ã€å·®æ—…ç­‰ï¼‰
    *   `T_FeeDraft`/`T_FeeItem` â€“ Type=CONSULT\_FEE/SEARCH\_FEE çš„æœåŠ¡è´¹è‰å•
*   **æ¨¡å—äº”ï¼šè´¦å•/æ”¶æ¬¾/å†²é”€**
    *   `T_Bill`/`T_BillItem` â€“ é¡¾é—®/æ£€ç´¢é¡¹ç›®è´¦å•
    *   `T_Payment`/`T_PaymentLine` â€“ å®¢æˆ·ä»˜æ¬¾
    *   `T_Offset` â€“ ä»˜æ¬¾å†²é”€è´¦å•
*   **æ¨¡å—å››ï¼ˆä¸ªæ¡ˆæ”¶æ¬¾ï¼‰**
    *   `T_CaseReceipt` â€“ é¡¹ç›®åº”æ”¶/å®æ”¶/æ¬ æ¬¾æƒ…å†µè®°å½•
*   **æ¨¡å—å…­ï¼šææˆ**
    *   `T_CommissionRule` â€“ CaseType=CONSULTING/SEARCH è§„åˆ™
    *   `T_Commission` â€“ é¡¾é—®/æ£€ç´¢é¡¹ç›®ææˆè®°å½•
    *   `T_CommissionSettlement/T_CommissionSettleLine` â€“ ç»“ç®—æ‰¹æ¬¡

***

## 17.2 Phase H0ï¼šé¡¹ç›®çº¿ç´¢ / ç«‹é¡¹å‰ï¼ˆç³»ç»Ÿå¤–ï¼‰

**è§’è‰²**

*   å®¢æˆ·
*   Project Owner / ä»£ç†äºº
*   BD / åˆä¼™äºº

**æè¿°**

*   å®¢æˆ·æå‡ºé¡¹ç›®éœ€æ±‚ï¼šä¾‹å¦‚â€œåšä¸€ä»½å…¬å¸ä¸“åˆ©å¸ƒå±€å’¨è¯¢â€ã€â€œåšä¸€ä¸ª XX æŠ€æœ¯é¢†åŸŸçš„ FTO æ£€ç´¢â€ã€â€œåšä¿¡æ¯å®‰å…¨åŸ¹è®­â€ã€‚
*   åˆä¼™äººä¸å®¢æˆ·å•†å®šæŠ¥ä»·æ–¹å¼ï¼š
    *   å›ºå®šæŠ¥ä»·ï¼šä¾‹å¦‚â€œæœ¬é¡¹ç›®æ€»ä»· 30,000â€ï¼›
    *   æŒ‰å·¥æ—¶è®¡è´¹ï¼šä¾‹å¦‚â€œåˆä¼™äºº 2,000/å°æ—¶ã€é¡¾é—® 1,200/å°æ—¶â€ï¼›
    *   æ··åˆæ¨¡å¼ï¼šå›ºå®šåŒ… + è¶…å‡ºéƒ¨åˆ†æŒ‰å°æ—¶è®¡è´¹ã€‚

**æŠ€æœ¯**

*   ä»…åœ¨ CRM æˆ–å¤–éƒ¨ç³»ç»Ÿä¸­è®°å½•çº¿ç´¢ï¼›
*   æœ¬ FPMS çš„æ­£å¼æµç¨‹ä» Phase H1 å»ºç«‹ `T_Case` å¼€å§‹ã€‚

***

## 17.3 Phase H1ï¼šé¡¾é—®/æ£€ç´¢é¡¹ç›®ç«‹æ¡ˆ â€“ `T_Case` (CaseType=CONSULTING/SEARCH)

**è§’è‰²**

*   Formalities / PMO
*   Project Ownerï¼ˆAgentï¼‰

**ç›®æ ‡**

*   åœ¨ç³»ç»Ÿä¸­å°†é¡¹ç›®å»ºç«‹ä¸ºä¸€ä¸ªâ€œæ¡ˆå·â€ï¼Œæ–¹ä¾¿å…³è”ä»»åŠ¡ã€è´¹ç”¨å’Œææˆã€‚

### 17.3.1 æ“ä½œæ­¥éª¤ï¼ˆUIï¼‰

1.  è¿›å…¥â€œæ¡ˆå·ç»´æŠ¤ â†’ æ–°å»ºæ¡ˆå·â€é¡µé¢ï¼›
2.  é€‰æ‹©ï¼š
    *   `CaseType` = CONSULTINGï¼ˆé¡¾é—®é¡¹ç›®ï¼‰æˆ– `CaseType` = SEARCHï¼ˆæ£€ç´¢é¡¹ç›®ï¼‰ï¼›
    *   `PatentCategory`ï¼šå¯ä¸º NULL æˆ–è®¾ç½®ä¸ºä¸é¡¹ç›®ç›¸å…³çš„ç±»åˆ«ï¼ˆé€šå¸¸éå…³é”®ï¼Œå¯é€‰ï¼‰ï¼›
    *   `FlowDir`ï¼šå¸¸ä¸º IN\_INï¼ˆå›½å†…é¡¾é—®ï¼‰ï¼Œå¦‚æ¶‰åŠè·¨å¢ƒé¡¾é—®å¯é€‰æ‹© IN\_OUT ç­‰ï¼›
3.  å¡«å†™åŸºæœ¬å­—æ®µï¼š
    *   `CaseNo` â€“ é¡¹ç›®ç¼–å·ï¼ˆå¯è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚ â€œCS-2025-001â€ï¼‰

*   `Title_CN` â€“ é¡¹ç›®åç§°ï¼Œä¾‹å¦‚â€œÃ—Ã—å…¬å¸ä¸“åˆ©å¸ƒå±€å’¨è¯¢é¡¹ç›®â€æˆ–â€œÃ—Ã— æŠ€æœ¯é¢†åŸŸ FTO æ£€ç´¢â€
*   `Title_EN` â€“ å¦‚æœé¡¹ç›®æœ‰è‹±æ–‡åç§°ï¼Œå¯å¡«å†™
*   `ClientID` â€“ å§”æ‰˜å®¢æˆ·
*   `RecvDate` â€“ ç«‹é¡¹/ç­¾çº¦æ—¥æœŸ
*   `PrimaryAgentID` â€“ é¡¹ç›®è´Ÿè´£äººï¼ˆé¡¾é—®/ä»£ç†äººï¼‰
*   `SecondAgentID`/`DraftorID` â€“ å¯è®°å½•ååŠé¡¾é—®ã€ä¸»æ‰§è¡Œäººç­‰
    4\.  åœ¨æ‰©å±•å­—æ®µï¼ˆå­˜äº T\_Case æˆ– ExtraDataï¼‰ä¸­å¡«å†™é¡¹ç›®å±æ€§ï¼ˆæ¨èï¼‰ï¼š
    *   `ConsultingScope` â€“ é¡¹ç›®èŒƒå›´
*   `DeliverableType` â€“ äº¤ä»˜ç‰©ç±»å‹ï¼ˆæ–‡æœ¬/æŠ¥å‘Š/PPT/æ•°æ®åº“ç­‰ï¼‰
*   `FixedFee` â€“ å›ºå®šæŠ¥ä»·ï¼ˆå¦‚ 30,000ï¼‰
*   `EstimatedHours` â€“ é¢„ä¼°å·¥æ—¶ï¼ˆä¾‹å¦‚ 50 å°æ—¶ï¼‰
*   `StartDate` / `EndDate` â€“ é¡¹ç›®é¢„ä¼°èµ·æ­¢æ—¥æœŸ
    5\.  åˆå§‹çŠ¶æ€è®¾ç½®ï¼š
    *   `Status` = `NOT_STARTED`ï¼ˆæˆ–æ ¹æ®æ”¿ç­–ä¸º IN\_PROGRESSï¼‰ã€‚
    1.  ä¿å­˜ã€‚

### 17.3.2 æ•°æ®åº“å†™å…¥ï¼ˆT\_Caseï¼‰

æ’å…¥ä¸€æ¡ `T_Case`ï¼š

*   `CaseID` â€“ æ–°ç”Ÿæˆ
*   `CaseNo` â€“ é¡¹ç›®ç¼–å·
*   `CaseType` = CONSULTING æˆ– SEARCH
*   å…¶ä»–å­—æ®µï¼ˆClientID/Title/RecvDate/PrimaryAgentID ç­‰ï¼‰æŒ‰è¾“å…¥ä¿å­˜
*   `Status` åˆå§‹ä¸º NOT\_STARTED æˆ– IN\_PROGRESS
*   æ‰©å±•å­—æ®µï¼ˆConsultingScope/DeliverableType/FixedFee/EstimatedHours/StartDate/EndDateï¼‰å­˜å…¥ T\_Case ä¸­ç›¸åº”å­—æ®µæˆ– ExtraData JSON ä¸­ã€‚

**ç»“æœ**

*   é¡¾é—®/æ£€ç´¢é¡¹ç›®åœ¨ FPMS ä¸­ä½œä¸ºä¸€ä¸ªç‹¬ç«‹æ¡ˆå·å­˜åœ¨ï¼Œåç»­æ‰€æœ‰å†…éƒ¨ä»»åŠ¡ã€æ”¯å‡ºå’Œè´¹ç”¨æ•°æ®éƒ½æŒ‚åœ¨è¿™ä¸ª CaseID ä¸‹ã€‚

***

## 17.4 Phase H2ï¼šå†…éƒ¨ä»»åŠ¡ç®¡ç† â€“ ä½¿ç”¨ `T_Task` ä½œä¸ºé¡¹ç›®å·¥ä½œåŒ…ï¼ˆå¯é€‰ï¼‰

**è§’è‰²**

*   Project Owner
*   Team Members

**ç›®æ ‡**

*   ä½¿ç”¨ `T_Task` æ¨¡å‹ç®¡ç†é¡¹ç›®å†…éƒ¨ä»»åŠ¡ï¼Œä»¥æ¸…æ™°åˆ†å·¥å’Œè·Ÿè¸ªé¡¹ç›®è¿›åº¦ï¼ˆä¸æ˜¯å®˜æ–¹æ—¶é™ï¼Œä½†å…±äº«æ•°æ®ç»“æ„ï¼‰ã€‚

### 17.4.1 åˆ›å»ºå†…éƒ¨ä»»åŠ¡

åœ¨é¡¹ç›®æ¡ˆå·çš„â€œä»»åŠ¡â€æ ‡ç­¾ä¸­ï¼š

1.  Project Owner æ–°å»ºè‹¥å¹²ä»»åŠ¡ï¼ˆå·¥ä½œåŒ…ï¼‰ï¼Œä¾‹å¦‚ï¼š
    *   "éœ€æ±‚è®¿è°ˆ / èŒƒå›´ç¡®è®¤"ï¼ˆCONSULT\_SCOPINGï¼‰
    *   "æ£€ç´¢æ‰§è¡Œ"ï¼ˆSEARCH\_EXECUTIONï¼‰
    *   "åˆ†ææŠ¥å‘Šæ’°å†™"ï¼ˆANALYSIS\_REPORTï¼‰
    *   "å¯¹å®¢æ±‡æŠ¥"ï¼ˆCLIENT\_PRESENTATIONï¼‰
2.  å¯¹æ¯ä¸ªä»»åŠ¡è®¾ç½®ï¼š
    *   `CaseID` = æœ¬é¡¹ç›® CaseID

*   `TemplateCode` = å¯ç©ºæˆ–ä½¿ç”¨å†…éƒ¨ä»»åŠ¡æ¨¡æ¿ Codeï¼ˆä¸ä½¿ç”¨å¤–éƒ¨ DeadlineTemplateï¼‰
*   `Type` = ä¸Šè¿°ä»»åŠ¡å
*   `BaseDate` = ä»»åŠ¡å¼€å§‹æ—¥
*   `Deadline` = å†…éƒ¨è®¡åˆ’å®Œæˆæ—¥
*   `InnerDeadline` = å¯ä¸å¡«æˆ–ä¾æ®å†…éƒ¨è§„åˆ™å®šä¹‰
*   `WorkerID` = æŒ‡æ´¾ç»™å…·ä½“å›¢é˜Ÿæˆå‘˜
*   `SupervisorID` = é¡¹ç›®è´Ÿè´£äººï¼ˆPrimaryAgentIDï¼‰
    3\.  ä¿å­˜ä»»åŠ¡è®°å½•ï¼ˆæ¨¡å—ä¸‰å·²æœ‰è¯¦ç»†è§„åˆ™ï¼‰ï¼š
    *   `Status = OPEN`
*   `DoneDate = NULL`
*   `IsWrittenOff = false`

### 17.4.2 ä½¿ç”¨ä¸æ ¸é”€

*   å›¢é˜Ÿæˆå‘˜åœ¨â€œæˆ‘çš„æ—¶é™ä»»åŠ¡â€è§†å›¾ä¸­å¯ä»¥çœ‹åˆ°è‡ªå·±æ‰¿æ‹…çš„é¡¹ç›®ä»»åŠ¡ï¼›
*   å®Œæˆåï¼Œé€šè¿‡æ ¸é”€æ“ä½œï¼ˆStatus=OPENâ†’DONE, DoneDate=å®Œæˆæ—¥æœŸï¼‰æ›´æ–° `T_Task`ï¼›
*   å†…éƒ¨ä»»åŠ¡ä¸ä¼šå½±å“å®˜æ–¹æ—¶é™ï¼Œä½†å¯ä»¥ç”¨äºé¡¹ç›®ç®¡ç†ä¸ç»©æ•ˆè€ƒæ ¸ï¼ˆä¾‹å¦‚ç»Ÿè®¡ä¸€ä¸ªé¡¾é—®æ‰¿æ‹…å¤šå°‘å·¥ä½œåŒ…ä»»åŠ¡ï¼‰ã€‚

**ç»“æœ**

*   æ— å®˜æ–¹æ¥æ–‡/å»æ–‡ï¼Œä½†é¡¹ç›®å†…éƒ¨ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶å®ƒ T\_Task ä¸€è‡´ï¼›
*   ä¸ºé¡¹ç›®çš„å·¥æ—¶/å·¥ä½œé‡ç»Ÿè®¡æä¾›åŸºç¡€ã€‚

***

## 17.5 Phase H3ï¼šé¡¹ç›®æ”¯å‡ºè®°å½• â€“ `T_Expense`ï¼ˆé¡¹ç›®æˆæœ¬ï¼‰

**è§’è‰²**

*   Project Owner
*   Finance

**ç›®æ ‡**

*   è®°å½•è¯¥é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„ç¬¬ä¸‰æ–¹æ”¯å‡ºï¼Œä¾›æˆæœ¬/æ¯›åˆ©åˆ†æä½¿ç”¨ã€‚

### 17.5.1 æ”¯å‡ºå½•å…¥ï¼ˆT\_Expenseï¼‰

åœ¨é¡¹ç›®æ¡ˆå·çš„â€œæ”¯å‡ºè´¹ç”¨â€æ ‡ç­¾ä¸­ï¼ŒæŒ‰æ¯ç¬”æ”¯å‡ºå½•å…¥ï¼š

1.  æ„é€  `T_Expense` è®°å½•ï¼š
    *   `CaseID` = é¡¹ç›® CaseID

*   `AgentID` = ç»åŠé¡¾é—®/ä»£ç†äººï¼ˆå¯é€‰ï¼‰
*   `ItemName` = è´¹ç”¨åç§°ï¼Œä¾‹å¦‚ï¼š
    *   â€œDerwent æ£€ç´¢æ•°æ®åº“è´¹ç”¨â€
    *   â€œç¿»è¯‘è´¹ â€“ æ£€ç´¢æŠ¥å‘Šâ€
    *   â€œå·®æ—…è´¹ â€“ ä¸Šæµ·å®¢æˆ·ä¼šè®®â€
*   `Category` = æšä¸¾å€¼ï¼š
    *   SEARCH\_DB â€“ æ£€ç´¢æ•°æ®åº“è´¹ç”¨
    *   TRANSLATION â€“ ç¿»è¯‘è´¹
    *   TRANSPORT â€“ å·®æ—…/äº¤é€šè´¹
    *   OTHER â€“ å…¶ä»–æ”¯å‡º
*   `WorkerID` = å®é™…ç»æ‰‹äºº/æŠ¥é”€äºº
*   `Date` = è´¹ç”¨å‘ç”Ÿæ—¥æœŸ
*   `Quantity` = æ•°é‡ï¼ˆé€šå¸¸=1ï¼›æˆ–è¡¨ç¤ºå·¥æ—¶/æ¬¡æ•°ç­‰ï¼‰
*   `UnitPrice` = å•ä»·
*   `Total` = è´¹ç”¨æ€»é¢ï¼ˆé€šå¸¸ = Quantity Ã— UnitPriceï¼‰
*   `Currency` = æ”¯ä»˜å¸ç§ï¼ˆå¦‚ CNY/USDï¼‰
*   `Remark` = ä¾›åº”å•†åç§°/å‘ç¥¨å·ç­‰
    2\.  æ ¡éªŒï¼š
    *   Quantity/UnitPrice/Total â‰¥ 0ï¼›
*   è‹¥ Total â‰  QuantityÃ—UnitPriceï¼Œéœ€æç¤ºç”¨æˆ·æ˜¯å¦è®¤åŒæ‰‹å·¥æŒ‡å®š Totalï¼ˆV-EX-02ï¼‰ã€‚
    3\.  ä¿å­˜ `T_Expense` è®°å½•ã€‚

### 17.5.2 æ”¯å‡ºç»Ÿè®¡

æ—¥åå¯ä»¥åœ¨â€œæ”¯å‡ºæŸ¥è¯¢/é¡¹ç›®æˆæœ¬æŠ¥è¡¨â€ä¸­æŒ‰ï¼š

*   CaseIDï¼ˆé¡¹ç›®ï¼‰
*   æ—¶é—´æ®µ
*   Categoryï¼ˆSEARCH\_DB/TRANSLATION/TRANSPORT/OTHERï¼‰

æ±‡æ€»è¿™äº›æ”¯å‡ºï¼Œç”¨äºè®¡ç®—é¡¹ç›®çš„æ¯›åˆ©ï¼ˆæœåŠ¡è´¹æ”¶å…¥ â€“ æ”¯å‡ºæˆæœ¬ï¼‰ã€‚

***

## 17.6 Phase H4ï¼šæœåŠ¡è´¹è‰å•ç”Ÿæˆ â€“ `T_FeeDraft/T_FeeItem` (CONSULT\_FEE/SEARCH\_FEE)

**è§’è‰²**

*   Project Owner / Finance

**ç›®æ ‡**

*   æ ¹æ®é¡¹ç›®æŠ¥ä»·/å·¥æ—¶/çº¦å®šï¼Œç”Ÿæˆé¡¾é—®/æ£€ç´¢é¡¹ç›®çš„æœåŠ¡è´¹è‰å•ï¼Œä¸ºè´¦å•ç”Ÿæˆæ‰“åŸºç¡€ã€‚

### 17.6.1 è§¦å‘æ—¶æœº

*   é¡¹ç›®ç»“æŸï¼ˆStatus: IN\_PROGRESS â†’ COMPLETEDï¼‰æ—¶ï¼›
*   æˆ–è¾¾åˆ°æŸä¸ªé‡Œç¨‹ç¢‘ï¼ˆä¾‹å¦‚ä¸­æœŸæŠ¥å‘Šã€æœ€ç»ˆæŠ¥å‘Šï¼‰æ—¶æŒ‰é˜¶æ®µè®¡è´¹ã€‚

### 17.6.2 è‰å•ç±»å‹ä¸æ¨¡å¼

**è‰å•å¤´ `T_FeeDraft`**

*   `CaseID` = é¡¹ç›® CaseID
*   `Type` = CONSULT\_FEE æˆ– SEARCH\_FEE
*   `Currency` = Client é»˜è®¤å¸ç§
*   `Status` = OPEN

**è®¡è´¹æ¨¡å¼ 1ï¼šå›ºå®šæŠ¥ä»·ï¼ˆFixed Feeï¼‰**

*   ä¾‹å¦‚é¡¹ç›®æ€»ä»· 30,000ï¼š

åœ¨ `T_FeeItem` ä¸­æ’å…¥ä¸€æ¡ï¼š

*   FeeCode = "CONSULT\_FIXED"
*   FeeName = "é¡¾é—®æœåŠ¡è´¹ï¼ˆå›ºå®šæŠ¥ä»·ï¼‰"
*   FeeType = SERVICE
*   Quantity = 1
*   UnitPrice = 30,000
*   Amount = 30,000
*   Currency = è´¦å•å¸ç§ï¼ˆå¦‚ CNYï¼‰
*   ExchangeRate/LocalAmount æŒ‰é»˜è®¤

**è®¡è´¹æ¨¡å¼ 2ï¼šæŒ‰å·¥æ—¶è®¡è´¹ï¼ˆTime-basedï¼‰**

*   å¯¹æ¯ä¸ªå‚ä¸è§’è‰²æ’å…¥ä¸€æ¡æˆ–å¤šæ¡ FeeItemï¼Œä¾‹å¦‚ï¼š
    1.  åˆä¼™äºº Aï¼š
    *   FeeCode = "CONSULT\_PARTNER\_HOUR"
    *   FeeName = "åˆä¼™äººé¡¾é—®æœåŠ¡ï¼ˆè®¡æ—¶ï¼‰"
    *   FeeType = SERVICE
    *   Quantity = 10ï¼ˆå°æ—¶ï¼‰
    *   UnitPrice = 2,000
    *   Amount = 20,000

1.  é¡¾é—® Bï¼š
    *   FeeCode = "CONSULT\_SENIOR\_HOUR"
    *   Quantity = 20
    *   UnitPrice = 1,200
    *   Amount = 24,000
2.  å…¶ä»–è§’è‰²æŒ‰éœ€æ·»åŠ ã€‚

**è®¡è´¹æ¨¡å¼ 3ï¼šæ··åˆæ¨¡å¼ï¼ˆFixed + Time-basedï¼‰**

*   å›ºå®šåŒ… + è¶…å‡ºéƒ¨åˆ†æŒ‰å·¥æ—¶ï¼š
    *   å›ºå®šåŒ… FeeItemï¼ˆå¦‚ 30,000ï¼‰ï¼›
    *   è¶…å‡ºéƒ¨åˆ†å¤šæ¡å·¥æ—¶ FeeItemã€‚

### 17.6.3 è‰å•ä¿å­˜ä¸æ±‡æ€»

*   å¯¹æ‰€æœ‰ FeeItem è®¡ç®—ï¼š
    *   TotalService = Î£ LocalAmount where FeeType=SERVICE
    *   TotalGov = 0ï¼ˆé€šå¸¸é¡¾é—®/æ£€ç´¢é¡¹ç›®æ— å®˜è´¹ï¼‰
    *   TotalMisc = Î£ LocalAmount where FeeType=MISCï¼ˆå¦‚éƒ¨åˆ†æ”¯å‡ºé€‰æ‹©ç”±å®¢æˆ·æ‰¿æ‹…ï¼‰
    *   TotalAmt = TotalService + TotalGov + TotalMisc
*   æ ¹æ®æ¨¡å—å››ä¸­çš„ V-FD/V-FI æ ¡éªŒï¼ˆè‡³å°‘ä¸€æ¡æ˜ç»†ã€é‡‘é¢éè´Ÿï¼‰ä¿å­˜è‰å•ã€‚

**ç»“æœ**

*   è¯¥é¡¹ç›®æ‹¥æœ‰ `T_FeeDraft(Type=CONSULT_FEE/SEARCH_FEE)` è‰å•ï¼Œä¸‹ä¸€é˜¶æ®µå¯ä»¥ä»è‰å•ç”Ÿæˆè´¦å•ã€‚

***

## 17.7 Phase H5ï¼šè´¦å•ç”Ÿæˆã€æ”¶æ¬¾ä¸ CaseReceiptï¼ˆä¸æ™®é€šæ¡ˆä»¶ä¸€è‡´ï¼‰

**è§’è‰²**

*   Finance
*   å®¢æˆ·
*   ç³»ç»Ÿ

**ç›®æ ‡**

*   å°†é¡¾é—®/æ£€ç´¢è‰å•è½¬æ¢ä¸ºè´¦å• â†’ å®¢æˆ·ä»˜æ¬¾ â†’ æ”¶æ¬¾ç™»è®° â†’ è´¦å•å†²é”€ â†’ ä¸ªæ¡ˆæ”¶æ¬¾è®°å½•ã€‚

### 17.7.1 ä» CONSULT\_FEE/SEARCH\_FEE è‰å•ç”Ÿæˆè´¦å•ï¼ˆT\_Bill/T\_BillItemï¼‰

**æµç¨‹**

1.  åœ¨â€œè´¹ç”¨è‰å•â€åˆ—è¡¨ä¸­ç­›é€‰ Type=CONSULT\_FEE/SEARCH\_FEE ä¸” ClientID=æŸå®¢æˆ·ï¼›
2.  å‹¾é€‰ä¸€æˆ–å¤šä»½è‰å• â†’ ç‚¹å‡»â€œç”Ÿæˆè´¦å•â€ï¼›
3.  ç”Ÿæˆ `T_Bill`ï¼š
    *   ClientID = è¯¥å®¢æˆ·

*   Direction=AR
*   BillDate = ä»Šæ—¥
*   DueDate = BillDate + é»˜è®¤è´¦æœŸï¼ˆä¾‹å¦‚ 30 å¤©ï¼‰
*   Currency = å®¢æˆ·å¸ç§
*   DiscountRate = è‹¥è¯¥é¡¹ç›®æœ‰æŠ˜æ‰£ï¼Œå¯å¡«å†™ï¼ˆä»…å¯¹æœåŠ¡è´¹åº”ç”¨ï¼‰
    4\.  å¯¹æ¯æ¡è‰å•ä¸Šçš„ FeeItem åˆ›å»º `T_BillItem`ï¼š
    *   CaseID = é¡¹ç›® CaseID
*   DraftID = è‰å• DraftID
*   FeeItemID = FeeItem.ItemID
*   FeeCode/FeeName/FeeType/YearNoï¼ˆé€šå¸¸æ—  YearNoï¼‰
*   Amount/Currency/LocalAmount æŒ‰è‰å•å¤åˆ¶æˆ–æ±‡ç‡è½¬æ¢
    5\.  æ±‡æ€»è´¦å•å¤´é‡‘é¢å­—æ®µï¼š
    *   TotalService = Î£ LocalAmount where FeeType=SERVICE
*   TotalMisc = Î£ LocalAmount where FeeType=MISC
*   TotalGov ï¼ˆé€šå¸¸=0ï¼‰
*   Amount = TotalService+TotalMisc+TotalGov
*   Balance = Amount
*   Status=UNSETTLED

**ç»“æœ**

*   é¡¹ç›®å¯¹åº”çš„ä¸€ä»½æˆ–å¤šä»½æœåŠ¡è´¹è´¦å•ç”Ÿæˆå®Œæˆï¼›
*   ç­‰å¾…å®¢æˆ·ä»˜æ¬¾ã€‚

***

### 17.7.2 æ”¶æ¬¾ç™»è®° & å†²é”€ï¼ˆT\_Payment/T\_PaymentLine/T\_Offsetï¼‰

**å®¢æˆ·ä»˜æ¬¾**

*   å®¢æˆ·ç…§è´¦å•é‡‘é¢æˆ–éƒ¨åˆ†é‡‘é¢åšä»˜æ¬¾ï¼›
*   Finance åœ¨â€œæ”¶æ¬¾ç™»è®°â€ä¸­åˆ›å»º `T_Payment`ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ `T_PaymentLine`ï¼ˆè¯¦è§åœºæ™¯ A/D/F/Gï¼‰ã€‚

**è´¦å•å†²é”€**

*   åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ç•Œé¢ï¼š
    *   Finance é€‰æ‹©å¯¹åº” PaymentLineï¼›
    *   ä¸ºé¡¾é—®/æ£€ç´¢è´¦å•è¾“å…¥ OffsetAmtï¼ˆå…¨é¢æˆ–éƒ¨åˆ†ï¼‰ï¼›
    *   ç³»ç»Ÿåˆ›å»º `T_Offset` è®°å½•ï¼Œå¹¶æ›´æ–° PaymentLine.AllocatedAmt/BalanceAmt ä¸ T\_Bill.Balance/Statusã€‚

***

### 17.7.3 é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„ä¸ªæ¡ˆæ”¶æ¬¾è®°å½• â€“ `T_CaseReceipt`

**æµç¨‹**

1.  å¯¹æ¯å¼ é¡¾é—®/æ£€ç´¢è´¦å•ï¼Œå°† OffsetAmt æŒ‰ BillItem çš„ LocalAmount æ¯”ä¾‹æ‹†åˆ†ï¼›
2.  å¯¹æ¯ä¸ª BillItemï¼ˆFeeType=SERVICE æˆ– MISCï¼‰å¯¹åº”çš„ (CaseID, FeeCode, YearNo, FeeType) ç»„åˆï¼š
    *   è‹¥å·²æœ‰ `T_CaseReceipt` è¡Œï¼Œæ›´æ–°ï¼š
    *   `ReceivableAmt`ï¼ˆå¦‚ç¼ºåˆ™è®¾ä¸ºå½“å‰åº”æ”¶ï¼‰
    *   `ReceivedAmt += åˆ†é…é‡‘é¢`
    *   `IsArrears = ReceivedAmt < ReceivableAmt`

*   è‹¥å°šæ— è®°å½•ï¼Œåˆ™æ–°å»ºï¼š
    *   CaseID = é¡¹ç›® CaseID
    *   FeeCode/FeeName/FeeType/YearNoï¼ˆé€šå¸¸ YearNo=NULLï¼‰
    *   ReceivableAmt = BillItem.LocalAmount
    *   ReceivedAmt = åˆ†é…é‡‘é¢
    *   Currency, ReceiptDate, DueDate ç­‰æŒ‰é€»è¾‘èµ‹å€¼
    *   IsPrepayment=false
    *   IsCommissionable = è§†ææˆè§„åˆ™ï¼Œå¯¹æœåŠ¡è´¹ä¸€èˆ¬è®¾ä¸º trueã€‚

**ç»“æœ**

*   Project Owner å¯ä»¥åœ¨é¡¹ç›®è¯¦æƒ…é¡µçš„â€œè´¹ç”¨/æ”¶æ¬¾æƒ…å†µâ€ä¸­æ¸…æ¥šçœ‹åˆ°ï¼š
    *   æœ¬é¡¹ç›®åº”æ”¶æœåŠ¡è´¹æ˜¯å¤šå°‘ï¼›
    *   å·²æ”¶å¤šå°‘ï¼›
    *   æ˜¯å¦è¿˜æœ‰æ¬ æ¬¾ã€‚
*   è´¢åŠ¡å¯ä»¥åœ¨â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢â€ï¼ˆæ¨¡å—å›› 5.11ï¼‰ä¸­æŸ¥çœ‹é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„æ”¶æ¬¾çŠ¶å†µã€‚

***

## 17.8 Phase H6ï¼šé¡¾é—®/æ£€ç´¢é¡¹ç›®ææˆï¼ˆT\_Commissionï¼‰

**è§’è‰²**

*   ç³»ç»Ÿï¼ˆè‡ªåŠ¨ï¼‰
*   Manager/Finance

**ç›®æ ‡**

*   å°†é¡¾é—®/æ£€ç´¢é¡¹ç›®çš„æœåŠ¡è´¹æ”¶å…¥è®¡å…¥ä»£ç†äººææˆè®°å½•ï¼Œå¹¶åœ¨é€‚å½“æ—¶æœºçº³å…¥ç»“ç®—æ‰¹æ¬¡ã€‚

### 17.8.1 ææˆè§„åˆ™ â€“ CaseType=CONSULTING/SEARCH

**è§„åˆ™é…ç½®**

åœ¨ `T_CommissionRule` ä¸­ï¼š

*   å®šä¹‰ä¸€æ¡æˆ–å¤šæ¡è§„åˆ™ï¼š
    1.  å¯¹ `CaseType = CONSULTING`ï¼š
    *   Stage1Rate = æ¯”å¦‚ 0.3ï¼ˆä¸€æ¬¡æ€§ææˆ 30%ï¼‰
    *   Stage2Rate = 0 æˆ– 0.1ï¼ˆå¦‚éœ€é¡¹ç›®æˆåŠŸå¥–åŠ±ï¼‰ï¼›
    *   BaseMode = BY\_SERVICE\_FEEï¼ˆç›´æ¥æŒ‰æœåŠ¡è´¹æ€»é¢ï¼‰ï¼›
    *   ClientGroup å¯ç”¨äºåˆ’åŒºå¤§å®¢æˆ·/æ™®é€šå®¢æˆ·ï¼›

1.  å¯¹ `CaseType = SEARCH`ï¼š
    *   å¯ä»¥é…ç½®ç±»ä¼¼æˆ–ä¸åŒçš„æ¯”ä¾‹ï¼ˆä¾‹å¦‚æ£€ç´¢é¡¹ç›®ææˆç•¥ä½æˆ–ç•¥é«˜ï¼‰ã€‚

**è¯´æ˜**

*   WaitPay é€šå¸¸è®¾ä¸º trueï¼ˆæ¬¾åˆ°ç»“ç®—ï¼‰ï¼›
*   ForceSettle å¯ç”± Manager å¯¹ç‰¹å®šé¡¹ç›®è®¾ç½®ã€‚

***

### 17.8.2 ææˆè®°å½•ç”Ÿæˆ â€“ åœ¨è´¦å•ç”Ÿæˆæ—¶

**æµç¨‹ä¸åœºæ™¯ A/B ç›¸åŒ**ï¼Œåªæ˜¯ CaseType ä¸åŒï¼š

1.  åœ¨é¡¾é—®/æ£€ç´¢è´¦å•ç”Ÿæˆæ—¶ï¼Œç³»ç»Ÿéå†è´¦å•æ˜ç»† `T_BillItem`ï¼Œç­›é€‰ `FeeType=SERVICE` ä¸” CaseID=é¡¹ç›® CaseID çš„æ˜ç»†ï¼›
2.  è®¡ç®— ServiceSum = Î£ LocalAmountï¼›
3.  æ ¹æ® CaseType=CONSULTING/SEARCH å’Œ ClientGroup/FlowDir ç­‰åŒ¹é… `T_CommissionRule`ï¼›
4.  æŒ‰è§„åˆ™ä¸­çš„ BaseMode è®¡ç®— BaseFeeï¼š
    *   BaseFee = ServiceSumï¼ˆBY\_SERVICE\_FEEï¼‰
    *   æˆ– BaseFixedAmt
    *   æˆ– BaseFixedAmt + ServiceSumÃ—ServiceFeeFactorï¼ˆMIXEDï¼‰ï¼›
5.  å¤šä»£ç†äººåˆ†æ‘Šï¼š
    *   PrimaryAgent/SecondAgent/TeamMembers æ¯”å¦‚æŒ‰ 60/30/10 æ‹†åˆ† BaseFeeï¼›
    *   å¯¹æ¯ä¸ª Agentï¼ŒBaseFee\_for\_agent = BaseFee \* ratioï¼›
6.  å¯¹æ¯ä¸ª (CaseID, AgentID)ï¼š
    *   è‹¥æ—  `T_Commission`ï¼Œæ–°å»ºï¼š
    *   BaseFee=BaseFee\_for\_agent
    *   S1\_Rate/S1\_Amt, S2\_Rate/S2\_Amtï¼ˆæŒ‰è§„åˆ™ï¼‰
    *   WaitPay/ForceSettle æŒ‰ç­–ç•¥ï¼›
    *   S1\_Done/S2\_Done=falseã€‚

*   è‹¥å·²æœ‰è®°å½•ï¼ˆç´¯åŠ æ¨¡å¼ï¼‰ï¼š
    *   BaseFee += BaseFee\_for\_agent
    *   é‡æ–°è®¡ç®— S1/S2\_Amt æˆ–æŒ‰çº¦å®šç­–ç•¥å¤„ç†ã€‚

***

### 17.8.3 å¯ç»“ç®—æ¡ä»¶ & ç»“ç®—æ‰¹æ¬¡ï¼ˆä¸æ¨¡å—å…­ä¸€è‡´ï¼‰

**å…¸å‹æ¡ä»¶**

*   æ¡ˆä»¶çŠ¶æ€ï¼š
    *   é¡¹ç›® Status=COMPLETED æˆ– CLOSEDï¼ˆè¡¨ç¤ºé¡¹ç›®æ‰§è¡Œå®Œæ¯•ï¼‰
*   WaitPay æ¡ä»¶ï¼š
    *   `PaidRatio = å·²æ”¶æœåŠ¡è´¹ / åº”æ”¶æœåŠ¡è´¹` è¾¾åˆ°æŸé˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.9 æˆ– 1.0ï¼‰
*   ForceSettle æ¡ä»¶ï¼š
    *   ForceSettle=true æ—¶ï¼Œå¯åœ¨ Status è¾¾æ ‡åå¿½ç•¥ PaidRatio æ¡ä»¶ã€‚

**ç»“ç®—æ‰¹æ¬¡ç”Ÿæˆ**

*   åœ¨æ¨¡å—å…­ææˆç»“ç®—ç•Œé¢ï¼š
    *   æŒ‰æ—¶é—´/ä»£ç†äººç­›é€‰å¯ç»“ç®—çš„ Commission è®°å½•ï¼ˆCaseType=CONSULTING/SEARCHï¼‰ï¼›
    *   å‹¾é€‰è®°å½• â†’ ç”Ÿæˆ `T_CommissionSettlement` å’Œå¯¹åº” `T_CommissionSettleLine`ï¼›
    *   æ ‡è®° S1\_Done/S2\_Done=trueï¼›
    *   å¯¼å‡ºæŠ¥è¡¨ä½œä¸ºé¡¾é—®/ä»£ç†äººçš„ææˆç»“ç®—å•ã€‚

***

## 17.9 åœºæ™¯ H â€“ é˜¶æ®µ/è¡¨/å­—æ®µæ›´æ–°ä¸€è§ˆè¡¨

| Phase        | è¡¨                                               | å…³é”®å­—æ®µå˜æ›´                                                                                                                                                                                                     |
| ------------ | ----------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| H0 ç«‹é¡¹å‰       | â€“                                               | ä»…ä¸šåŠ¡æ„å‘ï¼Œä¸æ¶‰åŠæ•°æ®å†™å…¥ã€‚                                                                                                                                                                                             |
| H1 é¡¹ç›®ç«‹æ¡ˆ      | T\_Case                                         | æ–°å¢ CaseType=CONSULTING/SEARCH è®°å½•ï¼šCaseNo/Title\_CN/ClientID/RecvDate/PrimaryAgentID ç­‰ï¼›æ‰©å±•å­—æ®µï¼ˆConsultingScope/DeliverableType/FixedFee/EstimatedHours/StartDate/EndDateï¼‰å­˜å…¥ï¼›Status=NOT\_STARTED æˆ– IN\_PROGRESSã€‚ |
| H2 å†…éƒ¨ä»»åŠ¡ç®¡ç†    | T\_Task                                         | å¯¹é¡¹ç›®åˆ›å»ºå†…éƒ¨ä»»åŠ¡ï¼šCaseID=é¡¹ç›®IDï¼ŒType="éœ€æ±‚è®¿è°ˆ/æ£€ç´¢æ‰§è¡Œ/åˆ†ææŠ¥å‘Šæ’°å†™/å¯¹å®¢æ±‡æŠ¥" ç­‰ï¼ŒBaseDate/Deadline/WorkerID/SupervisorID/Status=OPENï¼›å®Œæˆæ—¶ Status=DONE, DoneDate è®¾ç½®ã€‚                                                                     |
| H3 é¡¹ç›®æ”¯å‡ºè®°å½•    | T\_Expense                                      | é’ˆå¯¹é¡¹ç›® CaseID è¾“å…¥å¤šæ¡æ”¯å‡ºè®°å½•ï¼šItemNameï¼ˆæ•°æ®åº“è´¹/ç¿»è¯‘è´¹/å·®æ—…è´¹ç­‰ï¼‰ã€Category=SEARCH\_DB/TRANSLATION/TRANSPORT/OTHERã€Total/Currency/Date/WorkerID ç­‰ï¼›ç”¨äºæˆæœ¬/æ¯›åˆ©åˆ†æã€‚                                                                     |
| H4 æœåŠ¡è´¹è‰å•ç”Ÿæˆ   | T\_FeeDraft                                     | å¯¹é¡¹ç›® CaseID ç”Ÿæˆ Type=CONSULT\_FEE æˆ– SEARCH\_FEE è‰å•ï¼ŒCurrency=å®¢æˆ·å¸ç§ï¼ŒStatus=OPENã€‚                                                                                                                                |
|              | T\_FeeItem                                      | æ’å…¥å›ºå®šæŠ¥ä»·æˆ–æŒ‰å·¥æ—¶è®¡è´¹çš„æœåŠ¡è´¹æ˜ç»†ï¼šFeeCode/FeeName/FeeType=SERVICE/Quantity/UnitPrice/Amount/Currency/LocalAmountï¼›TotalService/TotalMisc/TotalAmt ç”±æ‰€æœ‰æ˜ç»†åˆè®¡ã€‚                                                                 |
| H5 è´¦å•ç”Ÿæˆ & æ”¶æ¬¾ | T\_Bill/T\_BillItem                             | ä»è‰å•ç”Ÿæˆè´¦å•ï¼šDirection=AR, BillDate, DueDate, Currency, TotalService/TotalMisc/Amount, Balance=Amount, Status=UNSETTLEDï¼›BillItem å¯¹åº”æ‰€æœ‰ FeeItemã€‚                                                                  |
|              | T\_Payment/T\_PaymentLine                       | å®¢æˆ·ä»˜æ¬¾åç™»è®°æ”¶æ¬¾ï¼šPayment.Amount=æ”¶æ¬¾æ€»é¢ï¼ŒPaymentLine.RawAmount/AllocatedAmt/BalanceAmt æ›´æ–°ã€‚                                                                                                                            |
|              | T\_Offset                                       | å†²é”€è´¦å•ï¼šå¯¹æ¯ä¸ªå†²é”€å†™å…¥ Offsetï¼Œæ›´æ–° T\_Bill.Balance/Status ä¸ PaymentLine.BalanceAmtã€‚                                                                                                                                    |
|              | T\_CaseReceipt                                  | æŒ‰ BillItem æ‹†åˆ† OffsetAmtï¼Œå°†å®æ”¶æœåŠ¡è´¹å¯¹åº”åˆ°é¡¹ç›® CaseID çš„ FeeCode/FeeType/YearNoï¼Œè®°å½• ReceivableAmt/ReceivedAmt/IsArrears ç­‰ã€‚                                                                                              |
| H6 ææˆè®°å½•ç”Ÿæˆ    | T\_CommissionRule                               | å®šä¹‰ CaseType=CONSULTING/SEARCH çš„è§„åˆ™ï¼šStage1Rate/Stage2Rate/BaseMode(BY\_SERVICE\_FEE æˆ– MIXED) ç­‰ã€‚                                                                                                              |
|              | T\_Commission                                   | åœ¨è´¦å•ç”Ÿæˆæ—¶ä¸ºæ¯ä¸ªé¡¹ç›® + AgentID ç”Ÿæˆæˆ–ç´¯åŠ  BaseFeeï¼ˆæœåŠ¡è´¹æ€»é¢æˆ–å…¶å‡½æ•°ï¼‰ï¼Œè®¡ç®— S1\_Amt/S2\_Amtï¼Œå°† WaitPay/ForceSettle æ”¾å…¥ Commission è®°å½•ã€‚                                                                                                  |
| H7 ææˆç»“ç®—      | T\_CommissionSettlement/T\_CommissionSettleLine | åœ¨ææˆç»“ç®—æœŸé—´ï¼ŒæŒ‰ CaseType=CONSULTING/SEARCH å’Œå¯ç»“ç®—æ¡ä»¶ï¼ˆé¡¹ç›®çŠ¶æ€+PaidRatio+WaitPay/ForceSettleï¼‰é€‰å– Commission è®°å½•ï¼Œç”Ÿæˆç»“ç®—æ‰¹æ¬¡å’Œç»“ç®—æ˜ç»†ï¼›æ ‡è®° S1\_Done/S2\_Doneï¼›å¯¼å‡ºæŠ¥è¡¨ã€‚                                                                     |

***

âœ… è‡³æ­¤ï¼Œ**E2E åœºæ™¯ Hï¼šé¡¾é—® / æ£€ç´¢é¡¹ç›®** çš„æ—¶é—´çº¿ & æ•°æ®æµå·²ç»å®Œæ•´å†™å…¥ï¼ŒåŒ…æ‹¬ï¼š

*   é¡¹ç›®æ¡ˆå·å»ºæ¨¡ï¼ˆCaseType=CONSULTING/SEARCHï¼‰ï¼›
*   å†…éƒ¨ä»»åŠ¡ç®¡ç†ï¼ˆT\_Taskï¼‰ï¼›
*   é¡¹ç›®æ”¯å‡ºï¼ˆT\_Expenseï¼‰ï¼›
*   æœåŠ¡è´¹è‰å•ï¼ˆT\_FeeDraft/T\_FeeItemï¼‰ï¼›
*   è´¦å• & æ”¶æ¬¾ & å†²é”€ï¼ˆT\_Bill/T\_Payment/T\_Offsetï¼‰ï¼›
*   ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆT\_CaseReceiptï¼‰ï¼›
*   ææˆè§„åˆ™ & ææˆè®°å½• & ç»“ç®—ï¼ˆT\_Commission\*ï¼‰ã€‚

æ¥ä¸‹æ¥ï¼ŒæŒ‰ä½ æœ€åˆçš„è¦æ±‚ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† **Part II æ‰€æœ‰åœºæ™¯ Aâ€“H + E æˆæƒ/å¹´è´¹/é¢„æ”¶/å‚¬æ¬¾/é¡¾é—®** çš„ E2Eã€‚\
ä¸‹ä¸€æ­¥é€šå¸¸æ˜¯ï¼š

1.  **å…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆ**ï¼ˆæŠŠè¿™äº›åœºæ™¯ä¸²æˆä»â€œé¡¹ç›®çº¿ç´¢ â†’ æ–°æ¡ˆ â†’ PCT â†’ å›½å®¶ â†’ æˆæƒ â†’ å¹´è´¹ â†’ æ— æ•ˆ/è¯‰è®¼ â†’ å‚¬æ¬¾/é¢„æ”¶/åè´¦ â†’ é¡¾é—®/æ£€ç´¢â€çš„å¤§å›¾æ–‡å­—ç‰ˆï¼‰ï¼›
2.  **Mermaid æ³³é“å›¾**ï¼ˆå®¢æˆ· / Formalities / Finance / Agent / ç³»ç»Ÿï¼‰ï¼›
3.  **Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨**ã€‚

å¦‚æœä½ å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šï¼š

> **â€œç”Ÿæˆå…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆ + Mermaid å›¾ + çŠ¶æ€è¿ç§»è¡¨â€**

æˆ‘å°±æŠŠè¿™ä¸‰å—ä¹Ÿæ— å‹ç¼©åœ°åŠ å…¥åˆ° v2.0 æ–‡æ¡£é‡Œã€‚

å¥½ï¼Œæˆ‘ä»¬æŠŠä¸‰å—ä¸œè¥¿ä¸€æ¬¡æ€§é“ºå®Œï¼š

1.  **å…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆï¼ˆæ–‡å­—å¤§å›¾ï¼‰**
2.  **Mermaid æ³³é“å›¾ï¼ˆå®¢æˆ· / Formalities / Finance / ä»£ç†äºº / ç³»ç»Ÿï¼‰**
3.  **Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨**

æ‰€æœ‰å†…å®¹éƒ½åŸºäºå‰é¢å·²ç»å†™è¿‡çš„æ¨¡å— & åœºæ™¯ï¼Œä¸åšå‹ç¼©ï¼Œåªæ˜¯æŠŠå®ƒä»¬é‡æ–°æ’æˆä¸€ä»½â€œæ€»çº²â€ã€‚

***

## 18. å…¨ç”Ÿå‘½å‘¨æœŸæ€»è§ˆï¼ˆæ–‡å­—å¤§å›¾ï¼‰

> è¿™ä¸€èŠ‚æ˜¯â€œä»å¤ªç©ºçœ‹ FPMSâ€ï¼š\
> æŠŠæ‰€æœ‰ E2E åœºæ™¯ Aâ€“H + æˆæƒåœºæ™¯ G0 ä¸²æˆä¸€æ¡ä¸»çº¿ï¼ˆâ€œé¡¹ç›®çº¿ç´¢ â†’ æ–°æ¡ˆ â†’ PCT â†’ å›½å®¶ â†’ æˆæƒ â†’ å¹´è´¹ â†’ æ— æ•ˆ/è¯‰è®¼ â†’ å‚¬æ¬¾/é¢„æ”¶/åè´¦ â†’ é¡¾é—®/æ£€ç´¢â€ï¼‰ï¼Œå¹¶è¯´æ˜åœ¨æ¯ä¸ªé˜¶æ®µå“ªäº›æ¨¡å—å’Œè¡¨å‘ç”Ÿäº†ä»€ä¹ˆã€‚

***

## 18.1 ä¸»å¹²æ—¶é—´çº¿ï¼šä»çº¿ç´¢åˆ°å½’æ¡£

### 18.1.1 L0ï¼šé¡¹ç›®çº¿ç´¢ï¼ˆç³»ç»Ÿå¤–ï¼‰

*   å®¢æˆ·äº§ç”Ÿå„ç§éœ€æ±‚ï¼š
    *   æ–°æ¡ˆç”³è¯·
    *   PCT å›½é™…ç”³è¯·
    *   å›½å®¶é˜¶æ®µè¿›å…¥
    *   æˆæƒåå¹´è´¹ç›‘è§†
    *   æ— æ•ˆ/è¯‰è®¼æ¡ˆä»¶
    *   é¡¾é—®/æ£€ç´¢é¡¹ç›®
*   è¿™äº›é€šå¸¸è®°å½•åœ¨ CRM æˆ–å¤–éƒ¨ç³»ç»Ÿï¼Œæœ¬è§„æ ¼ä»â€œæ­£å¼ç«‹æ¡ˆâ€å¼€å§‹ã€‚

***

### 18.1.2 L1ï¼šç«‹æ¡ˆ â€“ å»ºç«‹ä¸»æ¡ˆå·ï¼ˆæ¨¡å—ä¸€ï¼‰

**æ–°æ¡ˆï¼ˆåœºæ™¯ Aï¼‰**

*   åˆ›å»º `T_Case`ï¼š
    *   CaseType=NORMAL
    *   Status=NOT\_FILED
    *   RecvDateï¼ˆæ”¶æ¡ˆæ—¥ï¼‰
    *   PatentCategoryï¼ˆINVENTION/UTILITY/DESIGNï¼‰
    *   FlowDirï¼ˆIN\_IN/IN\_OUT/OUT\_IN/HK\_IN/OUT\_OUTï¼‰
    *   ApplicantKind/FeeReduction/IsFeeMonitor ç­‰æ§åˆ¶æ ‡è®°
*   æ’å…¥ `T_CaseApplicant/T_CaseInventor/T_Priority`
*   è¿™æ˜¯æ•´ä¸ªåç»­æµç¨‹çš„ä¸»é”® CaseID èµ·ç‚¹ã€‚

**PCT å›½é™…æ¡ˆï¼ˆåœºæ™¯ Cï¼‰**

*   åˆ›å»º `T_Case(CaseType=PCT_INTL)`ï¼š
    *   RO/ISA/IPEA
    *   IntlAppNo/IntlAppDate
    *   IntlPubNo/IntlPubDate/IntlPubLang
    *   NeedIPER/IPERDate
*   Status åˆå§‹ä¸º PCT\_INIT æˆ–ç±»ä¼¼ã€‚

**é¡¾é—®/æ£€ç´¢é¡¹ç›®ï¼ˆåœºæ™¯ Hï¼‰**

*   åˆ›å»º `T_Case(CaseType=CONSULTING/SEARCH)`ï¼š
    *   é¡¹ç›®åç§°ã€å®¢æˆ·ã€è´Ÿè´£äºº
    *   æ‰©å±•å­—æ®µï¼šConsultingScope/DeliverableType/FixedFee/EstimatedHours/StartDate/EndDate
    *   Status=NOT\_STARTED æˆ– IN\_PROGRESSã€‚

***

### 18.1.3 L2ï¼šé€’äº¤ä¸å—ç† â€“ æ–°æ¡ˆ / PCT å›½é™…ï¼ˆåœºæ™¯ A/Cï¼‰

**æ–°æ¡ˆé€’äº¤ï¼ˆåœºæ™¯ Aï¼‰**

*   â€œæ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†â€ï¼š
    *   `T_Case.Status: NOT_FILED â†’ WAITING_RECEIPT`
    *   è‹¥å‹¾é€‰ ApplyExamNowï¼Œåˆ™ `HasExamRequest=true`
    *   å¯ç”Ÿæˆé€’äº¤æ¸…å• `T_Document` + é™„ä»¶
*   å¯åœ¨æ­¤æ—¶ç”Ÿæˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ `T_Task(APPLY_FEE_LIMIT)`ï¼Œä¹Ÿå¯åœ¨å—é€šåç”Ÿæˆã€‚

**PCT å›½é™…é˜¶æ®µæ¥æ–‡ï¼ˆåœºæ™¯ Cï¼‰**

*   å½•å…¥ `PCT_RO_NOTICE/PCT_ISR_NOTICE/PCT_WO_NOTICE/PCT_IPER_NOTICE` ç­‰ OFFICIAL\_INï¼š
    *   `T_Document` è®°å½• RO/ISR/WO/IPER ç»†èŠ‚
    *   æ›´æ–° `T_Case` ä¸­ IntlAppNo/IntlAppDate/IntlPubNo/IntlPubDate ç­‰
*   è¿™äº›ä¿¡æ¯ä¸ºåç»­â€œå›½å®¶é˜¶æ®µè¿›å…¥â€æ—¶é™è®¡ç®—æä¾›åŸºçº¿ã€‚

***

### 18.1.4 L3ï¼šå®¡æŸ¥ / OA / è¡¥æ­£ï¼ˆåœºæ™¯ Bï¼‰

**æ”¶åˆ° OA é€šçŸ¥ï¼ˆOA\_NOTICEï¼‰**

*   å½•å…¥ `T_Document(OFFICIAL_IN, TemplateCode=OA_NOTICE)`ï¼š
    *   ä¿å­˜ DispatchDate/IncomingRegNo/OfficialDueDate(ExtraData)ï¼›
    *   `StatusEffect` å°† `T_Case.Status` ä» SUB\_EXAM â†’ OA1ï¼ˆæˆ–ç±»ä¼¼ OA é˜¶æ®µçŠ¶æ€ï¼‰ï¼›

**ç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡ï¼ˆOA\_REPLY\_LIMITï¼‰**

*   `T_TaskTemplate(OA_REPLY_LIMIT)` å†³å®šï¼š
    *   DeadlineBaseï¼ˆDISPATCH\_DATE/OfficialDueDate ç­‰ï¼‰
    *   AddMonths/InnerOffsetDays/Remind\* ç­‰
*   è‡ªåŠ¨åˆ›å»º `T_Task`ï¼šCaseID, DocID=OA\_NOTICE.DocID, TemplateCode=OA\_REPLY\_LIMIT, BaseDate/Deadline/InnerDeadline/Remind\*ï¼ŒWorkerID/SupervisorIDã€‚

**æäº¤ OA ç­”å¤ï¼ˆOA\_REPLYï¼‰**

*   å½•å…¥ `T_Document(OFFICIAL_OUT, TemplateCode=OA_REPLY, ReplyToID=OA_NOTICE.DocID)`ï¼š
    *   DispatchDate/ReplyDate
    *   Summary/é™„ä»¶ï¼ˆç­”å¤ Word/PDFï¼‰
*   ç³»ç»Ÿé€šè¿‡ ReplyToID æ‰¾åˆ°å¯¹åº” `T_Task(OA_REPLY_LIMIT)`ï¼š
    *   Status: OPENâ†’DONEï¼ŒDoneDate=ReplyDateï¼›
    *   è®°å½• `T_TaskLog(Action=MARK_DONE)`ï¼›
*   `StatusRestore` å°† `T_Case.Status` ä» OA1 â†’ SUB\_EXAMï¼ˆå›åˆ°å®å®¡ä¸­ï¼‰ã€‚

**OA è´¹ç”¨è‰å•ï¼ˆOA\_FEEï¼‰**

*   æ ¹æ® OA\_NOTICE æˆ– OA\_REPLY æ¨¡æ¿çš„ FeeDraftTypeï¼š
    *   ç”Ÿæˆ `T_FeeDraft(Type=OA_FEE/INTERMEDIATE_FEE)` + `T_FeeItem`ï¼ˆæœåŠ¡è´¹ + å®˜æ–¹ç­”å¤è´¹ï¼‰ï¼›
*   åç»­ç”Ÿæˆ OA è´¦å•ã€æ”¶æ¬¾ã€ææˆï¼ˆåŒè´¹ç”¨/è´¦å•/ææˆç®¡é“ï¼‰ã€‚

***

### 18.1.5 L4ï¼šPCT â†’ å›½å®¶é˜¶æ®µï¼ˆåœºæ™¯ Cï¼‰

**å›½å®¶é˜¶æ®µè®¡åˆ’ï¼ˆT\_PCTNationalPlanï¼‰**

*   åœ¨ PCT\_INTL æ¡ˆä¸Šåˆ›å»º `T_PCTNationalPlan`ï¼Œæ¯è¡Œä¸€ä¸ªç›®æ ‡å›½ï¼š
    *   IntlCaseID, CountryCode, FlowDir
    *   EntryDeadlineï¼ˆèˆ¬ä¸ºä¼˜å…ˆæƒæ—¥ + 30/31 ä¸ªæœˆï¼‰
    *   InnerDeadlineï¼ˆEntryDeadline å‰è‹¥å¹²å¤©ï¼‰
    *   ClientInstruction=NONE, Status=PLANNED

**å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ä»»åŠ¡ï¼ˆPCT\_NATIONAL\_ENTRY\_LIMITï¼‰**

*   æ ¹æ® `T_TaskTemplate(PCT_NATIONAL_ENTRY_LIMIT)`ï¼š
    *   DeadlineBase=CUSTOMï¼ŒDeadline=EntryDeadline
    *   InnerOffsetDays/Remind\* é…ç½®
*   ä¸ºæ¯è¡Œè®¡åˆ’é¡¹åˆ›å»º `T_Task`ï¼š
    *   CaseID=IntlCaseID
    *   Type="å›½å®¶é˜¶æ®µè¿›å…¥æ—¶é™ â€“ \[Country]"
    *   Deadline/InnerDeadline/Remind\*ï¼ŒWorkerID/SupervisorID

**å®¢æˆ·æŒ‡ç¤º ENTER/ABANDON**

*   åœ¨è®¡åˆ’è¡¨ä¸­æ›´æ–°ï¼š
    *   ClientInstruction=ENTER â†’ Status=DECIDED\_ENTERï¼›
    *   ClientInstruction=ABANDON â†’ Status=DECIDED\_ABANDONï¼›
*   å¯¹ ABANDON çš„ç›®æ ‡å›½ï¼šç›¸åº”çš„è¿›å…¥æ—¶é™ä»»åŠ¡å¯æ ‡è®° CANCELLED æˆ– DONEï¼ˆè§†æ”¿ç­–ï¼‰ã€‚

**åˆ›å»ºå›½å®¶é˜¶æ®µæ¡ˆå·ï¼ˆPCT\_NATIONALï¼‰**

*   å¯¹ `DECIDED_ENTER` çš„ç›®æ ‡å›½ï¼š
    *   ä¸ºæ¯å›½å®¶åˆ›å»º `T_Case(CaseType=PCT_NATIONAL, ParentCaseID=PCT_INTL.CaseID)`ï¼›
    *   å¤åˆ¶ç”³è¯·äºº/å‘æ˜äºº/ä¼˜å…ˆæƒ/PCT ä¿¡æ¯ï¼›
    *   `Status=NOT_FILED`ï¼›
*   æ›´æ–° `T_PCTNationalPlan.Status=CASE_CREATED`ï¼Œ`NationalCaseID=æ–° CaseID`ï¼›
*   å¯¹åº” `T_Task(PCT_NATIONAL_ENTRY_LIMIT)` å¯æ ‡è®°ä¸º DONEï¼ˆè¿›å…¥æ“ä½œå®Œæˆï¼‰ã€‚

**å›½å®¶é˜¶æ®µæ¡ˆåç»­**

*   æ¯ä¸ª PCT\_NATIONAL æ¡ˆä»æ­¤**å®Œå…¨å¤ç”¨**æ–°æ¡ˆæµç¨‹ï¼ˆåœºæ™¯ A/B/G0/D/E ç­‰ï¼‰ï¼š
    *   é€’äº¤ â†’ ç”³è¯·è´¹è‰å•/å®˜è´¹æ¸…å•/è´¦å•/æ”¶æ¬¾/ææˆ
    *   OA â†’ æˆæƒ â†’ å¹´è´¹ â†’ æ— æ•ˆ/è¯‰è®¼ â†’ å‚¬æ¬¾/é¢„æ”¶/åè´¦ ç­‰

***

### 18.1.6 L5ï¼šæˆæƒï¼ˆåœºæ™¯ G0ï¼‰

**æˆæƒé€šçŸ¥ï¼ˆGRANT\_NOTICEï¼‰**

*   å½•å…¥ `T_Document(OFFICIAL_IN, TemplateCode=GRANT_NOTICE)`ï¼Œåœ¨ InputFieldList ä¸­å¡«å†™ï¼š
    *   IssueDate, GrantDate, GrantNo, FirstAnnuityYear, ValidUntil ç­‰
*   å†™å…¥ `T_Case`ï¼š
    *   Status=GRANTED
    *   IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntil

**æˆæƒè´¹æ—¶é™ä»»åŠ¡ï¼ˆGRANT\_CERT\_FEE\_LIMITï¼‰**

*   ä½¿ç”¨ `T_TaskTemplate(GRANT_CERT_FEE_LIMIT)`ï¼š
    *   ä¸ºè¯ä¹¦è´¹/ç™»è®°è´¹åˆ›å»º `T_Task`ï¼š
        *   BaseDate/Deadline/InnerDeadline/Remind\*
        *   WorkerID/SupervisorID
*   ç”¨äºæé†’åœ¨å®˜æ–¹ç»é™å‰å®Œæˆæˆæƒè´¹ç¼´çº³ã€‚

**æˆæƒè´¹/å¹´ç™»å°è´¹ä»»åŠ¡ï¼ˆT\_GrantFeeTaskï¼‰**

*   å¹´è´¹æ¨¡å—å¯åˆ›å»º `T_GrantFeeTask` è®°å½•ï¼š
    *   CaseID, Type=GRANT
    *   DueDateï¼ˆæˆæƒè´¹å®˜æ–¹æˆªæ­¢æ—¥ï¼‰
    *   GovFeeAmt/ServiceFeeAmtï¼ˆé¢„ä¼°ï¼‰
    *   ClientInstruction/NONE
    *   NotifyCount/DraftGenerated/NoticeSent ç­‰

**æˆæƒè´¹è‰å•â†’æ¸…å•â†’è´¦å•**

*   å¯¹ ClientInstruction=PAY ä¸” DraftGenerated=falseï¼š
    *   ç”Ÿæˆæˆæƒè´¹è‰å• `T_FeeDraft(Type=GRANT_FEE)` + è¯ä¹¦è´¹/ç™»è®°è´¹/å°èŠ±ç¨ç­‰æ˜ç»† `T_FeeItem`ï¼›
    *   å°† GOV éƒ¨åˆ†æ±‡å…¥ `T_PayList(Type=GRANT)` + `T_GovPayment`ï¼ˆæˆæƒè´¹å®˜è´¹æ¸…å•ï¼‰å¹¶ç¼´è´¹ç™»è®°ï¼›
    *   ä»è‰å•æ•´ä½“ç”Ÿæˆæˆæƒè´¹è´¦å• `T_Bill` â†’ å®¢æˆ·ä»˜æ¬¾ `T_Payment` â†’ å†²é”€ `T_Offset` â†’ ä¸ªæ¡ˆæ”¶æ¬¾ `T_CaseReceipt` â†’ æˆæƒé˜¶æ®µææˆ `T_Commission`ã€‚

***

### 18.1.7 L6ï¼šå¹´è´¹å‘¨æœŸï¼ˆåœºæ™¯ Dï¼Œå¤šå¹´åº¦æ»šåŠ¨ï¼‰

æˆäºˆå N å¹´å†…ï¼š

**å¹´è´¹ä»»åŠ¡åˆå§‹åŒ–ï¼ˆT\_AnnuityTaskï¼‰**

*   å¯¹æ‰€æœ‰ `IsFeeMonitor=true` çš„æˆæƒæ¡ˆï¼ŒæŒ‰ FirstAnnuityYear & ValidUntil ç”Ÿæˆå¹´è´¹ä»»åŠ¡ `T_AnnuityTask`ï¼š
    *   YearNo, DueDate, GovFeeAmt/ServiceFeeAmtï¼ˆé¢„ä¼°æˆ– 0ï¼‰
    *   ClientInstruction=NONE
    *   DraftGenerated=false, NoticeSent=false, IsOverdue=false

**å®šæœŸæå–å¹´åº¦ä»»åŠ¡ï¼ˆæœªæ¥ X æœˆå†…åˆ°æœŸï¼‰**

*   å¹´è´¹å‘˜åœ¨â€œå¹´è´¹ç®¡ç†â€ç•Œé¢ä¸­æŒ‰ DueDate èŒƒå›´/Client/å›½åˆ« ç­‰æ¡ä»¶ç­›é€‰ T\_AnnuityTaskï¼›
*   å¾—åˆ°æœªæ¥ 3/6/12 ä¸ªæœˆå†…åˆ°æœŸçš„å¹´è´¹ä»»åŠ¡åˆ—è¡¨ã€‚

**å®¢æˆ·æŒ‡ç¤º & é€šçŸ¥**

*   å¯¹ç­›é€‰å‡ºçš„è¡Œæ›´æ–° `ClientInstruction`ï¼š
    *   PAY â€“ æŒ‡ç¤ºç¼´çº³å¹´è´¹
    *   ABANDON â€“ æ”¾å¼ƒå¹´è´¹ï¼ˆå¯èƒ½æ„å‘³ç€ä¸“åˆ©ç»ˆæ­¢ï¼‰
*   å¯¹ ClientInstruction=NONE çš„è¡Œï¼Œç”Ÿæˆå¹´è´¹é€šçŸ¥å‡½ `T_Document(ANNUITY_NOTICE)`ï¼š
    *   NoticeSent=true, NotifyCount++

**å¹´è´¹è‰å•**

*   å¯¹ ClientInstruction=PAY ä¸” DraftGenerated=false çš„è¡Œï¼š
    *   æŒ‰ Country/CaseType/PatentCategory/YearNo ä» `T_FeeRate(Group=ANNUITY)` è®¡ç®—å®˜è´¹/æœåŠ¡è´¹ï¼›
    *   ç”Ÿæˆå¹´è´¹è‰å• `T_FeeDraft(Type=ANNUITY_FEE)` + FeeItemï¼ˆGOV+SERVICEï¼ŒYearNo=Nï¼‰ï¼›
    *   å¤šå¹´åº¦åˆå¹¶ä¸€ä¸ªè‰å•ï¼Œæ ¹æ® PayNextYear é€‰é¡¹ä¸º YearNo/N+1 ç­‰ç”Ÿæˆæ˜ç»†ï¼›
    *   `T_AnnuityTask.DraftGenerated=true`ã€‚

**å®˜è´¹æ¸…å• & å®˜æ–¹ç¼´è´¹**

*   ä» ANNUITY\_FEE è‰å•ä¸­ FeeType=GOV æ„é€  `T_PayList(Type=ANNUITY)` å’Œ `T_GovPayment`ï¼›
*   ç¼´è´¹åç™»è®° `PaidAmt/PaidDate/InvoiceNo/VoucherNo`ï¼›
*   å¹´è´¹å®˜è´¹æƒ…å†µæ˜¾ç¤ºåœ¨â€œè´¹ç”¨æƒ…å†µæŸ¥è¯¢ â€“ ä¸ŠåŠè¡¨â€ã€‚

**å¹´è´¹è´¦å• & å®¢æˆ·æ”¶æ¬¾**

*   ä» ANNUITY\_FEE è‰å•ç”Ÿæˆå¹´è´¹è´¦å• `T_Bill`ï¼›
*   å®¢æˆ·ä»˜æ¬¾ â†’ `T_Payment/T_PaymentLine`ï¼›
*   å†²é”€ â†’ `T_Offset`ï¼›
*   æ‹†åˆ† OffsetAmt â†’ æ›´æ–° `T_CaseReceipt`ï¼š
    *   YearNo=Nï¼›
    *   FeeType=GOV/SERVICEï¼›
*   è‹¥ ABANDON æˆ–æœªåœ¨å®½é™æœŸå†… PAYï¼Œåˆ™åŸæ¡ˆ `T_Case.Status` â†’ TERMINATED/INVALIDATEDï¼Œåç»­å¹´è´¹ä»»åŠ¡ä¸å†å¤„ç†ã€‚

**å¹´è´¹ææˆï¼ˆå¯é€‰ï¼‰**

*   å¹´è´¹æœåŠ¡è´¹è®¡å…¥ `T_Commission` åŸºæ•°ï¼Œé‡‡ç”¨ CaseType=NORMAL æˆ–ç‰¹åˆ« CaseType=ANNUITY\_SERVICE è§„åˆ™ï¼›
*   åœ¨æ¡ä»¶æ»¡è¶³æ—¶ï¼ˆæ¡ˆä»¶çŠ¶æ€/æ”¶æ¬¾æ¯”ä¾‹/WaitPay/ForceSettleï¼‰çº³å…¥ç»“ç®—æ‰¹æ¬¡ã€‚

***

### 18.1.8 L7ï¼šæ— æ•ˆ / è¯‰è®¼ï¼ˆåœºæ™¯ Eï¼‰

**æ–°å»ºæ— æ•ˆ/è¯‰è®¼æ¡ˆå·**

*   åˆ›å»º `T_Case(CaseType=INVALIDATION or LITIGATION, OriginalCaseID=è¢«æ”»å‡»çš„åŸæ¡ˆ CaseID)`ï¼›
*   å¡«å†™æ— æ•ˆæ‰©å±•å­—æ®µï¼ˆInvalidClientID/InvalidPatentee/InvalidRequester/InvalidRoleï¼‰æˆ–è¯‰è®¼æ‰©å±•å­—æ®µï¼ˆLitigationType/CourtName/Plaintiff/Defendant/LitigationRoleï¼‰ã€‚

**è¯·æ±‚ä¹¦/è¯‰çŠ¶ & åˆå§‹è´¹ç”¨**

*   å½•å…¥ `T_Document(OFFICIAL_OUT, TemplateCode=INVALID_REQUEST/COMPLAINT)`ï¼š
    *   æäº¤æ— æ•ˆè¯·æ±‚ä¹¦/è¯‰çŠ¶
    *   Template.FeeDraftType=INVALID\_FEE/LITIGATION\_FEE â†’ ç”Ÿ `T_FeeDraft` æ— æ•ˆ/è¯‰è®¼è´¹ç”¨è‰å•ï¼ˆå®˜è´¹ + æœåŠ¡è´¹ï¼‰ï¼›
*   æ›´æ–°æ— æ•ˆ/è¯‰è®¼æ¡ˆ `T_Case.Status` ä» INIT â†’ FILED ç­‰ã€‚

**å—ç†/ç­”è¾©/ä¸¾è¯/å¼€åº­é€šçŸ¥ & æ—¶é™ä»»åŠ¡**

*   OFFICIAL\_IN æ–‡ä¹¦å¦‚ INVALID\_ACCEPT\_NOTICE / INVALID\_DEFENSE\_NOTICE / INVALID\_EVIDENCE\_NOTICE / INVALID\_HEARING\_NOTICEï¼š
    *   åˆ›å»º `T_Document` è®°å½•ï¼›
    *   é…åˆ `T_TaskTemplate(INVALID_DEFENSE_LIMIT/INVALID_EVIDENCE_LIMIT/INVALID_HEARING_PREP_LIMIT)` åˆ›å»ºå¯¹åº” `T_Task`ã€‚

**ç­”è¾©çŠ¶/è¯æ®/æ„è§æ–‡ä¹¦ & ä»»åŠ¡æ ¸é”€**

*   OFFICIAL\_OUT æ–‡ä¹¦å¦‚ INVALID\_DEFENSE\_BRIEF / INVALID\_EVIDENCE\_SUBMISSION / INVALID\_WRITTEN\_OPINIONï¼š
    *   å½•å…¥ `T_Document`ï¼ŒReplyToID æŒ‡å‘é€šçŸ¥æ–‡ä¹¦ï¼›
    *   è‡ªåŠ¨æ ¸é”€å…³è” `T_Task`ï¼ˆStatus=OPENâ†’DONE, DoneDate=ReplyDateï¼‰ã€‚

**è£å†³/åˆ¤å†³ & çŠ¶æ€æ›´æ–°**

*   `T_Document(OFFICIAL_IN, TemplateCode=INVALID_DECISION/LITIGATION_JUDGMENT)`ï¼š
    *   ExtraData è®°å½• DecisionResult/EffectiveDate/AffectedClaims ç­‰ï¼›
*   æ›´æ–°æ— æ•ˆæ¡ˆ/è¯‰è®¼æ¡ˆ `T_Case.Status`ï¼š
    *   æ— æ•ˆæ¡ˆï¼šINVALID\_WON / INVALID\_LOST / INVALID\_PARTIAL
    *   è¯‰è®¼æ¡ˆï¼šLITIGATION\_WON / LITIGATION\_LOST / LITIGATION\_SETTLED
*   æ›´æ–°åŸæ¡ˆ `T_Case.Status`ï¼š
    *   å†³å®šâ€œå…¨éƒ¨æ— æ•ˆâ€ â†’ INVALIDATED/TERMINATED
    *   éƒ¨åˆ†æ— æ•ˆ â†’ INVALIDATED\_PARTIALï¼ˆä¸”è®°å½•è¢«åºŸæ­¢çš„æƒåˆ©è¦æ±‚å·ï¼‰
    *   ç»´æŒæœ‰æ•ˆ â†’ ä¿æŒ GRANTED

**è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆ**

*   æ— æ•ˆ/è¯‰è®¼è´¹ç”¨è‰å• â†’ è´¦å•ï¼ˆT\_Bill/T\_BillItemï¼‰â†’ æ”¶æ¬¾ï¼ˆT\_Payment/T\_Offsetï¼‰â†’ ä¸ªæ¡ˆæ”¶æ¬¾ï¼ˆT\_CaseReceiptï¼‰â†’ ææˆï¼ˆT\_CommissionRule CaseType=INVALIDATION/LITIGATION â†’ T\_Commission â†’ ç»“ç®—ï¼‰ã€‚

***

### 18.1.9 L8ï¼šé¢„æ”¶æ¬¾ & è´¦å•è°ƒæ•´ï¼ˆåœºæ™¯ Fï¼‰

**é¢„æ”¶æ¬¾ç™»è®°**

*   å®¢æˆ·å…ˆæ‰“æ¬¾ â†’ `T_Payment` + `T_PaymentLine(CaseID=NULL, BalanceAmt=é¢„æ”¶é‡‘é¢)`
*   æœªç»‘å®šè´¦å•/æ¡ˆä»¶æ—¶ï¼Œè¿™æ¡ PaymentLine æ„æˆâ€œé¢„æ”¶æ¬¾æ± â€ã€‚

**åç»­ä½¿ç”¨é¢„æ”¶æ¬¾å†²é”€è´¦å•**

*   å½“æœ‰æ–°è´¦å•ï¼ˆç”³è¯·è´¹/å¹´è´¹/é¡¾é—®è´¹ç­‰ï¼‰ç”Ÿæˆæ—¶ï¼š
    *   åœ¨â€œæ”¶æ¬¾ä¸å†²é”€â€ä¸­ä½¿ç”¨é¢„æ”¶æ¬¾ PaymentLine å¯¹è¿™äº›è´¦å•åš Offsetï¼›
    *   æ›´æ–° PaymentLine.AllocatedAmt/BalanceAmt ä¸ Bill.Balance/Statusï¼›

**é¢„æ”¶è½¬åŒ–æ¡ˆå·å®æ”¶**

*   å¯¹æ¯å¼ è¢«é¢„æ”¶æ¬¾å†²é”€çš„è´¦å•ï¼ŒæŒ‰ BillItem æ¯”ä¾‹æ‹†åˆ† OffsetAmt â†’ æ›´æ–° `T_CaseReceipt`ï¼š
    *   å°†é¢„æ”¶å¯¹åº”çš„é‡‘é¢è½¬ä¸ºå…·ä½“æ¡ˆä»¶ä¸è´¹ç”¨é¡¹çš„ ReceivableAmt/ReceivedAmtï¼›
    *   IsPrepayment=falseã€‚

**é¢„æ”¶ä½™é¢å¤„ç†**

*   è‹¥ä½¿ç”¨å®Œæ‰€æœ‰ç›¸å…³è´¦å•åä»æœ‰ BalanceAmt>0ï¼š
    *   å¯ç»§ç»­ä¿ç•™ä½œä¸ºæœªæ¥é¢„æ”¶æ¬¾ï¼›
    *   æˆ–é€šè¿‡è´Ÿè´¦å•/AP è´¦å• + Offset çš„æ–¹å¼æ¨¡æ‹Ÿé€€æ¬¾ï¼Œå°† BalanceAmt å‡è‡³ 0ï¼Œå¤–éƒ¨è´¢åŠ¡ç³»ç»Ÿå®é™…é€€æ¬¾ã€‚

**ä¸ææˆçš„å…³ç³»**

*   WaitPay é€»è¾‘åªè®¤â€œå·²ç»é€šè¿‡ Offset ä¸è´¦å•/æ¡ˆä»¶ç»‘å®šçš„æœåŠ¡è´¹æ”¶æ¬¾â€ï¼Œä¸è®¤â€œæ‚¬æŒ‚åœ¨ PaymentLine ä¸­çš„é¢„æ”¶ä½™é¢â€ï¼›
*   é€šè¿‡ CaseReceipt ä¸­ ReceivedAmt çš„æ›´æ–°ï¼Œé¢„æ”¶æ¬¾è½¬æ¢ä¸ºææˆå¯ç»“ç®—çš„æ”¶æ¬¾ã€‚

***

### 18.1.10 L9ï¼šå‚¬æ¬¾ & åè´¦ï¼ˆåœºæ™¯ Gï¼‰

**é€¾æœŸè´¦å•è¯†åˆ«**

*   Direction=ARï¼›
*   Balance>0ï¼›
*   IsBadDebt=falseï¼›
*   DueDate <= ToDateï¼›
*   åœ¨æŠ¥è¡¨ä¸­è®¡ç®— DaysPastDue å’Œè´¦é¾„ã€‚

**ç”Ÿæˆå‚¬æ¬¾å•ï¼ˆT\_Dunning/T\_DunningLineï¼‰**

*   ä¸ºæŸå®¢æˆ·æŸæ—¥è‡³ ToDate çš„æ‰€æœ‰é€¾æœŸè´¦å•ç”Ÿæˆä¸€æ¡ `T_Dunning` + å¤šæ¡ `T_DunningLine`ï¼š
    *   OutstandingAmt=å½“æ—¶ Bill.Balanceã€‚

**ç”Ÿæˆå‚¬æ¬¾å‡½ & å‘é€**

*   åŸºäº Dunning/T\_DunningLine è°ƒç”¨æ¨¡æ¿ç”Ÿæˆå‚¬æ¬¾å‡½ Word/PDFï¼›
*   å¯è®°å½•ä¸º `T_Document(Template=DUNNING_LETTER)`ï¼›
*   æ›´æ–° `T_Dunning.Status=SENT, SentDate=å½“å‰æ—¥æœŸ`ã€‚

**å‚¬æ¬¾åæ”¶æ¬¾**

*   å®¢æˆ·ä»˜æ¬¾ â†’ `T_Payment/T_PaymentLine`ï¼›
*   å†²é”€ â†’ `T_Offset`ï¼›
*   æ›´æ–° `T_Bill.Balance/Status` å’Œ `T_CaseReceipt.ReceivedAmt/IsArrears`ï¼›

**å¤šè½®å‚¬æ¬¾**

*   è‹¥ä»æœ‰æœªæ”¶è´¦å•ï¼Œåç»­å†æ¬¡ä»¥æ–°çš„ ToDate ç”Ÿæˆæ–°çš„ Dunningï¼›
*   DunningLine ä¸­çš„ OutstandingAmt åæ˜ æ¯ä¸€è½®å‚¬æ¬¾æ—¶ç‚¹çš„æœªç»“ä½™é¢å¿«ç…§ã€‚

**åè´¦æ ‡è®°**

*   å¯¹é•¿æœŸé€¾æœŸä¸”å¤šè½®å‚¬æ¬¾æ— æœçš„è´¦å•ï¼Œåœ¨ `T_Bill` ä¸Šæ ‡è®°ï¼š
    *   `IsBadDebt=true`, `Status=BAD_DEBT`, `BadDebtDate`, `BadDebtReason`ï¼›
*   åœ¨åè´¦æŠ¥è¡¨ä¸­ç»Ÿè®¡åè´¦é‡‘é¢ã€‚

**åè´¦åæ”¶å›**

*   å³ä½¿ Status=BAD\_DEBTï¼Œä¹Ÿå…è®¸ç»§ç»­ç™»è®°æ”¶æ¬¾å¹¶æ‰§è¡Œ Offsetï¼š
    *   æ›´æ–° Bill.Balanceï¼ˆä½™é¢å‡å°‘ï¼‰ï¼ŒCaseReceipt.ReceivedAmtï¼ˆæ”¶æ¬¾å¢åŠ ï¼‰ï¼›
    *   æ˜¯å¦å–æ¶ˆ BAD\_DEBT æ ‡è®°ç”±ç­–ç•¥å†³å®šï¼š
        *   ç­–ç•¥ Aï¼šåè´¦æ ‡è®°ä¸å˜ï¼ˆå†å²ä¿ç•™ï¼‰ï¼›
        *   ç­–ç•¥ Bï¼šå¯ä»¥æ‰§è¡Œâ€œå–æ¶ˆåè´¦â€æ“ä½œï¼Œå°† Status æ¢å¤ä¸º SETTLED/UNSETTLED/ PARTIALLY\_SETTLEDã€‚

***

### 18.1.11 L10ï¼šææˆç»“ç®—ï¼ˆè´¯ç©¿æ‰€æœ‰åœºæ™¯ï¼‰

**ææˆè®°å½•ç”Ÿæˆ**

*   åœ¨æ¯ä¸ªæ¶‰åŠæœåŠ¡è´¹è´¦å•çš„é˜¶æ®µï¼ˆæ–°æ¡ˆ A / OA B / æˆæƒ G0 / å¹´è´¹ D / æ— æ•ˆè¯‰è®¼ E / é¡¾é—®æ£€ç´¢ H ç­‰ï¼‰ï¼š
    *   ä» T\_BillItem ä¸­ç­›é€‰ FeeType=SERVICE æ˜ç»†ï¼›
    *   æŒ‰ CaseID è®¡ç®— ServiceSumï¼›
    *   ä½¿ç”¨ `T_CommissionRule`ï¼ˆæŒ‰ CaseType/FlowDir/Category/ClientGroup åŒ¹é…ï¼‰è®¡ç®— BaseFee/S1/S2ï¼›
    *   æŒ‰ä»£ç†äººåˆ†æ‘Š BaseFeeï¼Œå†™å…¥/æ›´æ–° `T_Commission`ï¼ˆWaitPay/ForceSettle/Remark ç­‰ï¼‰ã€‚

**å¯ç»“ç®—åˆ¤å®š**

*   ä½¿ç”¨ `T_CaseReceipt` ä¸­ FeeType=SERVICE çš„ ReceivableAmt/ReceivedAmt è®¡ç®— PaidRatioï¼›
*   å¯¹ WaitPay=true çš„è®°å½•ï¼ŒPaidRatio è¾¾æ ‡ + æ¡ˆä»¶çŠ¶æ€è¾¾æ ‡ï¼ˆå—ç†/æˆæƒ/ç»ˆå±€ï¼‰ â†’ å¯ç»“ç®—ï¼›
*   å¯¹ ForceSettle=true çš„è®°å½•ï¼Œæ»¡è¶³çŠ¶æ€æ¡ä»¶å³å¯å¿½ç•¥ PaidRatio é™åˆ¶ã€‚

**ç»“ç®—æ‰¹æ¬¡ & æŠ¥è¡¨**

*   Finance åœ¨æŸç»“ç®—æœŸé—´å†…ç­›é€‰å¯ç»“ç®—çš„ Commission è®°å½•ï¼š
    *   å¹¶æ ¹æ® Stageï¼ˆS1/S2ï¼‰ç”Ÿæˆ `T_CommissionSettlement` å’Œ `T_CommissionSettleLine`ï¼›
    *   æ ‡è®° `S1_Done/S2_Done=true`ï¼›
    *   è¾“å‡ºæŒ‰ä»£ç†äººåˆ†ç»„çš„ç»“ç®—æŠ¥è¡¨ï¼Œä¾›å®¡æ‰¹å’Œå‘æ”¾ã€‚

***

## 18.2 ä¸€å¥è¯æ€»ç»“

> æ•´ä¸ª FPMS çš„ä¸šåŠ¡æµï¼Œæœ¬è´¨æ˜¯ä¸€æ¡ **Case é©±åŠ¨çš„æµæ°´çº¿**ï¼š\
> **Case** ä» **æ–°æ¡ˆ/é¡¹ç›®ç«‹æ¡ˆ** å‡ºå‘ï¼Œç»ç”± **é€’äº¤/å—ç† â†’ OA â†’ æˆæƒ â†’ å¹´è´¹** ç­‰â€œæ­£å‘é˜¶æ®µâ€ï¼Œåœ¨è¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿ **PCT å›½å®¶é˜¶æ®µå»¶ä¼¸ â†’ æ— æ•ˆ/è¯‰è®¼ â†’ é¡¾é—®/æ£€ç´¢ä¾§çº¿**ï¼Œå¹¶æ²¿ç€ä¸€æ¡ç»Ÿä¸€çš„â€œ**ä¸­é—´æ–‡ä»¶ â†’ æ—¶é™ä»»åŠ¡ â†’ è´¹ç”¨è‰å• â†’ å®˜è´¹æ¸…å• â†’ è´¦å• â†’ æ”¶æ¬¾/é¢„æ”¶/å‚¬æ¬¾/åè´¦ â†’ ææˆ**â€ ç®¡é“å…¨ç¨‹ç§¯ç´¯æ•°æ®ï¼Œæœ€ç»ˆåœ¨ **ç»“ç®—æ‰¹æ¬¡+æŠ¥è¡¨** ä¸­ä½“ç°ä¸ºäº‹åŠ¡æ‰€çš„å·¥ä½œæˆæœå’Œç»æµæ”¶ç›Šã€‚

***

## 19. Mermaid æ³³é“å›¾ï¼ˆå®¢æˆ· / Formalities / Finance / ä»£ç†äºº / ç³»ç»Ÿï¼‰

> ä¸‹é¢è¿™æ®µ Mermaid ä»£ç å°±æ˜¯æˆ‘ä»¬ä¹‹å‰é‚£ä»½å®Œæ•´çš„â€œå¤šåœºæ™¯è”åŠ¨â€æ—¶åºå›¾ï¼Œä¿æŒåŸæ ·æ”¾å…¥ v2.0 æ–‡æ¡£å³å¯ã€‚\
> å‚ä¸æ–¹ï¼š
>
> *   å®¢æˆ·
> *   Formalitiesï¼ˆå«å¹´è´¹å‘˜çš„èŒè´£ï¼‰
> *   Finance/è´¢åŠ¡
> *   ä»£ç†äºº
> *   ç³»ç»Ÿï¼ˆFPMSï¼‰

```mermaid
sequenceDiagram
    autonumber
    participant å®¢æˆ·
    participant Formalities as Formalities/å¹´è´¹å‘˜
    participant Finance as Finance/è´¢åŠ¡
    participant ä»£ç†äºº
    participant ç³»ç»Ÿ

    %% L0 çº¿ç´¢ & ç«‹æ¡ˆ
    å®¢æˆ·->>Formalities: æå‡ºéœ€æ±‚ï¼ˆæ–°æ¡ˆ / PCT / é¡¾é—®ç­‰ï¼‰
    Formalities->>ç³»ç»Ÿ: æ–°å»º T_Caseï¼ˆCaseType=NORMAL/PCT_INTL/CONSULTING...ï¼‰
    ç³»ç»Ÿ-->>Formalities: è¿”å›æ¡ˆå·å· CaseNo/CaseID
    note over å®¢æˆ·,ç³»ç»Ÿ: åœºæ™¯ A/C/H èµ·ç‚¹ï¼ˆL1ï¼šç«‹æ¡ˆï¼‰

    %% L1 æ–°æ¡ˆé€’äº¤ï¼ˆåœºæ™¯ Aï¼‰
    Formalities->>ç³»ç»Ÿ: æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆå˜æ›´ Status=NOT_FILEDâ†’WAITING_RECEIPTï¼‰
    ç³»ç»Ÿ-->>Formalities: å¯é€‰ç”Ÿæˆé€’äº¤æ¸…å• T_Document
    ç³»ç»Ÿ->>ç³»ç»Ÿ: ä¾æ®æ¨¡æ¿ç”Ÿæˆç”³è¯·è´¹æ—¶é™ä»»åŠ¡ T_Task(APPLY_FEE_LIMIT)
    note over Formalities,ç³»ç»Ÿ: åœºæ™¯ Aï¼šæ–°æ¡ˆé€’äº¤ + ç”³è¯·è´¹æ—¶é™

    %% L2 å®¡æŸ¥/OAï¼ˆåœºæ™¯ Bï¼‰
    ç³»ç»Ÿ-->>Formalities: ä»Šæ—¥æé†’ï¼šOA ç­”å¤æ—¶é™ï¼ˆè‹¥å·²ç”Ÿæˆï¼‰
    å®¢æˆ·->>Formalities: è½¬äº¤å®˜æ–¹ OA é€šçŸ¥ä¹¦
    Formalities->>ç³»ç»Ÿ: å½•å…¥ OA é€šçŸ¥ T_Document(OA_NOTICE)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–° T_Case.Status=OA1\nç”Ÿæˆ OA ç­”å¤æ—¶é™ä»»åŠ¡ T_Task(OA_REPLY_LIMIT)
    ä»£ç†äºº->>ç³»ç»Ÿ: å½•å…¥ OA ç­”å¤ T_Document(OA_REPLY)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ ¸é”€ OA æ—¶é™ä»»åŠ¡ï¼ˆStatus=OPENâ†’DONEï¼‰\nT_Case.Status=SUB_EXAM
    note over Formalities,ä»£ç†äºº: åœºæ™¯ Bï¼šæ¥æ–‡â†’æ—¶é™â†’å»æ–‡â†’æ ¸é”€

    %% L3 PCT å›½é™…â†’å›½å®¶ï¼ˆåœºæ™¯ Cï¼‰
    å®¢æˆ·->>Formalities: è¦æ±‚èµ° PCT æˆ–å·²æœ‰ PCT æ¡ˆ
    Formalities->>ç³»ç»Ÿ: æ–°å»º/ç»´æŠ¤ PCT å›½é™…æ¡ˆ T_Case(PCT_INTL)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: è®°å½• RO/ISA/IPER ç­‰ PCT ä¿¡æ¯
    ç³»ç»Ÿ->>ç³»ç»Ÿ: ç”Ÿæˆ T_PCTNationalPlanï¼ˆç›®æ ‡å›½åˆ—è¡¨ï¼‰\nå¹¶ä¸ºæ¯ä¸ªå›½å®¶ç”Ÿæˆ T_Task(PCT_NATIONAL_ENTRY_LIMIT)
    å®¢æˆ·->>ä»£ç†äºº: ç¡®è®¤è¿›å…¥å“ªäº›å›½å®¶
    ä»£ç†äºº->>ç³»ç»Ÿ: æ›´æ–°è®¡åˆ’ ClientInstruction=ENTER/ABANDON
    ç³»ç»Ÿ-->>Formalities: æç¤ºå¯ä»è®¡åˆ’åˆ›å»ºå›½å®¶é˜¶æ®µæ¡ˆ
    Formalities->>ç³»ç»Ÿ: ä»è®¡åˆ’åˆ›å»º T_Case(PCT_NATIONAL)\nå¹¶å°†å¯¹åº”è®¡åˆ’ Status=CASE_CREATED
    ç³»ç»Ÿ->>ç³»ç»Ÿ: å…³é—­å¯¹åº” PCT_NATIONAL_ENTRY_LIMIT ä»»åŠ¡ï¼ˆDONEï¼‰
    note over å®¢æˆ·,ç³»ç»Ÿ: åœºæ™¯ Cï¼šPCTâ†’å›½å®¶é˜¶æ®µæ¡ˆå·æ´¾ç”Ÿ

    %% L4 æˆæƒï¼ˆåœºæ™¯ G0ï¼‰
    Formalities->>ç³»ç»Ÿ: å½•å…¥æˆæƒé€šçŸ¥ T_Document(GRANT_NOTICE)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–° T_Case.Status=GRANTED,\nå†™å…¥ IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntil
    ç³»ç»Ÿ->>ç³»ç»Ÿ: åˆ›å»ºè¯ä¹¦è´¹/ç™»è®°è´¹æ—¶é™ä»»åŠ¡ T_Task(GRANT_CERT_FEE_LIMIT)
    note over Formalities,ç³»ç»Ÿ: æˆæƒåœºæ™¯ G0ï¼šæˆæƒèŠ‚ç‚¹ + è¯ä¹¦è´¹æ—¶é™

    %% L5 æˆæƒè´¹ & å¹´ç™»å°è´¹è‰å•/æ¸…å•/è´¦å•ï¼ˆåœºæ™¯ G0 + è´¹ç”¨ä¸»å¹²ï¼‰
    Formalities->>ç³»ç»Ÿ: åœ¨æˆæƒè´¹æ¨¡å—æå–å¾…å¤„ç†æ¡ˆ
    ç³»ç»Ÿ->>ç³»ç»Ÿ: åˆ›å»ºæˆæƒè´¹ä»»åŠ¡ T_GrantFeeTask
    Formalities->>ç³»ç»Ÿ: ç”ŸæˆåŠŸè´¹è‰å• T_FeeDraft(GRANT_FEE)+T_FeeItem
    Finance->>ç³»ç»Ÿ: ä»è‰å•ç”Ÿæˆå®˜è´¹æ¸…å• T_PayList+T_GovPayment\nå¯¼å‡ºç»™å®˜æ–¹ç¼´è´¹
    Finance->>ç³»ç»Ÿ: ç™»è®°ç¼´è´¹ PaidDate/PaidAmt/InvoiceNo
    Formalities->>ç³»ç»Ÿ: ä»è‰å•ç”Ÿæˆåº”æ”¶è´¦å• T_Bill/T_BillItem
    note over Formalities,Finance: æˆæƒè´¹ç”¨é“¾ï¼šè‰å•â†’æ¸…å•â†’è´¦å•ï¼ˆä¸ A/D/E/H ç›¸åŒç®¡é“ï¼‰

    %% L6 å¹´è´¹å¤šå¹´åº¦æ»šåŠ¨ï¼ˆåœºæ™¯ Dï¼‰
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ ¹æ®æˆæƒæ¡ˆ IsFeeMonitor & FirstAnnuityYear\nä¸ºå„å¹´ç”Ÿæˆ T_AnnuityTask(YearNo,DueDate)
    loop æ¯å¹´/æ¯å­£å¹´è´¹æ‰¹æ¬¡
        Formalities->>ç³»ç»Ÿ: æ£€ç´¢æœªæ¥ X æœˆåˆ°æœŸçš„ T_AnnuityTask
        ä»£ç†äºº->>Formalities: ä¸å®¢æˆ·æ²Ÿé€šæ˜¯å¦ç¼´è´¹
        Formalities->>ç³»ç»Ÿ: æ›´æ–° ClientInstruction=PAY/ABANDON
        Formalities->>ç³»ç»Ÿ: å¯¹ NONE ç”Ÿæˆé€šçŸ¥å‡½ T_Document(ANNUITY_NOTICE)
        Formalities->>ç³»ç»Ÿ: å¯¹ PAY ç”Ÿæˆå¹´è´¹è‰å• T_FeeDraft(ANNUITY_FEE)
        Finance->>ç³»ç»Ÿ: ç”Ÿæˆå¹´è´¹å®˜è´¹æ¸…å• T_PayList(Type=ANNUITY)
        Finance->>ç³»ç»Ÿ: ç™»è®°å¹´è´¹ç¼´è´¹ T_GovPayment.PaidDate/PaidAmt...
        Formalities->>ç³»ç»Ÿ: ä»è‰å•ç”Ÿæˆå¹´è´¹è´¦å• T_Bill
        å®¢æˆ·->>Finance: æ”¯ä»˜å¹´è´¹è´¦å•
        Finance->>ç³»ç»Ÿ: ç™»è®°æ”¶æ¬¾ T_Payment/T_PaymentLine
        Finance->>ç³»ç»Ÿ: å†²é”€è´¦å• T_Offsetâ†’æ›´æ–° T_Bill.Balance/Status
        ç³»ç»Ÿ->>ç³»ç»Ÿ: æŒ‰æ¡ˆ & å¹´åº¦æ›´æ–° T_CaseReceipt(å¹´è´¹æ”¶æ¬¾)
    end
    note over Formalities,ç³»ç»Ÿ: åœºæ™¯ Dï¼šå¹´è´¹å¹´åº¦æ»šåŠ¨å¾ªç¯

    %% L7 æ— æ•ˆ / è¯‰è®¼ï¼ˆåœºæ™¯ Eï¼‰
    å®¢æˆ·->>Formalities: å§”æ‰˜å‘èµ·æ— æ•ˆ/è¯‰è®¼æˆ–è¿›è¡ŒæŠ—è¾©
    Formalities->>ç³»ç»Ÿ: åŸºäºåŸæ¡ˆæ–°å»º T_Case(INVALIDATION/LITIGATION)\nOriginalCaseID=åŸæ¡ˆID
    ä»£ç†äºº->>ç³»ç»Ÿ: å½•å…¥è¯·æ±‚ä¹¦/è¯‰çŠ¶ T_Document(OFFICIAL_OUT,INVALID_REQUEST/COMPLAINT)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: ç”Ÿæˆæ— æ•ˆ/è¯‰è®¼è´¹è‰å• T_FeeDraft(INVALID_FEE/LITIGATION_FEE)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: å½•å…¥å—ç†/ç­”è¾©/ä¸¾è¯/å¼€åº­é€šçŸ¥ T_Document(OFFICIAL_IN,...)\nå¹¶åˆ›å»ºæ—¶é™ä»»åŠ¡ T_Task(...)
    ä»£ç†äºº->>ç³»ç»Ÿ: å½•å…¥ç­”è¾©çŠ¶/è¯æ®/æ„è§ T_Document(OFFICIAL_OUT,...)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: è‡ªåŠ¨æ ¸é”€å¯¹åº” T_Task
    Formalities->>ç³»ç»Ÿ: å½•å…¥è£å†³/åˆ¤å†³ T_Document(INVALID_DECISION/JUDGMENT)
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–°æ— æ•ˆ/è¯‰è®¼æ¡ˆ T_Case.Statusï¼Œ\nå¹¶æŒ‰ç»“æœæ›´æ–°åŸæ¡ˆ T_Case.Status(ç»´æŒ/éƒ¨åˆ†æ— æ•ˆ/ç»ˆæ­¢)
    note over å®¢æˆ·,ç³»ç»Ÿ: åœºæ™¯ Eï¼šæ— æ•ˆ/è¯‰è®¼åˆ†æ”¯

    %% L8 é¡¾é—®/æ£€ç´¢é¡¹ç›®ï¼ˆåœºæ™¯ Hï¼‰
    å®¢æˆ·->>Formalities: æå‡ºé¡¾é—®/æ£€ç´¢é¡¹ç›®éœ€æ±‚
    Formalities->>ç³»ç»Ÿ: æ–°å»º T_Case(CONSULTING/SEARCH)
    ä»£ç†äºº->>ç³»ç»Ÿ: åˆ›å»ºå†…éƒ¨ä»»åŠ¡ T_Task(é¡¹ç›®å·¥ä½œåŒ…ï¼Œå¯é€‰)
    Formalities->>ç³»ç»Ÿ: å½•å…¥æ”¯å‡º T_Expense(æ•°æ®åº“/ç¿»è¯‘/å·®æ—…ç­‰)
    Formalities->>ç³»ç»Ÿ: ç”Ÿé¡¾é—®/æ£€ç´¢æœåŠ¡è´¹è‰å• T_FeeDraft(CONSULT/SEARCH_FEE)
    Finance->>ç³»ç»Ÿ: ä»è‰å•ç”Ÿæˆé¡¾é—®è´¦å• T_Bill/T_BillItem
    å®¢æˆ·->>Finance: æ”¯ä»˜é¡¾é—®è´¦å•
    Finance->>ç³»ç»Ÿ: ç™»è®°æ”¶æ¬¾ T_Payment + å†²é”€ T_Offset
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–° T_CaseReceipt(é¡¾é—®é¡¹ç›®æ”¶æ¬¾)
    note over Formalities,ä»£ç†äºº: åœºæ™¯ Hï¼šæ— å®˜è´¹é¡¹ç›®å¹¶è¡Œä¾§çº¿

    %% L9 é¢„æ”¶æ¬¾ï¼ˆåœºæ™¯ Fï¼‰
    å®¢æˆ·->>Finance: å…ˆæ‰“é¢„ä»˜æ¬¾ï¼ˆæœªæŒ‡å®šå…·ä½“è´¦å•ï¼‰
    Finance->>ç³»ç»Ÿ: ç™»è®° T_Payment/T_PaymentLine(BalanceAmt=é¢„æ”¶æ¬¾)
    note over å®¢æˆ·,ç³»ç»Ÿ: é¢„æ”¶æ¬¾æ± ï¼šT_PaymentLine.BalanceAmt>0ï¼Œå°šæœªå¯¹åº”è´¦å•

    %% L10 ä½¿ç”¨é¢„æ”¶æ¬¾å†²æŠµåç»­è´¦å•ï¼ˆåœºæ™¯ Fï¼‰
    Formalities->>ç³»ç»Ÿ: åœ¨ä»»ä½•é˜¶æ®µç”Ÿæˆæ–°çš„è´¦å• T_Bill(ç”³è¯·è´¹/å¹´è´¹/é¡¾é—®ç­‰)
    Finance->>ç³»ç»Ÿ: ä½¿ç”¨é¢„æ”¶æ¬¾ T_PaymentLine å¯¹è´¦å• T_Bill åš Offset
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–° T_Bill.Balance/Status ä¸ T_PaymentLine.BalanceAmt
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ‹†åˆ† Offset â†’ æ›´æ–° T_CaseReceipt(æŠŠé¢„ä»˜æ¬¾è½¬ä¸ºå…·ä½“æ¡ˆå·å®æ”¶)
    note over Finance,ç³»ç»Ÿ: åœºæ™¯ Fï¼šé¢„æ”¶â†’Offsetâ†’æŒ‰æ¡ˆåˆ†æ‘Š

    %% L11 å‚¬æ¬¾ & åè´¦ï¼ˆåœºæ™¯ Gï¼‰
    ç³»ç»Ÿ-->>Finance: é€¾æœŸè´¦å•æŠ¥è¡¨ï¼ˆæŒ‰è´¦é¾„ã€å®¢æˆ·ï¼‰
    Finance->>ç³»ç»Ÿ: æŒ‰å®¢æˆ· & æˆªæ­¢æ—¥ç”Ÿæˆå‚¬æ¬¾å• T_Dunning/T_DunningLine
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ¨¡æ¿ç”Ÿæˆå‚¬æ¬¾å‡½ï¼ˆWord/PDFï¼‰ï¼Œå¯å­˜æ¡£ä¸º T_Document
    å®¢æˆ·->>Finance: éƒ¨åˆ†/å…¨éƒ¨ä»˜æ¬¾
    Finance->>ç³»ç»Ÿ: ç™»è®°æ”¶æ¬¾ & å†²é”€è´¦å•ï¼ˆT_Payment/T_Offsetï¼‰
    ç³»ç»Ÿ->>ç³»ç»Ÿ: æ›´æ–°è´¦å•ä½™é¢ä¸ T_CaseReceipt
    alt é•¿æœŸä»æœªæ”¶
        Finance->>ç³»ç»Ÿ: å°†ç‰¹å®šè´¦å•æ ‡è®°ä¸ºåè´¦\nT_Bill.IsBadDebt=true, Status=BAD_DEBT
    end
    note over å®¢æˆ·,ç³»ç»Ÿ: åœºæ™¯ Gï¼šé€¾æœŸâ†’å‚¬æ¬¾â†’éƒ¨åˆ†å›æ¬¾ / åè´¦

    %% L12 ææˆç»“ç®—ï¼ˆé€šç”¨äºå„åœºæ™¯ï¼‰
    ç³»ç»Ÿ->>ç³»ç»Ÿ: åœ¨å„é˜¶æ®µï¼ˆæ–°æ¡ˆ/å¹´è´¹/é¡¾é—®/æ— æ•ˆç­‰ï¼‰\nä»æœåŠ¡è´¹è´¦å•ç”Ÿæˆæˆ–ç´¯è®¡ T_Commission(BaseFee,S1/S2)
    ç³»ç»Ÿ-->>Finance: ææˆå¯ç»“ç®—åˆ—è¡¨ï¼ˆæŒ‰ Agent/æœŸé—´/æ¡ˆä»¶ï¼‰
    Finance->>ç³»ç»Ÿ: å‹¾é€‰è®°å½•â†’ç”Ÿæˆ T_CommissionSettlement\n+ T_CommissionSettleLine(Stage=S1/S2,...)
    ç³»ç»Ÿ-->>ä»£ç†äºº: è¾“å‡ºææˆç»“ç®—æ¸…å•ï¼ˆæŠ¥è¡¨ï¼Œç”¨äºå®¡æ‰¹/å‘æ”¾ï¼‰
    note over ä»£ç†äºº,ç³»ç»Ÿ: æ‰€æœ‰åœºæ™¯æœåŠ¡è´¹ç»ç»Ÿä¸€ææˆç®¡é“ç»“ç®—
```

***

## 20. Case.Status çŠ¶æ€è¿ç§»æ€»è¡¨ï¼ˆæŒ‰ CaseTypeï¼‰

> è¿™ä¸€èŠ‚æ˜¯æŠŠæ‰€æœ‰æˆ‘ä»¬åœ¨æ¨¡å—ä¸€å’Œå„ E2E åœºæ™¯ä¸­æåˆ°çš„ Status å˜åŒ–æ•´ç†æˆä¸€ä¸ªâ€œ**çŠ¶æ€æœºæ€»è¡¨**â€ï¼ŒåŒ…æ‹¬ï¼š
>
> *   æ™®é€š/å›½å®¶é˜¶æ®µæ¡ˆï¼ˆCaseType=NORMAL/PCT\_NATIONALï¼‰
>
> *   PCT å›½é™…æ¡ˆï¼ˆPCT\_INTLï¼‰
>
> *   æ— æ•ˆæ¡ˆï¼ˆINVALIDATIONï¼‰
>
> *   è¯‰è®¼æ¡ˆï¼ˆLITIGATIONï¼‰
>
> *   é¡¾é—®/æ£€ç´¢é¡¹ç›®ï¼ˆCONSULTING/SEARCHï¼‰
>
> æ¯è¡Œç»™å‡ºï¼š
>
> *   å½“å‰çŠ¶æ€ From
> *   äº‹ä»¶ Event
> *   æ–°çŠ¶æ€ To
> *   ç›¸å…³åœºæ™¯/æ¨¡å—
> *   è¯´æ˜ï¼ˆå«å­—æ®µæ›´æ–°ï¼‰

***

## 20.1 NORMAL / PCT\_NATIONALï¼ˆä¸“åˆ©ä¸»æ¡ˆï¼‰çš„çŠ¶æ€è¿ç§»

> CaseType=NORMAL æˆ– PCT\_NATIONAL åœ¨ FPMS ä¸­è¡¨ç¤ºâ€œå®æ‰“å®è¦èµ°å®˜æ–¹å®å®¡æµç¨‹çš„æ¡ˆå·â€ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨åœºæ™¯ A/B/G0/D/E ä¸­å‡ºç°è¿‡çš„ä¸»è¦è¿ç§»ã€‚

### 20.1.1 åŸºæœ¬çŠ¶æ€æšä¸¾ï¼ˆå›é¡¾ï¼‰

*   NOT\_FILED â€“ æœªé€’äº¤
*   WAITING\_RECEIPT â€“ å·²é€’äº¤ï¼Œç­‰å¾…å—é€š/å—ç†
*   PRELIM\_EXAM â€“ åˆå®¡ä¸­ï¼ˆå¯é€‰ï¼Œå…·ä½“æšä¸¾å¾…è½åœ°ï¼‰
*   PRELIM\_PASS â€“ åˆå®¡é€šè¿‡
*   PUBLISHED â€“ å·²å…¬å¼€
*   SUB\_EXAM â€“ å®å®¡ä¸­
*   OA1 / OA2 â€“ ä¸€é€š/äºŒé€šé˜¶æ®µ
*   GRANTED â€“ å·²æˆæƒ
*   REJECTED â€“ é©³å›
*   SUSPENDED â€“ ä¸­æ­¢
*   DEEMED\_WITHDRAWN â€“ è§†ä¸ºæ’¤å›
*   DEEMED\_ABANDONED â€“ è§†ä¸ºæ”¾å¼ƒ
*   TERMINATED â€“ ä¸­æ­¢/ç»ˆæ­¢ï¼ˆå¦‚å¹´è´¹æœªç¼´ï¼‰
*   INVALIDATED â€“ å…¨éƒ¨æ— æ•ˆ
*   INVALIDATED\_PARTIAL â€“ éƒ¨åˆ†æ— æ•ˆ
*   REEXAM â€“ å¤å®¡ä¸­
*   WITHDRAWN â€“ ä¸»åŠ¨æ’¤å›
*   ABANDONED â€“ ä¸»åŠ¨æ”¾å¼ƒ
*   LITIGATION\_IN\_PROGRESS â€“ è¯‰è®¼ä¸­ï¼ˆå¦‚æœéœ€è¦ï¼‰
*   OTHER â€“ å…¶ä»–

### 20.1.2 è¿ç§»è¡¨ â€“ NORMAL/PCT\_NATIONAL

| From Status         | Event                                       | To Status                | åœºæ™¯/æ¨¡å—      | è¯´æ˜                                                                                                                                 |
| ------------------- | ------------------------------------------- | ------------------------ | ---------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| ï¼ˆæ— ï¼‰                 | æ–°æ¡ˆç«‹æ¡ˆï¼ˆæ–°å»º T\_Caseï¼‰                            | NOT\_FILED               | A / æ¨¡å—ä¸€    | æ–°å»º NORMAL/PCT\_NATIONAL æ¡ˆå·æ—¶ï¼ŒStatus åˆå§‹ä¸º NOT\_FILEDã€‚                                                                                 |
| NOT\_FILED          | æ¡ˆä»¶é€’äº¤æ‰¹å¤„ç†ï¼ˆSubmittedDate è®¾ç½®ï¼‰                   | WAITING\_RECEIPT         | A / 2.7    | åœ¨â€œæ¡ˆä»¶é€’äº¤â€æ“ä½œä¸­ï¼Œå¯¹é€‰ä¸­æ¡ˆå·è®¾ç½® SubmittedDateï¼Œå¹¶å°† Status ä» NOT\_FILED æ”¹ä¸º WAITING\_RECEIPTï¼›å¯åŒæ—¶è®¾ç½® HasExamRequestã€‚                                  |
| WAITING\_RECEIPT    | æ”¶åˆ°å—ç†é€šçŸ¥/å—é€šï¼ˆOFFICIAL\_INï¼‰                     | SUB\_EXAM æˆ– PRELIM\_EXAM | A/B/æ¨¡å—äºŒ    | è§†å›½å®¶æµç¨‹ï¼Œå—é€šåçŠ¶æ€è½¬ä¸ºâ€œåœ¨å®¡ä¸­â€ï¼ˆå¯ä¸º PRELIM\_EXAM æˆ–ç›´æ¥ SUB\_EXAMï¼‰ï¼›å…·ä½“æšä¸¾ç”±å®æ–½å†³å®šã€‚                                                                       |
| SUB\_EXAM           | å½•å…¥ OA é€šçŸ¥ï¼ˆOA\_NOTICEï¼ŒStatusEffect=OA1ï¼‰       | OA1                      | B / æ¨¡å—äºŒ    | ä¸­é—´æ–‡ä»¶æ¨¡æ¿ OA\_NOTICE é…ç½® StatusEffect=OA1ï¼Œå½•å…¥è¯¥æ–‡å Case.Status ä» SUB\_EXAMâ†’OA1ã€‚                                                           |
| OA1                 | å½•å…¥ OA ç­”å¤ï¼ˆOA\_REPLYï¼ŒStatusRestore=SUB\_EXAMï¼‰ | SUB\_EXAM                | B / æ¨¡å—äºŒ    | OA\_REPLY æ¨¡æ¿é…ç½® StatusRestore=SUB\_EXAMï¼Œä¿å­˜åå°† OA1 çŠ¶æ€æ¢å¤ä¸º SUB\_EXAMï¼ˆå®å®¡ç»§ç»­ï¼‰ã€‚å¦‚å­˜åœ¨å¤šè½® OAï¼Œå¯åœ¨ OA2 ç­‰çŠ¶æ€ä¹‹é—´è½¬æ¢ã€‚                                     |
| SUB\_EXAM æˆ– OA1/OA2 | å½•å…¥æˆæƒé€šçŸ¥ï¼ˆGRANT\_NOTICEï¼‰                       | GRANTED                  | G0 / æ¨¡å—äºŒ+ä¸€ | æˆæƒæ¨¡æ¿ GRANT\_NOTICE çš„ StatusEffect=GRANTEDï¼›å½•å…¥æˆæƒé€šçŸ¥åï¼ŒCase.Status=GRANTEDï¼Œå¹¶å†™å…¥ IssueDate/GrantDate/GrantNo/FirstAnnuityYear/ValidUntilã€‚ |
| GRANTED             | å®¢æˆ·åŠå¹´è´¹æ”¿ç­–å†³å®šä¸ç¼´å¹´è´¹ï¼Œå¹´è´¹ä»»åŠ¡ ABANDON æˆ–è¶…å‡ºå®½é™æœŸæœªç¼´         | TERMINATED æˆ– INVALIDATED | D / æ¨¡å—å››    | é€šè¿‡å¹´è´¹ç®¡ç†ï¼ˆT\_AnnuityTaskï¼‰åˆ¤æ–­ï¼Œå¦‚æŸå¹´åº¦æœªç¼´ä¸”åºŸæƒç”Ÿæ•ˆï¼Œåˆ™ Case.Status æ”¹ä¸º TERMINATED æˆ– INVALIDATEDã€‚                                                    |
| GRANTED             | æ— æ•ˆå®£å‘Šå†³å®šä¹¦ï¼ˆDecisionResult=å…¨éƒ¨æ— æ•ˆï¼‰                | INVALIDATED æˆ– TERMINATED | E / æ¨¡å—äºŒ+ä¸€  | `T_Document(INVALID_DECISION)` æŒ‡ç¤ºæœ¬æ¡ˆæƒåˆ©å…¨éƒ¨æ— æ•ˆï¼›ç³»ç»Ÿæ®æ­¤å°† Case.Status ä» GRANTEDâ†’INVALIDATED æˆ– TERMINATEDï¼Œå¹¶è®°å½•æ— æ•ˆä¿¡æ¯ã€‚                            |
| GRANTED             | æ— æ•ˆå®£å‘Šå†³å®šä¹¦ï¼ˆDecisionResult=éƒ¨åˆ†æ— æ•ˆï¼‰                | INVALIDATED\_PARTIAL     | E / æ¨¡å—äºŒ+ä¸€  | è‹¥è£å†³æ˜¯éƒ¨åˆ†æ— æ•ˆï¼ŒCase.Status æ›´æ–°ä¸º INVALIDATED\_PARTIALï¼Œå¹¶è®°å½•å—å½±å“æƒåˆ©è¦æ±‚å·ã€‚                                                                         |
| GRANTED             | æ— æ•ˆå®£å‘Šå†³å®šä¹¦ï¼ˆDecisionResult=ç»´æŒæœ‰æ•ˆï¼‰                | GRANTED                  | E          | ç»´æŒæœ‰æ•ˆæ—¶ï¼ŒåŸæ¡ˆçŠ¶æ€ä¿æŒ GRANTEDï¼Œä¸æ”¹å˜ã€‚                                                                                                          |
| ä»»æ„å¤„ç†ä¸­çŠ¶æ€             | é©³å›å†³å®š/ç»ˆå®¡é©³å›                                   | REJECTED                 | B / æ¨¡å—äºŒ+ä¸€  | è‹¥å½•å…¥é©³å›/ç»ˆå®¡å†³å®šæ–‡ä¹¦ï¼Œå¯å°† Status å¼ºåˆ¶æ”¹ä¸º REJECTEDã€‚                                                                                              |
| ä»»æ„å¤„ç†ä¸­çŠ¶æ€             | ä¸»åŠ¨æ’¤å›ï¼ˆå®¢æˆ·æŒ‡ç¤º + å¯¹åº”æ–‡ä¹¦ï¼‰                           | WITHDRAWN                | æ¨¡å—äºŒ+ä¸€      | å®¢æˆ·è¯·æ±‚ä¸»åŠ¨æ’¤æ¡ˆï¼Œåœ¨å½•å…¥å¯¹åº”â€œæ’¤å›ç”³è¯·â€ä¸­é—´æ–‡ä»¶åï¼Œå°† Status è®¾ç½®ä¸º WITHDRAWNã€‚                                                                                  |
| ä»»æ„å¤„ç†ä¸­çŠ¶æ€             | ä¸»åŠ¨æ”¾å¼ƒï¼ˆå®¢æˆ·æŒ‡ç¤º + å¯¹åº”æ–‡ä¹¦ï¼‰                           | ABANDONED                | æ¨¡å—äºŒ+ä¸€      | ç±»ä¼¼ WITHDRAWNï¼Œä½†è¯­ä¹‰æ˜¯æ”¾å¼ƒæƒåˆ©/æ”¾å¼ƒç­”å¤ã€‚                                                                                                        |
| ä»»æ„å¤„ç†ä¸­çŠ¶æ€             | ä¸­æ­¢/æ¢å¤                                       | SUSPENDED / SUB\_EXAM ç­‰  | æ¨¡å—äºŒ+ä¸€      | ç‰¹å®šä¸­é—´æ–‡ä»¶å¯ä½¿æ¡ˆå·è¿›å…¥ SUSPENDEDï¼ˆä¸­æ­¢ï¼‰ï¼ŒæŸäº›æ¢å¤æ–‡ä¹¦åˆ™ä» SUSPENDED è¿”å›åŸçŠ¶æ€ï¼ˆå¦‚ SUB\_EXAMï¼‰ã€‚                                                                  |

> æ³¨ï¼šä¸Šè¡¨ä»…åˆ—å‡ºåœ¨ E2E åœºæ™¯ä¸­æ˜ç¡®å‡ºç°çš„çŠ¶æ€è½¬æ¢ï¼›å®é™…å®æ–½æ—¶ï¼Œå¯æ ¹æ®å„å±€å…·ä½“æµç¨‹å¢åŠ æ›´å¤šè¿‡æ¸¡çŠ¶æ€ï¼ˆåˆå®¡/å…¬å¼€/å¤å®¡/å†å®¡ç­‰ï¼‰ï¼Œä½†ä¸ä¼šå½±å“ä¸Šé¢è¿™æ¡ä¸»å¹²é€»è¾‘ã€‚

***

## 20.2 PCT\_INTLï¼ˆPCT å›½é™…æ¡ˆï¼‰çš„çŠ¶æ€è¿ç§»

> CaseType=PCT\_INTL ä¸»è¦ç”¨äºè®°å½•å›½é™…é˜¶æ®µä¿¡æ¯åŠå›½å®¶é˜¶æ®µè®¡åˆ’ï¼ŒçŠ¶æ€æšä¸¾ç›¸å¯¹è‡ªç”±ã€‚

### 20.2.1 å¸¸è§çŠ¶æ€ï¼ˆç¤ºä¾‹ï¼‰

*   PCT\_INIT â€“ PCT å›½é™…æ¡ˆå·²ç«‹æ¡ˆï¼Œå°šæœªå—ç†
*   PCT\_RO\_ACCEPTED â€“ å—ç†é€šçŸ¥å·²æ”¶åˆ°
*   PCT\_ISR\_ISSUED â€“ æ£€ç´¢æŠ¥å‘Šå·²å‡º
*   PCT\_WO\_ISSUED â€“ ä¹¦é¢æ„è§å·²å‡º
*   PCT\_IPER\_ISSUED â€“ å›½é™…åˆå®¡æŠ¥å‘Šå·²å‡º
*   PCT\_PLAN â€“ å·²å»ºç«‹å›½å®¶é˜¶æ®µè®¡åˆ’
*   PCT\_PLAN\_ENTERED â€“ å®¢æˆ·å·²å°±éƒ¨åˆ†å›½å®¶ç»™å‡º ENTER/ABANDON æŒ‡ç¤º
*   PCT\_PLAN\_CASE\_CREATED â€“ å·²ä¸º ENTER çš„å›½å®¶åˆ›å»ºå¯¹åº” PCT\_NATIONAL å­æ¡ˆ
*   CLOSED â€“ PCT å›½é™…é˜¶æ®µç»“æŸï¼ˆæ‰€æœ‰å›½å®¶é˜¶æ®µå·¥ä½œå·²å®Œæˆï¼‰

### 20.2.2 è¿ç§»è¡¨ â€“ PCT\_INTL

| From                     | Event                        | To                       | åœºæ™¯/æ¨¡å—                  | è¯´æ˜                                                                                                       |
| ------------------------ | ---------------------------- | ------------------------ | ---------------------- | -------------------------------------------------------------------------------------------------------- |
| ï¼ˆæ— ï¼‰                      | æ–°å»º PCT å›½é™…æ¡ˆ                   | PCT\_INIT                | C / æ¨¡å—ä¸€                | å»ºæ¡ˆæ—¶åˆå§‹åŒ–ä¸º PCT\_INITã€‚                                                                                       |
| PCT\_INIT                | å½•å…¥ PCT å—ç†é€šçŸ¥ï¼ˆPCT\_RO\_NOTICEï¼‰ | PCT\_RO\_ACCEPTED        | C / æ¨¡å—äºŒ+ä¸€              | æ¨¡æ¿ StatusEffect æˆ–ä¿å­˜åæ›´æ–°çŠ¶æ€ï¼Œè¡¨ç¤ºå›½é™…å—ç†å®Œæˆã€‚                                                                       |
| PCT\_RO\_ACCEPTED        | å½•å…¥ ISRï¼ˆPCT\_ISR\_NOTICEï¼‰     | PCT\_ISR\_ISSUED         | C                      | æ£€ç´¢æŠ¥å‘Šå‘å¸ƒåæ›´æ–°çŠ¶æ€ã€‚                                                                                             |
| PCT\_ISR\_ISSUED         | å½•å…¥ WO/ISAï¼ˆPCT\_WO\_NOTICEï¼‰   | PCT\_WO\_ISSUED          | C                      | ä¹¦é¢æ„è§å‘å¸ƒã€‚                                                                                                  |
| PCT\_WO\_ISSUED          | å½•å…¥ IPERï¼ˆPCT\_IPER\_NOTICEï¼‰   | PCT\_IPER\_ISSUED        | C                      | å›½é™…åˆå®¡æŠ¥å‘Šå‘å¸ƒã€‚                                                                                                |
| PCT\_\*                  | åˆå§‹åŒ–å›½å®¶é˜¶æ®µè®¡åˆ’                    | PCT\_PLAN                | C / T\_PCTNationalPlan | åœ¨â€œå›½å®¶é˜¶æ®µè®¡åˆ’â€ä¸­åˆ›å»ºå¤šè¡Œ Plan åï¼Œå¯å°†çŠ¶æ€æ”¹ä¸º PCT\_PLANã€‚                                                                  |
| PCT\_PLAN                | å®¢æˆ·å¼€å§‹å°±éƒ¨åˆ†å›½å®¶ç»™å‡º ENTER/ABANDON æŒ‡ç¤º | PCT\_PLAN\_ENTERED       | C                      | é€šè¿‡æ›´æ–° T\_PCTNationalPlan.ClientInstructionï¼Œæ ‡è®°æœ‰åˆæ­¥å†³å®šçš„å›½å®¶ã€‚                                                    |
| PCT\_PLAN\_ENTERED       | ä»è®¡åˆ’åˆ›å»º PCT\_NATIONAL å­æ¡ˆå·      | PCT\_PLAN\_CASE\_CREATED | C                      | å¯¹ DECIDED\_ENTER çš„å›½å®¶åˆ›å»º PCT\_NATIONAL Caseï¼Œå¹¶å°† Plan.Status=CASE\_CREATEDï¼Œæ¯æ¡ˆçŠ¶æ€å¯æ”¹ä¸º PCT\_PLAN\_CASE\_CREATEDã€‚ |
| PCT\_PLAN\_CASE\_CREATED | æ‰€æœ‰å›½å®¶é˜¶æ®µæ¡ˆå¤„ç†å®Œæˆã€æ— éœ€å†è·Ÿè¸ªå›½é™…æ¡ˆ         | CLOSED                   | C                      | å¯é€‰ç»ˆæ€ï¼Œè§†å®è·µæ˜¯å¦éœ€è¦å•ç‹¬è¡¨ç¤ºâ€œå›½é™…é˜¶æ®µæµç¨‹å®Œç»“â€ã€‚                                                                              |

***

## 20.3 INVALIDATIONï¼ˆæ— æ•ˆæ¡ˆï¼‰çŠ¶æ€è¿ç§»

> CaseType=INVALIDATION è¡¨ç¤ºâ€œæ— æ•ˆå®£å‘Šæ¡ˆä»¶â€ã€‚æˆ‘ä»¬åœ¨åœºæ™¯ E ä¸­æ¶‰åŠ INIT/FILED/ACCEPTED/IN\_HEARING/WON/LOST/PARTIALã€‚

### 20.3.1 å¸¸è§çŠ¶æ€

*   INVALID\_INIT â€“ å·²ç«‹æ¡ˆä½†æœªé€’äº¤æ— æ•ˆè¯·æ±‚
*   INVALID\_FILED â€“ å·²æèµ·æ— æ•ˆè¯·æ±‚ï¼ˆè¯·æ±‚ä¹¦å·²é€’äº¤ï¼‰
*   INVALID\_ACCEPTED â€“ æ— æ•ˆè¯·æ±‚å·²è¢«å—ç†
*   INVALID\_IN\_HEARING â€“ æ— æ•ˆå®¡ç†ä¸­ï¼ˆåŒ…æ‹¬ä¸¾è¯/å¼€åº­ç­‰é˜¶æ®µï¼‰
*   INVALID\_WON â€“ æœ¬æ‰€ä»£è¡¨ä¸€æ–¹â€œèƒœè¯‰â€ï¼ˆèµ¢ï¼‰
*   INVALID\_LOST â€“ æœ¬æ‰€ä»£è¡¨ä¸€æ–¹â€œè´¥è¯‰â€ï¼ˆè¾“ï¼‰
*   INVALID\_PARTIAL â€“ éƒ¨åˆ†èƒœè¯‰æˆ–éƒ¨åˆ†æ— æ•ˆ

### 20.3.2 è¿ç§»è¡¨ â€“ INVALIDATION

| From                 | Event                                           | To                                              | åœºæ™¯/æ¨¡å—   | è¯´æ˜                                                                                                                            |
| -------------------- | ----------------------------------------------- | ----------------------------------------------- | ------- | ----------------------------------------------------------------------------------------------------------------------------- |
| ï¼ˆæ— ï¼‰                  | æ–°å»ºæ— æ•ˆæ¡ˆå·                                          | INVALID\_INIT                                   | E / æ¨¡å—ä¸€ | åˆ›å»º CaseType=INVALIDATION æ¡ˆå·ï¼ŒOriginalCaseID æŒ‡å‘åŸæ¡ˆã€‚                                                                              |
| INVALID\_INIT        | å½•å…¥æ— æ•ˆè¯·æ±‚ä¹¦ï¼ˆINVALID\_REQUEST å»æ–‡ï¼‰                    | INVALID\_FILED                                  | E / æ¨¡å—äºŒ | TemplateCode=INVALID\_REQUEST çš„ StatusEffect å¯è®¾ä¸º INVALID\_FILEDï¼Œè¡¨ç¤ºå·²æäº¤æ— æ•ˆè¯·æ±‚ã€‚                                                    |
| INVALID\_FILED       | å½•å…¥å—ç†é€šçŸ¥ï¼ˆINVALID\_ACCEPT\_NOTICEï¼‰                 | INVALID\_ACCEPTED                               | E       | æ— æ•ˆå—ç†åï¼Œå°†çŠ¶æ€æ”¹ä¸º INVALID\_ACCEPTEDã€‚                                                                                                |
| INVALID\_ACCEPTED    | å½•å…¥ç­”è¾©/ä¸¾è¯/å¼€åº­é€šçŸ¥ï¼Œè¿›å…¥å®è´¨å®¡ç†é˜¶æ®µ                           | INVALID\_IN\_HEARING                            | E       | å¯åœ¨å½•å…¥ç­”è¾©é€šçŸ¥/ä¸¾è¯é€šçŸ¥/å¼€åº­é€šçŸ¥åï¼Œå°†çŠ¶æ€æ›´æ–°ä¸ºâ€œå®¡ç†ä¸­â€ã€‚                                                                                              |
| INVALID\_IN\_HEARING | å½•å…¥æ— æ•ˆå®£å‘Šå†³å®šä¹¦ï¼ˆINVALID\_DECISIONï¼ŒDecisionResult è§†æƒ…å†µï¼‰ | INVALID\_WON / INVALID\_LOST / INVALID\_PARTIAL | E       | ä¾æ® DecisionResultï¼ˆä»¥åŠæˆ‘æ–¹è§’è‰² InvalidRoleï¼‰å†³å®šæ— æ•ˆæ¡ˆæœ€ç»ˆçŠ¶æ€ï¼›åŸæ¡ˆçŠ¶æ€æ ¹æ® DecisionResult æ›´æ–°ä¸º GRANTED/INVALIDATED/INVALIDATED\_PARTIAL/TERMINATEDã€‚ |

***

## 20.4 LITIGATIONï¼ˆè¯‰è®¼æ¡ˆï¼‰çŠ¶æ€è¿ç§»

> CaseType=LITIGATION è¡¨ç¤ºâ€œä¾µæƒ/è¡Œæ”¿è¯‰è®¼æ¡ˆä»¶â€ã€‚æˆ‘ä»¬åœ¨åœºæ™¯ E ä¸­ç®€å•æåˆ° LIT\_INIT/LIT\_ACCEPTED/LIT\_HEARING/LIT\_WON/LIT\_LOST/LIT\_SETTLED ç­‰ã€‚

### 20.4.1 å¸¸è§çŠ¶æ€

*   LIT\_INIT â€“ è¯‰è®¼æ¡ˆå·²ç«‹æ¡ˆï¼Œå°šæœªå‘æ³•é™¢/æœºå…³æäº¤
*   LIT\_FILED â€“ å·²é€’äº¤è¯‰çŠ¶/èµ·è¯‰ç”³è¯·
*   LIT\_ACCEPTED â€“ è¯‰è®¼è¢«å—ç†
*   LIT\_HEARING â€“ å®¡ç†ä¸­ï¼ˆåŒ…æ‹¬è¯æ®äº¤æ¢ã€å¼€åº­ï¼‰
*   LIT\_WON â€“ æˆ‘æ–¹èƒœè¯‰
*   LIT\_LOST â€“ æˆ‘æ–¹è´¥è¯‰
*   LIT\_SETTLED â€“ å’Œè§£æˆ–æ’¤è¯‰ç»“æ¡ˆ

### 20.4.2 è¿ç§»è¡¨ â€“ LITIGATION

| From          | Event                           | To                                  | åœºæ™¯/æ¨¡å—   | è¯´æ˜                                                                                         |
| ------------- | ------------------------------- | ----------------------------------- | ------- | ------------------------------------------------------------------------------------------ |
| ï¼ˆæ— ï¼‰           | æ–°å»ºè¯‰è®¼æ¡ˆ                           | LIT\_INIT                           | E / æ¨¡å—ä¸€ | CaseType=LITIGATIONï¼ŒOriginalCaseID æŒ‡å‘åŸæ¡ˆï¼›å¡«å…¥ CourtName/Plaintiff/Defendant/LitigationRole ç­‰ã€‚ |
| LIT\_INIT     | å½•å…¥è¯‰çŠ¶ï¼ˆLITIGATION\_COMPLAINTï¼‰     | LIT\_FILED                          | E / æ¨¡å—äºŒ | æèµ·è¯‰è®¼åï¼Œå°†çŠ¶æ€è®¾ä¸º LIT\_FILEDã€‚                                                                    |
| LIT\_FILED    | å½•å…¥å—ç†é€šçŸ¥ï¼ˆæ³•é™¢ç«‹æ¡ˆé€šçŸ¥ï¼‰                  | LIT\_ACCEPTED                       | E       | è¯‰è®¼è¢«å—ç†ï¼Œæ¡ˆä»¶è¿›å…¥å®¡ç†ç¨‹åºã€‚                                                                            |
| LIT\_ACCEPTED | å½•å…¥å¼€åº­é€šçŸ¥ / ä¸¾è¯é€šçŸ¥ / è¯æ®äº¤æ¢é€šçŸ¥          | LIT\_HEARING                        | E       | å®è´¨å®¡ç†ä¸­ï¼Œå¯åœ¨å½•å…¥å„ç±»é€šçŸ¥åå°†çŠ¶æ€è®¾ä¸º LIT\_HEARINGã€‚                                                         |
| LIT\_HEARING  | å½•å…¥åˆ¤å†³ä¹¦/è£å®šä¹¦ï¼ˆLITIGATION\_JUDGMENTï¼‰ | LIT\_WON / LIT\_LOST / LIT\_SETTLED | E       | æ ¹æ®åˆ¤å†³ç»“æœæ›´æ–°è¯‰è®¼æ¡ˆä»¶çŠ¶æ€ï¼›æ˜¯å¦å½±å“åŸæ¡ˆ Status å–å†³äºåˆ¤å†³æ€§è´¨ã€‚                                                      |

***

## 20.5 CONSULTING / SEARCHï¼ˆé¡¾é—® & æ£€ç´¢é¡¹ç›®ï¼‰çŠ¶æ€è¿ç§»

> CaseType=CONSULTING/SEARCHï¼Œç”¨äºéä¸“åˆ©æµç¨‹å‹é¡¹ç›®ï¼ˆåœºæ™¯ Hï¼‰ã€‚

### 20.5.1 å¸¸è§çŠ¶æ€

*   NOT\_STARTED â€“ é¡¹ç›®å·²ç«‹æ¡ˆï¼Œä½†å°šæœªå¯åŠ¨å·¥ä½œ
*   IN\_PROGRESS â€“ é¡¹ç›®è¿›è¡Œä¸­
*   COMPLETED â€“ é¡¹ç›®å·²å®Œæˆï¼ˆäº¤ä»˜ç‰©å·²æäº¤ï¼‰
*   CLOSED â€“ é¡¹ç›®å®Œå…¨å…³é—­ï¼ˆè´¹ç”¨å’Œææˆå‡ç»“æ¸…ï¼‰

### 20.5.2 è¿ç§»è¡¨ â€“ CONSULTING/SEARCH

| From         | Event                             | To                          | åœºæ™¯/æ¨¡å—       | è¯´æ˜                                                                                         |
| ------------ | --------------------------------- | --------------------------- | ----------- | ------------------------------------------------------------------------------------------ |
| ï¼ˆæ— ï¼‰          | æ–°å»ºé¡¹ç›®æ¡ˆå·                            | NOT\_STARTED æˆ– IN\_PROGRESS | H / æ¨¡å—ä¸€     | å»ºç«‹ CaseType=CONSULTING/SEARCH æ¡ˆå·ï¼Œå½•å…¥é¡¹ç›®èŒƒå›´/è´Ÿè´£äºº/é¢„ä¼°å·¥æ—¶ç­‰ï¼›å¯è‡ªå®šä¹‰æ˜¯å¦åˆå§‹ä¸º NOT\_STARTED æˆ–ç›´æ¥ IN\_PROGRESSã€‚ |
| NOT\_STARTED | é¡¹ç›®å¯åŠ¨ï¼ˆå®é™…å¼€å§‹å·¥ä½œï¼Œå¦‚åˆ›å»ºå†…éƒ¨ä»»åŠ¡/å¼€ Kickoff ä¼šè®®ï¼‰ | IN\_PROGRESS                | H / æ¨¡å—ä¸‰     | å»ºç«‹å†…éƒ¨ä»»åŠ¡ T\_Task å¹¶å¼€å§‹æ‰§è¡Œï¼Œå¯å°† Status=IN\_PROGRESSã€‚                                               |
| IN\_PROGRESS | é¡¹ç›®å®Œæˆï¼ˆæŠ¥å‘Š/äº¤ä»˜ç‰©å®Œæˆå¹¶æäº¤ï¼‰                 | COMPLETED                   | H / æ¨¡å—ä¸ƒ     | å½“ internal Task å…¨éƒ¨æ ¸é”€æˆ–é¡¹ç›®æ ‡è®°å®Œæˆæ—¶ï¼Œå¯æ›´æ–° T\_Case.Status=COMPLETEDã€‚                                 |
| COMPLETED    | è´¹ç”¨/è´¦å•/æ”¶æ¬¾/ææˆå…¨éƒ¨ç»“æ¸… & æ¡ˆä»¶å½’æ¡£            | CLOSED                      | H / æ¨¡å—å››/äº”/å…­ | åœ¨ç¡®è®¤æ‰€æœ‰è´¦å•å·²ç»“æ¸…ã€Commission è®°å½•å·²ç»“ç®—åï¼Œå¯å°†é¡¹ç›®çŠ¶æ€è®¾ä¸º CLOSEDï¼Œè¡¨ç¤ºé¡¹ç›®åœ¨ä¸šåŠ¡å’Œè´¢åŠ¡ä¸Šå®Œå…¨å®Œç»“ã€‚                              |

***

âœ… ç°åœ¨ä½ å·²ç»æœ‰äº†ï¼š

1.  **ä¸€æ•´æ®µå…¨ç”Ÿå‘½å‘¨æœŸæ–‡å­—æ€»è§ˆ**ï¼ˆ18 ç« ï¼‰
2.  ä¸€æ•´ä»½ **Mermaid æ³³é“å›¾**ï¼ˆ19 ç« ï¼‰
3.  ä¸€ä¸ª **çŠ¶æ€è¿ç§»æ€»è¡¨**ï¼ŒæŒ‰ CaseType åˆ†å—ï¼Œå†™å‡ºäº†æˆ‘ä»¬åœ¨æ‰€æœ‰æ¨¡å—å’Œ E2E åœºæ™¯ä¸­å‡ºç°è¿‡çš„çŠ¶æ€è½¬æ¢ï¼ˆ20 ç« ï¼‰

æ•´ä¸ª v2.0 æ–‡æ¡£çš„ç»“æ„å’Œå†…å®¹åˆ°è¿™é‡Œå·²ç»æ˜¯â€œäº‹æ— å·¨ç»†â€çš„å®Œæ•´ç‰ˆäº†ã€‚

**done**

***

Powered by [ChatGPT Exporter](https://www.chatgptexporter.com)
